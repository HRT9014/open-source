IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationpageserreursco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        require('curseur.css');
    },
    fn: 'declarationcurseurpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationgeogebra.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        if (typeof Object.assign !== 'function') {
            (function() {
                Object.assign = function(target) {
                    'use strict';
                    if (target === undefined || target === null) {
                        throw new TypeError('Cannot convert undefined or null to object');
                    }
                    var output = Object(target);
                    for (var index = 1; index < arguments.length; index++) {
                        var source = arguments[index];
                        if (source !== undefined && source !== null) {
                            for (var nextKey in source) {
                                if (source.hasOwnProperty(nextKey)) {
                                    output[nextKey] = source[nextKey];
                                }
                            }
                        }
                    }
                    return output;
                }
                ;
            }
            )();
        }
    },
    fn: 'object.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        String.prototype.ucfirst = function() {
            return this.replace(this.charAt(0), this.charAt(0).toUpperCase());
        }
        ;
        if (!String.prototype.trim) {
            String.prototype.trim = function() {
                return this.replace(/^\s+|\s+$/g, '');
            }
            ;
        }
        if (!String.prototype.trimStart) {
            String.prototype.trimStart = function() {
                return this.replace(/^\s+/, '');
            }
            ;
        }
        if (!String.prototype.trimEnd) {
            String.prototype.trimEnd = function() {
                return this.replace(/\s+$/, '');
            }
            ;
        }
        String.prototype.avecQuotes = function() {
            return '&quot;' + this + '&quot;';
        }
        ;
        String.prototype.enleverZero = function() {
            return parseFloat(this.replace(/,/g, '.')).toString();
        }
        ;
        String.prototype.escapeJQ = function() {
            return this.replace(/(:|\.|\[|\]|\/|#)/g, '\\$1');
        }
        ;
        String.prototype.replaceRCToHTML = function(aChaineRemplacement) {
            return !!this ? this.replace(/\r\n|\n|\r|&#32;/g, aChaineRemplacement || '<br>') : '';
        }
        ;
        String.prototype.toAttrValue = function() {
            return this.replace(/"/g, '&quot;');
        }
        ;
        String.prototype.toTitle = function() {
            return this.replace(/\r\n|\n|\r/g, '&#010;').toAttrValue();
        }
        ;
        String.prototype.ajouterEntites = function(aSansQuote) {
            let re = aSansQuote ? /([<>'&])/g : /([<>"'&])/g;
            return this.replace(re, (m) => {
                if (m === '<') {
                    return '&lt;';
                }
                if (m === '>') {
                    return '&gt;';
                }
                if (m === '"') {
                    return '&quot;';
                }
                if (m === '\'') {
                    return '&#039;';
                }
                if (m === '&') {
                    return '&amp;';
                }
                return m;
            }
            );
        }
        ;
        String.prototype.enleverEntites = function() {
            let re = /&(lt|gt|quot|#039|amp);/g;
            return this.replace(re, (m) => {
                if (m === '&lt;') {
                    return '<';
                }
                if (m === '&gt;') {
                    return '>';
                }
                if (m === '&quot;') {
                    return '"';
                }
                if (m === '&#039;') {
                    return '\'';
                }
                if (m === '&amp;') {
                    return '&';
                }
                return m;
            }
            );
        }
        ;
        String.prototype.format = function(aTabElements) {
            if (!Array.isArray(aTabElements)) {
                if (typeof aTabElements !== 'number' && typeof aTabElements !== 'string') {
                    return this;
                }
                aTabElements = [aTabElements];
            }
            const lMapElements = aTabElements.map( (aElement) => {
                if (typeof aElement === 'function') {
                    try {
                        return aElement();
                    } catch (e) {
                        return '';
                    }
                }
                return aElement;
            }
            );
            const lFuncSubst = (aSubst, aCarSuiv) => {
                let lSubst = aSubst;
                if (aCarSuiv === 'd') {
                    lSubst = parseInt(lSubst);
                    if (isNaN(lSubst)) {
                        lSubst = '';
                    }
                }
                return lSubst;
            }
            ;
            let lIndex = 0;
            let lStrResult = '';
            let lCar;
            let lCarSuiv;
            let lIndexSubsSansNumero = 0;
            let lDieseEnCours = false;
            let lStrPourcentEnCours = '';
            let lStrNumeroSubst = '';
            let lNumeroSubst;
            const lRegNumber = new RegExp('[0-9]');
            const lRegExType = new RegExp('(s|d|e|f|g|n|m)');
            while (lIndex < this.length) {
                lCar = this[lIndex];
                lCarSuiv = this[lIndex + 1];
                if (lStrPourcentEnCours) {
                    if (lCarSuiv && lCar === ':' && lCarSuiv.match(lRegExType)) {
                        lNumeroSubst = parseInt(lStrPourcentEnCours);
                        if (lNumeroSubst < lMapElements.length) {
                            lStrResult += lFuncSubst(lMapElements[lNumeroSubst], lCarSuiv);
                        }
                        lIndex += 1;
                        lStrPourcentEnCours = '';
                    } else if (lCarSuiv && lCarSuiv.match(lRegNumber)) {
                        lStrPourcentEnCours += lCarSuiv;
                    } else {
                        lStrResult += '%' + lStrPourcentEnCours + lCar;
                        lStrPourcentEnCours = '';
                    }
                } else if (lDieseEnCours) {
                    lStrNumeroSubst += lCar;
                    if (!lCarSuiv || !lCarSuiv.match(lRegNumber)) {
                        lDieseEnCours = false;
                        lNumeroSubst = parseInt(lStrNumeroSubst) - 1;
                        if (lNumeroSubst < lMapElements.length) {
                            lStrResult += lMapElements[lNumeroSubst];
                        }
                        lStrNumeroSubst = '';
                    }
                } else {
                    switch (lCar) {
                    case '#':
                        if (lCarSuiv.match(lRegNumber)) {
                            lDieseEnCours = true;
                        }
                        break;
                    case '%':
                        if (lCarSuiv === 's' || lCarSuiv === 'd') {
                            lIndex += 1;
                            if (lIndexSubsSansNumero < lMapElements.length) {
                                lStrResult += lFuncSubst(lMapElements[lIndexSubsSansNumero], lCarSuiv);
                            }
                            lIndexSubsSansNumero += 1;
                        } else if (lCarSuiv.match(lRegNumber)) {
                            lStrPourcentEnCours = lCarSuiv;
                            lIndex += 1;
                        } else {
                            lStrResult += lCar;
                        }
                        break;
                    default:
                        lStrResult += lCar;
                    }
                }
                lIndex += 1;
            }
            return lStrResult;
        }
        ;
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(searchString, position) {
                position = position || 0;
                return this.substr(position, searchString.length) === searchString;
            }
            ;
        }
        if (!String.prototype.endsWith) {
            String.prototype.endsWith = function(searchString, position) {
                let subjectString = this.toString();
                if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
                    position = subjectString.length;
                }
                position -= searchString.length;
                let lastIndex = subjectString.indexOf(searchString, position);
                return lastIndex !== -1 && lastIndex === position;
            }
            ;
        }
        if (!String.prototype.includes) {
            String.prototype.includes = function(search, start) {
                if (typeof start !== 'number') {
                    start = 0;
                }
                if (start + search.length > this.length) {
                    return false;
                } else {
                    return this.indexOf(search, start) !== -1;
                }
            }
            ;
        }
    },
    fn: 'string.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        Math.borner = function(aValeur, aMin, aMax) {
            return Math.max(Math.min(aValeur, aMax), aMin);
        }
        ;
        Math.log10 = Math.log10 || function(x) {
            return Math.log(x) * Math.LOG10E;
        }
        ;
        (function() {
            function decimalAdjust(type, value, exp) {
                if (typeof exp === 'undefined' || +exp === 0) {
                    return Math[type](value);
                }
                value = +value;
                exp = +exp;
                if (value === null || isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {
                    return NaN;
                }
                if (value < 0) {
                    return -decimalAdjust(type, -value, exp);
                }
                value = value.toString().split('e');
                value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));
                value = value.toString().split('e');
                return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));
            }
            if (!Math.round10) {
                Math.round10 = function(value, exp) {
                    return decimalAdjust('round', value, exp);
                }
                ;
            }
            if (!Math.floor10) {
                Math.floor10 = function(value, exp) {
                    return decimalAdjust('floor', value, exp);
                }
                ;
            }
            if (!Math.ceil10) {
                Math.ceil10 = function(value, exp) {
                    return decimalAdjust('ceil', value, exp);
                }
                ;
            }
        }
        )();
    },
    fn: 'math.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("es6-promise.auto.min.js");
        require("es6-promise.auto.js");
        if (!Promise.prototype['finally']) {
            Promise.prototype['finally'] = function finallyPolyfill(callback) {
                let {constructor} = this;
                return this.then( (value) => {
                    return constructor.resolve(callback()).then( () => {
                        return value;
                    }
                    );
                }
                , (reason) => {
                    return constructor.resolve(callback()).then( () => {
                        throw reason;
                    }
                    );
                }
                );
            }
            ;
        }
    },
    fn: 'promise.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        (function(n, l) {
            "object" === typeof exports && "undefined" !== typeof module ? module.exports = l() : "function" === typeof define && define.amd ? define(l) : n.ResizeObserver = l()
        }
        )(this, function() {
            function n(b) {
                for (var a = [], c = arguments.length - 1; 0 < c--; )
                    a[c] = arguments[c + 1];
                return a.reduce(function(a, c) {
                    return a + (parseFloat(b["border-" + c + "-width"]) || 0)
                }, 0)
            }
            var l = function() {
                function b(b, c) {
                    var a = -1;
                    b.some(function(b, e) {
                        return b[0] === c ? (a = e,
                        !0) : !1
                    });
                    return a
                }
                return "undefined" !== typeof Map ? Map : function() {
                    function a() {
                        this.__entries__ = []
                    }
                    var c = {
                        size: {
                            configurable: !0
                        }
                    };
                    c.size.get = function() {
                        return this.__entries__.length
                    }
                    ;
                    a.prototype.get = function(a) {
                        a = b(this.__entries__, a);
                        return (a = this.__entries__[a]) && a[1]
                    }
                    ;
                    a.prototype.set = function(a, c) {
                        var e = b(this.__entries__, a);
                        ~e ? this.__entries__[e][1] = c : this.__entries__.push([a, c])
                    }
                    ;
                    a.prototype["delete"] = function(a) {
                        var c = this.__entries__;
                        a = b(c, a);
                        ~a && c.splice(a, 1)
                    }
                    ;
                    a.prototype.has = function(a) {
                        return !!~b(this.__entries__, a)
                    }
                    ;
                    a.prototype.clear = function() {
                        this.__entries__.splice(0)
                    }
                    ;
                    a.prototype.forEach = function(a, b) {
                        void 0 === b && (b = null);
                        for (var c = 0, e = this.__entries__; c < e.length; c += 1) {
                            var g = e[c];
                            a.call(b, g[1], g[0])
                        }
                    }
                    ;
                    Object.defineProperties(a.prototype, c);
                    return a
                }()
            }()
              , q = "undefined" !== typeof window && "undefined" !== typeof document && window.document === document
              , p = "undefined" !== typeof global && global.Math === Math ? global : "undefined" !== typeof self && self.Math === Math ? self : "undefined" !== typeof window && Math === Math ? window : Function("return this")()
              , x = function() {
                return "function" === typeof requestAnimationFrame ? requestAnimationFrame.bind(p) : function(b) {
                    return setTimeout(function() {
                        return b(Date.now())
                    }, 1E3 / 60)
                }
            }()
              , y = function(b, a) {
                function c() {
                    f && (f = !1,
                    b());
                    h && g()
                }
                function e() {
                    x(c)
                }
                function g() {
                    var b = Date.now();
                    if (f) {
                        if (2 > b - d)
                            return;
                        h = !0
                    } else
                        f = !0,
                        h = !1,
                        setTimeout(e, a);
                    d = b
                }
                var f = !1
                  , h = !1
                  , d = 0;
                return g
            }
              , z = "top right bottom left width height size weight".split(" ")
              , A = "undefined" !== typeof MutationObserver
              , d = function() {
                this.mutationEventsAdded_ = this.connected_ = !1;
                this.mutationsObserver_ = null;
                this.observers_ = [];
                this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);
                this.refresh = y(this.refresh.bind(this), 20)
            };
            d.prototype.addObserver = function(b) {
                ~this.observers_.indexOf(b) || this.observers_.push(b);
                this.connected_ || this.connect_()
            }
            ;
            d.prototype.removeObserver = function(b) {
                var a = this.observers_;
                b = a.indexOf(b);
                ~b && a.splice(b, 1);
                !a.length && this.connected_ && this.disconnect_()
            }
            ;
            d.prototype.refresh = function() {
                this.updateObservers_() && this.refresh()
            }
            ;
            d.prototype.updateObservers_ = function() {
                var b = this.observers_.filter(function(a) {
                    return a.gatherActive(),
                    a.hasActive()
                });
                b.forEach(function(a) {
                    return a.broadcastActive()
                });
                return 0 < b.length
            }
            ;
            d.prototype.connect_ = function() {
                q && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_),
                window.addEventListener("resize", this.refresh),
                A ? (this.mutationsObserver_ = new MutationObserver(this.refresh),
                this.mutationsObserver_.observe(document, {
                    attributes: !0,
                    childList: !0,
                    characterData: !0,
                    subtree: !0
                })) : (document.addEventListener("DOMSubtreeModified", this.refresh),
                this.mutationEventsAdded_ = !0),
                this.connected_ = !0)
            }
            ;
            d.prototype.disconnect_ = function() {
                q && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_),
                window.removeEventListener("resize", this.refresh),
                this.mutationsObserver_ && this.mutationsObserver_.disconnect(),
                this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh),
                this.mutationsObserver_ = null,
                this.connected_ = this.mutationEventsAdded_ = !1)
            }
            ;
            d.prototype.onTransitionEnd_ = function(b) {
                var a = b.propertyName;
                void 0 === a && (a = "");
                z.some(function(b) {
                    return !!~a.indexOf(b)
                }) && this.refresh()
            }
            ;
            d.getInstance = function() {
                this.instance_ || (this.instance_ = new d);
                return this.instance_
            }
            ;
            d.instance_ = null;
            var u = function(b, a) {
                for (var c = 0, e = Object.keys(a); c < e.length; c += 1) {
                    var g = e[c];
                    Object.defineProperty(b, g, {
                        value: a[g],
                        enumerable: !1,
                        writable: !1,
                        configurable: !0
                    })
                }
                return b
            }
              , m = function(b) {
                return b && b.ownerDocument && b.ownerDocument.defaultView || p
            }
              , v = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            }
              , B = function() {
                return "undefined" !== typeof SVGGraphicsElement ? function(b) {
                    return b instanceof m(b).SVGGraphicsElement
                }
                : function(b) {
                    return b instanceof m(b).SVGElement && "function" === typeof b.getBBox
                }
            }()
              , r = function(b) {
                this.broadcastHeight = this.broadcastWidth = 0;
                this.contentRect_ = {
                    x: 0,
                    y: 0,
                    width: 0,
                    height: 0
                };
                this.target = b
            };
            r.prototype.isActive = function() {
                var b = this.target;
                if (q)
                    if (B(b)) {
                        var a = b.getBBox();
                        a = {
                            x: 0,
                            y: 0,
                            width: a.width,
                            height: a.height
                        }
                    } else {
                        var c = b.clientWidth
                          , e = b.clientHeight;
                        if (c || e) {
                            var g = m(b).getComputedStyle(b);
                            a = {};
                            for (var f = 0, h = ["top", "right", "bottom", "left"]; f < h.length; f += 1) {
                                var d = h[f];
                                a[d] = parseFloat(g["padding-" + d]) || 0
                            }
                            var k = a.left + a.right;
                            d = a.top + a.bottom;
                            f = parseFloat(g.width) || 0;
                            h = parseFloat(g.height) || 0;
                            "border-box" === g.boxSizing && (Math.round(f + k) !== c && (f -= n(g, "left", "right") + k),
                            Math.round(h + d) !== e && (h -= n(g, "top", "bottom") + d));
                            b !== m(b).document.documentElement && (b = Math.round(f + k) - c,
                            e = Math.round(h + d) - e,
                            1 !== Math.abs(b) && (f -= b),
                            1 !== Math.abs(e) && (h -= e));
                            a = {
                                x: a.left,
                                y: a.top,
                                width: f,
                                height: h
                            }
                        } else
                            a = v
                    }
                else
                    a = v;
                this.contentRect_ = a;
                return a.width !== this.broadcastWidth || a.height !== this.broadcastHeight
            }
            ;
            r.prototype.broadcastRect = function() {
                var b = this.contentRect_;
                this.broadcastWidth = b.width;
                this.broadcastHeight = b.height;
                return b
            }
            ;
            var C = function(b, a) {
                var c = a.x
                  , e = a.y
                  , d = a.width
                  , f = a.height
                  , h = Object.create(("undefined" !== typeof DOMRectReadOnly ? DOMRectReadOnly : Object).prototype);
                u(h, {
                    x: c,
                    y: e,
                    width: d,
                    height: f,
                    top: e,
                    right: c + d,
                    bottom: f + e,
                    left: c
                });
                u(this, {
                    target: b,
                    contentRect: h
                })
            }
              , k = function(b, a, c) {
                this.activeObservations_ = [];
                this.observations_ = new l;
                if ("function" !== typeof b)
                    throw new TypeError("The callback provided as parameter 1 is not a function.");
                this.callback_ = b;
                this.controller_ = a;
                this.callbackCtx_ = c
            };
            k.prototype.observe = function(b) {
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                if ("undefined" !== typeof Element && Element instanceof Object) {
                    if (!(b instanceof m(b).Element))
                        throw new TypeError('parameter 1 is not of type "Element".');
                    var a = this.observations_;
                    a.has(b) || (a.set(b, new r(b)),
                    this.controller_.addObserver(this),
                    this.controller_.refresh())
                }
            }
            ;
            k.prototype.unobserve = function(b) {
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                if ("undefined" !== typeof Element && Element instanceof Object) {
                    if (!(b instanceof m(b).Element))
                        throw new TypeError('parameter 1 is not of type "Element".');
                    var a = this.observations_;
                    a.has(b) && (a["delete"](b),
                    a.size || this.controller_.removeObserver(this))
                }
            }
            ;
            k.prototype.disconnect = function() {
                this.clearActive();
                this.observations_.clear();
                this.controller_.removeObserver(this)
            }
            ;
            k.prototype.gatherActive = function() {
                var b = this;
                this.clearActive();
                this.observations_.forEach(function(a) {
                    a.isActive() && b.activeObservations_.push(a)
                })
            }
            ;
            k.prototype.broadcastActive = function() {
                if (this.hasActive()) {
                    var b = this.callbackCtx_
                      , a = this.activeObservations_.map(function(a) {
                        return new C(a.target,a.broadcastRect())
                    });
                    this.callback_.call(b, a, b);
                    this.clearActive()
                }
            }
            ;
            k.prototype.clearActive = function() {
                this.activeObservations_.splice(0)
            }
            ;
            k.prototype.hasActive = function() {
                return 0 < this.activeObservations_.length
            }
            ;
            var w = "undefined" !== typeof WeakMap ? new WeakMap : new l
              , t = function(b) {
                if (!(this instanceof t))
                    throw new TypeError("Cannot call a class as a function.");
                if (!arguments.length)
                    throw new TypeError("1 argument required, but only 0 present.");
                var a = d.getInstance();
                a = new k(b,a,this);
                w.set(this, a)
            };
            ["observe", "unobserve", "disconnect"].forEach(function(b) {
                t.prototype[b] = function() {
                    var a;
                    return (a = w.get(this))[b].apply(a, arguments)
                }
            });
            var D = "undefined" !== typeof p.ResizeObserver ? p.ResizeObserver : t;
            return D
        });
    },
    fn: 'resizeobserver_polyfill.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        (function() {
            function l(a) {
                try {
                    return a.defaultView && a.defaultView.frameElement || null
                } catch (b) {
                    return null
                }
            }
            function v(a) {
                this.time = a.time;
                this.target = a.target;
                this.rootBounds = u(a.rootBounds);
                this.boundingClientRect = u(a.boundingClientRect);
                this.intersectionRect = u(a.intersectionRect || m());
                this.isIntersecting = !!a.intersectionRect;
                a = this.boundingClientRect;
                a = a.width * a.height;
                var b = this.intersectionRect;
                b = b.width * b.height;
                this.intersectionRatio = a ? Number((b / a).toFixed(4)) : this.isIntersecting ? 1 : 0
            }
            function g(a, b) {
                var c = b || {};
                if ("function" != typeof a)
                    throw Error("callback must be a function");
                if (c.root && 1 != c.root.nodeType && 9 != c.root.nodeType)
                    throw Error("root must be a Document or Element");
                this.l = A(this.l.bind(this), this.F);
                this.H = a;
                this.g = [];
                this.h = [];
                this.v = this.M(c.rootMargin);
                this.thresholds = this.L(c.threshold);
                this.root = c.root || null;
                this.rootMargin = this.v.map(function(d) {
                    return d.value + d.D
                }).join(" ");
                this.i = [];
                this.j = []
            }
            function A(a, b) {
                var c = null;
                return function() {
                    c || (c = setTimeout(function() {
                        a();
                        c = null
                    }, b))
                }
            }
            function w(a, b, c, d) {
                "function" == typeof a.addEventListener ? a.addEventListener(b, c, d || !1) : "function" == typeof a.attachEvent && a.attachEvent("on" + b, c)
            }
            function x(a, b, c, d) {
                "function" == typeof a.removeEventListener ? a.removeEventListener(b, c, d || !1) : "function" == typeof a.R && a.R("on" + b, c)
            }
            function n(a) {
                try {
                    var b = a.getBoundingClientRect()
                } catch (c) {}
                if (!b)
                    return m();
                b.width && b.height || (b = {
                    top: b.top,
                    right: b.right,
                    bottom: b.bottom,
                    left: b.left,
                    width: b.right - b.left,
                    height: b.bottom - b.top
                });
                return b
            }
            function m() {
                return {
                    top: 0,
                    bottom: 0,
                    left: 0,
                    right: 0,
                    width: 0,
                    height: 0
                }
            }
            function u(a) {
                return !a || "x"in a ? a : {
                    top: a.top,
                    y: a.top,
                    bottom: a.bottom,
                    left: a.left,
                    x: a.left,
                    right: a.right,
                    width: a.width,
                    height: a.height
                }
            }
            function y(a, b) {
                for (var c = b; c; ) {
                    if (c == a)
                        return !0;
                    c = p(c)
                }
                return !1
            }
            function p(a) {
                var b = a.parentNode;
                if (9 == a.nodeType && a != k)
                    return l(a);
                b && b.assignedSlot && (b = b.assignedSlot.parentNode);
                return b && 11 == b.nodeType && b.host ? b.host : b
            }
            function z(a) {
                return a && 9 === a.nodeType
            }
            if ("object" === typeof window)
                if ("IntersectionObserver"in window && "IntersectionObserverEntry"in window && "intersectionRatio"in window.IntersectionObserverEntry.prototype)
                    "isIntersecting"in window.IntersectionObserverEntry.prototype || Object.defineProperty(window.IntersectionObserverEntry.prototype, "isIntersecting", {
                        get: function() {
                            return 0 < this.intersectionRatio
                        }
                    });
                else {
                    var k = function(a) {
                        for (var b = l(a); b; )
                            a = b.ownerDocument,
                            b = l(a);
                        return a
                    }(window.document)
                      , q = [];
                    g.prototype.F = 100;
                    g.prototype.m = null;
                    g.prototype.G = !0;
                    g.prototype.observe = function(a) {
                        if (!this.g.some(function(b) {
                            return b.element == a
                        })) {
                            if (!a || 1 != a.nodeType)
                                throw Error("target must be an Element");
                            this.N();
                            this.g.push({
                                element: a,
                                C: null
                            });
                            this.s(a.ownerDocument);
                            this.l()
                        }
                    }
                    ;
                    g.prototype.unobserve = function(a) {
                        this.g = this.g.filter(function(b) {
                            return b.element != a
                        });
                        this.A(a.ownerDocument);
                        0 == this.g.length && this.B()
                    }
                    ;
                    g.prototype.disconnect = function() {
                        this.g = [];
                        this.P();
                        this.B()
                    }
                    ;
                    g.prototype.takeRecords = function() {
                        var a = this.h.slice();
                        this.h = [];
                        return a
                    }
                    ;
                    g.prototype.L = function(a) {
                        a = a || [0];
                        Array.isArray(a) || (a = [a]);
                        return a.sort().filter(function(b, c, d) {
                            if ("number" != typeof b || isNaN(b) || 0 > b || 1 < b)
                                throw Error("threshold must be a number between 0 and 1 inclusively");
                            return b !== d[c - 1]
                        })
                    }
                    ;
                    g.prototype.M = function(a) {
                        a = (a || "0px").split(/\s+/).map(function(b) {
                            b = /^(-?\d*\.?\d+)(px|%)$/.exec(b);
                            if (!b)
                                throw Error("rootMargin must be specified in pixels or percent");
                            return {
                                value: parseFloat(b[1]),
                                D: b[2]
                            }
                        });
                        a[1] = a[1] || a[0];
                        a[2] = a[2] || a[0];
                        a[3] = a[3] || a[1];
                        return a
                    }
                    ;
                    g.prototype.s = function(a) {
                        var b = a.defaultView;
                        if (b && -1 == this.i.indexOf(a)) {
                            var c = this.l
                              , d = null
                              , e = null;
                            this.m ? d = b.setInterval(c, this.m) : (w(b, "resize", c, !0),
                            w(a, "scroll", c, !0),
                            this.G && "MutationObserver"in b && (e = new b.MutationObserver(c),
                            e.observe(a, {
                                attributes: !0,
                                childList: !0,
                                characterData: !0,
                                subtree: !0
                            })));
                            this.i.push(a);
                            this.j.push(function() {
                                var f = a.defaultView;
                                f && (d && f.clearInterval(d),
                                x(f, "resize", c, !0));
                                x(a, "scroll", c, !0);
                                e && e.disconnect()
                            });
                            a != (this.root && (this.root.ownerDocument || this.root) || k) && (b = l(a)) && this.s(b.ownerDocument)
                        }
                    }
                    ;
                    g.prototype.A = function(a) {
                        var b = this.i.indexOf(a);
                        if (-1 != b) {
                            var c = this.root && (this.root.ownerDocument || this.root) || k;
                            if (!this.g.some(function(e) {
                                e = e.element.ownerDocument;
                                if (e == a)
                                    return !0;
                                for (; e && e != c; )
                                    if (e = (e = l(e)) && e.ownerDocument,
                                    e == a)
                                        return !0;
                                return !1
                            })) {
                                var d = this.j[b];
                                this.i.splice(b, 1);
                                this.j.splice(b, 1);
                                d();
                                a != c && (b = l(a)) && this.A(b.ownerDocument)
                            }
                        }
                    }
                    ;
                    g.prototype.P = function() {
                        var a = this.j.slice(0);
                        this.i.length = 0;
                        for (var b = this.j.length = 0; b < a.length; b++)
                            a[b]()
                    }
                    ;
                    g.prototype.l = function() {
                        var a = this.O()
                          , b = a ? this.J() : m();
                        this.g.forEach(function(c) {
                            var d = c.element
                              , e = n(d)
                              , f = this.u(d)
                              , h = c.C
                              , r = a && f && this.o(d, e, b);
                            var t = this.u(d) ? b : m();
                            c = c.C = new v({
                                time: window.performance && performance.now && performance.now(),
                                target: d,
                                boundingClientRect: e,
                                rootBounds: t,
                                intersectionRect: r
                            });
                            h ? a && f ? this.K(h, c) && this.h.push(c) : h && h.isIntersecting && this.h.push(c) : this.h.push(c)
                        }, this);
                        this.h.length && this.H(this.takeRecords(), this)
                    }
                    ;
                    g.prototype.o = function(a, b, c) {
                        if ("none" != window.getComputedStyle(a).display) {
                            var d = b;
                            b = p(a);
                            for (a = !1; !a && b; ) {
                                var e = null
                                  , f = 1 == b.nodeType ? window.getComputedStyle(b) : {};
                                if ("none" == f.display)
                                    return null;
                                if (b == this.root || 9 == b.nodeType)
                                    if (a = !0,
                                    b == this.root || b == k)
                                        e = c;
                                    else {
                                        var h = (b = p(b)) && n(b);
                                        f = b && this.o(b, h, c);
                                        h && f ? (e = f.top - h.top,
                                        h = f.left - h.left,
                                        e = {
                                            top: e,
                                            left: h,
                                            height: f.height,
                                            width: f.width,
                                            bottom: e + f.height,
                                            right: h + f.width
                                        }) : d = b = null
                                    }
                                else
                                    h = b.ownerDocument,
                                    b != h.body && b != h.documentElement && "visible" != f.overflow && (e = n(b));
                                if (e) {
                                    f = Math.max(e.top, d.top);
                                    h = Math.min(e.bottom, d.bottom);
                                    var r = Math.max(e.left, d.left);
                                    d = Math.min(e.right, d.right);
                                    e = d - r;
                                    var t = h - f;
                                    d = 0 <= e && 0 <= t && {
                                        top: f,
                                        bottom: h,
                                        left: r,
                                        right: d,
                                        width: e,
                                        height: t
                                    } || null
                                }
                                if (!d)
                                    break;
                                b = b && p(b)
                            }
                            return d
                        }
                    }
                    ;
                    g.prototype.J = function() {
                        if (this.root && !z(this.root))
                            var a = n(this.root);
                        else {
                            var b = z(this.root) ? this.root : k;
                            a = b.documentElement;
                            b = b.body;
                            a = {
                                top: 0,
                                left: 0,
                                right: a.clientWidth || b.clientWidth,
                                width: a.clientWidth || b.clientWidth,
                                bottom: a.clientHeight || b.clientHeight,
                                height: a.clientHeight || b.clientHeight
                            }
                        }
                        return this.I(a)
                    }
                    ;
                    g.prototype.I = function(a) {
                        var b = this.v.map(function(c, d) {
                            return "px" == c.D ? c.value : c.value * (d % 2 ? a.width : a.height) / 100
                        });
                        b = {
                            top: a.top - b[0],
                            right: a.right + b[1],
                            bottom: a.bottom + b[2],
                            left: a.left - b[3]
                        };
                        b.width = b.right - b.left;
                        b.height = b.bottom - b.top;
                        return b
                    }
                    ;
                    g.prototype.K = function(a, b) {
                        var c = a && a.isIntersecting ? a.intersectionRatio || 0 : -1
                          , d = b.isIntersecting ? b.intersectionRatio || 0 : -1;
                        if (c !== d)
                            for (var e = 0; e < this.thresholds.length; e++) {
                                var f = this.thresholds[e];
                                if (f == c || f == d || f < c !== f < d)
                                    return !0
                            }
                    }
                    ;
                    g.prototype.O = function() {
                        return !this.root || y(k, this.root)
                    }
                    ;
                    g.prototype.u = function(a) {
                        var b = this.root && (this.root.ownerDocument || this.root) || k;
                        return y(b, a) && (!this.root || b == a.ownerDocument)
                    }
                    ;
                    g.prototype.N = function() {
                        0 > q.indexOf(this) && q.push(this)
                    }
                    ;
                    g.prototype.B = function() {
                        var a = q.indexOf(this);
                        -1 != a && q.splice(a, 1)
                    }
                    ;
                    window.IntersectionObserver = g;
                    window.IntersectionObserverEntry = v
                }
        }
        )();
    },
    fn: 'intersectionobserver_polyfill.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('Object.js');
        require("String");
        require("Math");
        require('Promise.js');
        if (!global.ResizeObserver) {
            global.ResizeObserver = require('ResizeObserver_polyfill.js');
        }
        require('IntersectionObserver_polyfill.js');
    },
    fn: 'declarationextensionsobjetnatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.assert = void 0;
        exports.breakpoint = breakpoint;
        require("DeclarationExtensionsObjetNatif");
        const assert = ( (aIgnorer, aMessage) => {}
        );
        exports.assert = assert;
        global.assert = assert;
        function breakpoint() {}
    },
    fn: 'divers.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GUID = exports.GenerateurGUID = void 0;
        require("NamespaceIE");
        let lGUID_id = 1;
        let lGUID_ClassCss = 1;
        class GenerateurGUID {
            constructor() {
                this.fGUID = 1;
                this.fCompteur = 0;
            }
            get() {
                let lResult = 'g';
                if (this.fCompteur > 0) {
                    lResult += this.fCompteur + 'x';
                }
                lResult += this.fGUID;
                if (this.fGUID === Number.MAX_VALUE) {
                    this.fGUID = 1;
                    this.fCompteur += 1;
                } else {
                    this.fGUID += 1;
                }
                return lResult;
            }
        }
        exports.GenerateurGUID = GenerateurGUID;
        let GUID = {
            getId() {
                const lResult = 'id_' + lGUID_id;
                lGUID_id += 1;
                return lResult;
            },
            getClassCss() {
                const lResult = 'c_' + lGUID_ClassCss;
                lGUID_ClassCss += 1;
                return lResult;
            },
            generateur: GenerateurGUID,
            getGUIDDelphiVide() {
                return '{00000000-0000-0000-0000-000000000000}';
            }
        };
        exports.GUID = GUID;
    },
    fn: 'guid.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MethodesObjet = MethodesObjet;
        require("NamespaceIE");
        require("DeclarationExtensionsObjetNatif");
        function MethodesObjet() {}
        MethodesObjet.getObjectClass = function(aObjet) {
            if (aObjet && aObjet.constructor) {
                return MethodesObjet.getNomClassDeConstructeur(aObjet.constructor);
            }
            return undefined;
        }
        ;
        MethodesObjet.getNomClassDeConstructeur = function(aConstructeur) {
            if (aConstructeur && aConstructeur.name) {
                return aConstructeur.name;
            }
            if (aConstructeur && aConstructeur.toString && MethodesObjet.isFunction(aConstructeur)) {
                const T = aConstructeur.toString().match(/function\s*(\w+)/);
                if (T && T.length === 2) {
                    return T[1];
                }
            }
            return undefined;
        }
        ;
        function _dupliquer(aObjet, _aProfondeur, _aDuplicationParesseuse, aProprietaires, aProprietairesCopie) {
            if ((!aObjet) || (!MethodesObjet.isObject(aObjet))) {
                return aObjet;
            }
            if ('dupliquer'in aObjet && MethodesObjet.isFunction(aObjet.dupliquer)) {
                return aObjet.dupliquer();
            }
            if (Object.prototype.toString.call(aObjet) === '[object File]') {
                return aObjet;
            }
            if (_aProfondeur > 1000) {
                return aObjet;
            }
            let lIndice = -1;
            if (aProprietaires.length > 0) {
                lIndice = aProprietaires.indexOf(aObjet);
            }
            if (lIndice >= 0) {
                return aProprietairesCopie[lIndice];
            }
            let lObjetDuplique, lProp;
            if (MethodesObjet.isArray(aObjet)) {
                lObjetDuplique = new Array(aObjet.length);
            } else if (MethodesObjet.isDate(aObjet)) {
                lObjetDuplique = new Date();
                lObjetDuplique.setTime(aObjet.getTime());
            } else if (MethodesObjet.isBlob(aObjet)) {
                lObjetDuplique = new Blob([aObjet],{
                    type: aObjet.type
                });
            } else {
                lObjetDuplique = Object.create(aObjet.constructor.prototype);
            }
            const lProfondeur = _aProfondeur + 1;
            aProprietaires.push(aObjet);
            aProprietairesCopie.push(lObjetDuplique);
            try {
                const lKeys = Object.keys(aObjet);
                for (let i = 0; i < lKeys.length; i++) {
                    lProp = lKeys[i];
                    const lValeur = aObjet[lProp];
                    if (MethodesObjet.isObject(lValeur)) {
                        if (_aDuplicationParesseuse && (_aProfondeur === 0)) {
                            lObjetDuplique[lProp] = lValeur;
                        } else {
                            lObjetDuplique[lProp] = _dupliquer(lValeur, lProfondeur, false, aProprietaires, aProprietairesCopie);
                        }
                    } else {
                        lObjetDuplique[lProp] = lValeur;
                    }
                }
            } finally {
                aProprietaires.pop();
                aProprietairesCopie.pop();
            }
            return lObjetDuplique;
        }
        MethodesObjet.dupliquer = function(aObjet, aDuplicationParesseuse) {
            return _dupliquer(aObjet, 0, aDuplicationParesseuse, [], []);
        }
        ;
        MethodesObjet.isArray = function(object) {
            return Array.isArray(object);
        }
        ;
        MethodesObjet.isFunction = function(object) {
            return typeof object === 'function';
        }
        ;
        MethodesObjet.isString = function(object) {
            return Object.prototype.toString.call(object) === '[object String]';
        }
        ;
        MethodesObjet.isNumber = function(object) {
            return !isNaN(object) && Object.prototype.toString.call(object) === '[object Number]';
        }
        ;
        MethodesObjet.isUndefined = function(object) {
            return typeof object === 'undefined';
        }
        ;
        MethodesObjet.isObject = function(object) {
            return !!object && typeof object === 'object';
        }
        ;
        MethodesObjet.isDate = function(object) {
            return Object.prototype.toString.call(object) === '[object Date]';
        }
        ;
        MethodesObjet.isNan = function(object) {
            const rdigit = /\d/;
            return object === null || object === undefined || !rdigit.test(object) || isNaN(object);
        }
        ;
        MethodesObjet.isNumeric = function(object) {
            return !isNaN(parseFloat(object)) && isFinite(object);
        }
        ;
        MethodesObjet.isBoolean = function(object) {
            return object === true || object === false;
        }
        ;
        MethodesObjet.isWindow = function(object) {
            return !!object && typeof object === 'object' && 'setInterval'in object;
        }
        ;
        MethodesObjet.isBlob = function(object) {
            return Object.prototype.toString.call(object) === '[object Blob]';
        }
        ;
        MethodesObjet.get = function(aObjet, aAccesseur) {
            let lObjet, i, lNomProp, lIndexProp;
            if (!aObjet || !aAccesseur || !aAccesseur.length) {
                return aObjet;
            }
            if (typeof aAccesseur === 'string') {
                aAccesseur = aAccesseur.split('.');
            }
            const lLength = aAccesseur.length;
            if (lLength === 0) {
                return aObjet;
            }
            lObjet = aObjet;
            for (i = 0; i < lLength; i++) {
                if (!lObjet) {
                    return undefined;
                }
                lNomProp = aAccesseur[i];
                lIndexProp = false;
                if (lNomProp.indexOf('[') > 0 && lNomProp.indexOf(']') === lNomProp.length - 1) {
                    lIndexProp = lNomProp.match(/\[['"]?(.*)['"]?\]$/)[1];
                    lNomProp = lNomProp.replace(/\[['"]?(.*)['"]?\]$/, '');
                }
                lObjet = lObjet[lNomProp];
                if (lIndexProp) {
                    lObjet = lObjet[lIndexProp];
                }
            }
            return lObjet;
        }
        ;
        MethodesObjet.set = function(aObjet, aAccesseur, aValue) {
            if (aAccesseur && typeof aAccesseur === 'string') {
                aAccesseur = aAccesseur.split('.');
            }
            let lConteneur;
            let lNomProp;
            if (!aAccesseur || !aAccesseur.length) {
                return false;
            }
            lNomProp = aAccesseur[aAccesseur.length - 1];
            if (aAccesseur.length === 1) {
                lConteneur = aObjet;
            } else {
                lConteneur = MethodesObjet.get(aObjet, aAccesseur.slice(0, aAccesseur.length - 1));
            }
            if (lConteneur && lNomProp) {
                lConteneur[lNomProp] = aValue;
                return true;
            }
            return false;
        }
        ;
        MethodesObjet.nomProprieteDeValeur = function(aObjet, aValeur) {
            const lKeys = Object.keys(aObjet);
            for (let i = 0; i < lKeys.length; i++) {
                if (aValeur === aObjet[lKeys[i]]) {
                    return lKeys[i];
                }
            }
            return '';
        }
        ;
        function _indenterEnumere(aEnumere, aParam) {
            let lProp;
            if (!aParam) {
                aParam = {};
            }
            aParam.indice = aParam.indice || 0;
            if (!aEnumere) {
                return;
            }
            for (lProp in aEnumere) {
                if (MethodesObjet.isNumber(aEnumere[lProp])) {
                    aEnumere[lProp] = aParam.indice;
                    aParam.indice += 1;
                } else if (MethodesObjet.isObject(aEnumere[lProp])) {
                    _indenterEnumere(aEnumere[lProp], aParam);
                }
            }
        }
        MethodesObjet.indenterEnumere = function(aEnumere, aIndiceInitiale) {
            if (MethodesObjet.isObject(aEnumere)) {
                _indenterEnumere(aEnumere, {
                    indice: aIndiceInitiale
                });
            }
        }
        ;
        function _affecterValeurEnumere(aEnumere) {
            let lProp;
            if (!aEnumere) {
                return;
            }
            const lKeys = Object.keys(aEnumere);
            for (let i = 0; i < lKeys.length; i++) {
                lProp = lKeys[i];
                if (MethodesObjet.isObject(aEnumere[lProp])) {
                    _affecterValeurEnumere(aEnumere[lProp]);
                } else {
                    aEnumere[lProp] = lProp;
                }
            }
        }
        MethodesObjet.affecterValeurEnumere = function(aEnumere) {
            if (MethodesObjet.isObject(aEnumere)) {
                _affecterValeurEnumere(aEnumere);
            }
        }
        ;
        MethodesObjet.objetsIdentiques = function(aObjet1, aObjet2, aComparaisonProfonde) {
            if (!aObjet1 && aObjet2 || aObjet1 && !aObjet2) {
                return false;
            }
            if (!aObjet1 && !aObjet2) {
                return true;
            }
            if (aObjet1 === aObjet2) {
                return true;
            }
            let i;
            let lKeys = Object.keys(aObjet1);
            const lDejaCompare = {};
            for (i = 0; i < lKeys.length; i++) {
                if (aObjet1[lKeys[i]] !== aObjet2[lKeys[i]]) {
                    if (aComparaisonProfonde === true && MethodesObjet.isObject(aObjet1[lKeys[i]]) && MethodesObjet.isObject(aObjet2[lKeys[i]])) {
                        lDejaCompare[lKeys[i]] = true;
                        if (!MethodesObjet.objetsIdentiques(aObjet1[lKeys[i]], aObjet2[lKeys[i]], true)) {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
            }
            lKeys = Object.keys(aObjet2);
            for (i = 0; i < lKeys.length; i++) {
                if (aObjet1[lKeys[i]] !== aObjet2[lKeys[i]]) {
                    if (aComparaisonProfonde === true) {
                        if (!lDejaCompare[lKeys[i]] && MethodesObjet.isObject(aObjet1[lKeys[i]]) && MethodesObjet.isObject(aObjet2[lKeys[i]]) && !MethodesObjet.objetsIdentiques(aObjet1[lKeys[i]], aObjet2[lKeys[i]], true)) {
                            return false;
                        }
                    } else {
                        return false;
                    }
                }
            }
            return true;
        }
        ;
        MethodesObjet.enumKeys = function(aEnum) {
            return Object.keys(aEnum || {}).filter(aVal => Number.isNaN(+aVal));
        }
        ;
        MethodesObjet.valueInEnum = function(aValue, aEnum) {
            for (const lKey of MethodesObjet.enumKeys(aEnum)) {
                const lVal = aEnum[lKey];
                if (lVal === aValue) {
                    return true;
                }
            }
            return false;
        }
        ;
    },
    fn: 'methodesobjet.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Invocateur = exports.ObjetInvocateur = void 0;
        require("NamespaceIE");
        require("DeclarationJQuery.js");
        require("Divers.js");
        require("String");
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const lGUID_GlobalNomPile = new GUID_1.GUID.generateur();
        class ObjetInvocateur {
            constructor(aAbonnementInstanceInterdite=false) {
                this.abonnementInstanceInterdite = false;
                this.pile = {};
                this.pileEvents = {};
                this.generateurGUID = new GUID_1.GUID.generateur();
                this.abonnementInstanceInterdite = aAbonnementInstanceInterdite;
                this.nomPileInstance = '__pileInvocateur__' + (aAbonnementInstanceInterdite ? '' : lGUID_GlobalNomPile.get());
            }
            abonner(aEvent, aCallback, aInstance, aAvecAbonnementUnicite) {
                if (this.abonnementInstanceInterdite && aInstance) {
                    throw new Error('interdiction');
                }
                return this._abonnerTous({
                    e: aEvent,
                    callB: aCallback,
                    inst: aInstance,
                    unicite: aAvecAbonnementUnicite !== false
                });
            }
            abonnerUnique(aEvent, aCallback, aInstance, aAvecAbonnementUnicite) {
                return this._abonnerTous({
                    e: aEvent,
                    callB: aCallback,
                    inst: aInstance,
                    u: true,
                    unicite: aAvecAbonnementUnicite !== false
                });
            }
            desabonner(aParam1, aParam2, aParam3) {
                if (!aParam1) {
                    return;
                }
                let lEvent, lInstance, lCallBack, lEventsASupprimer, lId;
                if (Array.isArray(aParam1)) {
                    this._supprimerIds(aParam1);
                    return;
                }
                if (typeof aParam1 === 'object') {
                    lInstance = aParam1;
                    if (typeof aParam2 !== 'object') {
                        lCallBack = aParam2;
                    }
                } else {
                    lEvent = aParam1.toString();
                    if (typeof aParam2 === 'object') {
                        lInstance = aParam2;
                    } else {
                        lCallBack = aParam2;
                        if (typeof aParam3 === 'object') {
                            lInstance = aParam3;
                        }
                    }
                }
                if (lEvent) {
                    const lTab = lEvent.split(' ');
                    for (let i = 0; i < lTab.length; i++) {
                        this._desabonnerParEvent(lTab[i].trim(), lInstance, lCallBack);
                    }
                } else if (this.isInstanceAbonnable(lInstance)) {
                    const lPile = lInstance.getPileAbonnement();
                    const lPileInstance = lPile[this.nomPileInstance];
                    if (lPileInstance) {
                        lEventsASupprimer = [];
                        for (lId in lPileInstance) {
                            if (lPileInstance.hasOwnProperty(lId)) {
                                if (lCallBack) {
                                    if (this.pile[lId] && this.pile[lId].callB === lCallBack) {
                                        lEventsASupprimer.push(lId);
                                    }
                                } else {
                                    lEventsASupprimer.push(lId);
                                }
                            }
                        }
                        if (!lCallBack) {
                            delete lPile[this.nomPileInstance];
                        }
                        this._supprimerIds(lEventsASupprimer);
                    }
                }
            }
            evenement(aEvent, ...aArgs) {
                if (!aEvent) {
                    return;
                }
                const lEvent = aEvent.toString();
                const lEvents = this.pileEvents[lEvent];
                let lId, lElement, lResult;
                const lEventsATraiter = [];
                let lAvecEvenement = false;
                if (lEvents) {
                    for (lId in lEvents) {
                        lAvecEvenement = true;
                        lElement = this.pile[lId];
                        if (lElement && lElement.callB) {
                            lEventsATraiter.push(lElement);
                        }
                    }
                }
                if (!lAvecEvenement) {
                    delete this.pileEvents[lEvent];
                }
                for (let i = 0, lLength = lEventsATraiter.length; i < lLength; i += 1) {
                    lElement = lEventsATraiter[i];
                    if (lElement && !lElement.__INACTIF__) {
                        if (lElement.u) {
                            this._supprimerIds([lElement.id]);
                        }
                        ;if (lElement.callB) {
                            lResult = lElement.callB.call(lElement.inst, ...aArgs);
                            if (lResult === false) {
                                return;
                            }
                        }
                    }
                }
            }
            _abonner(aParams) {
                if (!aParams.e || !aParams.e.toString) {
                    return null;
                }
                aParams.e = aParams.e.toString();
                if (!aParams.callB) {
                    return null;
                }
                const lInstanceAbo = this.isInstanceAbonnable(aParams.inst) ? aParams.inst : null;
                if (aParams.unicite) {
                    this.desabonner(aParams.e, aParams.callB, lInstanceAbo);
                }
                if (!this.pileEvents[aParams.e]) {
                    this.pileEvents[aParams.e] = {};
                }
                const lId = this.generateurGUID.get();
                aParams.id = lId;
                this.pile[lId] = aParams;
                this.pileEvents[aParams.e][lId] = true;
                if (lInstanceAbo) {
                    const lPile = lInstanceAbo.getPileAbonnement();
                    if (!lPile[this.nomPileInstance]) {
                        lPile[this.nomPileInstance] = {};
                    }
                    lPile[this.nomPileInstance][lId] = true;
                }
                return lId;
            }
            _supprimerIds(aIds) {
                if (!aIds) {
                    return;
                }
                let lId, i, lElement, lInstance, lLength;
                for (i = 0,
                lLength = aIds.length; i < lLength; i += 1) {
                    lId = aIds[i];
                    lElement = this.pile[lId];
                    if (lElement) {
                        lInstance = lElement.inst;
                        if (this.isInstanceAbonnable(lInstance)) {
                            const lPile = lInstance.getPileAbonnement();
                            if (lPile && lPile[this.nomPileInstance] && lPile[this.nomPileInstance][lId]) {
                                delete lPile[this.nomPileInstance][lId];
                                if ($.isEmptyObject(lPile[this.nomPileInstance])) {
                                    delete lPile[this.nomPileInstance];
                                }
                            }
                        }
                        if (this.pileEvents[lElement.e]) {
                            if (this.pileEvents[lElement.e][lId]) {
                                delete this.pileEvents[lElement.e][lId];
                            }
                        }
                        lElement = null;
                        if (this.pile[lId]) {
                            this.pile[lId].__INACTIF__ = true;
                        }
                        delete this.pile[lId];
                    }
                }
            }
            _abonnerTous(aParam) {
                const lIds = [];
                let lEvent;
                if (aParam.e && aParam.e.split) {
                    const lTab = aParam.e.split(' ');
                    for (let i = 0, lNb = lTab.length; i < lNb; i++) {
                        lEvent = lTab[i].trim();
                        lIds.push(this._abonner({
                            e: lEvent,
                            callB: aParam.callB,
                            inst: aParam.inst,
                            unicite: aParam.unicite,
                            u: aParam.u
                        }));
                    }
                }
                if (lIds.length === 0) {
                    return null;
                }
                if (lIds.length === 1) {
                    return lIds[0];
                }
                return lIds;
            }
            _desabonnerParEvent(aEvent, aInstance, aCallback) {
                const lEvents = this.pileEvents[aEvent];
                let lEventsASupprimer, lId, lElement;
                if (!lEvents) {
                    return;
                }
                if (aInstance) {
                    if (this.isInstanceAbonnable(aInstance)) {
                        const lPileInstance = aInstance.getPileAbonnement()[this.nomPileInstance];
                        if (!lPileInstance) {
                            return;
                        }
                        lEventsASupprimer = [];
                        for (lId in lPileInstance) {
                            if (lPileInstance.hasOwnProperty(lId)) {
                                lElement = this.pile[lId];
                                if (lElement && lElement.e === aEvent) {
                                    if (!aCallback || aCallback === lElement.callB) {
                                        lEventsASupprimer.push(lId);
                                    }
                                }
                            }
                        }
                    }
                } else if (aCallback) {
                    lEventsASupprimer = [];
                    for (lId in lEvents) {
                        if (this.pile[lId] && this.pile[lId].callB === aCallback) {
                            lEventsASupprimer.push(lId);
                        }
                    }
                } else {
                    lEventsASupprimer = lEvents;
                    delete this.pileEvents[aEvent];
                }
                if (lEventsASupprimer && Array.isArray(lEventsASupprimer) && lEventsASupprimer.length > 0) {
                    this._supprimerIds(lEventsASupprimer);
                }
            }
            isInstanceAbonnable(aInstance) {
                return aInstance && ('getPileAbonnement'in aInstance) && MethodesObjet_1.MethodesObjet.isFunction(aInstance.getPileAbonnement);
            }
        }
        exports.ObjetInvocateur = ObjetInvocateur;
        (function(ObjetInvocateur) {
            let events;
            (function(events) {
                events["initChiffrement"] = "IIE_initChiffrement";
                events["patience"] = "IIE_patience";
                events["modificationModeExclusif"] = "IIE_modification_ModeExclusif";
                events["modeExclusif"] = "IIE_ModeExclusif";
                events["modificationPresenceUtilisateur"] = "IIE_ModificationPresenceUtilisateur";
                events["interruption_Requete"] = "IIE_Interruption_Requete";
                events["activationImpression"] = "IIE_Activation_Impression";
                events["choixImpression"] = "IIE_choix_impression";
                events["autorisationRechargementPage"] = "IIE_AutorisationRechargementPage";
                events["surRechargementPage"] = "IIE_SurRechargementPage";
                events["etatSaisie"] = "IIE_setEtatSaisie";
                events["fermerFenetres"] = "IIE_fermer_fenetres";
                events["resizeNavigateur"] = "IIE_resizeNavigateur";
                events["actualisationAffichage"] = "IIE_actualisation_affichage";
                events["eventReponseUpload"] = "IIE_eventReponseUpload";
                events["eventIOAjax"] = "IIE_eventIOAjax";
                events["refreshIEHtml"] = "IEE_refreshIEHtml";
                events["erreurCommunication"] = "IEE_erreurCommunication";
                events["navigationOnglet"] = "IEE_navigationOnglet";
                events["changerMembre"] = "IEE_changerMembre";
                events["toucheDEBUG"] = "IIE_ToucheDEBUG";
                events["DEBUG_log"] = "IIE_ADDLOG";
                events["DEBUG_logRequete"] = "IIE_ADDLOG_REQUETE";
            }
            )(events = ObjetInvocateur.events || (ObjetInvocateur.events = {}));
        }
        )(ObjetInvocateur || (exports.ObjetInvocateur = ObjetInvocateur = {}));
        exports.Invocateur = new ObjetInvocateur();
    },
    fn: 'invocateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Support = void 0;
        require("DeclarationJQuery.js");
        const MethodesObjet_1 = require("MethodesObjet");
        const GenreNavigateur = {
            Standard: 1,
            Webkit: 2,
            Moz: 3,
            Opera: 4,
            IE: 5
        };
        let Support = {
            init: false,
            GenreNavigateur: GenreNavigateur,
            supportFilterIE: false,
            supportEventOnPopState: false,
            supportEventPaste: false,
            supportEventInput: false,
            supportTouch: false,
            tactile: false,
            supportBorderRadius: _initTableau(),
            avecBorderRadius: false,
            supportGradient: _initTableau(),
            supportOpacity: _initTableau(),
            avecSupportOpacity: false,
            supportBoxShadow: _initTableau(),
            avecSupportBoxShadow: false,
            supportTransitions: _initTableau(),
            avecSupportTransitions: false,
            transitionEndEvent: '',
            supportTransforms: _initTableau(),
            avecSupportTransform: false,
            supportBackgroundSize: _initTableau(),
            avecBackgroundSize: false,
            bordureExterneDIV: false,
            bordureExterneTD: false,
            div100PourcentDansTDGardeHauteurTD: false,
            tailleScrollBar: 0,
            estOverlayScrollbar: false,
            scrollBarWidth: -1,
            avecSupportFileUpload: false,
            supportPointerEventsNone: false,
            supportCanvas: false,
            supportCanvasText: false,
            supportBlob: false,
            supportNotification: false,
            speechRecognition: false,
            speechSynthesis: false,
            contentEditable: false,
            permissionNotification: {
                defaut: 'default',
                granted: 'granted',
                denied: 'denied'
            },
            refreshNotification: null,
            addInit(aCallback) {
                if (this.init) {
                    aCallback();
                } else {
                    uPileInit.push(aCallback);
                }
            },
            toString() {
                let lChaine = '';
                let lValeur;
                let lChaineSupport;
                for (const lProp in Support) {
                    lValeur = Support[lProp];
                    if (MethodesObjet_1.MethodesObjet.isArray(lValeur)) {
                        lChaine += lProp + ' - [';
                        lChaineSupport = '';
                        for (const i in lValeur) {
                            if (lValeur[i]) {
                                lChaineSupport += (lChaineSupport.length > 0 ? ', ' : '') + MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, parseInt(i, 10));
                            }
                        }
                        lChaine += (lChaineSupport.length > 0 ? lChaineSupport : 'NON SUPPORTE') + ']\n';
                    } else if (!MethodesObjet_1.MethodesObjet.isFunction(lValeur) && !MethodesObjet_1.MethodesObjet.isObject(lValeur)) {
                        lChaine += lProp + ' - ' + Support[lProp] + '\n';
                    }
                }
                return lChaine;
            }
        };
        exports.Support = Support;
        function _initTableau() {
            const lTableau = [];
            for (const lProp in GenreNavigateur) {
                lTableau[GenreNavigateur[lProp]] = false;
            }
            return lTableau;
        }
        let uPileInit = [];
        function _testerSupports(aDoc) {
            let lProp;
            const LExtensionsStyle = {};
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Standard))] = '';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Webkit))] = 'Webkit';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Moz))] = 'Moz';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Opera))] = 'O';
            LExtensionsStyle[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.IE))] = 'MS';
            const lExtensionsCss = {};
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Standard))] = '';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Webkit))] = '-webkit-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Moz))] = '-moz-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.Opera))] = '-o-';
            lExtensionsCss[(MethodesObjet_1.MethodesObjet.nomProprieteDeValeur(GenreNavigateur, GenreNavigateur.IE))] = '-ms-';
            const lElement = aDoc.createElement('div');
            function _contains(aChaine, aSousChaine) {
                return ('' + aChaine).indexOf(aSousChaine) !== -1;
            }
            function _getNomPropEtendu(aStyle, aExtension) {
                return (aExtension.length > 0) ? aExtension + aStyle.ucfirst() : aStyle;
            }
            function _existeStyle(aStyle, aExtension) {
                return !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style[_getNomPropEtendu(aStyle, aExtension)]);
            }
            function _leStyleContientLaChaine(aStyle, aExtension, aChaine) {
                const lStyle = lElement.style[_getNomPropEtendu(aStyle, aExtension)];
                return !MethodesObjet_1.MethodesObjet.isUndefined(lStyle) && _contains(lStyle, aChaine);
            }
            Support.supportFilterIE = !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style.filter);
            if (!MethodesObjet_1.MethodesObjet.isUndefined(lElement.style.filter)) {
                lElement.style.filter = 'progid:DXImageTransform.Microsoft.Gradient(gradientType=1,startColorStr=yellow,endColorStr=red);';
                Support.supportFilterIE = (lElement.style.filter.length > 0);
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBorderRadius[GenreNavigateur[lProp]] = _existeStyle('borderRadius', LExtensionsStyle[lProp]);
                if (Support.supportBorderRadius[GenreNavigateur[lProp]]) {
                    Support.avecBorderRadius = true;
                }
            }
            lElement.style.cssText = 'background: linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.Standard] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -ms-linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.IE] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -webkit-gradient(180deg, left top, right top, from(blue), to(yellow));';
            Support.supportGradient[GenreNavigateur.Webkit] = _contains(lElement.style.background, 'gradient');
            lElement.style.cssText = 'background: -moz-linear-gradient(180deg, yellow, blue);';
            Support.supportGradient[GenreNavigateur.Moz] = _contains(lElement.style.background, 'gradient');
            for (lProp in LExtensionsStyle) {
                lElement.style.cssText = lExtensionsCss[lProp] + 'opacity:.5;';
                Support.supportOpacity[GenreNavigateur[lProp]] = _leStyleContientLaChaine('opacity', LExtensionsStyle[lProp], '0.5');
                if (Support.supportOpacity[GenreNavigateur[lProp]]) {
                    Support.avecSupportOpacity = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBoxShadow[GenreNavigateur[lProp]] = _existeStyle('boxShadow', LExtensionsStyle[lProp]);
                if (Support.supportBoxShadow[GenreNavigateur[lProp]]) {
                    Support.avecSupportBoxShadow = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportBackgroundSize[GenreNavigateur[lProp]] = _existeStyle('backgroundSize', LExtensionsStyle[lProp]);
                if (Support.supportBackgroundSize[GenreNavigateur[lProp]]) {
                    Support.avecBackgroundSize = true;
                }
            }
            for (lProp in LExtensionsStyle) {
                Support.supportTransitions[GenreNavigateur[lProp]] = _existeStyle('transitionProperty', LExtensionsStyle[lProp]);
                if (Support.supportTransitions[GenreNavigateur[lProp]]) {
                    Support.avecSupportTransitions = true;
                }
            }
            Support.transitionEndEvent = (function() {
                const el = document.createElement('fakeelement');
                const transitions = {
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'MSTransition': 'msTransitionEnd',
                    'OTransition': 'oTransitionEnd',
                    'transition': 'transitionEnd'
                };
                for (const t in transitions) {
                    if (el.style[t] !== undefined) {
                        return transitions[t];
                    }
                }
            }
            )();
            let lNomTransform;
            for (const lProp in LExtensionsStyle) {
                lNomTransform = '';
                switch (GenreNavigateur[lProp]) {
                case GenreNavigateur.Standard:
                    lNomTransform = 'transform';
                    break;
                case GenreNavigateur.Webkit:
                    lNomTransform = 'WebkitTransform';
                    break;
                case GenreNavigateur.Moz:
                    lNomTransform = 'MozTransform';
                    break;
                case GenreNavigateur.Opera:
                    lNomTransform = 'OTransform';
                    break;
                case GenreNavigateur.IE:
                    lNomTransform = 'msTransform';
                    break;
                }
                Support.supportTransforms[GenreNavigateur[lProp]] = !MethodesObjet_1.MethodesObjet.isUndefined(lElement.style[lNomTransform]);
                if (Support.supportTransforms[GenreNavigateur[lProp]]) {
                    Support.avecSupportTransform = true;
                }
            }
            Support.supportEventOnPopState = !MethodesObjet_1.MethodesObjet.isUndefined(window.onpopstate);
            Support.supportEventPaste = 'onpaste'in lElement;
            Support.supportEventInput = 'oninput'in lElement;
            Support.supportTouch = ('ontouchstart'in window) || !!(window.DocumentTouch && document instanceof window.DocumentTouch);
            Support.tactile = Support.supportTouch || window.navigator.maxTouchPoints > 0;
            Support.avecSupportFileUpload = (function() {
                if (navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)) {
                    return false;
                }
                const el = document.createElement('input');
                el.type = 'file';
                return !el.disabled;
            }
            )();
            Support.supportCanvas = !!aDoc.createElement('canvas').getContext;
            Support.supportCanvasText = !!(Support.supportCanvas && typeof (aDoc.createElement('canvas').getContext('2d').fillText) === 'function');
            Support.supportBlob = _supportBlob();
            Support.supportNotification = _supportNotif();
            Support.refreshNotification = function() {
                Support.supportNotification = _supportNotif();
            }
            ;
            Support.speechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
            Support.speechSynthesis = !!window.speechSynthesis;
            Support.contentEditable = false;
            if ('contentEditable'in document.documentElement) {
                lElement.contentEditable = 'true';
                Support.contentEditable = lElement.contentEditable === 'true';
            }
        }
        function _supportBlob() {
            let lBlob;
            try {
                lBlob = new Blob(['a'],{
                    type: 'text/plain'
                });
            } catch (e1) {
                try {
                    const BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
                    if (e1.name === 'TypeError' && window.BlobBuilder) {
                        const bb = new BlobBuilder();
                        bb.append(['a']);
                        lBlob = bb.getBlob('text/plain');
                    } else if (e1.name === 'InvalidStateError') {
                        lBlob = new Blob(['a'],{
                            type: 'text/plain'
                        });
                    }
                } catch (e2) {
                    return false;
                }
            }
            if (lBlob) {
                return true;
            }
            return false;
        }
        function _supportNotif() {
            let isSupported = false;
            let windowAny = window;
            try {
                isSupported = !!(windowAny.Notification || windowAny.webkitNotifications || navigator.mozNotification);
                if (isSupported) {
                    if (windowAny.Notification && windowAny.Notification.permissionLevel) {
                        isSupported = windowAny.Notification.permissionLevel();
                    } else if (windowAny.webkitNotifications && windowAny.webkitNotifications.checkPermission) {
                        if (windowAny.webkitNotifications.checkPermission() === 0) {
                            isSupported = Support.permissionNotification.granted;
                        } else if (windowAny.webkitNotifications.checkPermission() === 2) {
                            isSupported = Support.permissionNotification.denied;
                        } else {
                            isSupported = Support.permissionNotification.defaut;
                        }
                    } else if (navigator.mozNotification) {
                        isSupported = Support.permissionNotification.granted;
                    } else if (windowAny.Notification && windowAny.Notification.permission) {
                        isSupported = windowAny.Notification.permission;
                    }
                }
            } catch (e) {}
            return !!isSupported;
        }
        function _testerSupportHtml() {
            const lBody = document.getElementsByTagName('BODY')[0];
            const lElement = document.createElement('div');
            lBody.appendChild(lElement);
            const lTaille = 50;
            const lId = '_test_';
            lElement.innerHTML = '<div id="' + lId + '" style="height:auto;"><div style="height:' + lTaille + 'px; padding:4px;">&nbsp;</div></div>';
            Support.bordureExterneDIV = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<table><tr><td class="PetitEspace" id="' + lId + '" style="height:' + lTaille + 'px;"><div>&nbsp;</div></td></tr></table>';
            Support.bordureExterneTD = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<table style="position:absolute; z-index:-1; visibility:hidden"><tr>' + '<td style="height:' + lTaille + 'px;">' + '<div id="' + lId + '" style="height:100%"><div style="height:' + (lTaille + 20) + 'px;"></div></div>' + '</td></tr></table>';
            Support.div100PourcentDansTDGardeHauteurTD = document.getElementById(lId).offsetHeight === lTaille;
            lElement.innerHTML = '<div id="dessous" style="position:absolute;height:10px;width:10px;top:0;left:0;"></div>' + '<div id="dessus" style="position:absolute;height:10px;width:10px;top:0;left:0; pointer-events:none;"></div>';
            const lTrouve = document.elementFromPoint ? document.elementFromPoint(1, 1) : null;
            Support.supportPointerEventsNone = !!lTrouve && lTrouve.id === 'dessous';
            lElement.innerHTML = '<div style="overflow:scroll;"><div></div></div>';
            Support.tailleScrollBar = $(lElement).find('>div').get(0).offsetWidth - $(lElement).find('>div>div').get(0).offsetWidth;
            Support.estOverlayScrollbar = Support.tailleScrollBar === 0;
            lBody.removeChild(lElement);
        }
        $(window).on('load', () => {
            Support.init = true;
            _testerSupports(window.document);
            _testerSupportHtml();
            uPileInit.forEach( (aCallback) => {
                aCallback();
            }
            );
            uPileInit = [];
        }
        );
    },
    fn: 'objetsupport.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationJQuery");
        $.fn.extend({
            inputDisabled(aValue) {
                const $this = $(this);
                if (aValue === undefined) {
                    return $this.is(':disabled');
                } else {
                    $this.attr('disabled', aValue ? 'disabled' : null);
                    $this.trigger('IEDisabled');
                    return $this;
                }
            }
        });
    },
    fn: 'jinputdisabled.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationJQuery");
        $.fn.extend({
            inputChecked(aValue) {
                const $this = $(this);
                if (aValue === undefined) {
                    return $this.is(':checked');
                }
                $this.prop('checked', aValue);
                $this.trigger('IEChecked');
                return $this;
            }
        });
    },
    fn: 'jinputchecked.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ControleSaisieEvenement = void 0;
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        let uSaisieEnCours = null
          , uSaisieEnCoursExecution = false;
        const ControleSaisieEvenement = (aCallback, aSansControleNavigation) => {
            if (!aCallback || !MethodesObjet_1.MethodesObjet.isFunction(aCallback)) {
                return;
            }
            if (aSansControleNavigation !== true && window.GApplication && !GApplication.getModeExclusif()) {
                let lCallback = null;
                if (_avecSaisieEnCoursActive()) {
                    lCallback = uSaisieEnCours.saisie.bind(null, aCallback);
                    uSaisieEnCours = null;
                }
                if (lCallback || (window.GEtatUtilisateur && window.GEtatUtilisateur.EtatSaisie)) {
                    let lPage = window.GEtatUtilisateur && window.GEtatUtilisateur.getPageCourante ? window.GEtatUtilisateur.getPageCourante() : null;
                    if (!lPage) {
                        lPage = window.GInterface && window.GInterface.getPageCourante ? window.GInterface.getPageCourante() : null;
                    }
                    if (!lPage || !('setCallbackNavigation'in lPage)) {
                        aCallback();
                        return;
                    }
                    if (!lCallback) {
                        lCallback = lPage.valider ? lPage.valider.bind(lPage) : null;
                    }
                    if (!MethodesObjet_1.MethodesObjet.isFunction(lCallback)) {
                        aCallback();
                        return;
                    }
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, false);
                    lPage.setCallbackNavigation(null);
                    let lCallbackTransmis = false;
                    if (!IE.estMobile) {
                        lPage.setCallbackNavigation(aCallback);
                        lCallbackTransmis = true;
                    }
                    const lResult = lCallback();
                    if (lPage) {
                        lPage.focusSurPremierObjet();
                    }
                    if (!lCallbackTransmis) {
                        aCallback();
                    }
                    return lResult;
                }
            }
            return aCallback();
        }
        ;
        exports.ControleSaisieEvenement = ControleSaisieEvenement;
        function _avecSaisieEnCoursActive() {
            if (uSaisieEnCours) {
                if (uSaisieEnCours.instance && MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.instance.isDestroyed) && uSaisieEnCours.instance.isDestroyed()) {
                    uSaisieEnCours = null;
                    return false;
                }
                return MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.saisie) && (!MethodesObjet_1.MethodesObjet.isFunction(uSaisieEnCours.actif) || uSaisieEnCours.actif() === true);
            }
            return false;
        }
        exports.ControleSaisieEvenement.saisieEnCours = (...aParams) => {
            if (window.GApplication && GApplication.getModeExclusif()) {
                uSaisieEnCours = null;
                uSaisieEnCoursExecution = false;
                return false;
            }
            if (_avecSaisieEnCoursActive()) {
                if (!uSaisieEnCoursExecution) {
                    uSaisieEnCoursExecution = true;
                    const lSaisieEnCours = uSaisieEnCours;
                    uSaisieEnCours = null;
                    Promise.resolve().then( () => {
                        return lSaisieEnCours.saisie(...aParams);
                    }
                    ).catch( (e) => {
                        IE.log.addLog('erreur saisieEnCours ' + e);
                    }
                    ).then( () => {
                        uSaisieEnCoursExecution = false;
                    }
                    );
                }
                return true;
            }
            return false;
        }
        ;
        exports.ControleSaisieEvenement.addSaisieEnCours = (aCallback) => {
            uSaisieEnCoursExecution = false;
            if (window.GApplication && GApplication.getModeExclusif()) {
                uSaisieEnCours = null;
                return;
            }
            const lSaisie = {
                actif: null,
                saisie: null,
                instance: null
            };
            if (MethodesObjet_1.MethodesObjet.isFunction(aCallback)) {
                lSaisie.saisie = aCallback;
            } else if (MethodesObjet_1.MethodesObjet.isObject(aCallback) && MethodesObjet_1.MethodesObjet.isFunction(aCallback.saisie)) {
                lSaisie.saisie = aCallback.saisie;
                lSaisie.actif = aCallback.actif;
                lSaisie.instance = aCallback.instance;
            }
            if (lSaisie.saisie) {
                uSaisieEnCours = lSaisie;
            } else {
                uSaisieEnCours = null;
            }
        }
        ;
    },
    fn: 'controlesaisieevenement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeChampsJSON = void 0;
        const TypeChampsJSON = {
            type: '_T',
            valeur: 'V'
        };
        exports.TypeChampsJSON = TypeChampsJSON;
    },
    fn: 'enumere_champsjson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEtat = void 0;
        var EGenreEtat;
        (function(EGenreEtat) {
            EGenreEtat[EGenreEtat["Aucun"] = 0] = "Aucun";
            EGenreEtat[EGenreEtat["Creation"] = 1] = "Creation";
            EGenreEtat[EGenreEtat["Modification"] = 2] = "Modification";
            EGenreEtat[EGenreEtat["Suppression"] = 3] = "Suppression";
            EGenreEtat[EGenreEtat["FilsModification"] = 4] = "FilsModification";
        }
        )(EGenreEtat || (exports.EGenreEtat = EGenreEtat = {}));
    },
    fn: 'enumere_etat.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetElement = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_Etat_1 = require("Enumere_Etat");
        let _numeroCreation = -1000;
        class ObjetElement {
            constructor(aLibelle, aNumero, aGenre, aPosition, aActif) {
                this.Libelle = aLibelle;
                this.Numero = aNumero;
                this.Genre = aGenre;
                this.Position = aPosition;
                this.Actif = aActif === null || aActif === undefined ? true : aActif;
                this.Etat = Enumere_Etat_1.EGenreEtat.Aucun;
                if (arguments.length === 1 && MethodesObjet_1.MethodesObjet.isObject(aLibelle)) {
                    this.Libelle = undefined;
                    Object.assign(this, aLibelle);
                }
            }
            static create(aProps) {
                const lElement = new ObjetElement();
                if (aProps && MethodesObjet_1.MethodesObjet.isObject(aProps)) {
                    Object.assign(lElement, aProps);
                }
                return lElement;
            }
            toJSON() {
                return this._toJSON(this);
            }
            toJSONAll() {
                const lJSON = this._toJSON(this);
                return this._propToJSONHorsFormat(this, lJSON);
            }
            fromJSON(aJSON) {
                if (!aJSON) {
                    return this;
                }
                const lJSON = aJSON;
                this.Libelle = lJSON[ObjetElement.const_JSON.libelle.JSON] || '';
                this.Numero = lJSON[ObjetElement.const_JSON.numero.JSON] === '0' ? 0 : lJSON[ObjetElement.const_JSON.numero.JSON];
                this.Genre = lJSON[ObjetElement.const_JSON.genre.JSON];
                this.Position = lJSON[ObjetElement.const_JSON.position.JSON];
                if (lJSON[ObjetElement.const_JSON.actif.JSON] !== undefined) {
                    this.Actif = lJSON[ObjetElement.const_JSON.actif.JSON];
                }
                return this;
            }
            copieJSON(aJSON) {
                for (const lProp in aJSON) {
                    if (lProp !== ObjetElement.const_JSON.libelle.JSON && lProp !== ObjetElement.const_JSON.numero.JSON && lProp !== ObjetElement.const_JSON.genre.JSON && lProp !== ObjetElement.const_JSON.position.JSON) {
                        this[lProp] = aJSON[lProp];
                    }
                }
                return this;
            }
            copieToJSON(aJSON) {
                return this._propToJSONHorsFormat(this, aJSON);
            }
            getLibelle() {
                return this.Libelle;
            }
            getNumero() {
                return this.Numero;
            }
            getGenre() {
                return this.Genre;
            }
            getActif() {
                return this.Actif;
            }
            getPosition() {
                return this.Position;
            }
            getEtat() {
                return this.Etat;
            }
            getDonnees() {
                return this.donnees;
            }
            getCleHash() {
                return `${this.Numero}_${this.Genre}`;
            }
            existeNumero() {
                const lNumero = this.getNumero();
                if (lNumero && lNumero !== 0 && MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    return true;
                }
                if (typeof lNumero === 'string' && lNumero.match) {
                    return !!lNumero.match(new RegExp(`^${ObjetElement.regexNumeroExiste}$`));
                }
                return false;
            }
            existe() {
                return this.getEtat() !== Enumere_Etat_1.EGenreEtat.Suppression;
            }
            pourValidation() {
                return this._validationSaisie || false;
            }
            setLibelle(aLibelle) {
                this.Libelle = aLibelle;
            }
            setNumero(aNumero) {
                this.Numero = aNumero;
            }
            setActif(aActif) {
                this.Actif = aActif;
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
            }
            getGenreTable() {
                const lNumero = this.getNumero();
                if (typeof lNumero === 'string') {
                    const lIndex = lNumero.indexOf(ObjetElement.const_JSON.separateurTableNumero);
                    if (lIndex > 0) {
                        const lGenreTable = parseInt(lNumero.substring(0, lIndex), 10);
                        if (MethodesObjet_1.MethodesObjet.isNumber(lGenreTable)) {
                            return lGenreTable;
                        }
                    }
                }
                return 0;
            }
            egalParNumeroEtGenre(aNumero, aGenre, aAvecExiste) {
                if ((aNumero === null || aNumero === undefined) && (aGenre === null || aGenre === undefined)) {
                    return false;
                }
                return (!aAvecExiste || this.existe()) && ((aNumero === null || aNumero === undefined) || (this.getNumero() === aNumero)) && ((aGenre === null || aGenre === undefined) || (this.getGenre() === aGenre));
            }
            getCle() {
                return '_' + this.Genre + '_' + this.Numero;
            }
            setEtat(AEtat) {
                if (this.Etat === AEtat) {
                    return this;
                }
                switch (AEtat) {
                case Enumere_Etat_1.EGenreEtat.Aucun:
                    delete this._validationSaisie;
                    this.Etat = Enumere_Etat_1.EGenreEtat.Aucun;
                    break;
                case Enumere_Etat_1.EGenreEtat.Creation:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) {
                        this._validationSaisie = true;
                        this.Etat = Enumere_Etat_1.EGenreEtat.Creation;
                        if (this.Numero === null || this.Numero === undefined) {
                            this.Numero = ObjetElement.getNumeroCreation();
                        }
                    }
                    break;
                case Enumere_Etat_1.EGenreEtat.Modification:
                    if ((this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) || (this.Etat === Enumere_Etat_1.EGenreEtat.FilsModification)) {
                        this._validationSaisie = true;
                        this.Etat = (this.Numero !== 0) && ((this.Numero !== null && this.Numero !== undefined)) ? Enumere_Etat_1.EGenreEtat.Modification : Enumere_Etat_1.EGenreEtat.Creation;
                        if (this.Numero === null || this.Numero === undefined) {
                            this.Numero = ObjetElement.getNumeroCreation();
                        }
                    }
                    break;
                case Enumere_Etat_1.EGenreEtat.Suppression:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Creation) {
                        delete this._validationSaisie;
                    } else {
                        this._validationSaisie = true;
                    }
                    this.Etat = Enumere_Etat_1.EGenreEtat.Suppression;
                    break;
                case Enumere_Etat_1.EGenreEtat.FilsModification:
                    if (this.Etat === Enumere_Etat_1.EGenreEtat.Aucun) {
                        this._validationSaisie = true;
                        this.Etat = Enumere_Etat_1.EGenreEtat.FilsModification;
                    }
                    break;
                }
                return this;
            }
            afficher() {}
            static getNumeroCreation() {
                _numeroCreation += -1;
                return _numeroCreation;
            }
            _toJSON(aElement) {
                const lNumero = aElement.getNumero()
                  , lGenre = aElement.getGenre()
                  , lLibelle = aElement.getLibelle();
                const lJSON = {};
                lJSON[ObjetElement.const_JSON.numero.JSON] = lNumero;
                if (lGenre !== undefined && lGenre !== null) {
                    lJSON[ObjetElement.const_JSON.genre.JSON] = lGenre;
                }
                if (lLibelle) {
                    lJSON[ObjetElement.const_JSON.libelle.JSON] = lLibelle;
                }
                if (aElement.Etat) {
                    lJSON[ObjetElement.const_JSON.etat.JSON] = aElement.Etat;
                }
                return lJSON;
            }
            _propToJSONHorsFormat(aSource, aCible) {
                let lProp;
                const lCible = aCible || {};
                const lKeys = Object.keys(aSource);
                for (let i = 0; i < lKeys.length; i++) {
                    lProp = lKeys[i];
                    if (aSource[lProp] !== undefined && !MethodesObjet_1.MethodesObjet.isFunction(aSource[lProp]) && lProp !== ObjetElement.const_JSON.libelle.champ && lProp !== ObjetElement.const_JSON.numero.champ && lProp !== ObjetElement.const_JSON.genre.champ && lProp !== ObjetElement.const_JSON.position.champ && lProp !== ObjetElement.const_JSON.etat.champ) {
                        lCible[lProp] = aSource[lProp];
                    }
                }
                return lCible;
            }
        }
        exports.ObjetElement = ObjetElement;
        ObjetElement.const_JSON = {
            numero: {
                JSON: 'N',
                champ: 'Numero'
            },
            libelle: {
                JSON: 'L',
                champ: 'Libelle'
            },
            genre: {
                JSON: 'G',
                champ: 'Genre'
            },
            position: {
                JSON: 'P',
                champ: 'Position'
            },
            etat: {
                JSON: 'E',
                champ: 'Etat'
            },
            actif: {
                JSON: 'A',
                champ: 'Actif'
            },
            separateurTableNumero: '#'
        };
        ObjetElement.regexNumeroExiste = `[0-9]{1,3}${ObjetElement.const_JSON.separateurTableNumero}[a-zA-Z0-9\\-_]{43}`;
        ObjetElement.regexCaptureNumero = `(0|${ObjetElement.regexNumeroExiste})`;
    },
    fn: 'objetelement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.MethodesTableau = MethodesTableau;
        require("DeclarationExtensionsObjetNatif");
        function MethodesTableau() {}
        MethodesTableau.intersection = function(aTableau1, aTableau2) {
            if (aTableau1 && aTableau1.filter) {
                return aTableau1.filter( (aElement) => {
                    return aTableau2.indexOf(aElement) !== -1;
                }
                );
            }
            let lResult = [];
            for (let i = 0; i < aTableau1.length; i++) {
                if (aTableau2.includes(aTableau1[i])) {
                    lResult.push(aTableau1[i]);
                }
            }
            return lResult;
        }
        ;
        MethodesTableau.existeIntersection = function(aTableau1, aTableau2) {
            return MethodesTableau.intersection(aTableau1, aTableau2).length > 0;
        }
        ;
        function _everyInclus(aTableauCompare, aElement) {
            return aTableauCompare.indexOf(aElement) !== -1;
        }
        MethodesTableau.inclus = function(aTableau1, aTableau2) {
            if (!Array.isArray(aTableau1) || !Array.isArray(aTableau2)) {
                return false;
            }
            if (aTableau1.every) {
                return !!aTableau1.every(_everyInclus.bind(this, aTableau2));
            }
            for (let I = 0; I < aTableau1.length; I++) {
                if (!_everyInclus(aTableau2, aTableau1[I])) {
                    return false;
                }
            }
            return true;
        }
        ;
        MethodesTableau.insererElement = function(aValeur, aTableau, aIndex) {
            if (!Array.isArray(aTableau)) {
                return false;
            }
            if (aIndex >= 0) {
                const T = aTableau.slice(aIndex);
                aTableau.length = aIndex;
                aTableau.push(aValeur);
                Array.prototype.push.apply(aTableau, T);
            } else {
                aTableau.push(aValeur);
            }
        }
        ;
        MethodesTableau.supprimerElement = function(aTableau, aIndex) {
            aTableau.splice(aIndex, 1);
        }
        ;
        MethodesTableau.remove = function(aTableau, aElement) {
            let lIndex = aTableau.indexOf(aElement);
            let lResult = false;
            while (lIndex >= 0) {
                aTableau.splice(lIndex, 1);
                lResult = true;
                lIndex = aTableau.indexOf(aElement);
            }
            return lResult;
        }
        ;
        MethodesTableau.nombreElements = function(aTableau) {
            let lNombre = 0;
            for (let i = 0; i < aTableau.length; i++) {
                let lElement = aTableau[i];
                if (lElement !== null || lElement !== undefined) {
                    lNombre++;
                }
            }
            return lNombre;
        }
        ;
        MethodesTableau.binaryIndexOf = function(aArray, aIndex) {
            if (!Array.isArray(aArray)) {
                return -1;
            }
            let lMinIndex = 0;
            let lMaxIndex = aArray.length - 1;
            let lIndexCourant;
            let lElementCourant;
            while (lMinIndex <= lMaxIndex) {
                lIndexCourant = (lMinIndex + lMaxIndex) / 2 | 0;
                lElementCourant = aArray[lIndexCourant];
                if (lElementCourant < aIndex) {
                    lMinIndex = lIndexCourant + 1;
                } else if (lElementCourant > aIndex) {
                    lMaxIndex = lIndexCourant - 1;
                } else {
                    return lIndexCourant;
                }
            }
            return -1;
        }
        ;
        MethodesTableau.indexOfMask = function(aArray, aMask) {
            let lIndice = -1;
            if (!Array.isArray(aArray)) {
                return lIndice;
            }
            if (!aMask || aArray.length === 0) {
                return lIndice;
            }
            try {
                const lKeys = Object.keys(aMask);
                if (lKeys.length > 0) {
                    aArray.every( (aElement, aIndice) => {
                        let lTrouve = true;
                        lKeys.every( (aKey) => {
                            if (aElement && (aKey in aMask) && (aKey in aElement) && (aMask[aKey] === aElement[aKey])) {
                                return true;
                            }
                            lTrouve = false;
                            return false;
                        }
                        );
                        if (lTrouve) {
                            lIndice = aIndice;
                        }
                        return lIndice < 0;
                    }
                    );
                }
            } catch (e) {
                lIndice = -1;
            }
            return lIndice;
        }
        ;
    },
    fn: 'methodestableau.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreTriElement = void 0;
        var EGenreTriElement;
        (function(EGenreTriElement) {
            EGenreTriElement[EGenreTriElement["Croissant"] = 1] = "Croissant";
            EGenreTriElement[EGenreTriElement["Decroissant"] = -1] = "Decroissant";
        }
        )(EGenreTriElement || (exports.EGenreTriElement = EGenreTriElement = {}));
    },
    fn: 'enumere_trielement.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ComparateurChaines = void 0;
        let uSupportLocaleCompare = false, uSupportCollator = !!(window.Intl && window.Intl.Collator), uLocales, uCollator = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'accent'
        }) : null, uCollatorCaseSensitive = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'variant'
        }) : null, uCollator_NonCaseSensitive_IgnoreAccent = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'base'
        }) : null, uCollator_CaseSensitive_IgnoreAccent = uSupportCollator ? new window.Intl.Collator(uLocales,{
            sensitivity: 'case'
        }) : null;
        const ComparateurChaines = {
            egal(aStrA, aStrB, aOptions) {
                return ComparateurChaines.compare(aStrA, aStrB, aOptions) === 0;
            },
            compare(aStrA, aStrB, aOptions) {
                const lOptions = Object.assign({
                    caseSensitive: false,
                    accentSensitive: false,
                    avecTrim: false,
                    unifierEspacements: false,
                    unifierCarWord: false
                }, aOptions);
                const lResult = ComparateurChaines.compareChamps(ComparateurChaines.getValeurPourTri(aStrA, lOptions), ComparateurChaines.getValeurPourTri(aStrB, lOptions), lOptions);
                return lResult === false ? 0 : lResult;
            },
            normalize(aChaine) {
                if (typeof aChaine !== 'string') {
                    return '';
                }
                if (aChaine && aChaine.normalize) {
                    return aChaine.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                }
                return ComparateurChaines.latinize(aChaine);
            },
            latinize(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(new RegExp('[' + _latinize() + ']','gi'), _latinize) : '';
            },
            getValeurPourTri(aChamp, aOptions) {
                let lResult = aChamp;
                if (!lResult) {
                    return lResult;
                }
                if (lResult.getTime) {
                    return lResult.getTime();
                }
                if (lResult.enleverEntites) {
                    lResult = lResult.enleverEntites();
                    if (!uSupportLocaleCompare && !uSupportCollator && !aOptions.accentSensitive) {
                        lResult = ComparateurChaines.normalize(lResult);
                    }
                    if (aOptions.avecTrim) {
                        lResult = lResult.trim();
                    }
                    if (aOptions.unifierEspacements) {
                        lResult = lResult.replace(/\s+/gi, ' ');
                    }
                    if (aOptions.unifierCarWord) {
                        lResult = lResult.replace(/’/g, '\'').replace(/«|»/g, '"');
                    }
                }
                if (!aOptions.caseSensitive && !uSupportCollator && !uSupportLocaleCompare && lResult && lResult.toLowerCase) {
                    lResult = lResult.toLowerCase();
                }
                return lResult;
            },
            compareChamps: function(aChampA, aChampB, aOptions) {
                const lChampAString = aChampA && aChampA.localeCompare;
                const lChampBString = aChampB && aChampB.localeCompare;
                if ((uSupportLocaleCompare || uSupportCollator) && lChampAString && lChampBString) {
                    let lResult = 0;
                    if (uSupportCollator) {
                        const lCollator = aOptions.caseSensitive ? aOptions.accentSensitive ? uCollatorCaseSensitive : uCollator_CaseSensitive_IgnoreAccent : aOptions.accentSensitive ? uCollator : uCollator_NonCaseSensitive_IgnoreAccent;
                        if (lCollator) {
                            lResult = lCollator.compare(aChampA, aChampB);
                        }
                    } else {
                        lResult = aChampA.localeCompare(aChampB, 'fr', {
                            sensitivity: (aOptions.caseSensitive ? aOptions.accentSensitive ? 'variant' : 'case' : aOptions.accentSensitive ? 'accent' : 'base')
                        });
                    }
                    if (lResult < 0) {
                        return -1;
                    }
                    if (lResult > 0) {
                        return 1;
                    }
                    return false;
                }
                const lChampANull = aChampA === undefined || aChampA === null
                  , lChampBNull = aChampB === undefined || aChampB === null;
                if (lChampANull && lChampBNull) {
                    return false;
                }
                if (lChampAString && aChampB === ComparateurChaines.MAX_STRING) {
                    return -1;
                }
                if (lChampBString && aChampA === ComparateurChaines.MAX_STRING) {
                    return 1;
                }
                if (aChampA > aChampB || lChampBNull) {
                    return 1;
                }
                if (aChampA < aChampB || lChampANull) {
                    return -1;
                }
                return false;
            },
            MAX_STRING: {
                MAX_STRING: true
            }
        };
        exports.ComparateurChaines = ComparateurChaines;
        try {
            if (''.localeCompare) {
                uSupportLocaleCompare = 'e'.localeCompare('é', 'fr', {
                    sensitivity: 'base'
                }) === 0;
            }
        } catch (e) {
            uSupportLocaleCompare = false;
        }
        let uCache_regexLatinize = null;
        function _latinize(aMatch) {
            let x;
            const lTranslate = {
                'á': 'a',
                'à': 'a',
                'â': 'a',
                'ä': 'a',
                'ã': 'a',
                'ç': 'c',
                'é': 'e',
                'è': 'e',
                'ê': 'e',
                'ë': 'e',
                'í': 'i',
                'ì': 'i',
                'î': 'i',
                'ï': 'i',
                'ñ': 'n',
                'ó': 'o',
                'ò': 'o',
                'ô': 'o',
                'ö': 'o',
                'õ': 'o',
                'ő': 'o',
                'ß': 'ss',
                'š': 'szz',
                'ú': 'u',
                'ù': 'u',
                'û': 'u',
                'ü': 'u',
                'ű': 'u',
                'ý': 'y',
                'ÿ': 'y',
                'æ': 'ae',
                'œ': 'oe'
            };
            if (!aMatch) {
                if (!uCache_regexLatinize) {
                    const lRegex = [];
                    for (x in lTranslate) {
                        lRegex.push(x);
                    }
                    uCache_regexLatinize = lRegex.join('');
                }
                return uCache_regexLatinize;
            }
            const lMatchLower = aMatch.toLowerCase();
            const lIsUpperCase = lMatchLower !== aMatch;
            return lIsUpperCase ? lTranslate[lMatchLower].ucfirst() : lTranslate[lMatchLower];
        }
    },
    fn: 'comparateurchaines.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetTri = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        const ComparateurChaines_1 = require("ComparateurChaines");
        class ObjetTri {
            static init(aNomChamp, aGenreTri, aCaseSensitive, aIgnorerAccents) {
                return {
                    estFonction: MethodesObjet_1.MethodesObjet.isFunction(aNomChamp),
                    estAccesseurChaine: typeof aNomChamp === 'string' && aNomChamp.indexOf('.') >= 0,
                    nomChamp: aNomChamp,
                    ordreTri: aGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant ? aGenreTri : Enumere_TriElement_1.EGenreTriElement.Croissant,
                    caseSensitive: aCaseSensitive === true,
                    accentSensitive: aIgnorerAccents !== true
                };
            }
            static initRecursif(aNomChampPere, aTris) {
                const lTris = aTris;
                return {
                    triRecursif: true,
                    nomChampPere: aNomChampPere,
                    tris: lTris,
                    ordreTri: Enumere_TriElement_1.EGenreTriElement.Croissant
                };
            }
            static trierTableau(aTableau, aTris) {
                if (!aTableau || !aTableau.sort || !aTris || aTableau.length < 2) {
                    return;
                }
                const lLength = aTableau.length;
                const lTableau = new Array(lLength);
                let lValeur;
                for (let i = 0; i < lLength; i++) {
                    lValeur = aTableau[i];
                    if (lValeur !== undefined || lValeur !== null) {
                        lTableau[i] = {
                            contenu: lValeur,
                            cache: [],
                            ordre: i
                        };
                    } else {
                        lTableau[i] = lValeur;
                    }
                }
                lTableau.sort( (a, b) => {
                    return ObjetTri._comparer(aTris, a, b);
                }
                );
                for (let i = 0; i < lLength; i++) {
                    lValeur = lTableau[i];
                    if (lValeur !== undefined || lValeur !== null) {
                        aTableau[i] = lValeur.contenu;
                    } else {
                        aTableau[i] = lValeur;
                    }
                }
            }
            static _construirePilePere(aValeur, aNomChampePere, aPile) {
                let lObjet = aValeur;
                while (lObjet && lObjet[aNomChampePere] && MethodesObjet_1.MethodesObjet.isObject(lObjet[aNomChampePere]) && !aPile.includes(lObjet[aNomChampePere])) {
                    lObjet = lObjet[aNomChampePere];
                    aPile.push(lObjet);
                }
            }
            static _comparerTriRecursif(A, B, aTri) {
                let lPileParentA = [A.contenu], lPileParentB = [B.contenu], i, lResult, j, lNb, lTri, lCount, lA, lB;
                if (!aTri.tris) {
                    return false;
                }
                ObjetTri._construirePilePere(A.contenu, aTri.nomChampPere, lPileParentA);
                ObjetTri._construirePilePere(B.contenu, aTri.nomChampPere, lPileParentB);
                lPileParentA.reverse();
                lPileParentB.reverse();
                lCount = Math.max(lPileParentA.length, lPileParentB.length);
                for (i = 0; i < lCount; i++) {
                    lA = lPileParentA[i];
                    lB = lPileParentB[i];
                    if ((!lA && lB) || (!lA && !lB)) {
                        return -aTri.ordreTri;
                    } else if (lA && !lB) {
                        return aTri.ordreTri;
                    } else if (lA === lB) {
                        continue;
                    }
                    for (j = 0,
                    lNb = aTri.tris.length; j < lNb; j++) {
                        lTri = aTri.tris[j];
                        lResult = ObjetTri._comparerTri(lA, lB, lTri, -1, false, i);
                        if (lResult !== false) {
                            return lResult;
                        }
                    }
                }
                return false;
            }
            static _getValeurPourTri(aTri, aElement, aProfondeur) {
                let lResult;
                if (aTri.estFonction) {
                    lResult = aTri.nomChamp(aElement, aProfondeur);
                } else if (aTri.estAccesseurChaine) {
                    lResult = MethodesObjet_1.MethodesObjet.get(aElement, aTri.nomChamp);
                } else {
                    if (!aElement) {
                        return aElement;
                    }
                    lResult = aElement[aTri.nomChamp];
                }
                return ComparateurChaines_1.ComparateurChaines.getValeurPourTri(lResult, {
                    caseSensitive: aTri.caseSensitive,
                    accentSensitive: aTri.accentSensitive
                });
            }
            static _comparerTri(A, B, aTri, aIndiceTri, aAvecCacheTri, aProfondeur) {
                let lChampTriA;
                let lChampTriB;
                if (aAvecCacheTri) {
                    if (!A.cache[aIndiceTri]) {
                        lChampTriA = ObjetTri._getValeurPourTri(aTri, A.contenu, aProfondeur);
                        A.cache[aIndiceTri] = {
                            valeur: lChampTriA
                        };
                    } else {
                        lChampTriA = A.cache[aIndiceTri].valeur;
                    }
                    if (!B.cache[aIndiceTri]) {
                        lChampTriB = ObjetTri._getValeurPourTri(aTri, B.contenu, aProfondeur);
                        B.cache[aIndiceTri] = {
                            valeur: lChampTriB
                        };
                    } else {
                        lChampTriB = B.cache[aIndiceTri].valeur;
                    }
                } else {
                    lChampTriA = ObjetTri._getValeurPourTri(aTri, A, aProfondeur);
                    lChampTriB = ObjetTri._getValeurPourTri(aTri, B, aProfondeur);
                }
                if (lChampTriA === lChampTriB || (lChampTriA === undefined && lChampTriB === null) || (lChampTriB === undefined && lChampTriA === null)) {
                    return false;
                }
                const lResult = ComparateurChaines_1.ComparateurChaines.compareChamps(lChampTriA, lChampTriB, {
                    caseSensitive: aTri.caseSensitive,
                    accentSensitive: aTri.accentSensitive
                });
                if (lResult === false) {
                    return false;
                }
                return lResult * aTri.ordreTri;
            }
            static _comparer(aTris, A, B) {
                let i, lNb, lTri, lResult;
                for (i = 0,
                lNb = aTris.length; i < lNb; i++) {
                    lTri = aTris[i];
                    if (!lTri) {
                        return 0;
                    }
                    if (lTri.triRecursif) {
                        lResult = ObjetTri._comparerTriRecursif(A, B, lTri);
                    } else {
                        lResult = ObjetTri._comparerTri(A, B, lTri, i, true, 0);
                    }
                    if (lResult !== false) {
                        return lResult;
                    }
                }
                return A.ordre - B.ordre;
            }
        }
        exports.ObjetTri = ObjetTri;
        ObjetTri.genreTri = Enumere_TriElement_1.EGenreTriElement;
    },
    fn: 'objettri.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetListeElements = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const Enumere_TriElement_1 = require("Enumere_TriElement");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetElement_1 = require("ObjetElement");
        const ComparateurChaines_1 = require("ComparateurChaines");
        class ObjetListeElements {
            constructor() {
                this.ListeElements = [];
                this._tris = null;
                this.serialisateurJSON = null;
                this.vider();
            }
            add(aElement) {
                if (aElement) {
                    if (aElement instanceof ObjetElement_1.ObjetElement) {
                        this.ListeElements.push(aElement);
                        return this;
                    }
                    if (aElement instanceof ObjetListeElements) {
                        aElement.parcourir( (a) => {
                            this.add(a);
                        }
                        );
                        return this;
                    }
                    if (Array.isArray(aElement)) {
                        aElement.forEach( (a) => {
                            this.add(a);
                        }
                        );
                        return this;
                    }
                }
                if (IE.log) {
                    IE.log.addLog('ObjetListeElements.add : aElement incorrect => ' + aElement);
                }
                return this;
            }
            get(aIndex) {
                return this.ListeElements[aIndex];
            }
            remove(aIndice) {
                if (aIndice >= 0 && MethodesObjet_1.MethodesObjet.isNumber(aIndice)) {
                    MethodesTableau_1.MethodesTableau.supprimerElement(this.ListeElements, aIndice);
                }
                return this;
            }
            pop() {
                return this.ListeElements.pop();
            }
            count() {
                return this.ListeElements.length;
            }
            vider() {
                this.ListeElements = [];
                return this;
            }
            addElement(AElement, I) {
                if (I === null || I === undefined) {
                    this.ListeElements.push(AElement);
                } else {
                    this.ListeElements[I] = AElement;
                }
                return this;
            }
            insererElement(AElement, I) {
                MethodesTableau_1.MethodesTableau.insererElement(AElement, this.ListeElements, I);
                return this;
            }
            getNbrElementsExistes(aGenre) {
                let N = 0;
                this.ListeElements.forEach( (aElement) => {
                    if (aElement.existe() && (aGenre === null || aGenre === undefined || aElement.getGenre() === aGenre)) {
                        N++;
                    }
                }
                );
                return N;
            }
            getTabListeElements() {
                return this.ListeElements;
            }
            parcourir(aFunction, aThis) {
                if (!aFunction || !MethodesObjet_1.MethodesObjet.isFunction(aFunction)) {
                    return this;
                }
                this.ListeElements.every( (aElement, aIndex) => {
                    return aFunction.call(aThis, aElement, aIndex, this) !== false;
                }
                );
                return this;
            }
            getTableau(aFunction) {
                const T = [];
                if (!aFunction || !MethodesObjet_1.MethodesObjet.isFunction(aFunction)) {
                    return T;
                }
                this.ListeElements.forEach( (aElement, aIndex) => {
                    T.push(aFunction(aElement, aIndex));
                }
                );
                return T;
            }
            removeFilter(aFilter) {
                if (aFilter && MethodesObjet_1.MethodesObjet.isFunction(aFilter)) {
                    const lTab = [];
                    this.ListeElements.forEach( (aElement, aIndex) => {
                        if (aFilter(aElement, aIndex) !== true) {
                            lTab.push(aElement);
                        }
                    }
                    );
                    this.ListeElements = lTab;
                }
                return this;
            }
            getTableauLibelles(aGenre, aTrier, aAvecExiste) {
                const T = [];
                if (aTrier) {
                    this.trier();
                }
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if ((aGenre === null || aGenre === undefined) || (MethodesObjet_1.MethodesObjet.isNumeric(aGenre) && aGenre === this.getGenre(I)) || (Array.isArray(aGenre) && aGenre.includes(this.getGenre(I)))) {
                        if (!aAvecExiste || this.existe(I)) {
                            T.push(this.getLibelle(I) || '');
                        }
                    }
                }
                return T;
            }
            getTableauNumeros(aAvecExiste) {
                const T = [];
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if (!aAvecExiste || this.existe(I)) {
                        T.push(this.getNumero(I));
                    }
                }
                return T;
            }
            getTableauGenres() {
                const T = [];
                for (let I = 0; I < this.ListeElements.length; I++) {
                    T.push(this.getGenre(I));
                }
                return T;
            }
            getCle() {
                return this.getTableauNumeros().sort().join('_');
            }
            getListeElements(aFiltre) {
                const lListe = new ObjetListeElements();
                for (let I = 0; I < this.ListeElements.length; I++) {
                    if (!aFiltre || aFiltre(this.ListeElements[I], I)) {
                        lListe.addElement(this.ListeElements[I]);
                    }
                }
                return lListe;
            }
            getElementParFiltre(aFiltre) {
                return this.get(this.getIndiceElementParFiltre(aFiltre));
            }
            getIndiceElementParFiltre(aFiltre) {
                let lResult = -1;
                for (let I = 0; I < this.ListeElements.length && lResult < 0; I++) {
                    if (!aFiltre || aFiltre(this.ListeElements[I])) {
                        lResult = I;
                    }
                }
                return lResult;
            }
            getElementParNumero(ANumero) {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.existe(I) && (this.getNumero(I) === ANumero)) {
                        return this.get(I);
                    }
                }
            }
            getListeElementsParNumero(aNumero) {
                const lListe = new ObjetListeElements();
                this.parcourir( (aElement) => {
                    if (aElement && aElement.existe() && (aElement.getNumero() === aNumero)) {
                        lListe.addElement(aElement);
                    }
                }
                );
                return lListe;
            }
            getElementParGenre(aGenre) {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.existe(I) && (this.getGenre(I) === aGenre)) {
                        return this.get(I);
                    }
                }
            }
            getNumero(I) {
                return this.ListeElements[I].Numero;
            }
            getGenre(I) {
                return this.ListeElements[I].Genre;
            }
            getLibelle(I) {
                return this.ListeElements[I].Libelle;
            }
            getActif(I) {
                return this.ListeElements[I].Actif;
            }
            getPosition(I) {
                return this.ListeElements[I].Position;
            }
            existeNumero(I) {
                const N = this.getNumero(I);
                return !!(N && (N !== '0'));
            }
            existe(I) {
                return this.ListeElements[I].existe();
            }
            pourValidation(I) {
                return this.ListeElements[I].pourValidation();
            }
            setLibelle(I, ALibelle) {
                this.ListeElements[I].Libelle = ALibelle;
            }
            trierPourValidation() {
                ObjetTri_1.ObjetTri.trierTableau(this.ListeElements, [ObjetTri_1.ObjetTri.init('Etat')]);
            }
            existeElementPourValidation() {
                for (let I = 0, lNb = this.count(); I < lNb; I++) {
                    if (this.pourValidation(I)) {
                        return true;
                    }
                }
                return false;
            }
            setTri(aTableauTris) {
                this._tris = aTableauTris;
                return this;
            }
            getTri() {
                return this._tris;
            }
            trier(aGenreTri) {
                if (this.ListeElements) {
                    const lGenreTri = aGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant ? aGenreTri : Enumere_TriElement_1.EGenreTriElement.Croissant;
                    if (!this._tris) {
                        this.setTri([ObjetTri_1.ObjetTri.init('Position'), ObjetTri_1.ObjetTri.init('Libelle')]);
                    }
                    const lTris = this._tris !== null ? [].concat(this._tris) : [];
                    lTris.unshift(ObjetTri_1.ObjetTri.init( (aElement) => {
                        return (aElement.Visible === false) || (aElement.getEtat() === Enumere_Etat_1.EGenreEtat.Suppression);
                    }
                    , lGenreTri));
                    ObjetTri_1.ObjetTri.trierTableau(this.ListeElements, lTris);
                    if (lGenreTri === Enumere_TriElement_1.EGenreTriElement.Decroissant) {
                        this.ListeElements.reverse();
                    }
                }
                return this;
            }
            getIndiceParNumeroEtGenre(ANumero, AGenre, aAvecExiste) {
                if (this.ListeElements && (((ANumero !== null && ANumero !== undefined)) || ((AGenre !== null && AGenre !== undefined)))) {
                    const N = this.count();
                    for (let I = 0; I < N; I++) {
                        const lElement = this.ListeElements[I];
                        if (lElement && lElement.egalParNumeroEtGenre(ANumero, AGenre, aAvecExiste)) {
                            return I;
                        }
                    }
                }
            }
            getIndiceExisteParNumeroEtGenre(ANumero, AGenre) {
                if (this.ListeElements && (((ANumero !== null && ANumero !== undefined)) || ((AGenre !== null && AGenre !== undefined)))) {
                    const N = this.count();
                    let J = -1;
                    for (let I = 0; I < N; I++) {
                        if (this.existe(I)) {
                            J++;
                            if (((ANumero === null || ANumero === undefined) || (this.getNumero(I) === ANumero)) && ((AGenre === null || AGenre === undefined) || (this.getGenre(I) === AGenre))) {
                                return J;
                            }
                        }
                    }
                }
            }
            getElementParNumeroEtGenre(ANumero, AGenre, aAvecExiste) {
                const lIndice = this.getIndiceParNumeroEtGenre(ANumero, AGenre, aAvecExiste);
                if (lIndice !== undefined) {
                    return this.get(lIndice);
                }
            }
            getIndiceParElement(aElement, aAvecExiste) {
                return aElement ? this.getIndiceParNumeroEtGenre(aElement.getNumero(), aElement.getGenre(), aAvecExiste) : null;
            }
            getIndiceExisteParElement(aElement) {
                return this.getIndiceExisteParNumeroEtGenre(aElement.getNumero(), aElement.getGenre());
            }
            getElementParElement(aElement, aAvecExiste) {
                const lIndice = this.getIndiceParElement(aElement, aAvecExiste);
                if (lIndice !== undefined && lIndice !== null) {
                    return this.get(lIndice);
                }
            }
            getIndiceParLibelle(ALibelle) {
                if (this.ListeElements) {
                    const N = this.count();
                    for (let I = 0; I < N; I++) {
                        if (this.getLibelle(I) === ALibelle) {
                            return I;
                        }
                    }
                }
            }
            getIndiceParParsingLibelle(aLibelle) {
                if (!this.ListeElements) {
                    return -1;
                }
                if (!aLibelle || aLibelle.length === 0 || !MethodesObjet_1.MethodesObjet.isString(aLibelle)) {
                    return 0;
                }
                const N = this.count();
                let lIndice = 0;
                for (let I = 0; I < N; I++) {
                    const lLibelle = this.getLibelle(I);
                    if (ComparateurChaines_1.ComparateurChaines.compare(lLibelle, aLibelle) < 0) {
                        lIndice++;
                    } else {
                        break;
                    }
                }
                return lIndice >= N ? lIndice - 1 : lIndice;
            }
            getElementParLibelle(ALibelle) {
                const lIndice = this.getIndiceParLibelle(ALibelle);
                if (lIndice !== undefined) {
                    return this.get(lIndice);
                }
                return undefined;
            }
            getPremierElement() {
                let lResult;
                for (let i = 0, lNb = this.count(); i < lNb && !lResult; i++) {
                    if (this.existe(i)) {
                        lResult = this.get(i);
                    }
                }
                return lResult;
            }
            getDernierElement() {
                return this.get(this.count() - 1);
            }
            listeIdentiqueParElementsOrdonnes(aListeElements) {
                if (!aListeElements || !aListeElements.count) {
                    return false;
                }
                if (this === aListeElements) {
                    return true;
                }
                if (this.count() !== aListeElements.count()) {
                    return false;
                }
                let lResult = true;
                this.parcourir( (aElement, aIndice) => {
                    const lElement = aListeElements.get(aIndice);
                    if ((lElement && aElement && lElement.egalParNumeroEtGenre(aElement.getNumero(), aElement.getGenre()))) {
                        return;
                    }
                    lResult = false;
                    return false;
                }
                );
                return lResult;
            }
            setSerialisateurJSON(aSerialisateur) {
                if (!this.serialisateurJSON) {
                    this.serialisateurJSON = {
                        ignorerEtatsElements: false,
                        methodeSerialisation: undefined,
                        nePasTrierPourValidation: false,
                        avecLibelle: true
                    };
                }
                Object.assign(this.serialisateurJSON, aSerialisateur);
                return this;
            }
            toJSON() {
                let I, lNb, lAvecSerialisation = !!(this.serialisateurJSON && this.serialisateurJSON.methodeSerialisation), lResult = [], lListe = new ObjetListeElements();
                lListe.add(this);
                if (!this.serialisateurJSON || !this.serialisateurJSON.nePasTrierPourValidation) {
                    lListe.trierPourValidation();
                }
                for (I = 0,
                lNb = lListe.count(); I < lNb; I++) {
                    const lElement = lListe.get(I);
                    if (lElement) {
                        let lExisteElement = (this.serialisateurJSON && this.serialisateurJSON.ignorerEtatsElements) || lElement.pourValidation();
                        let lJSONElement = null;
                        if (lExisteElement || lAvecSerialisation) {
                            lJSONElement = lElement.toJSON();
                            if (this.serialisateurJSON && !this.serialisateurJSON.avecLibelle) {
                                delete lJSONElement[ObjetElement_1.ObjetElement.const_JSON.libelle.JSON];
                            }
                            if (lAvecSerialisation && this.serialisateurJSON && typeof this.serialisateurJSON.methodeSerialisation === 'function') {
                                const lGarderElement = this.serialisateurJSON.methodeSerialisation(lElement, lJSONElement, I);
                                lExisteElement = lGarderElement === null || lGarderElement === undefined ? lExisteElement : lGarderElement;
                            }
                        }
                        if (lExisteElement && lJSONElement) {
                            lResult.push(lJSONElement);
                        }
                    }
                }
                return lResult;
            }
            fromJSON(aJSON, aMethodeDeserialisation, aTrier) {
                if (!aJSON || !MethodesObjet_1.MethodesObjet.isArray(aJSON)) {
                    return this;
                }
                for (let i = 0, lNb = aJSON.length; i < lNb; i++) {
                    const lElement = new ObjetElement_1.ObjetElement().fromJSON(aJSON[i]);
                    if (!aMethodeDeserialisation || (aMethodeDeserialisation(aJSON[i], lElement, i) !== false)) {
                        this.addElement(lElement);
                    }
                }
                if (aTrier) {
                    this.trier();
                }
                return this;
            }
            [Symbol.iterator]() {
                let lIndex = 0;
                return {
                    next: () => {
                        lIndex += 1;
                        const lDone = lIndex > this.ListeElements.length;
                        return {
                            done: lDone,
                            value: lDone ? undefined : this.ListeElements[lIndex - 1]
                        };
                    }
                };
            }
        }
        exports.ObjetListeElements = ObjetListeElements;
    },
    fn: 'objetlisteelements.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpVariable = void 0;
        var TypeHttpVariable;
        (function(TypeHttpVariable) {
            TypeHttpVariable[TypeHttpVariable["TypeHttpCategorie"] = 0] = "TypeHttpCategorie";
            TypeHttpVariable[TypeHttpVariable["TypeHttpCardinal"] = 1] = "TypeHttpCardinal";
            TypeHttpVariable[TypeHttpVariable["TypeHttpBoolean"] = 2] = "TypeHttpBoolean";
            TypeHttpVariable[TypeHttpVariable["TypeHttpString"] = 3] = "TypeHttpString";
            TypeHttpVariable[TypeHttpVariable["TypeHttpColor"] = 4] = "TypeHttpColor";
            TypeHttpVariable[TypeHttpVariable["TypeHttpAlignment_Inutilise"] = 5] = "TypeHttpAlignment_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpFontStyles_Inutilise"] = 6] = "TypeHttpFontStyles_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDateTime"] = 7] = "TypeHttpDateTime";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDomaine"] = 8] = "TypeHttpDomaine";
            TypeHttpVariable[TypeHttpVariable["TypeHttpTraduction"] = 9] = "TypeHttpTraduction";
            TypeHttpVariable[TypeHttpVariable["TypeHttpNote"] = 10] = "TypeHttpNote";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsembleCardinal"] = 11] = "TypeHttpEnsembleCardinal";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpLongNote_Inutilise"] = 12] = "_TypeHttpLongNote_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpDouble"] = 13] = "TypeHttpDouble";
            TypeHttpVariable[TypeHttpVariable["TypeHttpArrondi"] = 14] = "TypeHttpArrondi";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsemble"] = 15] = "TypeHttpEnsemble";
            TypeHttpVariable[TypeHttpVariable["TypeHttpIP"] = 16] = "TypeHttpIP";
            TypeHttpVariable[TypeHttpVariable["TypeHttpUrl"] = 17] = "TypeHttpUrl";
            TypeHttpVariable[TypeHttpVariable["TypeHttpSetOf_MrFiche"] = 18] = "TypeHttpSetOf_MrFiche";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpDoubleNote_Inutilise"] = 19] = "_TypeHttpDoubleNote_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpInteger"] = 20] = "TypeHttpInteger";
            TypeHttpVariable[TypeHttpVariable["TypeHttpHtml"] = 21] = "TypeHttpHtml";
            TypeHttpVariable[TypeHttpVariable["_TypeHttpJSON_Inutilise"] = 22] = "_TypeHttpJSON_Inutilise";
            TypeHttpVariable[TypeHttpVariable["TypeHttpChaineBrute"] = 23] = "TypeHttpChaineBrute";
            TypeHttpVariable[TypeHttpVariable["TypeHttpElement"] = 24] = "TypeHttpElement";
            TypeHttpVariable[TypeHttpVariable["TypeHttpFichierBase64"] = 25] = "TypeHttpFichierBase64";
            TypeHttpVariable[TypeHttpVariable["TypeHttpEnsembleNombre"] = 26] = "TypeHttpEnsembleNombre";
            TypeHttpVariable[TypeHttpVariable["TypeHttpHtmlSafe"] = 27] = "TypeHttpHtmlSafe";
        }
        )(TypeHttpVariable || (exports.TypeHttpVariable = TypeHttpVariable = {}));
    },
    fn: 'typehttpvariable.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeDomaine = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const ObjetElement_1 = require("ObjetElement");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const ObjetListeElements_1 = require("ObjetListeElements");
        var ValeurSemaine;
        (function(ValeurSemaine) {
            ValeurSemaine["plein"] = "1";
            ValeurSemaine["vide"] = "0";
        }
        )(ValeurSemaine || (ValeurSemaine = {}));
        class TypeDomaine {
            constructor(AValeurParDefaut, ANombreValeurs) {
                this.nombreValeurs = ANombreValeurs ? ANombreValeurs : TypeDomaine.C_MaxDomaineCycle;
                AValeurParDefaut = (AValeurParDefaut === null) || AValeurParDefaut === undefined || (AValeurParDefaut === '') ? '[]' : AValeurParDefaut;
                this.Domaine = this._getDomaine(AValeurParDefaut, this.nombreValeurs);
                this.cache = {};
            }
            strToDomaine(aChaine, aNombreValeurs) {
                if (!((aChaine.charAt(0) === '[') && (aChaine.charAt(aChaine.length - 1) === ']'))) {
                    const lTab = aChaine.split('');
                    if (aNombreValeurs !== null && aNombreValeurs >= 0) {
                        lTab.length = aNombreValeurs;
                    }
                    return lTab.map( (aVal) => aVal === ValeurSemaine.plein ? ValeurSemaine.plein : ValeurSemaine.vide);
                }
                aChaine = aChaine.substring(1, aChaine.length - 1);
                const R = new Array(aNombreValeurs !== TypeDomaine.CTailleOuverte ? aNombreValeurs : 0);
                const T1 = aChaine.split(',');
                for (let I = 0; I < T1.length; I++) {
                    const T2 = T1[I].split('..');
                    const V1 = parseInt(T2[0]);
                    const V2 = T2.length === 1 ? V1 : parseInt(T2[1]);
                    for (let J = V1; J <= V2; J++) {
                        R[J - 1] = ValeurSemaine.plein;
                    }
                }
                if (this.nombreValeurs !== TypeDomaine.CTailleOuverte) {
                    this.nombreValeurs = R.length;
                }
                return R;
            }
            toString() {
                let S = ''
                  , N = 0;
                for (let I = 0; I <= this.Domaine.length; I++) {
                    if (this.Domaine[I] === ValeurSemaine.plein) {
                        N++;
                    } else if (N > 0) {
                        if (S.length) {
                            S += ',';
                        }
                        if (N > 1) {
                            S += (I + 1 - N) + '..';
                        }
                        S += (I);
                        N = 0;
                    }
                }
                return '[' + S + ']';
            }
            vider() {
                this.cache = {};
                this.setValeur(false, 1, this.getTaille());
                return this;
            }
            estVide() {
                return this.getNbrValeurs(true) === 0;
            }
            setValeur(AValeur, ADeb, AFin) {
                if ((ADeb > this.getTaille()) && (this.nombreValeurs !== TypeDomaine.CTailleOuverte)) {
                    return;
                }
                this.cache = {};
                if (this.nombreValeurs !== TypeDomaine.CTailleOuverte) {
                    ADeb = Math.borner(ADeb, 1, this.getTaille());
                    AFin = Math.borner(AFin === null || AFin === undefined ? ADeb : AFin, 1, this.getTaille());
                } else {
                    ADeb = Math.max(ADeb, 1);
                    AFin = AFin === null || AFin === undefined ? ADeb : Math.max(ADeb, AFin);
                }
                for (let I = ADeb - 1; I < AFin; I++) {
                    this.Domaine[I] = AValeur ? ValeurSemaine.plein : ValeurSemaine.vide;
                }
                return this;
            }
            getValeur(APos) {
                return this.Domaine[APos - 1] === ValeurSemaine.plein;
            }
            getPremierePosition(aValeur) {
                for (let I = 0; I < this.Domaine.length; I++) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (aValeur === false ? ValeurSemaine.vide : ValeurSemaine.plein)) {
                        return I + 1;
                    }
                }
                return -1;
            }
            enListeDomainesContinues() {
                const lResult = new ObjetListeElements_1.ObjetListeElements();
                let lValeurPrecedente;
                let lPeriode = new ObjetElement_1.ObjetElement('');
                for (let I = 0; I < this.Domaine.length; I++) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (ValeurSemaine.plein)) {
                        if (lPeriode.debut === undefined) {
                            lPeriode.debut = I + 1;
                        }
                        if (lValeurPrecedente === ValeurSemaine.plein || lPeriode.fin === undefined) {
                            lPeriode.fin = I + 1;
                        }
                    } else {
                        if (lPeriode.debut !== undefined) {
                            lResult.addElement(lPeriode);
                        }
                        lPeriode = new ObjetElement_1.ObjetElement('');
                    }
                    lValeurPrecedente = lValeur;
                }
                if (lPeriode.debut !== undefined) {
                    lResult.addElement(lPeriode);
                }
                return lResult;
            }
            getDernierePosition(aValeur) {
                for (let I = this.Domaine.length - 1; I >= 0; I--) {
                    const lValeur = this.Domaine[I] === null || this.Domaine[I] === undefined ? ValeurSemaine.vide : this.Domaine[I];
                    if (lValeur === (aValeur === false ? ValeurSemaine.vide : ValeurSemaine.plein)) {
                        return I + 1;
                    }
                }
                return -1;
            }
            getNbrValeurs(AValeur) {
                let N = 0;
                const LValeur = AValeur || (AValeur === null) || AValeur === undefined ? ValeurSemaine.plein : ValeurSemaine.vide;
                if (this.cache['GetNbrValeurs_' + LValeur] !== undefined) {
                    return this.cache['GetNbrValeurs_' + LValeur];
                }
                for (let I = 0; I < this.Domaine.length; I++) {
                    if (this.Domaine[I] === LValeur) {
                        N++;
                    }
                }
                this.cache['GetNbrValeurs_' + LValeur] = N;
                return N;
            }
            estUnNombre() {
                return this.getNbrValeurs(true) <= 1;
            }
            getNombre() {
                return this.getNbrValeurs(true) === 1 ? this.getPremierePosition(true) : 0;
            }
            getTaille() {
                return this.Domaine.length;
            }
            getIntersection(aDomaine) {
                if (!aDomaine) {
                    return MethodesObjet_1.MethodesObjet.dupliquer(this);
                }
                const lTaille = Math.min(this.getTaille(), aDomaine.getTaille());
                const lIntersect = new TypeDomaine(null,lTaille);
                for (let I = 1; I <= lTaille; I++) {
                    if (this.getValeur(I) && aDomaine.getValeur(I)) {
                        lIntersect.setValeur(true, I);
                    }
                }
                return lIntersect;
            }
            getInversion() {
                const lTaille = this.getTaille();
                const lInversion = new TypeDomaine(null,lTaille);
                for (let I = 1; I <= lTaille; I++) {
                    lInversion.setValeur(!this.getValeur(I), I);
                }
                return lInversion;
            }
            getDomaineSoustraction(aDomaineASoustraire) {
                const lDomaine = MethodesObjet_1.MethodesObjet.dupliquer(this);
                if (!aDomaineASoustraire || !aDomaineASoustraire.getTaille || !aDomaineASoustraire.getValeur) {
                    return lDomaine;
                }
                for (let I = 1, lTaille = aDomaineASoustraire.getTaille(); I <= lTaille; I++) {
                    if (aDomaineASoustraire.getValeur(I)) {
                        lDomaine.setValeur(false, I);
                    }
                }
                return lDomaine;
            }
            getDomaineUnion(aDomaineAAjouter) {
                const lDomaine = MethodesObjet_1.MethodesObjet.dupliquer(this);
                if (!aDomaineAAjouter) {
                    return lDomaine;
                }
                for (let I = 1, lTaille = aDomaineAAjouter.getTaille(); I <= lTaille; I++) {
                    if (aDomaineAAjouter.getValeur(I)) {
                        lDomaine.setValeur(true, I);
                    }
                }
                return lDomaine;
            }
            egal(aDomaine) {
                if (!aDomaine || !aDomaine.getTaille || !aDomaine.getValeur) {
                    return false;
                }
                for (let I = 1, lTaille = this.getTaille(); I <= lTaille; I++) {
                    if (this.getValeur(I) !== aDomaine.getValeur(I)) {
                        return false;
                    }
                }
                return true;
            }
            getSemaines() {
                if (this.cache['getSemaines'] !== undefined) {
                    return this.cache['getSemaines'];
                }
                const lTaille = this.getTaille();
                const lSemaines = [];
                for (let I = 1; I <= lTaille; I++) {
                    if (this.getValeur(I)) {
                        lSemaines.push(I);
                    }
                }
                this.cache['getSemaines'] = lSemaines;
                return lSemaines;
            }
            dupliquer() {
                const lDomaine = new TypeDomaine(null,this.nombreValeurs);
                lDomaine.Domaine = [].concat(this.Domaine);
                return lDomaine;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpDomaine;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
            _getDomaine(AValeurParDefaut, ANombreValeurs) {
                const lType = typeof AValeurParDefaut;
                let D;
                if ((lType !== 'object') && (lType !== 'string')) {
                    D = new Array(1 + (ANombreValeurs === null || ANombreValeurs === undefined ? TypeDomaine.C_MaxDomaineCycle : ANombreValeurs)).join((lType === 'boolean') && AValeurParDefaut ? ValeurSemaine.plein : ValeurSemaine.vide).split('');
                }
                switch (lType) {
                case 'number':
                    D[AValeurParDefaut - 1] = ValeurSemaine.plein;
                    return D;
                case 'string':
                    return this.strToDomaine(AValeurParDefaut, ANombreValeurs);
                case 'boolean':
                    return D;
                default:
                    return D;
                }
            }
        }
        exports.TypeDomaine = TypeDomaine;
        TypeDomaine.CTailleOuverte = -1;
        TypeDomaine.C_MaxDomaineCycle = 62;
    },
    fn: 'typedomaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GTraductions = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        require("Divers.js");
        const trad = require('traductions.js');
        class ObjetTraduction {
            getValeur(aNom, aTableauRemplacements) {
                return this._getValeur(aNom, aTableauRemplacements);
            }
            getTabValeurs(aNom) {
                const lVal = this._getValeur(aNom);
                if (Array.isArray(lVal)) {
                    return lVal;
                }
                ;return lVal;
            }
            hasTabValeurs(aNom) {
                let lValeur = MethodesObjet_1.MethodesObjet.get(this, aNom);
                return !!lValeur && Array.isArray(lValeur);
            }
            getTitreMFiche(aIdRessource) {
                const lChaine = this.getValeur(aIdRessource);
                if (lChaine !== '' && typeof lChaine === 'string') {
                    const lJson = JSON.parse(lChaine);
                    if (lJson && lJson.titre) {
                        return lJson.titre;
                    } else {}
                } else {}
            }
            _getValeur(aNom, aTableauRemplacements) {
                let lValeur = MethodesObjet_1.MethodesObjet.get(this, aNom);
                if (!lValeur && !MethodesObjet_1.MethodesObjet.isString(lValeur)) {
                    return lValeur || '';
                }
                if (aTableauRemplacements) {
                    if (typeof lValeur === 'string') {
                        lValeur = lValeur.format(aTableauRemplacements);
                    } else {}
                }
                return lValeur;
            }
            add(aNom, aValeur, aAccepteTableau) {
                try {
                    let lNomDernierNoeud = aNom;
                    let lObjet = this;
                    if (aNom.indexOf('.') > 0) {
                        const T = aNom.split('.');
                        for (let J = 0; J < T.length - 1; J++) {
                            const lProp = aNom.split('.')[J];
                            if (!lObjet[lProp]) {
                                lObjet[lProp] = new ObjetTraduction();
                            }
                            lObjet = lObjet[lProp];
                        }
                        if (T.length > 0) {
                            lNomDernierNoeud = aNom.split('.')[T.length - 1];
                        }
                    }
                    if (MethodesObjet_1.MethodesObjet.isString(lObjet)) {
                        return;
                    }
                    if (lObjet[lNomDernierNoeud] || lObjet[lNomDernierNoeud] === '') {
                        if (MethodesObjet_1.MethodesObjet.isString(lObjet[lNomDernierNoeud])) {
                            lObjet[lNomDernierNoeud] = [lObjet[lNomDernierNoeud]];
                        }
                        lObjet[lNomDernierNoeud].push(aValeur || '');
                    } else {
                        lObjet[lNomDernierNoeud] = aValeur || '';
                    }
                } catch (e) {}
            }
            _passerEnCleDeTraductionsDEBUG(aChaine) {}
        }
        const GTraductions = new ObjetTraduction();
        exports.GTraductions = GTraductions;
        if (trad) {
            const lFunc = function(aNom, aValeur, aAccepteTableau) {
                GTraductions.add(aNom, aValeur, aAccepteTableau);
            };
            trad(lFunc);
        }
    },
    fn: 'objettraduction.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAnnotation = void 0;
        var EGenreAnnotation;
        (function(EGenreAnnotation) {
            EGenreAnnotation[EGenreAnnotation["erreur"] = -1] = "erreur";
            EGenreAnnotation[EGenreAnnotation["note"] = 0] = "note";
            EGenreAnnotation[EGenreAnnotation["absent"] = 1] = "absent";
            EGenreAnnotation[EGenreAnnotation["dispense"] = 2] = "dispense";
            EGenreAnnotation[EGenreAnnotation["nonNote"] = 3] = "nonNote";
            EGenreAnnotation[EGenreAnnotation["inapte"] = 4] = "inapte";
            EGenreAnnotation[EGenreAnnotation["nonRendu"] = 5] = "nonRendu";
            EGenreAnnotation[EGenreAnnotation["absentZero"] = 6] = "absentZero";
            EGenreAnnotation[EGenreAnnotation["nonRenduZero"] = 7] = "nonRenduZero";
            EGenreAnnotation[EGenreAnnotation["felicitations"] = 8] = "felicitations";
        }
        )(EGenreAnnotation || (exports.EGenreAnnotation = EGenreAnnotation = {}));
    },
    fn: 'enumere_annotation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ToucheClavierUtil = exports.ToucheClavier = void 0;
        const ToucheClavier = {
            Backspace: 8,
            Tab: 9,
            RetourChariot: 13,
            Espace: 32,
            Shift: 16,
            Ctrl: 17,
            Alt: 18,
            Windows: 91,
            ContextMenu: 93,
            Echap: 27,
            FlecheGauche: 37,
            FlecheDroite: 39,
            FlecheHaut: 38,
            FlecheBas: 40,
            Inserer: 45,
            Supprimer: 46,
            Debut: 36,
            Fin: 35,
            PageHaut: 33,
            PageBas: 34,
            _0: 48,
            _1: 49,
            _2: 50,
            _3: 51,
            _4: 52,
            _5: 53,
            _6: 54,
            _7: 55,
            _8: 56,
            _9: 57,
            A: 65,
            B: 66,
            C: 67,
            D: 68,
            E: 69,
            F: 70,
            G: 71,
            H: 72,
            I: 73,
            J: 74,
            K: 75,
            L: 76,
            M: 77,
            N: 78,
            O: 79,
            P: 80,
            Q: 81,
            R: 82,
            S: 83,
            T: 84,
            U: 85,
            V: 86,
            W: 87,
            X: 88,
            Y: 89,
            Z: 90,
            AccoladeDroite: 222,
            AccoladeGauche: 220,
            Dollar: 223,
            CrochetGauche: 186,
            CrochetDroite: 192,
            Circonflexe: 221,
            PointInterrogation: 219,
            VerrMaj: 20,
            VerrNum: 144,
            F1: 115,
            F3: 114,
            F2: 113,
            F5: 116,
            F6: 117,
            F7: 118,
            F8: 119,
            F9: 120,
            F10: 121,
            F11: 122,
            F12: 123,
            ArretDefilement: 145,
            Pause: 19,
            Inferieur: 226,
            Virgule: 188,
            Tiret: 189,
            Point: 190,
            Section: 191,
            NumpadPlus: 107,
            NumpadMoins: 109,
            NumpadSlash: 111,
            NumpadStar: 106,
            Numpad_0: 96,
            Numpad_1: 97,
            Numpad_2: 98,
            Numpad_3: 99,
            Numpad_4: 100,
            Numpad_5: 101,
            Numpad_6: 102,
            Numpad_7: 103,
            Numpad_8: 104,
            Numpad_9: 105,
            NumpadPoint: 110
        };
        exports.ToucheClavier = ToucheClavier;
        const ToucheClavierUtil = {
            estCaractere(aChar, aRegExp) {
                return (aChar === '') || new RegExp('[' + aRegExp + ']').test(aChar);
            },
            estEventRetourChariot(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.RetourChariot && !aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey;
            },
            estEventEspace(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.Espace && !aEventJQuery.shiftKey;
            },
            estEventSelection(aEventJQuery) {
                return (ToucheClavierUtil.estEventRetourChariot(aEventJQuery) || ToucheClavierUtil.estEventEspace(aEventJQuery));
            },
            estEventEdition(aEventJQuery) {
                return !!aEventJQuery && aEventJQuery.which === ToucheClavier.RetourChariot && aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey;
            },
            estEventSupprimer(aEventJQuery) {
                return aEventJQuery && ((aEventJQuery.which === ToucheClavier.Supprimer && !aEventJQuery.shiftKey && !aEventJQuery.altKey && !aEventJQuery.ctrlKey) || (aEventJQuery.which === ToucheClavier.Backspace && aEventJQuery.metaKey));
            },
            estEventCaractereAlphaNumerique(aEventJQuery) {
                return !!aEventJQuery && !aEventJQuery.altKey && !aEventJQuery.ctrlKey && (new RegExp('[0-9.a-z.A-Z]').test(String.fromCharCode(aEventJQuery.which)));
            },
            estToucheFleche(aTouche) {
                return aTouche === ToucheClavier.FlecheBas || aTouche === ToucheClavier.FlecheHaut || aTouche === ToucheClavier.FlecheGauche || aTouche === ToucheClavier.FlecheDroite;
            },
            ToucheRetourNavigation: ToucheClavier.Echap
        };
        exports.ToucheClavierUtil = ToucheClavierUtil;
    },
    fn: 'toucheclavier.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("purify.min.js");
        require("purify.js");
    },
    fn: 'declarationdompurify.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDocumentJoint = void 0;
        var EGenreDocumentJoint;
        (function(EGenreDocumentJoint) {
            EGenreDocumentJoint[EGenreDocumentJoint["Url"] = 0] = "Url";
            EGenreDocumentJoint[EGenreDocumentJoint["Fichier"] = 1] = "Fichier";
            EGenreDocumentJoint[EGenreDocumentJoint["Cloud"] = 2] = "Cloud";
            EGenreDocumentJoint[EGenreDocumentJoint["LienKiosque"] = 3] = "LienKiosque";
            EGenreDocumentJoint[EGenreDocumentJoint["LienVisio"] = 4] = "LienVisio";
        }
        )(EGenreDocumentJoint || (exports.EGenreDocumentJoint = EGenreDocumentJoint = {}));
    },
    fn: 'enumere_documentjoint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EFormatDocJointUtil = exports.EFormatDocJoint = void 0;
        var EFormatDocJoint;
        (function(EFormatDocJoint) {
            EFormatDocJoint[EFormatDocJoint["Inconnu"] = 0] = "Inconnu";
            EFormatDocJoint[EFormatDocJoint["Texte"] = 1] = "Texte";
            EFormatDocJoint[EFormatDocJoint["Pdf"] = 2] = "Pdf";
            EFormatDocJoint[EFormatDocJoint["Excel"] = 3] = "Excel";
            EFormatDocJoint[EFormatDocJoint["Archive"] = 4] = "Archive";
            EFormatDocJoint[EFormatDocJoint["Image"] = 5] = "Image";
            EFormatDocJoint[EFormatDocJoint["Son"] = 6] = "Son";
            EFormatDocJoint[EFormatDocJoint["Video"] = 7] = "Video";
            EFormatDocJoint[EFormatDocJoint["Diapo"] = 8] = "Diapo";
            EFormatDocJoint[EFormatDocJoint["Geogebra"] = 9] = "Geogebra";
        }
        )(EFormatDocJoint || (exports.EFormatDocJoint = EFormatDocJoint = {}));
        const EFormatDocJointUtil = {
            getClassImgDeGenre(aGenre) {
                switch (aGenre) {
                case EFormatDocJoint.Texte:
                    return 'Image_FormatTexte';
                case EFormatDocJoint.Pdf:
                    return 'Image_FormatPDF';
                case EFormatDocJoint.Excel:
                    return 'Image_FormatExcel';
                case EFormatDocJoint.Archive:
                    return 'Image_FormatArch';
                case EFormatDocJoint.Image:
                    return 'Image_FormatImg';
                case EFormatDocJoint.Son:
                    return 'Image_FormatSon';
                case EFormatDocJoint.Video:
                    return 'Image_FormatVideo';
                case EFormatDocJoint.Diapo:
                    return 'Image_FormatPPT';
                case EFormatDocJoint.Geogebra:
                    return 'Image_FormatGGB';
                }
                return 'Image_FormatInconnu';
            },
            getGenreDExtension(aExtension) {
                switch (aExtension) {
                case 'doc':
                case 'docx':
                case 'txt':
                    return EFormatDocJoint.Texte;
                case 'pdf':
                    return EFormatDocJoint.Pdf;
                case 'gzip':
                case 'zip':
                case 'rar':
                    return EFormatDocJoint.Archive;
                case 'xls':
                case 'xlsx':
                    return EFormatDocJoint.Excel;
                case 'png':
                case 'mng':
                case 'tiff':
                case 'jpeg':
                case 'gif':
                case 'jpg':
                case 'webp':
                case 'bmp':
                    return EFormatDocJoint.Image;
                case 'mp3':
                case 'ogg':
                case 'wav':
                    return EFormatDocJoint.Son;
                case 'mp4':
                case 'mpeg':
                case 'avi':
                    return EFormatDocJoint.Video;
                case 'ppt':
                case 'pptx':
                    return EFormatDocJoint.Diapo;
                case 'ggb':
                    return EFormatDocJoint.Geogebra;
                }
                return EFormatDocJoint.Inconnu;
            },
            getClassIconDeGenre(aGenre) {
                switch (aGenre) {
                case EFormatDocJoint.Texte:
                    return 'icon_fichier_word';
                case EFormatDocJoint.Pdf:
                    return 'icon_uniF1C1';
                case EFormatDocJoint.Excel:
                    return 'icon_fichier_excel';
                case EFormatDocJoint.Archive:
                    return 'icon_fichier_zip';
                case EFormatDocJoint.Image:
                    return 'icon_fichier_image';
                case EFormatDocJoint.Son:
                    return 'icon_fichier_audio';
                case EFormatDocJoint.Video:
                    return 'icon_fichier_video';
                case EFormatDocJoint.Diapo:
                    return 'icon_fichier_powerpoint';
                case EFormatDocJoint.Geogebra:
                    return 'icon_file_text_alt';
                default:
                    return 'icon_file_alt';
                }
            },
            getGenreDeFichier(aExtension) {
                if (aExtension !== '') {
                    return EFormatDocJointUtil.getGenreDExtension(aExtension.toLowerCase());
                }
                return EFormatDocJoint.Inconnu;
            }
        };
        exports.EFormatDocJointUtil = EFormatDocJointUtil;
    },
    fn: 'enumere_formatdocjoint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireCss = UtilitaireCss;
        const MethodesObjet_1 = require("MethodesObjet");
        function UtilitaireCss() {}
        let uCacheReglesCss = null;
        let uCacheCss = null;
        const uTailleMaxCacheCss = 50;
        function _trouverSelecteur(aSelecteursTexte, aNomRegleCss) {
            if (aSelecteursTexte && aSelecteursTexte.join) {
                for (let i = 0; i < aSelecteursTexte.length; i++) {
                    if (aSelecteursTexte[i] === aNomRegleCss) {
                        return true;
                    }
                }
            }
            return false;
        }
        function _remplirCacheReglesCss() {
            let lStyleSheet, lRules, lRegles, lRegle, lSelecteurTexte;
            uCacheReglesCss = [];
            for (let I = document.styleSheets.length - 1; I >= 0; I--) {
                lStyleSheet = document.styleSheets[I];
                if (lStyleSheet && lStyleSheet.href) {
                    try {
                        lRules = lStyleSheet.cssRules || lStyleSheet.rules;
                    } catch (e) {
                        lRules = null;
                        IE.log.addLog('lecture cssRules : exception=> ' + e);
                    }
                    if (lRules) {
                        lRegles = [];
                        uCacheReglesCss.push(lRegles);
                        for (let J = 0; J < lRules.length; J++) {
                            try {
                                lSelecteurTexte = lRules[J].selectorText;
                            } catch (e) {
                                IE.log.addLog(e);
                            }
                            lRegle = {
                                selecteurs: [],
                                regle: lRules[J]
                            };
                            if (lSelecteurTexte && lSelecteurTexte.split) {
                                const lTabSelector = lSelecteurTexte.split(',');
                                if (lTabSelector) {
                                    for (let i = 0; i < lTabSelector.length; i++) {
                                        lRegle.selecteurs.push(lTabSelector[i] && lTabSelector[i].trim && (lTabSelector[i].trim().toLowerCase().replace(/'/g, '"')));
                                    }
                                }
                            }
                            lRegles.push(lRegle);
                        }
                    }
                }
            }
        }
        function _chercherReglesCss(aNomRegleCss) {
            if (!aNomRegleCss || !MethodesObjet_1.MethodesObjet.isString(aNomRegleCss)) {
                return null;
            }
            aNomRegleCss = aNomRegleCss.toLowerCase();
            if (!uCacheReglesCss) {
                _remplirCacheReglesCss();
            }
            if (uCacheCss && uCacheCss[aNomRegleCss]) {
                return uCacheCss[aNomRegleCss];
            }
            const lRegles = [];
            try {
                aNomRegleCss = aNomRegleCss.trim().toLowerCase().replace(/'/g, '"');
                for (let I = uCacheReglesCss.length - 1; I >= 0; I--) {
                    const lRules = uCacheReglesCss[I];
                    if (lRules) {
                        for (let J = lRules.length - 1; J >= 0; J--) {
                            const lRegle = lRules[J];
                            if (lRegle) {
                                if (_trouverSelecteur(lRegle.selecteurs, aNomRegleCss)) {
                                    lRegles.push(lRegle.regle);
                                }
                            }
                        }
                    }
                }
                if (lRegles.length > 0) {
                    if (!uCacheCss) {
                        uCacheCss = [];
                    }
                    if (uCacheCss.length >= uTailleMaxCacheCss) {
                        for (let lProp in uCacheCss) {
                            delete uCacheCss[lProp];
                            break;
                        }
                    }
                    uCacheCss[aNomRegleCss] = lRegles;
                    return lRegles;
                } else {
                    return null;
                }
            } catch (e) {
                IE.log.addLog('lecture cssRules : exception=> ' + e);
            }
        }
        function _convertirProprieteCSS(aProprieteCSS) {
            const lTab = aProprieteCSS.split('-');
            for (let i = 1; i < lTab.length; i++) {
                lTab[i] = lTab[i].ucfirst();
            }
            return lTab.join('');
        }
        function _modifierProprieteCSS(aRule, aProprieteCSS, aValeur) {
            try {
                if (aRule && aRule.style) {
                    if (aRule.style.setProperty) {
                        aRule.style.setProperty(aProprieteCSS, aValeur, null);
                    } else {
                        aProprieteCSS = _convertirProprieteCSS(aProprieteCSS);
                        if (!MethodesObjet_1.MethodesObjet.isUndefined(aRule.style[aProprieteCSS])) {
                            aRule.style[aProprieteCSS] = aValeur;
                        }
                    }
                }
            } catch (e) {
                return false;
            }
            return true;
        }
        function _getRegleQuiDefinitProprieteCSS(aTabRegles, aProprieteCSS) {
            if (!aTabRegles) {
                return null;
            }
            let lAttribut;
            for (let i = 0; i < aTabRegles.length; i++) {
                const lRegle = aTabRegles[i];
                if (lRegle && lRegle.style) {
                    aProprieteCSS = _convertirProprieteCSS(aProprieteCSS);
                    lAttribut = lRegle.style[aProprieteCSS];
                    if (((lAttribut !== null && lAttribut !== undefined)) && (lAttribut !== '')) {
                        return lRegle;
                    }
                }
            }
            return null;
        }
        UtilitaireCss.modifierRegleCss = function(aNomRegleCss, aProprieteCSS, aValeur) {
            const lRegles = _chercherReglesCss(aNomRegleCss);
            if (!lRegles) {
                return false;
            }
            let lRegleAModifier = _getRegleQuiDefinitProprieteCSS(lRegles, aProprieteCSS);
            if (lRegleAModifier === null || lRegleAModifier === undefined) {
                lRegleAModifier = lRegles[0];
            }
            return _modifierProprieteCSS(lRegleAModifier, aProprieteCSS, aValeur);
        }
        ;
        UtilitaireCss.chercherAttributReglesCss = function(aNomRegleCss, aAttribut) {
            const lRegles = _chercherReglesCss(aNomRegleCss);
            if (!lRegles) {
                return '';
            }
            let lAttribut;
            for (let i = 0; i < lRegles.length; i++) {
                if (lRegles[i] && lRegles[i].style) {
                    lAttribut = lRegles[i].style[aAttribut];
                    if (((lAttribut !== null && lAttribut !== undefined)) && (lAttribut !== '')) {
                        return lRegles[i].style[aAttribut];
                    }
                }
            }
            return '';
        }
        ;
        UtilitaireCss.extraireUrlReglesCss = function(aNomRegleCss) {
            const lUrl = UtilitaireCss.chercherAttributReglesCss(aNomRegleCss, 'backgroundImage');
            if (!lUrl || (lUrl.length === 0)) {
                return '';
            }
            const lTabSplitDoubleQuote = lUrl.split('"');
            let lTab = lTabSplitDoubleQuote[1];
            if (!lTab) {
                const lTabSplitSimpleQuote = lUrl.split('\'');
                lTab = lTabSplitSimpleQuote[1];
            }
            if (!lTab) {
                const lTabSplitOuvParenthese = lUrl.split('(');
                lTab = lTabSplitOuvParenthese[1];
                if (!lTab) {
                    return '';
                }
                const lTabSplitFermParenthese = lTab.split(')');
                lTab = lTabSplitFermParenthese[0];
            }
            if (!lTab) {
                return '';
            }
            const lTabSplitSlash = lTab.split('/');
            const lTab2 = [];
            for (let j = 0; j < lTabSplitSlash.length; j++) {
                if (lTabSplitSlash[j] !== '..') {
                    lTab2.push(lTabSplitSlash[j]);
                }
            }
            return lTab2.join('/');
        }
        ;
    },
    fn: 'utilitairecss.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.fragment = exports.c_attributsAAfficherMemeSiLaValeurEstVide = void 0;
        exports.str = str;
        exports.toArg = toArg;
        exports.jsxFuncAttr = jsxFuncAttr;
        const MethodesObjet_1 = require("MethodesObjet");
        const capitalACharCode = 'A'.charCodeAt(0);
        const capitalZCharCode = 'Z'.charCodeAt(0);
        const isUpper = (input, index) => {
            const charCode = input.charCodeAt(index);
            return capitalACharCode <= charCode && capitalZCharCode >= charCode;
        }
        ;
        const toKebabCase = (camelCased) => {
            let kebabCased = '';
            for (let i = 0; i < camelCased.length; i++) {
                const prevUpperCased = i > 0 ? isUpper(camelCased, i - 1) : true;
                const currentUpperCased = isUpper(camelCased, i);
                const nextUpperCased = i < camelCased.length - 1 ? isUpper(camelCased, i + 1) : true;
                if (!prevUpperCased && currentUpperCased || currentUpperCased && !nextUpperCased) {
                    kebabCased += '-';
                    kebabCased += camelCased[i].toLowerCase();
                } else {
                    kebabCased += camelCased[i];
                }
            }
            return kebabCased;
        }
        ;
        const attributeToString = (aAttributes) => (name) => {
            let lValue = aAttributes[name];
            if (lValue === null || typeof lValue === 'undefined') {
                return '';
            }
            const formattedName = name.toLowerCase();
            const makeAttribute = (value) => `${formattedName}="${value}"`;
            if (formattedName === 'class' && Array.isArray(lValue)) {
                const lTab = [];
                lValue.forEach( (aVal) => {
                    const lVal = aVal && aVal.trim ? aVal.trim() : '';
                    if (lVal) {
                        lTab.push(lVal);
                    }
                }
                );
                lValue = lTab.join(' ');
            }
            if (formattedName === 'style' && lValue && !Array.isArray(lValue) && typeof lValue === 'object' && MethodesObjet_1.MethodesObjet.isObject(lValue) && !MethodesObjet_1.MethodesObjet.isDate(lValue)) {
                const lArr = [];
                const lPropsStyle = Object.keys(lValue);
                lPropsStyle.map( (aKey) => {
                    let lValueStyle = lValue[aKey];
                    const lKeyStyle = toKebabCase(aKey);
                    if (MethodesObjet_1.MethodesObjet.isNumber(lValueStyle)) {
                        lValueStyle = lValueStyle.toString() + 'px';
                    }
                    if (lValueStyle && lKeyStyle && MethodesObjet_1.MethodesObjet.isString(lKeyStyle) && MethodesObjet_1.MethodesObjet.isString(lValueStyle)) {
                        lArr.push(`${lKeyStyle}:${lValueStyle};`);
                    }
                }
                );
                if (lArr.length === 0) {
                    return '';
                }
                lValue = lArr.join('');
            }
            if (lValue instanceof Date) {
                return makeAttribute(lValue.toISOString());
            } else {
                switch (typeof lValue) {
                case 'boolean':
                    if (lValue) {
                        return formattedName;
                    } else {
                        return '';
                    }
                default:
                    {
                        let lStr = lValue + '';
                        if (lStr === c_strObjectToString) {
                            return '';
                        }
                        if (lStr === '' && !exports.c_attributsAAfficherMemeSiLaValeurEstVide.includes(formattedName)) {
                            return '';
                        }
                        if (formattedName === 'title') {
                            lStr = lStr.toTitle();
                        } else {
                            lStr = lStr.toAttrValue();
                        }
                        return makeAttribute(lStr);
                    }
                }
            }
        }
        ;
        const attributesToString = (aAttributes) => {
            if (aAttributes) {
                const lVal = Object.keys(aAttributes).filter(attribute => attribute !== 'children').map(attributeToString(aAttributes)).filter(attribute => attribute.length).join(' ');
                return lVal ? ' ' + lVal : '';
            } else {
                return '';
            }
        }
        ;
        const c_strObjectToString = '[object Object]';
        exports.c_attributsAAfficherMemeSiLaValeurEstVide = ['alt', 'title', 'placeholder', 'aria-label', 'aria-description'];
        const contentsToString = (contents) => {
            if (contents) {
                return contents.map(aElements => {
                    if (MethodesObjet_1.MethodesObjet.isString(aElements) || MethodesObjet_1.MethodesObjet.isNumber(aElements)) {
                        return aElements;
                    }
                    if (MethodesObjet_1.MethodesObjet.isFunction(aElements)) {
                        const lTab = [];
                        const lResultBrut = aElements(lTab);
                        let lResult;
                        if (lTab.length > 0) {
                            lResult = lTab.join('');
                        } else {
                            lResult = lResultBrut || '';
                        }
                        return contentsToString([lResult]);
                    }
                    if (Array.isArray(aElements)) {
                        return contentsToString(aElements);
                    }
                    if (aElements && aElements.toString && !MethodesObjet_1.MethodesObjet.isBoolean(aElements) && !MethodesObjet_1.MethodesObjet.isDate(aElements)) {
                        const lStr = aElements.toString();
                        if (lStr === c_strObjectToString) {
                            return '';
                        }
                        return lStr;
                    }
                    return '';
                }
                ).join('');
            } else {
                return '';
            }
        }
        ;
        const isVoidElement = (tagName) => {
            return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'].indexOf(tagName) > -1;
        }
        ;
        function str(name, attributes={}, ...contents) {
            const children = attributes && attributes.children || contents;
            if (typeof name === 'function') {
                return name(children ? Object.assign({
                    children
                }, attributes) : attributes, contents);
            } else {
                const tagName = name.toLowerCase();
                if (isVoidElement(tagName) && !contents.length) {
                    return `<${tagName}${attributesToString(attributes)}>`;
                } else {
                    return `<${tagName}${attributesToString(attributes)}>${contentsToString(contents)}</${tagName}>`;
                }
            }
        }
        const fragment = (attributes, contents) => contentsToString(contents);
        exports.fragment = fragment;
        function toArg(aArgs) {
            let lArray;
            if (Array.isArray(aArgs)) {
                lArray = aArgs;
            } else {
                lArray = [aArgs];
            }
            const lTab = [];
            lArray.forEach( (aArg) => {
                if (aArg === null || typeof aArg === 'undefined') {
                    lTab.push(aArg + '');
                } else if (typeof aArg === 'string' || MethodesObjet_1.MethodesObjet.isDate(aArg)) {
                    lTab.push(`'${aArg}'`);
                } else if (typeof aArg === 'object' || typeof aArg === 'function') {
                    lTab.push(null + '');
                } else {
                    lTab.push(aArg.toString());
                }
            }
            );
            return lTab.join(',').toAttrValue();
        }
        function jsxFuncAttr(aNomFonction, aArgs) {
            if (!aNomFonction || !aNomFonction.replace) {
                return '';
            }
            let lResult = aNomFonction;
            if (arguments.length > 1) {
                lResult += `(${toArg(aArgs)})`;
            }
            return lResult;
        }
        IE.jsx = {
            str,
            fragment: exports.fragment
        };
    },
    fn: 'jsx.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.tag = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const jsx = require("jsx");
        let u_collection = {
            br: {
                autoFermante: true
            },
            input: {
                autoFermante: true
            },
            img: {
                autoFermante: true
            }
        };
        const tag = function(aBalise, ...aParams) {
            let lNomBalise = aBalise;
            if (!lNomBalise || !lNomBalise.trim) {
                return '';
            }
            lNomBalise = lNomBalise.trim();
            if (!lNomBalise) {
                return '';
            }
            const T = ['<', lNomBalise];
            const lArgs = aParams;
            const lAttrs = lArgs[0];
            let lInner = '';
            if (lAttrs && MethodesObjet_1.MethodesObjet.isObject(lAttrs)) {
                T.push(_attrsToString(lAttrs));
                lArgs.shift();
            }
            if (lArgs.length > 0) {
                lArgs.forEach( (aVal) => {
                    let lInnerArg = aVal;
                    if (lInnerArg && MethodesObjet_1.MethodesObjet.isFunction(lInnerArg)) {
                        const lTabInner = [];
                        lInnerArg = lInnerArg(lTabInner);
                        if (lTabInner.length > 0) {
                            lInnerArg = lTabInner.join('');
                        }
                    }
                    if (lInnerArg === 0) {
                        lInnerArg = lInnerArg + '';
                    }
                    if (lInnerArg) {
                        lInner += lInnerArg;
                    }
                }
                );
            }
            if (!lInner && u_collection[lNomBalise] && u_collection[lNomBalise].autoFermante) {
                T.push('>');
            } else {
                T.push('>');
                if (lInner) {
                    T.push(lInner);
                }
                T.push('</', lNomBalise, '>');
            }
            return T.join('');
        };
        exports.tag = tag;
        function _attrsToString(aAttrs) {
            if (aAttrs && MethodesObjet_1.MethodesObjet.isString(aAttrs)) {
                return aAttrs;
            }
            if (aAttrs && MethodesObjet_1.MethodesObjet.isObject(aAttrs)) {
                const T = [];
                Object.keys(aAttrs).forEach( (aKey) => {
                    let lVal = aAttrs[aKey];
                    if (lVal && Array.isArray(lVal)) {
                        if (aKey === 'class') {
                            const lTab = [];
                            lVal.forEach( (aVal) => {
                                const lVal = aVal && aVal.trim ? aVal.trim() : '';
                                if (lVal) {
                                    lTab.push(lVal);
                                }
                            }
                            );
                            lVal = lTab.join(' ');
                        } else if (aKey === 'style') {
                            const lTab = [];
                            lVal.forEach( (aVal) => {
                                let lVal = aVal && aVal.trim ? aVal.trim() : '';
                                if (lVal && lVal.length > 0) {
                                    if (lVal[lVal.length - 1] !== ';') {
                                        lVal += ';';
                                    }
                                    lTab.push(lVal);
                                }
                            }
                            );
                            lVal = lTab.join(' ');
                        } else {
                            lVal = lVal.join(' ');
                        }
                    }
                    if (lVal && lVal.trim && lVal.trim() === '') {
                        return;
                    }
                    ;if (lVal === 0 || lVal > 0 || lVal === true || (lVal && lVal.trim)) {
                        T.push(tag.composeAttr(aKey, lVal === true ? '' : lVal).trimEnd());
                    }
                }
                );
                return T.join('');
            }
            return '';
        }
        tag.toArg = jsx.toArg;
        tag.funcAttr = jsx.jsxFuncAttr;
        tag.composeAttr = function(aAttribut, aValue, aArgs) {
            if (!aAttribut || !aAttribut.trim) {
                return '';
            }
            ;let lAttribut = aAttribut.trim();
            if (!lAttribut) {
                return '';
            }
            lAttribut = ' ' + lAttribut;
            let lValue = aValue === 0 ? aValue + '' : aValue;
            if (!lValue || lValue === true) {
                return lAttribut + ' ';
            }
            if (MethodesObjet_1.MethodesObjet.isString(lValue) && lValue.replace) {
                if (aAttribut === 'title') {
                    lValue = lValue.toTitle();
                } else {
                    lValue = lValue.toAttrValue();
                }
            } else {
                if (!MethodesObjet_1.MethodesObjet.isNumber(lValue)) {
                    return lAttribut + ' ';
                }
                lValue = lValue + '';
            }
            const lArgs = [];
            if (arguments.length > 2) {
                lArgs.push(aArgs);
            }
            return lAttribut + '="' + tag.funcAttr(lValue, ...lArgs) + '" ';
        }
        ;
        tag.styleToStr = function(aRule, aValue) {
            if (!aRule || !aRule.trim) {
                return '';
            }
            if (!aValue && aValue !== 0) {
                return '';
            }
            return aRule + ':' + aValue + (typeof aValue === 'string' && aValue.length > 0 && aValue[aValue.length - 1] === ';' ? '' : ';');
        }
        ;
    },
    fn: 'tag.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TUtilitaireEmail = void 0;
        const cRregExEmail = '^([^\\s@\\.]+\\.)*[^\\s@\\.]+@([^\\s@\\.]+\\.)+[^\\s@\\.]+$';
        const TUtilitaireEmail = {
            estValide(aEmail) {
                return RegExp(cRregExEmail, 'i').test(aEmail.trim());
            }
        };
        exports.TUtilitaireEmail = TUtilitaireEmail;
    },
    fn: 'utilitaireemail.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GChaine = exports.ObjetChaine = void 0;
        require("DeclarationDOMPurify");
        require("Divers");
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const ObjetElement_1 = require("ObjetElement");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetSupport_1 = require("ObjetSupport");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const Enumere_FormatDocJoint_1 = require("Enumere_FormatDocJoint");
        const UtilitaireCss_1 = require("UtilitaireCss");
        const ComparateurChaines_1 = require("ComparateurChaines");
        const tag_1 = require("tag");
        const UtilitaireEmail_1 = require("UtilitaireEmail");
        const ObjetTraduction_1 = require("ObjetTraduction");
        let GChaine;
        class ObjetChaine {
            constructor() {
                this.maskTelephone = '99 99 99 99 99 99';
                this._hauteurPolice = [];
                this.regexURL = /(https?:\/\/|www\.)[^ \r\n,]+/gi;
                this.__cacheCanvas = null;
                this.LongueurCaracteres = new Array(30);
                for (let I = 0; I < 30; I++) {
                    this.LongueurCaracteres[I] = new Array(2);
                    for (let J = 0; J < 2; J++) {
                        this.LongueurCaracteres[I][J] = [];
                    }
                }
            }
            enleverChemin(aFichier) {
                let N = aFichier.lastIndexOf('/');
                if (N === -1) {
                    N = aFichier.lastIndexOf('\\');
                }
                return aFichier.substring(N + 1, aFichier.length);
            }
            avecEspaceSiVide(AChaine) {
                return AChaine && (AChaine.length > 0) ? AChaine : '&nbsp;';
            }
            toAttrValue(aChaine) {
                return aChaine && aChaine.toAttrValue ? aChaine.toAttrValue() : '';
            }
            toTitle(aChaine) {
                return aChaine && aChaine.toTitle ? aChaine.toTitle() : '';
            }
            strToDate(ADate) {
                const lTabDate = ADate.split(' ');
                const LJour = lTabDate[0].split('/');
                const LHeure = lTabDate[1] ? lTabDate[1].split(':') : ['0', '0', '0'];
                return new Date(parseInt(LJour[2]),parseInt(LJour[1]) - 1,parseInt(LJour[0]),parseInt(LHeure[0]),parseInt(LHeure[1]),parseInt(LHeure[2]));
            }
            strToInteger(aInteger) {
                return parseInt(aInteger, 10);
            }
            strToDouble(aDouble) {
                return parseFloat(aDouble.replace(',', '.'));
            }
            strToCardinal(ACardinal) {
                return parseInt(ACardinal, 10);
            }
            strToBoolean(ABoolean) {
                return (ABoolean === '1') || (ABoolean.toUpperCase() === 'TRUE') || (ABoolean.toUpperCase() === 'VRAI');
            }
            strToIp(aIP) {
                const T = aIP.split('.');
                if (T.length !== 4) {
                    return '';
                }
                let lIp = 0;
                let lValeur;
                for (let I = 0; I < 4; I++) {
                    lValeur = parseInt(T[I], 10);
                    if ((lValeur < 0) || (lValeur > 255)) {
                        return 0;
                    }
                    lIp = 256 * lIp + lValeur;
                }
                return lIp;
            }
            dateToStr(ADate) {
                return _dateToStr(ADate);
            }
            domaineToStr(aDomaine) {
                return aDomaine ? aDomaine.toString() : '';
            }
            doubleToStr(aDouble) {
                return ('' + aDouble).replace('.', ',');
            }
            chaineToStr(AChaine) {
                return !AChaine ? '' : AChaine;
            }
            cardinalToStr(ACardinal) {
                return '' + ACardinal;
            }
            ipToStr(aIp) {
                aIp = parseInt(aIp, 10);
                if (isNaN(aIp)) {
                    return '';
                }
                const T = [];
                for (let I = 4; I > 0; I--) {
                    T[I - 1] = (aIp % 256);
                    if (T[I - 1] < 0) {
                        T[I - 1] += 256;
                    }
                    aIp = Math.floor(aIp / 256);
                }
                return T.join('.');
            }
            estAdresseIPV4Valide(aStrAdresseIPV4) {
                let lEstValide = false;
                if (!!aStrAdresseIPV4) {
                    const lStrAdresseIP = aStrAdresseIPV4.trim();
                    const lStrNombres = lStrAdresseIP.split('.');
                    if (lStrNombres.length === 4) {
                        lEstValide = true;
                        for (const lStrNombre of lStrNombres) {
                            const lNb = parseInt(lStrNombre);
                            if (lNb < 0 || lNb >= 256) {
                                lEstValide = false;
                                break;
                            }
                        }
                    }
                }
                return lEstValide;
            }
            format(aChaine, aTabElements) {
                if (!aChaine || !aChaine.format) {
                    return aChaine;
                }
                return aChaine.format(aTabElements);
            }
            tailleOctetsToStr(aTailleEnOctets) {
                if (aTailleEnOctets < 0 || !MethodesObjet_1.MethodesObjet.isNumber(aTailleEnOctets)) {
                    return `0 ${ObjetTraduction_1.GTraductions.getValeur('unite.Ko')}`;
                }
                const lUnit = 1024;
                let lFixed = 0;
                let lVal = aTailleEnOctets;
                let lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.O');
                if (lVal === 0) {
                    lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                } else if (lVal > lUnit) {
                    lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                    lVal = lVal / lUnit;
                    lFixed = 1;
                    if (lVal > lUnit) {
                        lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Mo');
                        lVal = lVal / lUnit;
                        lFixed = 2;
                        if (lVal > lUnit) {
                            lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Go');
                            lVal = lVal / lUnit;
                        }
                    }
                }
                return `${this.doubleToStr(lVal.toFixed(lFixed))} ${lUnite}`;
            }
            insecable(AChaine) {
                try {
                    return AChaine ? AChaine.replace(/ /g, '&nbsp;').replace(/-/g, '&#x2011;') : '';
                } catch (e) {
                    return '';
                }
            }
            formatTelephone(aChaine, aOptions) {
                if (!aChaine || !aChaine.trim) {
                    return '';
                }
                const lOptions = Object.assign({
                    mask: '',
                    avecTailleMask: true
                }, aOptions);
                let lMask = lOptions.mask || this.maskTelephone;
                const lChaine = aChaine.trim().replace(/([^0-9\s])/g, '');
                lMask = this._reverseString(lMask.replace(/([^9\s])/g, ''));
                const lLengthCharMask = lMask.replace(/([^9])/g, '').length;
                const lNumeroSansEspace = lChaine.replace(/([^0-9])/g, '');
                const lEcart = Math.max(0, lNumeroSansEspace.length - lLengthCharMask);
                let lPartieDroite = lNumeroSansEspace.slice(lEcart, lNumeroSansEspace.length);
                let lPartieGaucheIntacte = '';
                let lPartieGauche;
                let lResult;
                lPartieDroite = this._reverseString(lPartieDroite);
                let lIndice = -1;
                lResult = lMask.replace(/9/g, () => {
                    lIndice += 1;
                    return lPartieDroite[lIndice] || '';
                }
                );
                if (!lOptions.avecTailleMask) {
                    lPartieGauche = lNumeroSansEspace.slice(0, lEcart);
                    lIndice = 0;
                    for (let i = 0; i < lChaine.length; i++) {
                        if (lChaine.charAt(i) === ' ') {
                            lPartieGaucheIntacte += ' ';
                        } else {
                            lPartieGaucheIntacte += lPartieGauche.charAt(lIndice);
                            lIndice += 1;
                            if (lIndice >= lPartieGauche.length) {
                                break;
                            }
                        }
                    }
                }
                return (lPartieGaucheIntacte + this._reverseString(lResult)).trim();
            }
            formatTelephoneAvecIndicatif(aIndicatif, aNumeroTel) {
                const lIndicatif = (aIndicatif ? '+' + aIndicatif : '');
                if (!!aIndicatif && aNumeroTel.length === 10 && aNumeroTel.startsWith('0')) {
                    aNumeroTel = aNumeroTel.slice(1);
                }
                return lIndicatif + aNumeroTel;
            }
            geStrTelephoneAvecEspaces(aNumTel) {
                if (!aNumTel || !aNumTel.length) {
                    return '';
                }
                let lResult = '';
                let lCompteur = 0;
                for (let i = aNumTel.length - 1; i >= 0; i--) {
                    if ((lCompteur % 2) === 0) {
                        lResult = ' ' + lResult;
                    }
                    lResult = aNumTel.charAt(i) + lResult;
                    lCompteur++;
                }
                return lResult.trim();
            }
            _getConteneurCalculChaine() {
                const ldLongueurChaineEnPixel = 'LongueurChaineEnPixel';
                let E = document.getElementById(ldLongueurChaineEnPixel);
                if (!E) {
                    let lConteneur = document.body;
                    if (global.GApplication) {
                        lConteneur = document.getElementById(GApplication.getIdConteneur()) || document.body;
                    }
                    lConteneur.insertAdjacentHTML('beforeend', '<div id="' + ldLongueurChaineEnPixel + '" class="Texte10 hide" style="position:absolute; top:-50px; white-space:pre;"></div>');
                    E = document.getElementById(ldLongueurChaineEnPixel);
                }
                if (E) {
                    return E;
                }
                ;return null;
            }
            getLongueurChaineDansDiv(AChaine, ATaille, AGras, aNonToTexte) {
                if (!AChaine) {
                    return 0;
                }
                if (!ATaille) {
                    ATaille = 10;
                }
                if (!this.__cacheCanvas) {
                    this.__cacheCanvas = ObjetSupport_1.Support.supportCanvasText && UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss ? {
                        canvas: document.createElement('canvas'),
                        fontFamily: global.getComputedStyle(document.body).getPropertyValue('font-family'),
                        fontSize: {}
                    } : {};
                    this.__cacheCanvas.actif = !!this.__cacheCanvas.canvas && !!this.__cacheCanvas.fontFamily;
                    if (!this.__cacheCanvas.actif) {
                        this.__cacheCanvas.canvas = null;
                    }
                }
                if (this.__cacheCanvas.actif) {
                    const lContext = this.__cacheCanvas.canvas.getContext('2d');
                    if (!this.__cacheCanvas.fontSize[ATaille]) {
                        if (ATaille && typeof ATaille === 'string' && ATaille.endsWith('rem')) {
                            this.__cacheCanvas.fontSize[ATaille] = this.cacheCanvasConvertREMToPx(ATaille);
                        } else if (ATaille && typeof ATaille === 'string' && ATaille.endsWith('px')) {
                            this.__cacheCanvas.fontSize[ATaille] = ATaille;
                        } else {
                            let lVal = UtilitaireCss_1.UtilitaireCss.chercherAttributReglesCss('.Texte' + ATaille, 'fontSize');
                            if (!lVal) {
                                lVal = Math.round(ATaille * 1.1) + 'px';
                            } else if (lVal.endsWith && lVal.endsWith('rem')) {
                                lVal = this.cacheCanvasConvertREMToPx(lVal);
                            }
                            this.__cacheCanvas.fontSize[ATaille] = lVal;
                        }
                    }
                    let lFontWeight = '';
                    if (AGras === true) {
                        lFontWeight = 'bold';
                    } else if (AGras) {
                        if (typeof AGras === 'number') {
                            lFontWeight = AGras + '';
                        } else {
                            lFontWeight = AGras;
                        }
                    }
                    lContext.font = (lFontWeight ? lFontWeight + ' ' : '') + this.__cacheCanvas.fontSize[ATaille] + ' ' + this.__cacheCanvas.fontFamily;
                    const lMetrics = lContext.measureText(AChaine);
                    return lMetrics.width;
                }
                const E = this._getConteneurCalculChaine();
                if (!E) {
                    return 0;
                }
                E.className = 'hide Texte' + ATaille + (AGras ? ' Gras' : '');
                let lChaine = aNonToTexte === true ? AChaine : this.ajouterEntites(AChaine);
                lChaine = lChaine && lChaine.replace ? lChaine.replace(/ /g, '&nbsp;') : lChaine;
                E.innerHTML = lChaine;
                const lLongueur = E.clientWidth;
                E.innerHTML = '';
                return lLongueur;
            }
            getLongueurChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte) {
                if (!AChaine) {
                    return '';
                }
                const lChaine = this.enleverEntites(AChaine);
                let LLongueur = 0;
                let I;
                const N = lChaine.length;
                if (lChaine.length > 0) {
                    LLongueur = this.getLongueurChaineDansDiv(lChaine, ATaille, AGras);
                }
                if (ALongueur === null || ALongueur === undefined) {
                    return LLongueur;
                }
                if (ALongueur > 0 && LLongueur >= ALongueur) {
                    LLongueur = 0;
                    const G = AGras ? 1 : 0;
                    for (I = 0; (I < N) && ((ALongueur === null || ALongueur === undefined) || (LLongueur < ALongueur)); I++) {
                        let C = lChaine.charCodeAt(I);
                        let L = this.LongueurCaracteres[ATaille][G][C];
                        if (!L) {
                            L = this.LongueurCaracteres[ATaille][G][C] = this.getLongueurChaineDansDiv(lChaine.charAt(I), ATaille, AGras);
                        }
                        LLongueur += L === 0 ? 10 : L;
                    }
                }
                if (LLongueur >= ALongueur) {
                    let lChaineTronque = lChaine.substring(0, I);
                    if (lChaineTronque && lChaine !== lChaineTronque && LLongueur > 0) {
                        LLongueur = this.getLongueurChaineDansDiv(lChaineTronque, ATaille, AGras);
                    }
                    if (LLongueur === 0) {
                        return aChaineEnTexte ? '' : '<div style="font-size:1px">&nbsp;</div>';
                    }
                    if (LLongueur >= ALongueur) {
                        lChaineTronque = lChaine.substring(0, I - 1);
                        while (I > 2) {
                            if (this.getLongueurChaineDansDiv(lChaineTronque, ATaille, AGras) < ALongueur) {
                                break;
                            }
                            I--;
                            lChaineTronque = lChaine.substring(0, I - 1);
                        }
                    }
                    return this.ajouterEntites(lChaineTronque);
                }
                return AChaine;
            }
            estChaineTropLongue(AChaine, ATaille, AGras, ALongueur) {
                const lResult = this.getChaine(AChaine, ATaille, AGras, ALongueur);
                if (typeof lResult === 'string') {
                    return lResult.length !== AChaine.length;
                }
                return false;
            }
            getChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte) {
                return this.getLongueurChaine(AChaine, ATaille, AGras, ALongueur, aChaineEnTexte);
            }
            getHauteurPolice(ATaille) {
                let lHauteur = this._hauteurPolice[ATaille];
                if (!lHauteur) {
                    const E = this._getConteneurCalculChaine();
                    if (!E) {
                        return 0;
                    }
                    E.className = 'hide Texte' + ATaille;
                    E.innerHTML = 'X';
                    lHauteur = this._hauteurPolice[ATaille] = E.offsetHeight;
                }
                return lHauteur;
            }
            encoderComposantUrl(S, aAvecDecode=false) {
                if (!MethodesObjet_1.MethodesObjet.isString(S)) {
                    return '';
                }
                try {
                    const lStr = aAvecDecode ? decodeURI(S) : S;
                    return encodeURIComponent(lStr.replace(ObjetChaine.regexCarControl, ''));
                } catch (e) {
                    return '';
                }
            }
            encoderUrl(S) {
                if (!MethodesObjet_1.MethodesObjet.isString(S)) {
                    return '';
                }
                try {
                    return encodeURI(decodeURI(S).replace(ObjetChaine.regexCarControl, ''));
                } catch (e) {
                    return '';
                }
            }
            replaceRCToHTML(AChaine, aChaineRemplacement) {
                return AChaine ? AChaine.replaceRCToHTML(aChaineRemplacement) : '';
            }
            fromHTML(AChaine) {
                return AChaine ? AChaine.replace(/<br( \/)?>/gi, '\n') : '';
            }
            nodeToTextAvecRC(aNode) {
                return aNode ? (aNode.innerText || '') : '';
            }
            ajouterEntites(aChaine, aSansQuote) {
                if (aChaine && aChaine.ajouterEntites) {
                    return aChaine.ajouterEntites(aSansQuote);
                }
                return aChaine;
            }
            enleverEntites(aChaine) {
                if (aChaine && aChaine.enleverEntites) {
                    return aChaine.enleverEntites();
                }
                return aChaine;
            }
            nettoyerCommentaire(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(/(<!--)(.+)(-->)/g, '') : aChaine;
            }
            verifierURLHttp(aUrl) {
                return aUrl ? (aUrl.toLowerCase().indexOf('http://') === 0) || (aUrl.toLowerCase().indexOf('https://') === 0) ? aUrl : 'http://' + aUrl : aUrl;
            }
            ajouterLiensURL(aTexte) {
                if (!aTexte) {
                    aTexte = '';
                }
                const urlRegex = this.regexURL;
                return aTexte.replace(urlRegex, (url) => {
                    return '<a href="' + this.verifierURLHttp(url) + '" target="_blank">' + url + '</a>';
                }
                );
            }
            contientAuMoinsUneURL(aTexte) {
                if (!aTexte) {
                    aTexte = '';
                }
                const lTexteAvecLiensURL = this.ajouterLiensURL(aTexte);
                return (aTexte !== lTexteAvecLiensURL);
            }
            creerUrlBruteLienExterne(aDocumentJoint, aParam) {
                if (!('getCommunication'in GApplication)) {
                    return;
                }
                if (!aDocumentJoint) {
                    return '';
                }
                if (aDocumentJoint.getEtat() === Enumere_Etat_1.EGenreEtat.Creation || !aDocumentJoint.existeNumero()) {
                    return '';
                }
                if (!aParam) {
                    aParam = {};
                }
                let lUrl = '';
                let lGenreDocumentJoint = aParam.genreDocumentJoint;
                if (!MethodesObjet_1.MethodesObjet.isNumber(lGenreDocumentJoint)) {
                    lGenreDocumentJoint = aDocumentJoint.getGenre();
                }
                let lLibelleLienExterne = aParam.libelle;
                if (!lLibelleLienExterne) {
                    lLibelleLienExterne = aDocumentJoint.getLibelle();
                }
                if (lGenreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url) {
                    lLibelleLienExterne = 'link';
                }
                const lInfoFichier = new ObjetElement_1.ObjetElement('',aDocumentJoint.getNumero(),aParam.genreRessource);
                if (!!aParam.infoSupp) {
                    Object.assign(lInfoFichier, aParam.infoSupp);
                }
                if (aParam.miniature !== null && aParam.miniature !== undefined) {
                    Object.assign(lInfoFichier, {
                        miniature: aParam.miniature
                    });
                }
                lUrl = GApplication.getCommunication().composeUrlFichierExterne(this.encoderComposantUrl(lLibelleLienExterne, true), lInfoFichier);
                if (aParam.forcerURLComplete) {
                    const lBalise = document.createElement('a');
                    lBalise.href = lUrl;
                    lUrl = lBalise.href;
                }
                return lUrl;
            }
            composerUrlLienExterne(aParam) {
                const lParam = {
                    documentJoint: undefined,
                    genreDocumentJoint: undefined,
                    genreRessource: undefined,
                    infoSupp: undefined,
                    libelle: '',
                    libelleEcran: undefined,
                    ariaLabel: '',
                    ariaLabelledby: '',
                    avecAriaLabelledby: false,
                    title: '',
                    iconeOverride: '',
                    afficherIconeDocument: true,
                    avecLien: true,
                    maxWidth: 0,
                    ieModelChips: null,
                    ieChipsMinimal: false,
                    argsIEModel: null,
                    class: '',
                    forcerURLComplete: undefined
                };
                Object.assign(lParam, aParam);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lParam.genreDocumentJoint)) {
                    lParam.genreDocumentJoint = lParam.documentJoint ? lParam.documentJoint.getGenre() : Enumere_DocumentJoint_1.EGenreDocumentJoint.Fichier;
                }
                if (lParam.documentJoint && (lParam.documentJoint.getEtat() === Enumere_Etat_1.EGenreEtat.Creation || !lParam.documentJoint.existeNumero())) {
                    lParam.avecLien = false;
                }
                if (lParam.genreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url && !lParam.libelleEcran && !lParam.libelle) {
                    if (lParam.documentJoint.getLibelle()) {
                        lParam.libelleEcran = lParam.documentJoint.getLibelle();
                    } else {
                        lParam.libelleEcran = lParam.documentJoint.url;
                        lParam.avecAriaLabelledby = true;
                    }
                    lParam.libelle = 'link';
                }
                if (lParam.genreDocumentJoint === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienVisio && !lParam.libelleEcran && !lParam.libelle) {
                    lParam.libelleEcran = !!lParam.documentJoint.libelleLien ? lParam.documentJoint.libelleLien : undefined;
                    lParam.libelle = lParam.documentJoint.url;
                }
                let lUrl = '';
                if (lParam.avecLien) {
                    lUrl = this.creerUrlBruteLienExterne(lParam.documentJoint, {
                        genreRessource: lParam.genreRessource,
                        genreDocumentJoint: lParam.genreDocumentJoint,
                        forcerURLComplete: lParam.forcerURLComplete,
                        libelle: lParam.libelle,
                        infoSupp: lParam.infoSupp
                    });
                }
                const lInfosLiens = {
                    tag: 'ie-chips',
                    ieModel: '',
                    title: lParam.title || false,
                    libelle: lParam.libelleEcran !== undefined && lParam.libelleEcran !== null ? lParam.libelleEcran : lParam.libelle ? lParam.libelle : lParam.documentJoint ? lParam.documentJoint.getLibelle() : '',
                    href: lUrl,
                    classes: [],
                    ariaLabel: lParam.ariaLabel ? ' ' + tag_1.tag.composeAttr('aria-label', lParam.ariaLabel) : '',
                    ariaLabelledby: lParam.avecAriaLabelledby && lParam.ariaLabelledby ? ' ' + tag_1.tag.composeAttr('aria-labelledby', lParam.ariaLabelledby) : ''
                };
                if (!!lParam.class) {
                    lInfosLiens.classes.push(lParam.class);
                }
                if (!!lParam.ieModelChips) {
                    lInfosLiens.ieModel = ' ' + tag_1.tag.composeAttr('ie-model', lParam.ieModelChips, lParam.argsIEModel);
                }
                let lIconeLien = '';
                if (!!lParam.afficherIconeDocument) {
                    if (lParam.iconeOverride) {
                        lIconeLien = lParam.iconeOverride;
                    } else {
                        lIconeLien = this._getClasseIconeDocumentJoint(lParam.documentJoint);
                    }
                }
                if (!!lIconeLien) {
                    lInfosLiens.classes.push('iconic');
                    lInfosLiens.classes.push(lIconeLien);
                }
                if (!!lParam.ieChipsMinimal) {
                    lInfosLiens.classes.push('chips-minimal');
                }
                const lGenreFichier = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(this.extraireExtensionFichier(lParam.libelle ? lParam.libelle : lParam.documentJoint ? lParam.documentJoint.getLibelle() : ''));
                if (lGenreFichier === Enumere_FormatDocJoint_1.EFormatDocJoint.Geogebra) {
                    lInfosLiens.href = 'geogebra.html?view=' + encodeURIComponent(lInfosLiens.href) + '';
                }
                return '<' + lInfosLiens.tag + ' id="' + GUID_1.GUID.getId() + '"' + (lParam.maxWidth > 0 ? ' style="max-width:' + lParam.maxWidth + 'px;"' : '') + (lInfosLiens.title && typeof lInfosLiens.title === 'string' ? ' title="' + GChaine.toTitle(lInfosLiens.title) + '"' : '') + (!!lInfosLiens.href ? ' href="' + lInfosLiens.href + '"' : '') + (!!lInfosLiens.ieModel ? lInfosLiens.ieModel : '') + (lInfosLiens.classes.length > 0 ? ' class="' + lInfosLiens.classes.join(' ') + '"' : '') + (lInfosLiens.ariaLabel ? lInfosLiens.ariaLabel : '') + (lInfosLiens.ariaLabelledby ? lInfosLiens.ariaLabelledby : '') + '>' + lInfosLiens.libelle + '</' + lInfosLiens.tag + '>';
            }
            estFichierImageAvecMiniaturePossible(aNomFichier) {
                if (aNomFichier) {
                    const lExt = this.extraireExtensionFichier(aNomFichier);
                    return !!lExt && !['webp'].includes(lExt) && Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(lExt) === Enumere_FormatDocJoint_1.EFormatDocJoint.Image;
                }
                return false;
            }
            composeUrlRequete(aParam) {
                let lResult = '';
                if (aParam.url) {
                    lResult = aParam.url;
                    if (lResult.charAt(lResult.length - 1) !== '/') {
                        lResult += '/';
                    }
                }
                if (aParam.nomRequete) {
                    if (aParam.nomRequete.charAt(0) !== '/') {
                        lResult += aParam.nomRequete;
                    } else {
                        lResult += aParam.nomRequete.substring(1, aParam.nomRequete.length - 1);
                    }
                }
                return lResult;
            }
            composeUrlImgPhotoIndividu(aIndividu) {
                if (!aIndividu || !aIndividu.getNumero) {
                    return '';
                }
                if (!('getCommunication'in GApplication)) {
                    return;
                }
                return GApplication.getCommunication().composeUrlFichierExterne(aIndividu.getLibelle().replace(/[\s]/gi, '_') + '.jpg', new ObjetElement_1.ObjetElement('',aIndividu.getNumero()));
            }
            supprimerEspaces(aChaine) {
                return aChaine && aChaine.replace ? aChaine.replace(/ /g, '') : aChaine;
            }
            latinize(aChaine) {
                return ComparateurChaines_1.ComparateurChaines.latinize(aChaine);
            }
            normalize(aChaine) {
                return ComparateurChaines_1.ComparateurChaines.normalize(aChaine);
            }
            miseEnFormeEmail(aEmail) {
                return aEmail ? aEmail.replace(/;/g, '<br/>') : '';
            }
            composerEmail(aEmail, aNotMailTo, aSansTabulation) {
                return !aNotMailTo ? '<a href="mailto:' + aEmail + '"' + (aSansTabulation ? ' tabindex="-1"' : '') + ' target="_blank">' + GChaine.miseEnFormeEmail(aEmail) + '</a>' : '<span class="LienAccueil AvecMain">' + GChaine.miseEnFormeEmail(aEmail) + '</span>';
            }
            estEmailValide(aEmail) {
                if (!aEmail || !MethodesObjet_1.MethodesObjet.isString(aEmail)) {
                    return false;
                }
                return UtilitaireEmail_1.TUtilitaireEmail.estValide(aEmail);
            }
            controleTailleTexte(aParam) {
                let lResult = {
                    controleOK: true,
                    chaine: aParam.chaine
                };
                let lValeurSansEntites = this.enleverEntites(aParam.chaine);
                if ((aParam.tailleTexteMax > 0) && (lValeurSansEntites.length > aParam.tailleTexteMax)) {
                    lValeurSansEntites = lValeurSansEntites.slice(0, aParam.tailleTexteMax);
                    lResult = {
                        controleOK: false,
                        chaine: this.ajouterEntites(lValeurSansEntites)
                    };
                }
                return lResult;
            }
            extraireNomFichier(aNomFichier) {
                if (!aNomFichier || !aNomFichier.split) {
                    return aNomFichier;
                }
                const lTab = aNomFichier.split('.');
                if (lTab.length > 1) {
                    lTab.pop();
                }
                return lTab.join('.');
            }
            extraireExtensionFichier(aNomFichier) {
                if (!aNomFichier || !aNomFichier.split) {
                    return '';
                }
                const lTab = aNomFichier.split('.');
                return lTab.length > 1 ? lTab[lTab.length - 1] : '';
            }
            getLibelleSurligne(aLibelle, aRecherches, aOptions) {
                if (!aLibelle) {
                    return aLibelle;
                }
                let lRecherche, lIndex;
                const lArray = [];
                const lLibelle = GChaine.enleverEntites(aLibelle || '').replace(/&nbsp;/g, ' ');
                let lResult;
                const lOptions = Object.assign({
                    couleur: GCouleur.surlignageTexte
                }, aOptions);
                if (Array.isArray(aRecherches)) {
                    for (let i = 0; i < aRecherches.length; i++) {
                        lRecherche = aRecherches[i].trim();
                        if (lRecherche.length > 0) {
                            for (lIndex = 0; lIndex < lLibelle.length; lIndex++) {
                                if (lIndex + lRecherche.length <= lLibelle.length && ComparateurChaines_1.ComparateurChaines.egal(lRecherche, lLibelle.slice(lIndex, lIndex + lRecherche.length))) {
                                    for (let j = 0; j < lRecherche.length; j++) {
                                        lArray[lIndex + j] = true;
                                    }
                                }
                            }
                        }
                    }
                }
                lResult = '';
                for (let i = 0; i < lLibelle.length; i++) {
                    if (lArray[i]) {
                        if (!lArray[i - 1]) {
                            lResult += '<span style="background-color:' + lOptions.couleur + '">';
                        }
                        lResult += GChaine.ajouterEntites(lLibelle[i]);
                        if (!lArray[i + 1]) {
                            lResult += '</span>';
                        }
                    } else {
                        lResult += GChaine.insecable(GChaine.ajouterEntites(lLibelle[i]));
                    }
                }
                return lResult;
            }
            supprimerBalisesHtml(aContenu) {
                if (!aContenu || !MethodesObjet_1.MethodesObjet.isString(aContenu)) {
                    return '';
                }
                let lContenu = aContenu.replace(/\n/g, '').replace(/(<\/div>|<\/ol>|<\/ul>|<\/li>|<\/p>)(?!(<br>|<br\/>|<\/div>|<\/ol>|<\/ul>|<\/li>|<\/p>))/g, '$1\n').replace(/(<br>|<br\/>)/g, '$1\n').replace(/<[^>]*?>/gi, '');
                if (lContenu.endsWith('\n')) {
                    lContenu = lContenu.slice(0, lContenu.length - 1);
                }
                return lContenu;
            }
            simpleHtmlToSafeHtml(aHtml) {
                try {
                    const lDoc = new DOMParser().parseFromString(aHtml, 'text/html');
                    if (lDoc && lDoc.body) {
                        return lDoc.body.innerHTML || '';
                    }
                } catch (e) {}
                return aHtml;
            }
            htmlToSafeHtml(aHtml) {
                if (!IE.DOMPurifyDisabled) {
                    return this.htmlDOMPurify(aHtml);
                }
                return this.simpleHtmlToSafeHtml(aHtml);
            }
            htmlDOMPurify(aHtml, aOptionsDOMPurify) {
                if (aHtml && MethodesObjet_1.MethodesObjet.isString(aHtml) && global.DOMPurify && !IE.DOMPurifyDisabled) {
                    try {
                        return global.DOMPurify.sanitize(aHtml, aOptionsDOMPurify);
                    } catch (e) {}
                }
                return aHtml;
            }
            estChaineHTMLEgal(aChaine1, aChaine2) {
                if (aChaine1 === aChaine2) {
                    return true;
                }
                return (this.htmlToSafeHtml(aChaine1) === this.htmlToSafeHtml(aChaine2));
            }
            _reverseString(a) {
                return a.split('').reverse().join('');
            }
            cacheCanvasConvertREMToPx(aTailleREM) {
                if (!this.__cacheCanvas.fontSizeRoot) {
                    let lSize = 0;
                    try {
                        lSize = parseFloat(global.getComputedStyle(document.documentElement).getPropertyValue('font-size'));
                    } catch (e) {
                        lSize = 10;
                    }
                    this.__cacheCanvas.fontSizeRoot = lSize;
                }
                return (parseFloat(aTailleREM) * this.__cacheCanvas.fontSizeRoot) + 'px';
            }
            _getClasseIconeDocumentJoint(aDocJoint) {
                let lClasseIcone = '';
                const lGenreFichier = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getGenreDeFichier(GChaine.extraireExtensionFichier(aDocJoint.getLibelle()));
                if (lGenreFichier !== Enumere_FormatDocJoint_1.EFormatDocJoint.Inconnu) {
                    lClasseIcone = Enumere_FormatDocJoint_1.EFormatDocJointUtil.getClassIconDeGenre(lGenreFichier);
                } else {
                    if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud) {
                        lClasseIcone = 'icon_cloud';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Url) {
                        lClasseIcone = 'icon_link';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienKiosque) {
                        lClasseIcone = 'icon_external_link';
                    } else if (aDocJoint.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.LienVisio) {
                        lClasseIcone = 'icon_cours_virtuel';
                    }
                }
                return lClasseIcone;
            }
        }
        exports.ObjetChaine = ObjetChaine;
        ObjetChaine.regexCarControl = /[\x00-\x1F\x7F-\x9f]/gi;
        function _dateToStr(ADate) {
            return ADate ? ADate.getDate() + '/' + (ADate.getMonth() + 1) + '/' + ADate.getFullYear() + ' ' + ADate.getHours() + ':' + ADate.getMinutes() + ':' + ADate.getSeconds() : '';
        }
        exports.GChaine = GChaine = new ObjetChaine();
        Date.prototype.toJSON = function() {
            const lJSON = {};
            lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpDateTime;
            lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = _dateToStr(this);
            return lJSON;
        }
        ;
    },
    fn: 'objetchaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeNote = void 0;
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const Enumere_Annotation_1 = require("Enumere_Annotation");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetChaine_1 = require("ObjetChaine");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTri_1 = require("ObjetTri");
        class TypeNote {
            constructor(aParametre, N) {
                this.note = '0.00';
                this.valeur = 0.00;
                this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                this.bareme = 0.00;
                if (typeof aParametre === 'string') {
                    this.genre = this.getGenreNote(aParametre);
                    this.valeur = this.noteToValeur(aParametre);
                    this.note = this.estUneAnnotation() ? this.getChaineAnnotationDeGenre(this.genre) : this.valeurToNote(this.valeur, N);
                    if (this.genre === Enumere_Annotation_1.EGenreAnnotation.absentZero || this.genre === Enumere_Annotation_1.EGenreAnnotation.nonRenduZero) {
                        this.valeur = 0.00;
                    } else if (this.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations) {
                        const lAvecFelicitationAutorisee = TypeNote.estAnnotationPermise(Enumere_Annotation_1.EGenreAnnotation.felicitations);
                        if (lAvecFelicitationAutorisee) {
                            this.bareme = this.getBaremeNote(aParametre);
                            this.note = this.valeurToNote(this.bareme, N) + this.note;
                            try {
                                const lSurplusBareme = TypeNote.getValeurSurplusBaremeAAppliquer(this.bareme);
                                this.valeur = this.bareme + lSurplusBareme;
                            } catch (error) {}
                        } else {
                            this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                            this.bareme = this.getBaremeNote(aParametre);
                            this.note = this.valeurToNote(this.bareme, N);
                            this.valeur = this.bareme;
                        }
                    }
                    this.chaine = aParametre;
                } else if (typeof aParametre === 'number') {
                    this.note = this.valeurToNote(aParametre, N);
                    this.valeur = aParametre;
                    this.genre = Enumere_Annotation_1.EGenreAnnotation.note;
                }
            }
            getCaractereAnnotation(aArrayGenresNote) {
                const lCaractereAnnotation = {};
                for (const x in aArrayGenresNote) {
                    switch (aArrayGenresNote[x]) {
                    case (Enumere_Annotation_1.EGenreAnnotation.absent):
                        lCaractereAnnotation.Absent = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Absent');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.dispense):
                        lCaractereAnnotation.Dispense = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Dispense');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonNote):
                        lCaractereAnnotation.NonNote = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonNote');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.inapte):
                        lCaractereAnnotation.Inapte = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Inapte');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonRendu):
                        lCaractereAnnotation.NonRendu = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonRendu');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.absentZero):
                        lCaractereAnnotation.AbsentZero = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.AbsentZero');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.nonRenduZero):
                        lCaractereAnnotation.NonRenduZero = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonRenduZero');
                        break;
                    case (Enumere_Annotation_1.EGenreAnnotation.felicitations):
                        lCaractereAnnotation.Felicitations = ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Felicitations');
                        break;
                    }
                }
                return lCaractereAnnotation;
            }
            getGenreNote(aChaine) {
                if (aChaine.split('|').length >= 2) {
                    return parseInt(aChaine.split('|')[1]);
                }
                const lTabNotations = _getTableauNotations();
                for (const I in lTabNotations) {
                    if (lTabNotations[I].toLowerCase() === aChaine.toLowerCase()) {
                        return parseInt(I);
                    } else if (parseInt(I) === Enumere_Annotation_1.EGenreAnnotation.felicitations) {
                        const lObjCaracteresAnnotation = this.getCaractereAnnotation([Enumere_Annotation_1.EGenreAnnotation.felicitations]);
                        if (aChaine.indexOf(lObjCaracteresAnnotation.Felicitations) > 0) {
                            return Enumere_Annotation_1.EGenreAnnotation.felicitations;
                        }
                    }
                }
                return Enumere_Annotation_1.EGenreAnnotation.note;
            }
            getBaremeNote(aChaine) {
                let lStrBareme = aChaine.split('|')[2];
                if (!!lStrBareme) {
                    lStrBareme = lStrBareme.replace(',', '.');
                }
                return parseFloat(lStrBareme);
            }
            getNote() {
                return this.note;
            }
            getValeur() {
                return this.valeur;
            }
            getGenre() {
                return this.genre;
            }
            estUneValeur() {
                return !isNaN(this.valeur);
            }
            toString() {
                return this.note;
            }
            getNoteSansDecimaleForcee() {
                if (this.genre === Enumere_Annotation_1.EGenreAnnotation.note && !isNaN(this.valeur)) {
                    return this.valeur.toString().replace('.', ',');
                }
                return this.getNote();
            }
            toStr() {
                let str;
                if (this.genre === Enumere_Annotation_1.EGenreAnnotation.note) {
                    str = this.note;
                } else {
                    str = '|' + this.genre;
                    if (this.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations && (this.bareme !== null && this.bareme !== undefined)) {
                        str += '|' + this.bareme;
                    }
                }
                return str;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpNote;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toStr();
                return lJSON;
            }
            noteToValeur(aStrNote) {
                return parseFloat(aStrNote.replace(',', '.'));
            }
            valeurToNote(aValeur, N) {
                let lValeurNb;
                if (typeof aValeur === 'number') {
                    if (isNaN(aValeur)) {
                        return '';
                    }
                    lValeurNb = aValeur;
                } else {
                    lValeurNb = parseFloat(aValeur);
                }
                N = N === null || N === undefined ? TypeNote.decimalNotation : N;
                return ('' + (lValeurNb.toFixed(N))).replace('.', ',');
            }
            estUneNoteVide() {
                return (this.note === '');
            }
            estUneAnnotation() {
                return (this.genre !== Enumere_Annotation_1.EGenreAnnotation.note);
            }
            estVide() {
                return (this.note === '') && !this.estUneValeur();
            }
            estUneNoteValide(aNoteMin, aNoteMax, aAvecNotationSpecifique, aAvecVide) {
                if (this.estUneNoteVide()) {
                    return aAvecVide === true;
                }
                if (aAvecNotationSpecifique) {
                    if (this.genre !== Enumere_Annotation_1.EGenreAnnotation.note) {
                        return true;
                    }
                }
                let lChaine = this.note.replace(/\./g, ',');
                if (lChaine.indexOf(',') === -1) {
                    lChaine += ',';
                }
                const lPosVirgule = lChaine.indexOf(',');
                const lNbrVirgule = lChaine.split(',').length - 1;
                const lPosMoins = lChaine.indexOf('-');
                const lPosVirguleMax = Math.max(('' + (parseInt(aNoteMin.toString()))).length, ('' + (parseInt(aNoteMax.toString()))).length);
                return (lPosMoins <= 0) && (lPosVirgule <= lPosVirguleMax) && (lChaine.length - (lPosVirgule + 1) <= TypeNote.decimalNotation) && (lNbrVirgule <= 1) && (this.valeur >= aNoteMin.getValeur()) && (this.valeur <= aNoteMax.getValeur());
            }
            getNoteEntier() {
                return this.estUneValeur() ? this.getNote().enleverZero() : this.getNote();
            }
            getBaremeEntier() {
                return '/' + this.getNote().enleverZero();
            }
            getBaremeEntierSansSlash() {
                return this.getNote().enleverZero();
            }
            getCoefficientEntier() {
                return this.getNote().enleverZero();
            }
            estBaremeParDefaut() {
                return TypeNote.baremeNotation ? this.getValeur() === TypeNote.baremeNotation.getValeur() : false;
            }
            estCoefficientParDefaut() {
                return this.valeur === 1;
            }
            getCoefficient() {
                if (this.estUneValeur()) {
                    return this.getNote();
                } else {
                    return 'xx.xx';
                }
            }
            getChaineAnnotationDeCaractere(aCaractere) {
                const lAnnotation = TypeNote.getGenreAnnotationDeRaccourci(aCaractere);
                if (!!lAnnotation) {
                    return _getTableauNotations()[lAnnotation];
                }
            }
            getChaineAnnotationDeGenre(aGenre) {
                return _getTableauNotations()[aGenre];
            }
            egal(aNote) {
                return !!aNote && this.toStr() === aNote.toStr();
            }
            dupliquer() {
                const lNote = new TypeNote();
                lNote.note = this.note;
                lNote.valeur = this.valeur;
                lNote.genre = this.genre;
                return lNote;
            }
            static getValeurSurplusBaremeAAppliquer(aValeurBareme) {
                let lSurplusBaremeCalcule = 0;
                if (!!aValeurBareme && !!TypeNote.surplusBareme && TypeNote.surplusBareme.getValeur()) {
                    const lBaremeParDefaut = TypeNote.baremeNotation;
                    if (!!lBaremeParDefaut && aValeurBareme !== lBaremeParDefaut.getValeur()) {
                        lSurplusBaremeCalcule = (TypeNote.surplusBareme.getValeur() * aValeurBareme) / lBaremeParDefaut.getValeur();
                    } else {
                        lSurplusBaremeCalcule = TypeNote.surplusBareme.getValeur();
                    }
                }
                return lSurplusBaremeCalcule;
            }
            static estAnnotationPermise(aGenreAnnotation) {
                const lListeAutorisee = TypeNote.listeAnnotationsAutorisees;
                return !!aGenreAnnotation && (!lListeAutorisee || lListeAutorisee.indexOf(aGenreAnnotation) !== -1);
            }
            static avecVirgule() {
                return TypeNote.decimalNotation > 0;
            }
            static getGenreAnnotationDeRaccourci(aCaractere) {
                let lGenreAnnotation = null;
                if (!!aCaractere && aCaractere.toLowerCase) {
                    switch (aCaractere.toLowerCase()) {
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Absent')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.absent;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Dispense')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.dispense;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonNote')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonNote;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Inapte')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.inapte;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonRendu')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonRendu;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.AbsentZero')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.absentZero;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.NonRenduZero')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.nonRenduZero;
                        break;
                    case (ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation.Felicitations')):
                        lGenreAnnotation = Enumere_Annotation_1.EGenreAnnotation.felicitations;
                        break;
                    }
                }
                return lGenreAnnotation;
            }
            static estCaractereNote(aChar, aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation) {
                aAvecLettre = aAvecLettre === null || aAvecLettre === undefined ? true : aAvecLettre;
                aAvecVirgule = aAvecVirgule === null || aAvecVirgule === undefined ? true : aAvecVirgule;
                aAvecMoins = aAvecMoins === null || aAvecMoins === undefined ? true : aAvecMoins;
                aCaractereAnnotation = aCaractereAnnotation === null || aCaractereAnnotation === undefined ? ObjetTraduction_1.GTraductions.getValeur('TypeNote.CaractereAnnotation') : aCaractereAnnotation;
                let lRegExp = '0-9';
                if (aAvecLettre) {
                    let lCarAnnot = '';
                    for (const x in aCaractereAnnotation) {
                        if (aCaractereAnnotation[x].toLowerCase && aCaractereAnnotation[x] !== ' ') {
                            lCarAnnot += aCaractereAnnotation[x].toLowerCase();
                        }
                    }
                    lRegExp += lCarAnnot + lCarAnnot.toUpperCase();
                }
                if (aAvecVirgule) {
                    lRegExp += '.,';
                }
                if (aAvecMoins) {
                    lRegExp += '-';
                }
                return ToucheClavier_1.ToucheClavierUtil.estCaractere(aChar, lRegExp);
            }
            static formatStrToNote(aChaine, aOptions={}) {
                const lNote = new TypeNote(aChaine);
                let lValeurMin = 0;
                if (typeof aOptions.min === 'function') {
                    lValeurMin = aOptions.min();
                } else if (!!aOptions.min) {
                    lValeurMin = aOptions.min;
                }
                if (lNote.getGenre() > 0) {
                    return aOptions.avecAnnotation ? lNote : null;
                }
                if (aChaine === '') {
                    return aOptions.sansNotePossible ? lNote : null;
                }
                if (aChaine === ',' || aChaine === '.') {
                    return aOptions && aOptions.avecVirgule && aOptions.sansNotePossible ? lNote : null;
                }
                if (aChaine === '-') {
                    return lValeurMin < 0 ? lNote : null;
                }
                if (lNote.estUneValeur()) {
                    const lTest = '0-9' + (aOptions.avecVirgule ? ',.' : '') + (lValeurMin < 0 ? '-' : '');
                    if (new RegExp('^[' + lTest + ']+$').test(aChaine)) {
                        return lNote;
                    }
                }
                return null;
            }
            static validerNote(aValeur, aOptions={}) {
                const lDefaultOptions = {
                    avecVirgule: true,
                    afficherAvecVirgule: true,
                    avecAnnotation: true,
                    sansNotePossible: true,
                    min: 0,
                    max: 100,
                    titreMessageMinMax: '',
                    messageMinMax: ObjetTraduction_1.GTraductions.getValeur('InputNote.MinMax')
                };
                const lOptions = $.extend(lDefaultOptions, aOptions);
                if (typeof (aValeur) !== 'string') {
                    aValeur = String(aValeur);
                }
                if (!lOptions.avecVirgule) {
                    lOptions.afficherAvecVirgule = false;
                }
                let lResult;
                let lValueTemp = aValeur;
                if (lValueTemp.search(/^[0-9]*(,|\.)[0-9]+/) === 0) {
                    const lRegExp = new RegExp('^([0-9]*(,|\\.)[0-9]{' + TypeNote.decimalNotation + '}).*$');
                    lValueTemp = lValueTemp.replace(lRegExp, '$1');
                }
                const lNote = TypeNote.formatStrToNote(lValueTemp, lOptions);
                let lValeurMin;
                if (typeof lOptions.min === 'function') {
                    lValeurMin = lOptions.min();
                } else {
                    lValeurMin = lOptions.min;
                }
                let lValeurMax;
                if (typeof lOptions.max === 'function') {
                    lValeurMax = lOptions.max();
                } else {
                    lValeurMax = lOptions.max;
                }
                const lNoteMin = new TypeNote(lValeurMin)
                  , lNoteMax = new TypeNote(lValeurMax);
                if (!lNote || !lNote.estUneNoteValide(lNoteMin, lNoteMax, lOptions.avecAnnotation, lOptions.sansNotePossible) || lValueTemp === '-') {
                    const lMessage = ObjetChaine_1.GChaine.format(lOptions.messageMinMax, [lOptions.afficherAvecVirgule ? lNoteMin.getNote() : lNoteMin.getNoteSansDecimaleForcee(), lOptions.afficherAvecVirgule ? lNoteMax.getNote() : lNoteMax.getNoteSansDecimaleForcee()]);
                    lResult = {
                        estValide: false,
                        titre: lOptions.titreMessageMinMax,
                        message: lMessage
                    };
                } else {
                    lResult = {
                        estValide: true,
                        note: lNote
                    };
                }
                return lResult;
            }
            static getTrisDefaut(aGetNote, aGenreTri) {
                if (!MethodesObjet_1.MethodesObjet.isFunction(aGetNote)) {
                    return [];
                }
                return [ObjetTri_1.ObjetTri.init( (D) => {
                    const lNote = aGetNote(D);
                    if (lNote && (lNote.genre === Enumere_Annotation_1.EGenreAnnotation.note || lNote.genre === Enumere_Annotation_1.EGenreAnnotation.felicitations) && lNote.estUneValeur()) {
                        return lNote.valeur;
                    }
                    return -1000;
                }
                , aGenreTri), ObjetTri_1.ObjetTri.init( (D) => {
                    const lNote = aGetNote(D);
                    if (lNote) {
                        return lNote.genre === Enumere_Annotation_1.EGenreAnnotation.note ? -100 : lNote.genre;
                    }
                    return -1000;
                }
                , aGenreTri)];
            }
        }
        exports.TypeNote = TypeNote;
        TypeNote.decimalNotation = 2;
        TypeNote.baremeNotation = null;
        TypeNote.surplusBareme = null;
        TypeNote.listeAnnotationsAutorisees = null;
        let lTableauNotations = null;
        function _getTableauNotations() {
            if (!lTableauNotations) {
                lTableauNotations = ['', ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.Absent'), ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.Dispense'), ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.NonNote'), ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.Inapte'), ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.NonRendu'), ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.Absent') + '*', ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.NonRendu') + '*', ObjetTraduction_1.GTraductions.getValeur('TypeNote.Annotation.Felicitations')];
            }
            return lTableauNotations;
        }
    },
    fn: 'typenote.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreArrondi = void 0;
        var EGenreArrondi;
        (function(EGenreArrondi) {
            EGenreArrondi[EGenreArrondi["sans"] = 0] = "sans";
            EGenreArrondi[EGenreArrondi["superieur"] = 1] = "superieur";
            EGenreArrondi[EGenreArrondi["inferieur"] = 2] = "inferieur";
            EGenreArrondi[EGenreArrondi["plusProche"] = 3] = "plusProche";
        }
        )(EGenreArrondi || (exports.EGenreArrondi = EGenreArrondi = {}));
    },
    fn: 'enumere_arrondi.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeArrondi = void 0;
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const TypeNote_1 = require("TypeNote");
        const Enumere_Arrondi_1 = require("Enumere_Arrondi");
        class TypeArrondi {
            constructor(aGenrePronote) {
                this.precision = 0;
                this.genre = Enumere_Arrondi_1.EGenreArrondi.sans;
                this.precisionMini = 1 / Math.pow(10, TypeNote_1.TypeNote.decimalNotation);
                this.toType(aGenrePronote);
            }
            getPrecision() {
                return this.precision;
            }
            getGenre() {
                return this.genre;
            }
            setPrecision(aPrecision) {
                this.precision = aPrecision;
            }
            setGenre(aGenre) {
                this.genre = aGenre;
            }
            arrondir(aValeur) {
                aValeur = Math.round(parseFloat(Number(aValeur / this.precisionMini).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precisionMini;
                switch (this.genre) {
                case Enumere_Arrondi_1.EGenreArrondi.superieur:
                    return Math.ceil(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                case Enumere_Arrondi_1.EGenreArrondi.inferieur:
                    return Math.floor(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                case Enumere_Arrondi_1.EGenreArrondi.plusProche:
                    return Math.round(parseFloat(Number(aValeur / this.precision).toFixed(TypeNote_1.TypeNote.decimalNotation))) * this.precision;
                default:
                    return aValeur;
                }
            }
            toType(aGenrePronote) {
                this.precision = [this.precisionMini, 0.10, 0.25, 0.50, 1, 0.10, 0.25, 0.50, 1][aGenrePronote];
                this.genre = parseInt(aGenrePronote) !== 0 ? parseInt(aGenrePronote) <= 4 ? Enumere_Arrondi_1.EGenreArrondi.superieur : Enumere_Arrondi_1.EGenreArrondi.plusProche : Enumere_Arrondi_1.EGenreArrondi.sans;
            }
            toString() {
                switch (this.genre) {
                case Enumere_Arrondi_1.EGenreArrondi.sans:
                    return 0;
                case Enumere_Arrondi_1.EGenreArrondi.superieur:
                    switch (this.precision) {
                    case 0.10:
                        return 1;
                    case 0.25:
                        return 2;
                    case 0.50:
                        return 3;
                    case 1:
                        return 4;
                    default:
                        ;return 0;
                    }
                case Enumere_Arrondi_1.EGenreArrondi.plusProche:
                    switch (this.precision) {
                    case 0.10:
                        return 5;
                    case 0.25:
                        return 6;
                    case 0.50:
                        return 7;
                    case 1:
                        return 8;
                    default:
                        ;return 0;
                    }
                default:
                    return 0;
                }
            }
            strPrecision() {
                const lTrads = ObjetTraduction_1.GTraductions.getTabValeurs('Arrondi');
                switch (this.precision) {
                case this.precisionMini:
                    return lTrads[0];
                case 0.10:
                    return lTrads[1];
                case 0.25:
                    return lTrads[2];
                case 0.50:
                    return lTrads[3];
                case 1.00:
                    return lTrads[4];
                }
                return lTrads[0];
            }
            dupliquer() {
                const lArrondi = new TypeArrondi(0);
                lArrondi.precision = this.precision;
                lArrondi.genre = this.genre;
                return lArrondi;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpArrondi;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
        }
        exports.TypeArrondi = TypeArrondi;
    },
    fn: 'typearrondi.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEnsembleNombre = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        class TypeEnsembleNombre {
            constructor(aValeur) {
                this._set = new Set();
                this._cacheItems = null;
                this.clear();
                if (aValeur !== undefined) {
                    this.add(aValeur);
                }
            }
            clear() {
                this._set = new Set();
                this._cacheItems = null;
                return this;
            }
            add(aValeur) {
                this._cacheItems = null;
                if (typeof aValeur === 'number') {
                    this._set.add(aValeur);
                } else if (aValeur instanceof TypeEnsembleNombre) {
                    aValeur.items().forEach( (aVal) => {
                        this._set.add(aVal);
                    }
                    );
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    aValeur.forEach( (aVal) => {
                        if (typeof aVal === 'number') {
                            this._set.add(aVal);
                        }
                    }
                    );
                }
                return this;
            }
            remove(aValeur) {
                this._cacheItems = null;
                if (typeof aValeur === 'number') {
                    this._set.delete(aValeur);
                } else if (aValeur instanceof TypeEnsembleNombre) {
                    aValeur.items().forEach( (aVal) => {
                        this._set.delete(aVal);
                    }
                    );
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    aValeur.forEach( (aVal) => {
                        this._set.delete(aVal);
                    }
                    );
                }
                return this;
            }
            contains(aValeur) {
                if (typeof aValeur === 'number') {
                    return this._set.has(aValeur);
                }
                let lItems = null;
                if (aValeur instanceof TypeEnsembleNombre) {
                    lItems = aValeur.items();
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    lItems = aValeur;
                }
                if (lItems) {
                    if (lItems.length === 0) {
                        return false;
                    }
                    return lItems.every( (aVal) => {
                        return this._set.has(aVal);
                    }
                    );
                }
                return false;
            }
            intersect(aValeur) {
                const lSet = new Set();
                this._cacheItems = null;
                let lItems = null;
                if (aValeur instanceof TypeEnsembleNombre) {
                    lItems = aValeur.items();
                } else if (MethodesObjet_1.MethodesObjet.isArray(aValeur)) {
                    lItems = aValeur;
                } else {}
                if (lItems) {
                    lItems.forEach( (aVal) => {
                        if (this._set.has(aVal)) {
                            lSet.add(aVal);
                        }
                    }
                    );
                    this._set = lSet;
                }
                return this;
            }
            get(aIndex) {
                const lItems = this.items();
                if (aIndex < 0 || aIndex > lItems.length || !MethodesObjet_1.MethodesObjet.isNumber(aIndex)) {
                    return null;
                }
                return lItems[aIndex];
            }
            indexOf(aValeur) {
                if (!this._set.has(aValeur)) {
                    return -1;
                }
                return MethodesTableau_1.MethodesTableau.binaryIndexOf(this.items(), aValeur);
            }
            items() {
                if (!this._cacheItems) {
                    this._cacheItems = [];
                    for (const lVal of this._set.values()) {
                        this._cacheItems.push(lVal);
                    }
                    this._cacheItems.sort(_sort);
                }
                return this._cacheItems;
            }
            count() {
                return this._set.size;
            }
            each(aMethode, thisArg) {
                this.items().forEach( (aItem, aIndex) => {
                    aMethode.call(thisArg, aItem, aIndex);
                }
                );
                return this;
            }
            dupliquer() {
                return new TypeEnsembleNombre(this);
            }
            toString() {
                let lResult = '', lNbDeSuite = 0, lValeur, lItems = this.items();
                for (let lIx = 1; lIx <= lItems.length; lIx++) {
                    lValeur = lItems[lIx];
                    if ((lItems.length > lIx) && (lValeur === lItems[lIx - 1] + 1)) {
                        lNbDeSuite++;
                    } else {
                        if (lResult.length > 0) {
                            lResult += ',';
                        }
                        if (lNbDeSuite > 0) {
                            lResult += lItems[lIx - 1 - lNbDeSuite] + '..';
                        }
                        lResult += lItems[lIx - 1];
                        lNbDeSuite = 0;
                    }
                }
                return '[' + lResult + ']';
            }
            fromString(aChaine) {
                if (!aChaine || !aChaine.length || aChaine.length < 2) {
                    return this;
                }
                aChaine = aChaine.substring(1, aChaine.length - 1);
                const T1 = aChaine.split(',');
                let T2, V1, V2;
                for (let I = 0; I < T1.length; I++) {
                    T2 = T1[I].split('..');
                    V1 = parseInt(T2[0], 10);
                    V2 = parseInt(T2.length === 1 ? T2[0] : T2[1], 10);
                    for (let J = V1; J <= V2; J++) {
                        this._set.add(J);
                    }
                }
                return this;
            }
            toJSON() {
                const lJSON = {};
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] = TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleNombre;
                lJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = this.toString();
                return lJSON;
            }
        }
        exports.TypeEnsembleNombre = TypeEnsembleNombre;
        function _sort(a, b) {
            return a < b ? -1 : a > b ? 1 : 0;
        }
    },
    fn: 'typeensemblenombre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetJSON = void 0;
        require("DeclarationJQuery");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_ChampsJSON_1 = require("Enumere_ChampsJSON");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeHttpVariable_1 = require("TypeHttpVariable");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeArrondi_1 = require("TypeArrondi");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetChaine_1 = require("ObjetChaine");
        const TypeNote_1 = require("TypeNote");
        const ObjetJSON = {
            parse(data, aParametres) {
                if (!data || typeof data !== 'string') {
                    return null;
                }
                const lParametres = Object.assign({
                    ignorerEntites: false,
                    JSONCollection: null
                }, aParametres);
                const lJSON = ObjetJSON.parseJSON(data);
                return ObjetJSON.parseVariables(lJSON, lParametres);
            },
            parseJSON(data) {
                let lJSON;
                try {
                    lJSON = JSON.parse(data);
                } catch (e) {
                    lJSON = null;
                }
                return lJSON;
            },
            parseVariables(aJSON, aParametres) {
                let lJSON;
                const lParametres = Object.assign({
                    ignorerEntites: false,
                    JSONCollection: null
                }, aParametres);
                try {
                    lJSON = _parseVariables(aJSON, lParametres);
                } catch (e) {
                    lJSON = {};
                }
                return lJSON;
            },
            toJSON(aObjet, aParametres) {
                let lJSON;
                try {
                    if (aParametres && aParametres.ignorerEntites && !aParametres.JSONCollection) {
                        lJSON = aObjet;
                    } else {
                        lJSON = ObjetJSON.preparerJSON(aObjet, aParametres);
                    }
                    return JSON.stringify(lJSON);
                } catch (e) {}
                return '';
            },
            preparerJSON(aObjet, aParametres) {
                const lChaine = JSON.stringify(aObjet);
                let lJSON = JSON.parse(lChaine);
                if (aParametres && aParametres.ignorerEntites && !aParametres.JSONCollection) {
                    return lJSON;
                }
                lJSON = _toJSON(lJSON, {
                    ignorerEntites: !!(aParametres && aParametres.ignorerEntites),
                    JSONCollection: aParametres && aParametres.JSONCollection ? aParametres.JSONCollection : null
                });
                return lJSON;
            }
        };
        exports.ObjetJSON = ObjetJSON;
        function _parseElement(aJSON, aParametres) {
            const lElement = new ObjetElement_1.ObjetElement().fromJSON(aJSON);
            let lValeur;
            let lProp;
            if (aJSON) {
                if (lElement.Libelle) {
                    lElement.Libelle = aParametres.ignorerEntites ? lElement.Libelle : ObjetChaine_1.GChaine.ajouterEntites(lElement.Libelle);
                }
                for (lProp in aJSON) {
                    if (lProp !== ObjetElement_1.ObjetElement.const_JSON.libelle.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.numero.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.genre.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.position.JSON && lProp !== ObjetElement_1.ObjetElement.const_JSON.actif.JSON) {
                        lValeur = aJSON[lProp];
                        if (!_parseVariablesDeSource(lElement, lProp, lValeur, aParametres)) {
                            lElement[lProp] = lValeur;
                        }
                    }
                }
            }
            return lElement;
        }
        function _strToNote(aNote) {
            if (!TypeNote_1.TypeNote) {
                return null;
            }
            if (MethodesObjet_1.MethodesObjet.isArray(aNote)) {
                const T = [];
                for (const i in aNote) {
                    T[i] = new TypeNote_1.TypeNote(aNote[i]);
                }
                return T;
            }
            return new TypeNote_1.TypeNote(aNote);
        }
        function _parseVariable(aJSON, aParametres) {
            if (!aJSON) {
                return null;
            }
            const lType = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type];
            const lValeur = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur];
            switch (lType) {
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpElement:
                if (MethodesObjet_1.MethodesObjet.isArray(lValeur)) {
                    const lListeElements = new ObjetListeElements_1.ObjetListeElements();
                    if (lValeur && lValeur.length) {
                        for (let i = 0, lNb = lValeur.length; i < lNb; i++) {
                            const lElement = _parseElement(lValeur[i], aParametres);
                            lListeElements.addElement(lElement);
                        }
                    }
                    return lListeElements;
                }
                return _parseElement(lValeur, aParametres);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpFichierBase64:
                if (aParametres && aParametres.JSONCollection && aParametres.JSONCollection.fichiers) {
                    const lFichierBase64 = aParametres.JSONCollection.fichiers[lValeur];
                    aParametres.JSONCollection.fichiers[lValeur] = null;
                    return lFichierBase64;
                }
                ;return '';
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpCardinal:
                return ObjetChaine_1.GChaine.strToCardinal(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpBoolean:
                return ObjetChaine_1.GChaine.strToBoolean(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpString:
                return ObjetChaine_1.GChaine.ajouterEntites(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpColor:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDateTime:
                return ObjetChaine_1.GChaine.strToDate(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpNote:
                return _strToNote(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpTraduction:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpIP:
                return ObjetChaine_1.GChaine.strToIp(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpInteger:
                return ObjetChaine_1.GChaine.strToInteger(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDouble:
                return ObjetChaine_1.GChaine.strToDouble(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpDomaine:
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsemble:
                return new TypeDomaine_1.TypeDomaine(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleCardinal:
                return new TypeDomaine_1.TypeDomaine(lValeur,TypeDomaine_1.TypeDomaine.CTailleOuverte);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpArrondi:
                return new TypeArrondi_1.TypeArrondi(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpHtml:
                return ObjetChaine_1.GChaine.htmlToSafeHtml(lValeur);
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpHtmlSafe:
                return lValeur;
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpEnsembleNombre:
                return new TypeEnsembleNombre_1.TypeEnsembleNombre().fromString(lValeur);
            default:
                return lValeur;
            }
        }
        function _estVariable(aJSON) {
            if (aJSON && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] !== undefined && aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type] >= 0) {
                const lKeys = Object.keys(aJSON);
                if (lKeys.length === 2 && ((lKeys[0] === Enumere_ChampsJSON_1.TypeChampsJSON.type && lKeys[1] === Enumere_ChampsJSON_1.TypeChampsJSON.valeur) || (lKeys[1] === Enumere_ChampsJSON_1.TypeChampsJSON.type && lKeys[0] === Enumere_ChampsJSON_1.TypeChampsJSON.valeur))) {
                    return true;
                }
                return false;
            }
            return false;
        }
        function _estObjet(aValeur) {
            return aValeur && !aValeur.trim && typeof aValeur === 'object';
        }
        function _parseVariablesDeSource(aObjetResultat, aNomProprieteSource, aValeurSource, aParametres) {
            let lEstVariable;
            let lResult = true;
            if (MethodesObjet_1.MethodesObjet.isString(aValeurSource)) {
                aObjetResultat[aNomProprieteSource] = aParametres.ignorerEntites ? aValeurSource : ObjetChaine_1.GChaine.ajouterEntites(aValeurSource);
            } else if (_estObjet(aValeurSource)) {
                lEstVariable = false;
                if (!Array.isArray(aValeurSource)) {
                    lEstVariable = _estVariable(aValeurSource);
                }
                aObjetResultat[aNomProprieteSource] = lEstVariable ? _parseVariable(aValeurSource, aParametres) : _parseVariables(aValeurSource, aParametres);
            } else {
                lResult = false;
            }
            return lResult;
        }
        function _parseVariables(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            for (const i in aJSON) {
                _parseVariablesDeSource(aJSON, i, aJSON[i], aParametres);
            }
            return aJSON;
        }
        function _preparerVariableToJSON(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            const lType = aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.type];
            switch (lType) {
            case TypeHttpVariable_1.TypeHttpVariable.TypeHttpFichierBase64:
                if (aParametres && aParametres.JSONCollection) {
                    if (!aParametres.JSONCollection.fichiers) {
                        aParametres.JSONCollection.fichiers = [];
                    }
                    aParametres.JSONCollection.fichiers.push(aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur]);
                    aJSON[Enumere_ChampsJSON_1.TypeChampsJSON.valeur] = aParametres.JSONCollection.fichiers.length - 1;
                    return aJSON;
                }
                ;return aJSON;
            default:
                return aJSON;
            }
        }
        function _toJSON(aJSON, aParametres) {
            if (!aJSON) {
                return aJSON;
            }
            let lValeur;
            for (const i in aJSON) {
                lValeur = aJSON[i];
                if (lValeur) {
                    if (typeof lValeur === 'string') {
                        if (!aParametres.ignorerEntites) {
                            aJSON[i] = ObjetChaine_1.GChaine.enleverEntites(lValeur);
                        }
                    } else if (_estVariable(lValeur)) {
                        aJSON[i] = _preparerVariableToJSON(lValeur, aParametres);
                    } else if (lValeur !== true && !lValeur.MAX_VALUE && !lValeur.getDate && typeof lValeur === 'object') {
                        aJSON[i] = _toJSON(lValeur, aParametres);
                    }
                }
            }
            return aJSON;
        }
    },
    fn: 'objetjson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        var _a;
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.setObjetDate = exports.REGEXP_TELEPHONE = exports.TAILLEMAX_INDICATIF_TELEPHONE = exports.REGEXP_INDICATIF_TELEPHONE = exports.MAX_LENGTH_Default = exports.C_eventsModifyInput = exports.C_eventsModifyCheckbox = exports.collectionIdentite = exports.outils = exports.empty = exports.injectHTMLParams = exports.injectHTML = exports.refresh = exports.ieData = exports.addClass = exports.addAttribut = exports.addBalise = exports.initControleur = void 0;
        require("DeclarationJQuery.js");
        const Divers_js_1 = require("Divers.js");
        require("jInputDisabled.js");
        require("jInputChecked.js");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ObjetJSON_1 = require("ObjetJSON");
        const ObjetChaine_1 = require("ObjetChaine");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetSupport_1 = require("ObjetSupport");
        const uBalises = {};
        const uAttributs = {};
        const uClassesCss = {};
        const uNodeNames = [];
        let lGUIDControleur1 = 1;
        let lGUIDControleur2 = 1;
        const C_id_event_iemodel = 'ie-model_verification';
        const C_RegExp_Match = /^\/(.*)\/([gim]*)$/;
        const uInvocateur = new Invocateur_1.ObjetInvocateur();
        let uTailleMaxTelephone = null;
        const lOutils = {
            nomInvocRefresh: '__refresh_node__',
            parseValueEvent: _parseValueEvent,
            getModel: _getModel,
            abonnerRefresh: _abonnerRefresh,
            getAccesParametres: _getAccesParametres,
            getAccesParametresModel: _getAccesParametresModel,
            injectHTML: _injectHTML,
            getContexteCourant: _getContexteCourant,
            getControleSaisieEvent: _getControleSaisieEvent,
            getAttributesDeNode: _getAttributesDeNode,
            getMapDeNode: _getMapDeNode,
            copyAttributs: _copyAttributs,
            gererInputCB: _gererInputCB,
            gererInputText: _gererInputText,
            addCommentaireDebug: _addCommentaireDebug,
            composantsAttributs: uAttributs,
            createSafeFragment: _createSafeFragment,
            caret: _caret,
            compile: _compile,
            addGetterHtml: _addGetterHtml,
            surInjectionHtml: _surInjectionHtml,
            surInjectionHtmlPromise: async function(aContexteCourant, aAfter) {
                return new Promise( (aResolve, aReject) => {
                    const lResult = lOutils.surInjectionHtml(aContexteCourant, () => {
                        aResolve();
                    }
                    , aAfter);
                    if (lResult !== true) {
                        aReject();
                    }
                }
                );
            },
            surNodeEtNodeAfter(aContexteCourant) {
                const lInfosGetNode = this.getAccesParametres('node', aContexteCourant);
                if (lInfosGetNode && lInfosGetNode.estFonction) {
                    this.surInjectionHtml(aContexteCourant, (...aArgs) => {
                        lInfosGetNode.callback(aArgs);
                    }
                    );
                }
                const lInfosGetNodeAfter = this.getAccesParametres('nodeAfter', aContexteCourant);
                if (lInfosGetNodeAfter && lInfosGetNodeAfter.estFonction) {
                    this.surInjectionHtml(aContexteCourant, (...aArgs) => {
                        lInfosGetNodeAfter.callback(aArgs);
                    }
                    , true);
                }
            },
            replaceNode(aNodeAncien, aNodeNouveau) {
                if (aNodeAncien && aNodeNouveau && aNodeAncien.parentNode && aNodeAncien.parentNode.replaceChild) {
                    aNodeAncien.parentNode.replaceChild(aNodeNouveau, aNodeAncien);
                    $(aNodeAncien).remove();
                }
            }
        };
        function _surInjectionHtml(aContexteCourant, aMethode, aAfter) {
            if (!aContexteCourant || !aContexteCourant.contexte) {
                return;
            }
            if (!aContexteCourant.contexte.eventsInjectionHtml) {
                aContexteCourant.contexte.eventsInjectionHtml = [];
            }
            if (MethodesObjet_1.MethodesObjet.isFunction(aMethode)) {
                if (aAfter) {
                    aContexteCourant.contexte.eventsInjectionHtml.unshift({
                        methode: aMethode,
                        after: true
                    });
                } else {
                    aContexteCourant.contexte.eventsInjectionHtml.push({
                        methode: aMethode,
                        after: false
                    });
                }
                return true;
            } else {}
        }
        async function _$refreshSelf_controleur(aForcerSynchrone) {
            if (this.instance && _estInstanceIdentite(this.instance) && this.instance.isDestroyed()) {
                this.$promRefreshSelf = null;
                return Promise.resolve();
            }
            if (this.$asyncPromise !== false && !aForcerSynchrone) {
                if (this.$promRefreshSelf && !this.$promRefreshSelf._isFullfilled) {
                    return this.$promRefreshSelf;
                }
                this.$promRefreshSelf = new Promise( (aResolve) => {
                    setTimeout( () => {
                        if (this.$promRefreshSelf) {
                            this.$promRefreshSelf._isFullfilled = true;
                            this.$promRefreshSelf = null;
                        }
                        aResolve(this.$invocateur.evenement(C_id_event_iemodel));
                    }
                    , 0);
                }
                );
                return this.$promRefreshSelf;
            }
            this.$invocateur.evenement(C_id_event_iemodel);
            return Promise.resolve();
        }
        async function _$refresh_controleur(aForcerSynchrone) {
            if (this.$asyncPromise !== false && !aForcerSynchrone) {
                if (this.$promRefresh && !this.$promRefresh._isFullfilled) {
                    return this.$promRefresh;
                }
                this.$promRefresh = new Promise( (aResolve) => {
                    setTimeout( () => {
                        this.$promRefresh._isFullfilled = true;
                        this.$promRefresh = null;
                        aResolve(uInvocateur.evenement(C_id_event_iemodel));
                    }
                    , 0);
                }
                );
                return this.$promRefresh;
            }
            uInvocateur.evenement(C_id_event_iemodel);
            return Promise.resolve();
        }
        function _initControleur(aControleur) {
            if (!aControleur.$GUID) {
                aControleur.$GUID = lGUIDControleur1 + '_' + lGUIDControleur2;
                if (lGUIDControleur1 === Number.MAX_VALUE) {
                    lGUIDControleur1 = 1;
                    lGUIDControleur2 += 1;
                } else {
                    lGUIDControleur1 += 1;
                }
            }
            if (!aControleur.$refreshSelf) {
                aControleur.$refreshSelf = _$refreshSelf_controleur;
            }
            if (!aControleur.$refresh) {
                aControleur.$refresh = _$refresh_controleur;
            }
            if (!aControleur.$invocateur) {
                aControleur.$invocateur = new Invocateur_1.ObjetInvocateur();
            }
            return aControleur;
        }
        function _transfererFragmentDansHTML(aNodesFragment, aParent, aInsererAvantLeNode) {
            const lTab = _sliceNodes(aNodesFragment);
            while (aNodesFragment && aNodesFragment.firstChild) {
                aNodesFragment.removeChild(aNodesFragment.firstChild);
            }
            if (lTab.length === 0) {
                return;
            }
            let lSafeFragment = lTab.length > 1 ? _createSafeFragment(document) : null;
            lTab.forEach( (aNode) => {
                if (lSafeFragment) {
                    lSafeFragment.appendChild(aNode);
                } else {
                    if (aInsererAvantLeNode) {
                        aParent.insertBefore(aNode, aInsererAvantLeNode);
                    } else {
                        aParent.appendChild(aNode);
                    }
                }
            }
            );
            if (lSafeFragment) {
                if (aInsererAvantLeNode) {
                    aParent.insertBefore(lSafeFragment, aInsererAvantLeNode);
                } else {
                    aParent.appendChild(lSafeFragment);
                }
                lSafeFragment = null;
            }
            let lNode = lTab[0];
            if (lTab[1] && _estNoeudCommentaire(lNode)) {
                lNode = lTab[1];
            }
            return lNode;
        }
        function _sliceNodes(aNodes) {
            return aNodes && aNodes.length ? Array.from(aNodes) : [];
        }
        function _preInjectionHTML(aElementParent, aIgnorerScroll) {
            const lResult = {
                elementParent: aElementParent,
                parentDocument: false,
                initOverflowParent: false
            };
            let lElement = aElementParent;
            let lParent;
            while (!lResult.parentDocument && lElement) {
                lParent = null;
                if (lElement.nodeType === 1) {
                    if (lElement.parentElement) {
                        lParent = lElement.parentElement;
                    } else if (lElement.parentNode) {
                        lParent = lElement.parentNode;
                    }
                }
                lElement = lParent;
                lResult.parentDocument = lElement === document;
            }
            if (lResult.parentDocument && aIgnorerScroll !== true) {
                let lOverflow = $(aElementParent).css('overflow');
                lResult.initOverflowParent = lOverflow === 'auto' || lOverflow === 'scroll';
                lOverflow = null;
            }
            return lResult;
        }
        function _finaliserInjectionHTML(aPreInjectionHtml, aContexte) {
            if (aPreInjectionHtml.parentDocument) {
                if (aPreInjectionHtml.initOverflowParent && aPreInjectionHtml.elementParent) {
                    aPreInjectionHtml.elementParent.scrollLeft = 0;
                    aPreInjectionHtml.elementParent.scrollTop = 0;
                }
                try {
                    if (aContexte && aContexte.eventsInjectionHtml && aContexte.eventsInjectionHtml.length > 0) {
                        let lMeasures = [];
                        let lMutates = [];
                        const lEventsInjectionHtml = aContexte.eventsInjectionHtml;
                        delete aContexte.eventsInjectionHtml;
                        const lMeasureMutate = {
                            addMeasure: function(aMethode) {
                                lMeasures.push(aMethode);
                            },
                            addMutate: function(aMethode) {
                                lMutates.push(aMethode);
                            }
                        };
                        const lExec = function() {
                            lMeasures.forEach( (aMethode) => {
                                if (aMethode) {
                                    aMethode();
                                }
                            }
                            );
                            lMutates.forEach( (aMethode) => {
                                if (aMethode) {
                                    aMethode();
                                }
                            }
                            );
                        };
                        lEventsInjectionHtml.forEach( (aElement) => {
                            if (aElement && !aElement.after && aElement.methode) {
                                aElement.methode(lMeasureMutate);
                            }
                        }
                        );
                        lExec();
                        lMeasures = [];
                        lMutates = [];
                        lEventsInjectionHtml.forEach( (aElement) => {
                            if (aElement && aElement.after && aElement.methode) {
                                aElement.methode(lMeasureMutate);
                            }
                        }
                        );
                        lExec();
                    }
                } catch (e) {}
            }
        }
        function _findFirstChild(aNode, aNiveau) {
            let lNode = aNode;
            let lNiveau = aNiveau;
            while (lNode && lNiveau > 0) {
                lNode = lNode.firstChild;
                lNiveau -= 1;
            }
            return lNode;
        }
        function _getPremiereBalise(aChaine) {
            if (!aChaine || !aChaine.search) {
                return '';
            }
            let lPosDebut = aChaine.search('<');
            if (lPosDebut < 0) {
                return '';
            }
            lPosDebut += 1;
            const lChaine = aChaine.slice(lPosDebut);
            let lPosFinSup = lChaine.search('>');
            let lPosFinEsp = lChaine.search(' ');
            if (lPosFinSup < 0 && lPosFinEsp < 0) {
                return '';
            }
            if (lPosFinSup < 0) {
                lPosFinSup = lChaine.length;
            }
            if (lPosFinEsp < 0) {
                lPosFinEsp = lChaine.length;
            }
            return aChaine.slice(lPosDebut, lPosDebut + Math.min(lPosFinSup, lPosFinEsp)).toLowerCase();
        }
        function _createSafeFragment(aDocument) {
            const list = [].concat(uNodeNames)
              , safeFrag = (aDocument || document).createDocumentFragment();
            if (safeFrag.createElement) {
                while (list.length) {
                    safeFrag.createElement(list.pop());
                }
            }
            return safeFrag;
        }
        function _injectEtCompilNode(aParametres) {
            let lSafe = _createSafeFragment(document);
            let lNodeParent;
            let lNiveauFirstChild;
            lNodeParent = lSafe.appendChild(document.createElement('div'));
            if (aParametres.html && aParametres.html.nodeType > 0) {
                switch (aParametres.html.nodeName.toLowerCase()) {
                case 'td':
                    lNodeParent.appendChild(document.createElement('table'));
                    lNodeParent.firstChild.appendChild(document.createElement('tbody'));
                    lNodeParent.firstChild.firstChild.appendChild(document.createElement('tr'));
                    lNodeParent = lNodeParent.firstChild.firstChild.firstChild;
                    break;
                case 'tr':
                    lNodeParent.appendChild(document.createElement('table'));
                    lNodeParent = lNodeParent.firstChild;
                    lNodeParent.appendChild(document.createElement('tbody'));
                    lNodeParent = lNodeParent.firstChild;
                    break;
                case 'ul':
                    lNodeParent.appendChild(document.createElement('ul'));
                    lNodeParent = lNodeParent.firstChild;
                    break;
                default:
                    lNodeParent.appendChild(document.createElement('div'));
                    lNodeParent = lNodeParent.firstChild;
                }
                lNodeParent.appendChild(aParametres.html);
            } else {
                lNiveauFirstChild = 1;
                switch (_getPremiereBalise(aParametres.html)) {
                case 'td':
                    lNodeParent.insertAdjacentHTML('beforeend', '<table><tbody><tr>' + aParametres.html + '</tr></tbody></table>');
                    lNiveauFirstChild = 3;
                    break;
                case 'tr':
                    lNodeParent.insertAdjacentHTML('beforeend', '<table><tbody>' + aParametres.html + '</tbody></table>');
                    lNiveauFirstChild = 2;
                    break;
                case 'li':
                    lNodeParent.insertAdjacentHTML('beforeend', '<ul>' + aParametres.html + '</ul>');
                    break;
                default:
                    lNodeParent.insertAdjacentHTML('beforeend', '<div>' + aParametres.html + '</div>');
                }
                lNodeParent = _findFirstChild(lNodeParent, lNiveauFirstChild);
            }
            if (!aParametres.contexte) {
                aParametres.contexte = {};
            }
            aParametres.childNodes = lNodeParent.childNodes;
            _compile(aParametres.childNodes, aParametres.element, aParametres.controleur, aParametres.contexte, aParametres.invocateur, 0);
            lNodeParent = null;
            lSafe = null;
        }
        function _injectHTML(aParametres) {
            let lNode = null;
            if (aParametres.controleur) {
                if (aParametres.instance && !aParametres.controleur.instance) {
                    aParametres.controleur.instance = aParametres.instance;
                }
                _initControleur(aParametres.controleur);
            }
            if (!aParametres.element || aParametres.element.nodeType === undefined) {
                return null;
            }
            const lPreInjectionHtml = _preInjectionHTML(aParametres.element, aParametres.ignorerScroll);
            _injectEtCompilNode(aParametres);
            lNode = _transfererFragmentDansHTML(aParametres.childNodes, aParametres.element, aParametres.insererAvantLeNode);
            aParametres.childNodes = null;
            _finaliserInjectionHTML(lPreInjectionHtml, aParametres.contexte);
            return lNode;
        }
        function _remplirDataModel(aContexteCourant) {
            const lModele = aContexteCourant.node.getAttribute('ie-model');
            if (!lModele) {
                return null;
            }
            const lModeleArg = _parseValueEvent(lModele, aContexteCourant.contexte);
            if (lModeleArg && lModeleArg.nom) {
                aContexteCourant.data.$modeleParsed = lModeleArg;
                aContexteCourant.data.$modeleValue = lModele;
            }
            return true;
        }
        function _getModel(aContexteCourant) {
            const lAvecModele = _remplirDataModel(aContexteCourant);
            const lModele = aContexteCourant.data.$modeleValue;
            if (!lModele) {
                return null;
            }
            if (lAvecModele) {
                aContexteCourant.node.removeAttribute('ie-model');
                if (!aContexteCourant.ignorerCommentaires) {
                    lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-model="' + lModele + '"');
                }
            }
            return lModele;
        }
        function _getControleSaisieEvent(aContexteCourant) {
            if (!aContexteCourant.node.hasAttribute('ie-controlesaisie')) {
                return false;
            }
            ;aContexteCourant.node.removeAttribute('ie-controlesaisie');
            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-controleSaisie');
            return true;
        }
        function _callbackRefresh(aControleur, aData, aCallback) {
            if (aControleur && aControleur.$off && aControleur.$off()) {
                return;
            }
            try {
                aCallback();
            } catch (e) {}
        }
        function _abonnerRefresh(aCallback, aElementPourDestruction, aContexteCourant, aCallbackDestroy, aMutationObserverNoeudDetruit) {
            let lCallbacks = [];
            let lAjouterAbonnement = true;
            let lId;
            let lIdSelf;
            if (!aElementPourDestruction) {
                return;
            }
            if (aContexteCourant.data) {
                if (!aContexteCourant.data.$callbacksRefresh) {
                    aContexteCourant.data.$callbacksRefresh = [];
                } else {
                    lAjouterAbonnement = false;
                }
                lCallbacks = aContexteCourant.data.$callbacksRefresh;
            }
            lCallbacks.push(_callbackRefresh.bind(null, aContexteCourant.controleur, aContexteCourant.data, aCallback));
            if (lAjouterAbonnement) {
                const lInvocateur = aContexteCourant.invocateur ? aContexteCourant.invocateur : uInvocateur;
                lId = lInvocateur.abonner(C_id_event_iemodel, () => {
                    if (aContexteCourant.controleur && aContexteCourant.controleur.instance && _estInstanceIdentite(aContexteCourant.controleur.instance) && aContexteCourant.controleur.instance.isDestroyed()) {
                        return;
                    }
                    const lNb = lCallbacks.length;
                    for (let i = 0; i < lNb; i++) {
                        lCallbacks[i]();
                    }
                }
                , null, false);
                if (!aContexteCourant.invocateur && aContexteCourant.controleur) {
                    lIdSelf = aContexteCourant.controleur.$invocateur.abonner(C_id_event_iemodel, () => {
                        if (aContexteCourant.controleur && aContexteCourant.controleur.instance && _estInstanceIdentite(aContexteCourant.controleur.instance) && aContexteCourant.controleur.instance.isDestroyed()) {
                            return;
                        }
                        const lNb = lCallbacks.length;
                        for (let i = 0; i < lNb; i++) {
                            lCallbacks[i]();
                        }
                    }
                    , null, false);
                }
                let lDejaDetruit = false;
                let lObserver = null;
                const lDestroy = function() {
                    if (lDejaDetruit) {
                        return;
                    }
                    lInvocateur.desabonner([lId]);
                    if (!aContexteCourant.invocateur && aContexteCourant.controleur) {
                        aContexteCourant.controleur.$invocateur.desabonner([lIdSelf]);
                    }
                    if (aContexteCourant.data) {
                        aContexteCourant.data.$destroy = true;
                    }
                    if (lObserver && lObserver.disconnect) {
                        lObserver.disconnect();
                        lObserver = null;
                    }
                    if (aCallbackDestroy) {
                        aCallbackDestroy();
                    }
                    lDejaDetruit = true;
                };
                $(aElementPourDestruction).on('destroyed', lDestroy);
                if (aMutationObserverNoeudDetruit) {
                    const lMutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                    if (lMutationObserver) {
                        lObserver = new lMutationObserver( (mutations) => {
                            mutations.every( (mutation) => {
                                if (!lDejaDetruit && mutation.type === 'childList') {
                                    try {
                                        if (aMutationObserverNoeudDetruit()) {
                                            lDestroy();
                                            return false;
                                        }
                                    } catch (e) {}
                                }
                                return true;
                            }
                            );
                        }
                        );
                    }
                    if (lObserver) {
                        lObserver.observe(aElementPourDestruction, {
                            childList: true
                        });
                    }
                }
            }
        }
        function _estInstanceIdentite(aInstance) {
            const lInstance = aInstance;
            return lInstance && lInstance.isDestroyed && lInstance.setEtatSaisie && typeof lInstance.isDestroyed === 'function' && typeof lInstance.setEtatSaisie === 'function';
        }
        function _getAccesParametres(aNomEnChaine, aContexteCourant, aAccepteErreur, aIgnorerNomOrigine) {
            let lParsed = null;
            const lResult = {
                valide: false,
                estFonction: false,
                nom: aNomEnChaine,
                args: []
            };
            if (aNomEnChaine) {
                lParsed = _parseValueEvent(aNomEnChaine, aContexteCourant.contexte, aAccepteErreur);
                if (lParsed) {
                    aNomEnChaine = lParsed.nom;
                }
            }
            const lNomEnChaineOrigine = aNomEnChaine;
            if (aNomEnChaine && (!aContexteCourant.data || !aContexteCourant.data.$modeleParsed)) {
                if (!lParsed) {
                    return lResult;
                }
            }
            let lAncreControleur = aContexteCourant.controleur;
            let lNom;
            if (aContexteCourant.data && aContexteCourant.data.$modeleParsed) {
                if (!lParsed || !lParsed.args || lParsed.args.length === 0) {
                    lParsed = aContexteCourant.data.$modeleParsed;
                } else {
                    lParsed.nom = aContexteCourant.data.$modeleParsed.nom;
                }
                if (aContexteCourant.data.$modeleParsed.nom) {
                    aNomEnChaine = lParsed.nom + (aNomEnChaine ? '.' + aNomEnChaine : '');
                }
            }
            const lArgs = lResult.args = lParsed ? lParsed.args : [];
            if (!aContexteCourant.controleur || !aNomEnChaine) {
                return lResult;
            }
            let lTab = aNomEnChaine.split('.');
            lNom = lTab.pop();
            lAncreControleur = MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab);
            let lEstFonction = lAncreControleur && lAncreControleur[lNom] !== undefined && MethodesObjet_1.MethodesObjet.isFunction(lAncreControleur[lNom]);
            if (!lEstFonction && aContexteCourant.data && aContexteCourant.data.$modeleParsed && !aIgnorerNomOrigine) {
                const lTabHorsModele = lNomEnChaineOrigine.split('.');
                const lNomHorsModel = lTabHorsModele.pop();
                const lAncreControleurHorsModele = MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTabHorsModele);
                if (lAncreControleurHorsModele && lAncreControleurHorsModele[lNom] !== undefined && MethodesObjet_1.MethodesObjet.isFunction(lAncreControleurHorsModele[lNomHorsModel])) {
                    lEstFonction = true;
                    lAncreControleur = lAncreControleurHorsModele;
                    lTab = lTabHorsModele;
                    lNom = lNomHorsModel;
                }
            }
            const lTabRempli = lTab.length > 0;
            if (lEstFonction) {
                const lArgsCallback = lArgs || [];
                let lAvecArgsBoucleREPEAT = false;
                let lArray;
                for (let lIx = 0; lIx < lArgsCallback.length; lIx++) {
                    if (lArgsCallback[lIx] && lArgsCallback[lIx].getterArray) {
                        lAvecArgsBoucleREPEAT = true;
                        break;
                    }
                }
                lResult.valide = true;
                lResult.controleur = aContexteCourant.controleur;
                lResult.getAncre = function() {
                    return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
                }
                ;
                lResult.callback = function(aTabArguments) {
                    var _a, _b;
                    const lAncre = lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
                    if (!lAncre || !lAncre[lNom] || !lAncre[lNom].apply) {
                        return '';
                    }
                    let lArgs = lArgsCallback;
                    let lArgCallback;
                    if (lAvecArgsBoucleREPEAT) {
                        lArgs = new Array(lArgsCallback.length);
                        for (let lIx = 0, lLength = lArgsCallback.length; lIx < lLength; lIx++) {
                            lArgCallback = lArgsCallback[lIx];
                            if (lArgCallback && lArgCallback.getterArray) {
                                const lArgCallbackRepeat = lArgCallback;
                                lArray = lArgCallbackRepeat.getterArray();
                                lArgs[lIx] = {
                                    indice: lArgCallbackRepeat.indice,
                                    element: lArray[lArgCallbackRepeat.indice],
                                    tableau: lArray,
                                    arguments: lArgCallbackRepeat.arguments
                                };
                            } else {
                                lArgs[lIx] = lArgsCallback[lIx];
                            }
                        }
                    }
                    try {
                        return lAncre[lNom].apply(aContexteCourant, aTabArguments && aTabArguments.length > 0 ? lArgs.concat(aTabArguments) : lArgs);
                    } catch (e) {}
                }
                ;
                lResult.estFonction = true;
                lResult.nom = lNom;
                return lResult;
            }
            lResult.valide = !!MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab);
            lResult.getAncre = function() {
                return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab) : aContexteCourant.controleur.instance;
            }
            ;
            lResult.getAncreControleur = lAncreControleur && lAncreControleur[lNom] !== undefined ? function() {
                return lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur, lTab) : aContexteCourant.controleur;
            }
            : null;
            lResult.callback = function() {
                const lAncre = lTabRempli ? MethodesObjet_1.MethodesObjet.get(aContexteCourant.controleur.instance, lTab) : aContexteCourant.controleur.instance;
                if (!lAncre) {
                    return '';
                }
                return lAncre[lNom];
            }
            ;
            lResult.estFonction = false;
            lResult.nom = lNom;
            return lResult;
        }
        function _getAccesParametresModel(aNomEnChaine, aContexteCourant, aAccepteErreur) {
            return _getAccesParametres(aNomEnChaine, aContexteCourant, aAccepteErreur, true);
        }
        function _addCommentaireDebug(aNode, aCommentaire) {}
        function _estNoeudCommentaire(aNode) {
            return !!aNode && aNode.nodeType === 8;
        }
        function _getContexteCourant(aControleur, aContexte, aNode, aData, aInvocateur) {
            return {
                controleur: aControleur,
                instance: aControleur ? aControleur.instance : null,
                contexte: aContexte,
                data: aData,
                node: aNode,
                invocateur: aInvocateur,
                invocateurNode: new Invocateur_1.ObjetInvocateur(true)
            };
        }
        function _getAttributesDeNode(aNode) {
            return _sliceNodes(aNode.attributes);
        }
        function _getMapDeNode(aNode) {
            const lMap = {};
            for (let attr, nAttrs = _getAttributesDeNode(aNode), j = 0, jj = nAttrs && nAttrs.length; j < jj; j++) {
                attr = nAttrs[j];
                if (attr.name) {
                    const lName = attr.name.toLowerCase();
                    lMap[lName] = attr.value;
                }
            }
            return lMap;
        }
        function _copyAttributs(aNodeSource, aNodeCible, aCallback) {
            const lMap = _getMapDeNode(aNodeSource);
            const lJCible = $(aNodeCible);
            for (const llName in lMap) {
                try {
                    if (!aCallback || aCallback(llName, lMap[llName], lMap) !== false) {
                        lJCible.attr(llName, lMap[llName]);
                    }
                } catch (e) {}
            }
            return lMap;
        }
        function _addGetterHtml(aContexteCourant, aInfosParametres, aWrapperHtml) {
            const lNodeDestination = aContexteCourant.nodeTransfertContenuDynamique || aContexteCourant.node;
            const lGetter = function() {
                const lResult = aInfosParametres.callback([lNodeDestination, aContexteCourant.data]);
                if (MethodesObjet_1.MethodesObjet.isNumber(lResult)) {
                    return lResult + '';
                }
                return (lResult || '') + '';
            };
            const lWrapperHtml = aWrapperHtml || function(aHtml) {
                return aHtml;
            }
            ;
            const lHtml = lGetter();
            if (!aInfosParametres.estFonction && !MethodesObjet_1.MethodesObjet.isString(lHtml)) {
                return;
            }
            const lInvocateur = new Invocateur_1.ObjetInvocateur();
            $(lNodeDestination).empty();
            try {
                lNodeDestination.innerHTML = lWrapperHtml(lHtml);
            } catch (e) {
                $(lNodeDestination).html(lWrapperHtml(lHtml));
            }
            aContexteCourant.invocateurNode.evenement(lOutils.nomInvocRefresh, {
                refreshHtml: true,
                html: lHtml
            });
            _compile(lNodeDestination.childNodes, lNodeDestination, aContexteCourant.controleur, aContexteCourant.contexte, lInvocateur);
            let lOldHtmlValue = lHtml;
            _abonnerRefresh( () => {
                const lHtml = lGetter();
                if (lHtml !== lOldHtmlValue) {
                    lOldHtmlValue = lHtml;
                    IEHtml.empty(lNodeDestination);
                    const lContexte = Object.assign({}, aContexteCourant.contexte);
                    lContexte.eventsInjectionHtml = [];
                    _injectHTML({
                        element: lNodeDestination,
                        html: lWrapperHtml(lHtml),
                        controleur: aContexteCourant.controleur,
                        contexte: lContexte,
                        invocateur: lInvocateur
                    });
                    aContexteCourant.invocateurNode.evenement(lOutils.nomInvocRefresh, {
                        refreshHtml: true,
                        html: lHtml
                    });
                } else {
                    lInvocateur.evenement(C_id_event_iemodel);
                }
            }
            , lNodeDestination, aContexteCourant);
            return lNodeDestination;
        }
        function _parseArg(aArg, aEstChaine, aContexte) {
            if (aEstChaine) {
                return aArg;
            }
            if (aContexte && aContexte.repeat && aContexte.repeat[aArg]) {
                return aContexte.repeat[aArg];
            }
            if (aArg === 'null') {
                return null;
            }
            if (aArg === 'undefined') {
                return undefined;
            }
            if (aArg === 'true') {
                return true;
            }
            if (aArg === 'false') {
                return false;
            }
            let lNumber = parseInt(aArg, 10);
            if (isNaN(lNumber)) {
                lNumber = null;
                throw 'erreur _parseArg';
            }
            return lNumber;
        }
        function _parseValueEvent(aValue, aContexte, aSortieEnErreur) {
            if (!aValue) {
                return null;
            }
            const lResult = {
                nom: '',
                args: []
            };
            let lEtat = 'rech_fonction';
            let lChar;
            let lNomFonction = '';
            let lArg = '';
            let LArgEstChaine = false;
            const lLength = aValue.length;
            const lSepDebut = '(';
            const lSepFin = ')';
            try {
                for (let lIPars = 0; lIPars < lLength; lIPars++) {
                    lChar = aValue.charAt(lIPars);
                    switch (lEtat) {
                    case 'rech_fonction':
                        if (lChar === lSepDebut || lIPars === lLength - 1) {
                            lEtat = 'rech_param';
                            if (lIPars === aValue.length - 1) {
                                lNomFonction += lChar;
                            }
                            lResult.nom = lNomFonction.trim();
                            if (lResult.nom.length === 0) {
                                return null;
                            }
                            lArg = '';
                        } else {
                            lNomFonction += lChar;
                        }
                        break;
                    case 'rech_param':
                        if (lChar === lSepFin) {
                            if (lIPars < lLength - 1) {
                                if (aValue.charAt(lIPars + 1) !== ';') {
                                    throw 'erreur fermeture fonction';
                                }
                            }
                            lArg = lArg.trim();
                            if (LArgEstChaine || lArg.length > 0 || lResult.args.length > 0) {
                                lResult.args.push(_parseArg(lArg, LArgEstChaine, aContexte));
                            }
                            lEtat = 'fin';
                            break;
                        }
                        if (lChar === ',') {
                            lResult.args.push(_parseArg(lArg.trim(), LArgEstChaine, aContexte));
                            lArg = '';
                            LArgEstChaine = false;
                        } else if (lChar === '\'') {
                            if (lArg.trim().length > 0) {}
                            lArg = '';
                            lEtat = 'rech_chaine';
                        } else {
                            lArg += lChar;
                        }
                        break;
                    case 'rech_chaine':
                        if (lChar === '\'' && (aValue.charAt(lIPars + 1) === ')' || aValue.charAt(lIPars + 1) === ',')) {
                            lEtat = 'rech_param';
                            LArgEstChaine = true;
                            break;
                        }
                        lArg += lChar;
                        break;
                    case 'fin':
                        if (lChar !== ';') {
                            throw 'erreur fin fonction';
                        }
                        break;
                    default:
                        throw 'cas non géré';
                    }
                }
            } catch (e) {
                if (aSortieEnErreur) {
                    return null;
                }
            }
            return lResult;
        }
        function _positionnerObjetSelonAccesseur(aChaineAccesseur, aObjet) {
            if (!aObjet) {
                return null;
            }
            const lTab = aChaineAccesseur.split('.');
            let lResult = aObjet;
            for (let i = 0; i < lTab.length; i++) {
                lResult = lResult[lTab[i]];
                if (!lResult) {
                    return null;
                }
            }
            return lResult;
        }
        function _caret(aElement, begin, end) {
            let range;
            if (!aElement) {
                return;
            }
            if (typeof begin === 'number') {
                end = (typeof end === 'number') ? end : begin;
                const lValue = aElement.value;
                begin = Math.min(begin, lValue.length);
                end = Math.min(end, lValue.length);
                if (aElement.setSelectionRange) {
                    aElement.setSelectionRange(begin, end);
                } else if (aElement.createTextRange) {
                    range = aElement.createTextRange();
                    range.collapse(true);
                    range.moveEnd('character', end);
                    range.moveStart('character', begin);
                    range.select();
                }
            } else {
                if (aElement.setSelectionRange) {
                    begin = aElement.selectionStart;
                    end = aElement.selectionEnd;
                } else if (document.selection && document.selection.createRange) {
                    range = document.selection.createRange();
                    begin = 0 - range.duplicate().moveStart('character', -100000);
                    end = begin + range.text.length;
                }
                return {
                    begin: begin,
                    end: end
                };
            }
        }
        function _verificationInputModel(aContexteCourant, aParametres, aPatternValidateRegex) {
            if (aParametres.data.$ignoreRefresh) {
                return;
            }
            let lValue;
            if (aParametres.getterValueInit) {
                if (aParametres.declencherExitChange) {
                    if (aParametres.getterValue) {
                        lValue = aParametres.getterValue();
                    } else {
                        return;
                    }
                } else {
                    lValue = aParametres.getterValueInit();
                }
            } else {
                if (!aParametres.getterValue) {
                    return;
                }
                lValue = aParametres.getterValue();
            }
            let lValueInput;
            if (aParametres.saveValues.value !== lValue) {
                if (aParametres.estCB) {
                    aParametres.eventActif = false;
                    $(aParametres.node).inputChecked(lValue);
                    aParametres.eventActif = true;
                    aParametres.saveValues.value = aParametres.saveValues.inputValue = lValue;
                } else {
                    aParametres.eventActif = false;
                    lValueInput = lValue;
                    if (aParametres.toDisplay) {
                        lValueInput = aParametres.toDisplay(lValueInput);
                    }
                    if (aParametres.contentEditable) {
                        aParametres.node.innerHTML = lValueInput;
                    } else {
                        aParametres.node.value = lValueInput;
                    }
                    aParametres.eventActif = true;
                    if (aPatternValidateRegex) {
                        const lAncreControleur = _positionnerObjetSelonAccesseur(aParametres.data.$modeleParsed.nom, aParametres.controleur);
                        if (lAncreControleur) {
                            aContexteCourant.$patternOK = aPatternValidateRegex(lValue);
                        }
                    }
                    aParametres.saveValues.value = lValue;
                    aParametres.saveValues.inputValue = lValueInput;
                }
            } else {
                if (aParametres.estCB && aContexteCourant.data && aContexteCourant.data.estRadioBouton && lValue !== $(aContexteCourant.node).is(':checked')) {
                    $(aParametres.node).inputChecked(lValue);
                }
                if (aParametres.toDisplay) {
                    lValueInput = aParametres.toDisplay(lValue);
                    if (aParametres.saveValues.inputValue !== lValueInput) {
                        aParametres.eventActif = false;
                        if (aParametres.contentEditable) {
                            aParametres.node.innerHTML = lValueInput;
                        } else {
                            aParametres.node.value = lValueInput;
                        }
                        aParametres.eventActif = true;
                    }
                }
            }
            if (aParametres.getterDisabled) {
                lValue = !!aParametres.getterDisabled();
                if (lValue !== aParametres.saveDisabled) {
                    $(aParametres.node).inputDisabled(lValue);
                    aParametres.saveDisabled = lValue;
                }
            }
            if (aParametres.getterReadOnly) {
                lValue = !!aParametres.getterReadOnly();
                if (lValue !== aParametres.saveReadOnly) {
                    $(aParametres.node).prop('readonly', lValue);
                    aParametres.saveReadOnly = lValue;
                }
            }
        }
        function _affecterGetterSetterInputModel(aParametres, aContexteCourant, aEstCB) {
            let lValue, lAncre;
            const lInfosGetValueInit = _getAccesParametresModel('getValueInit', aContexteCourant);
            if (lInfosGetValueInit.estFonction) {
                aParametres.getterValueInit = function() {
                    const lValue = lInfosGetValueInit.callback([aParametres.node]);
                    if (aEstCB) {
                        return !!lValue;
                    }
                    return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                }
                ;
            }
            const lInfosGetValue = _getAccesParametresModel('getValue', aContexteCourant);
            const lInfosGetSetModele = _getAccesParametres('', aContexteCourant);
            if (lInfosGetValue.estFonction) {
                aParametres.getterValue = function() {
                    const lValue = lInfosGetValue.callback([aParametres.node]);
                    if (aEstCB) {
                        return !!lValue;
                    }
                    return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                }
                ;
            } else if (!aParametres.getterValueInit) {
                lAncre = lInfosGetSetModele.getAncre();
                if (!lInfosGetSetModele.valide || !lAncre) {
                    return false;
                }
                lValue = lAncre[lInfosGetSetModele.nom];
                if (lValue) {
                    if (aEstCB && lValue !== true) {
                        return false;
                    }
                    if (!aEstCB && !MethodesObjet_1.MethodesObjet.isString(lAncre[lInfosGetSetModele.nom])) {
                        return false;
                    }
                }
                aParametres.getterValue = function() {
                    const lValue = lInfosGetSetModele.callback();
                    if (aEstCB) {
                        return !!lValue;
                    }
                    return (lValue !== null && lValue !== void 0 ? lValue : '') + '';
                }
                ;
            }
            const lInfosSetValue = _getAccesParametresModel('setValue', aContexteCourant);
            if (lInfosSetValue.estFonction) {
                aParametres.setterValue = function(aValue, aParametresSetter) {
                    return lInfosSetValue.callback([aValue, aParametresSetter]);
                }
                ;
            } else if (!aParametres.getterValueInit) {
                lAncre = lInfosGetSetModele.getAncre();
                if (!lInfosGetSetModele.valide || !lAncre) {
                    return false;
                }
                aParametres.setterValue = function(aValue) {
                    const lAncre = lInfosGetSetModele.getAncre();
                    if (!lAncre) {
                        return;
                    }
                    lAncre[lInfosGetSetModele.nom] = aValue;
                }
                ;
            }
            const lInfosGetDisabled = _getAccesParametresModel('getDisabled', aContexteCourant);
            if (lInfosGetDisabled.estFonction) {
                aParametres.getterDisabled = lInfosGetDisabled.callback.bind(null, [aParametres.node, aContexteCourant.data]);
            }
            const lInfosGetReadOnly = _getAccesParametresModel('getReadOnly', aContexteCourant);
            if (lInfosGetReadOnly.estFonction) {
                aParametres.getterReadOnly = lInfosGetReadOnly.callback.bind(null, [aParametres.node, aContexteCourant.data]);
            }
            const lInfosExitChange = _getAccesParametresModel('exitChange', aContexteCourant);
            if (lInfosExitChange.estFonction) {
                aParametres.infosExitChange = lInfosExitChange;
            }
            if (aParametres.getterValueInit && !aParametres.infosExitChange) {
                aParametres.getterValueInit = null;
            }
            const lInfosInterrompreEvent = _getAccesParametresModel('interrompreEvent', aContexteCourant);
            if (lInfosInterrompreEvent.estFonction) {
                aParametres.interrompreEvent = lInfosInterrompreEvent;
            }
            const lInfosNode = _getAccesParametresModel('node', aContexteCourant);
            if (lInfosNode.estFonction) {
                aParametres.infosNode = lInfosNode;
            }
            const lInfosNodeAfter = _getAccesParametresModel('nodeAfter', aContexteCourant);
            if (lInfosNodeAfter.estFonction) {
                aParametres.infosNodeAfter = lInfosNodeAfter;
            }
            const lInfoskeyupEnter = _getAccesParametresModel('keyupEnter', aContexteCourant);
            if (lInfoskeyupEnter.estFonction) {
                aParametres.infoskeyupEnter = lInfoskeyupEnter;
            }
            return true;
        }
        function _estNodeContentEditable(aNode) {
            if (aNode && ObjetSupport_1.Support.contentEditable && (aNode.isContentEditable || aNode.contentEditable === 'true')) {
                const lNodeName = aNode.nodeName ? aNode.nodeName.toLowerCase() : '';
                return lNodeName !== 'input' && lNodeName !== 'textarea';
            }
            return false;
        }
        function _gererInputModele(aContexteCourant, aJNode, aEstCB, aAttributType, aMaxLength) {
            let lModele = null, lMask, lMatchMask, lPattern, lMatchPattern, lPatternValidateRegex, lTrim = false, lAvecAttrTrim = false, lValue = aEstCB ? false : '', lDisabled = false, lReadOnly = false, lInfosToDisplay = null, lInfosFromDisplay = null, lFuncExitChange = null, lEstTexteBrut = false;
            const lEstInputTime = aAttributType === 'time';
            const lSaveValues = {}
              , lRefresh = aContexteCourant.contexte.refresh
              , lParametres = {
                node: aContexteCourant.node,
                controleur: aContexteCourant.controleur,
                data: aContexteCourant.data,
                estCB: aEstCB,
                saveValues: lSaveValues,
                eventActif: true,
                saveDisabled: false,
                getterValue: null,
                getterValueInit: null,
                setterValue: null,
                getterDisabled: null,
                getterReadOnly: null,
                toDisplay: null,
                fromDisplay: null,
                declencherExitChange: false,
                contentEditable: _estNodeContentEditable(aContexteCourant.node)
            };
            if (lParametres.contentEditable && aMaxLength > 0) {
                aMaxLength = 0;
            }
            if (aContexteCourant.node.hasAttribute('ie-etatsaisie')) {
                aContexteCourant.etatSaisie = true;
                aContexteCourant.node.removeAttribute('ie-etatsaisie');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-etatsaisie');
            }
            if (aContexteCourant.controleur) {
                lModele = _getModel(aContexteCourant);
                if (lModele) {
                    Object.assign(lParametres, {
                        modele: lModele,
                        modeleArg: aContexteCourant.data.$modeleParsed
                    });
                    if (!_affecterGetterSetterInputModel(lParametres, aContexteCourant, aEstCB)) {
                        return;
                    }
                    if (lParametres.infosExitChange) {
                        aContexteCourant.data.forceExitChange = function(aParametresExit) {
                            if (lFuncExitChange) {
                                lFuncExitChange(aParametresExit);
                            }
                        }
                        ;
                    }
                    lValue = lParametres.getterValueInit ? lParametres.getterValueInit() : lParametres.getterValue();
                    if (lParametres.getterDisabled) {
                        lDisabled = lParametres.saveDisabled = !!lParametres.getterDisabled();
                        aJNode.inputDisabled(lDisabled);
                    }
                    if (lParametres.getterReadOnly) {
                        lReadOnly = lParametres.saveReadOnly = !!lParametres.getterReadOnly();
                        aJNode.prop('readonly', lReadOnly);
                    }
                    if (aEstCB) {
                        lValue = !!lValue;
                        lSaveValues.value = lSaveValues.inputValue = lValue;
                        aJNode.inputChecked(lValue);
                    } else {
                        lValue = lValue || '';
                        lSaveValues.value = lSaveValues.inputValue = lValue;
                        lAvecAttrTrim = aContexteCourant.node.hasAttribute('ie-trim');
                        if (lAvecAttrTrim) {
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-trim');
                            aContexteCourant.node.removeAttribute('ie-trim');
                        }
                        lTrim = (aAttributType !== 'password' && lAvecAttrTrim) || aContexteCourant.estIndicatifTelephone;
                        if (lParametres.contentEditable) {
                            lEstTexteBrut = true;
                        } else if (aContexteCourant.estTelephone || aContexteCourant.estIndicatifTelephone || aAttributType === 'password' || aAttributType === 'email') {
                            lEstTexteBrut = true;
                        } else if (aContexteCourant.node.hasAttribute('ie-textbrut')) {
                            lEstTexteBrut = true;
                            aContexteCourant.node.removeAttribute('ie-textbrut');
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-textbrut');
                        }
                        if (!uTailleMaxTelephone) {
                            uTailleMaxTelephone = ObjetChaine_1.GChaine.maskTelephone.replace(/ /g, '').length;
                        }
                        lInfosToDisplay = _getAccesParametresModel('toDisplay', aContexteCourant);
                        lInfosFromDisplay = _getAccesParametresModel('fromDisplay', aContexteCourant);
                        lParametres.toDisplay = function(aChaine) {
                            if (!lEstTexteBrut) {
                                aChaine = ObjetChaine_1.GChaine.enleverEntites(aChaine);
                            }
                            if (aContexteCourant.estIndicatifTelephone) {
                                aChaine = '+ ' + aChaine.replace(IEHtml.REGEXP_INDICATIF_TELEPHONE, '').slice(0, IEHtml.TAILLEMAX_INDICATIF_TELEPHONE);
                            }
                            if (aContexteCourant.estTelephone && ObjetChaine_1.GChaine && ObjetChaine_1.GChaine.formatTelephone) {
                                aChaine = ObjetChaine_1.GChaine.formatTelephone(aChaine.replace(IEHtml.REGEXP_TELEPHONE, '').slice(0, uTailleMaxTelephone));
                            }
                            if (lInfosToDisplay && lInfosToDisplay.estFonction) {
                                aChaine = lInfosToDisplay.callback([aChaine, aContexteCourant.data]);
                            }
                            return aChaine;
                        }
                        ;
                        lParametres.fromDisplay = function(aChaine) {
                            if (lInfosFromDisplay && lInfosFromDisplay.estFonction) {
                                aChaine = lInfosFromDisplay.callback([aChaine, aContexteCourant.data]);
                            }
                            if (!lEstTexteBrut) {
                                aChaine = ObjetChaine_1.GChaine.ajouterEntites(aChaine);
                            }
                            if (lTrim && aChaine.trim) {
                                aChaine = aChaine.trim();
                            }
                            if (aContexteCourant.estIndicatifTelephone) {
                                aChaine = aChaine.replace(/\+| /g, '').replace(IEHtml.REGEXP_INDICATIF_TELEPHONE, '').slice(0, IEHtml.TAILLEMAX_INDICATIF_TELEPHONE);
                            }
                            if (aContexteCourant.estTelephone) {
                                aChaine = aChaine.replace(/ /g, '').replace(IEHtml.REGEXP_TELEPHONE, '').slice(0, uTailleMaxTelephone);
                            }
                            return aChaine;
                        }
                        ;
                        lValue = lSaveValues.inputValue = lParametres.toDisplay(lValue);
                        if (lParametres.contentEditable) {
                            aContexteCourant.node.innerHTML = lValue;
                        } else {
                            aContexteCourant.node.value = lValue;
                        }
                        lPattern = aContexteCourant.node.getAttribute('ie-pattern');
                        lMatchPattern = lPattern && lPattern.match ? lPattern.match(C_RegExp_Match) : null;
                        if (lMatchPattern) {
                            const lRegExp = new RegExp(lMatchPattern[1],lMatchPattern[2]);
                            lPatternValidateRegex = function(value) {
                                return !value || lRegExp.test(value);
                            }
                            ;
                            aContexteCourant.$patternOK = lPatternValidateRegex(lSaveValues.inputValue);
                        }
                        if (lPattern) {
                            lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-pattern="' + lPattern + '"');
                            aContexteCourant.node.removeAttribute('ie-pattern');
                        }
                    }
                }
            }
            if (!aEstCB) {
                lMask = aContexteCourant.node.getAttribute('ie-mask');
                if (lMask) {
                    lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-mask="' + lMask + '"');
                    aContexteCourant.node.removeAttribute('ie-mask');
                    if (lParametres.contentEditable) {
                        lMask = '';
                    }
                }
                if (lMask && !lModele) {
                    lSaveValues.value = aContexteCourant.node.value;
                }
                lMatchMask = lMask && lMask.match ? lMask.match(C_RegExp_Match) : null;
            }
            if (lModele) {
                _abonnerRefresh( () => {
                    _verificationInputModel(aContexteCourant, lParametres, lPatternValidateRegex);
                }
                , aContexteCourant.node, aContexteCourant);
            }
            if (lModele || (!aEstCB && (lMatchMask || aMaxLength))) {
                aJNode.on(aEstCB ? IEHtml.C_eventsModifyCheckbox : IEHtml.C_eventsModifyInput, function(aEvent) {
                    if (!lParametres.eventActif) {
                        return;
                    }
                    let lNewValue = null, lNewInputValue = null, lValueInput, lCaret = null;
                    if (aEstCB) {
                        lNewValue = $(this).is(':checked');
                    } else {
                        lValueInput = lParametres.contentEditable ? this.innerHTML : this.value;
                        lNewValue = lValueInput;
                        lNewInputValue = lNewValue;
                        if (lParametres.interrompreEvent && lParametres.interrompreEvent.callback([aEvent])) {
                            return false;
                        }
                        if (aMaxLength > 0 && lNewValue.length > aMaxLength && !lParametres.contentEditable) {
                            const lTop = $(this).scrollTop();
                            this.value = lNewValue = lNewValue.slice(0, aMaxLength);
                            $(this).scrollTop(lTop);
                        }
                        if (lMatchMask && lNewValue.length > 0) {
                            let lSanitize = '';
                            let lCharMask = '';
                            const lRegExpMask = new RegExp(lMatchMask[1],lMatchMask[2]);
                            for (let lIx = 0; lIx < lNewValue.length; lIx++) {
                                lCharMask = lNewValue.charAt(lIx);
                                if (!lRegExpMask.test(lCharMask)) {
                                    lSanitize += lCharMask;
                                }
                            }
                            if (lParametres.fromDisplay) {
                                lNewValue = lParametres.fromDisplay(lNewValue);
                            }
                            if (lSanitize !== lNewValue) {
                                const lNomProp = (lParametres.contentEditable ? 'innerHTML' : 'value');
                                if (lSanitize === lSaveValues.value) {
                                    if (lParametres.toDisplay) {
                                        this[lNomProp] = lParametres.toDisplay(lSaveValues.value);
                                    } else {
                                        this[lNomProp] = lSaveValues.value;
                                    }
                                    return false;
                                }
                                lNewValue = lSanitize;
                                lNewInputValue = lSanitize;
                                if (lParametres.toDisplay) {
                                    this[lNomProp] = lNewInputValue = lParametres.toDisplay(lNewValue);
                                } else {
                                    this[lNomProp] = lNewValue;
                                }
                            }
                        } else if (lParametres.fromDisplay) {
                            lNewValue = lParametres.fromDisplay(lNewValue);
                        }
                        if (lParametres.toDisplay) {
                            lNewInputValue = lParametres.toDisplay(lNewValue);
                            if ((lTrim && lNewInputValue.trim() !== lValueInput.trim()) || (!lTrim && lNewInputValue !== lValueInput)) {
                                lCaret = null;
                                if (aContexteCourant.estTelephone) {
                                    lCaret = _caret(this);
                                    if (lValueInput.length < lSaveValues.inputValue.length) {
                                        lCaret.begin = Math.max(0, lCaret.begin - (lSaveValues.inputValue.length - lNewInputValue.length) + 1);
                                        if (lNewInputValue.charAt(lCaret.begin - 1) === ' ') {
                                            lCaret.begin -= 1;
                                        }
                                        lCaret.change = true;
                                    } else {
                                        if (lNewInputValue.length < lSaveValues.inputValue.length) {
                                            lCaret.begin -= lValueInput.length - lNewInputValue.length + 1;
                                        }
                                        if (lNewInputValue === lSaveValues.inputValue) {
                                            lCaret.begin -= lValueInput.length - lNewInputValue.length;
                                        } else if (lNewInputValue.charAt(lCaret.begin - 1) === ' ') {
                                            lCaret.begin += 1;
                                        } else if (lNewInputValue.length > lSaveValues.inputValue.length && lCaret.begin > lSaveValues.inputValue.length) {
                                            lCaret.begin = lNewInputValue.length;
                                        }
                                        lCaret.change = true;
                                    }
                                }
                                if (lParametres.contentEditable) {
                                    this.innerHTML = lNewInputValue;
                                } else {
                                    this.value = lNewInputValue;
                                }
                                if (lCaret && lCaret.change) {
                                    _caret(this, lCaret.begin);
                                }
                            }
                        }
                    }
                    if (lSaveValues.value !== lNewValue) {
                        let lPatternOK, lCloneSave;
                        if (lModele) {
                            lPatternOK = true;
                            if (lPatternValidateRegex) {
                                lPatternOK = lPatternValidateRegex(lNewValue);
                                aContexteCourant.$patternOK = lPatternOK;
                            }
                            lCloneSave = MethodesObjet_1.MethodesObjet.dupliquer(lSaveValues);
                        }
                        lParametres.declencherExitChange = true;
                        lSaveValues.value = lNewValue;
                        lSaveValues.inputValue = lNewInputValue;
                        if (aContexteCourant.etatSaisie) {
                            if (aContexteCourant.controleur && aContexteCourant.controleur.instance && _estInstanceIdentite(aContexteCourant.controleur.instance)) {
                                aContexteCourant.controleur.instance.setEtatSaisie(true);
                            } else {
                                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, true);
                            }
                        }
                        if (lModele) {
                            const lParametresSetValue = {
                                node: this,
                                event: aEvent,
                                value: lNewValue,
                                inputValue: lNewInputValue,
                                textBrut: lEstTexteBrut,
                                oldValues: lCloneSave,
                                patternOK: lPatternOK,
                                selectionTexte: false
                            };
                            if (lEstInputTime && uFuncDate.parseHeureMinute) {
                                lParametresSetValue.time = uFuncDate.parseHeureMinute(lNewValue);
                            }
                            if (lParametres.setterValue) {
                                lParametres.setterValue(lNewValue, lParametresSetValue);
                            }
                            aContexteCourant.data.$ignoreRefresh = true;
                            try {
                                lRefresh();
                            } finally {
                                delete aContexteCourant.data.$ignoreRefresh;
                            }
                            if (aContexteCourant.data.$destroy === true) {
                                return;
                            }
                            _verificationInputModel(aContexteCourant, lParametres);
                            if (lParametresSetValue.selectionTexte && !aEstCB) {
                                aContexteCourant.node.select();
                            }
                        }
                    }
                });
            }
            if (lTrim) {
                aJNode.on('change blur', function() {
                    const lValue = lParametres.contentEditable ? this.innerHTML : this.value;
                    const lValueTrim = lValue.trim();
                    if (lValueTrim !== lValue) {
                        lSaveValues.value = lValueTrim;
                        lSaveValues.inputValue = lValueTrim;
                        if (lParametres.contentEditable) {
                            this.innerHTML = lValueTrim;
                        } else {
                            this.value = lValueTrim;
                        }
                    }
                });
            }
            if (lParametres.infosExitChange) {
                lFuncExitChange = function(aParamsExit) {
                    const lParametresExitChange = Object.assign(aParamsExit || {}, {
                        data: aContexteCourant.data,
                        event: null
                    });
                    let lValue = lSaveValues.value;
                    if (lEstInputTime && uFuncDate.parseHeureMinute) {
                        const lTime = uFuncDate.parseHeureMinute(lSaveValues.value);
                        lParametresExitChange.time = lTime;
                        const lStepStr = aContexteCourant.node.getAttribute('step');
                        if (lStepStr) {
                            const lStepInputTime_enM = Math.floor(parseInt(lStepStr, 10) / 60);
                            if (lStepInputTime_enM > 0) {
                                const lReste = (lTime.minute % lStepInputTime_enM);
                                if (lReste <= (lStepInputTime_enM / 2)) {
                                    lTime.minute = (lTime.minute - lReste);
                                } else {
                                    lTime.minute = (lTime.minute + (lStepInputTime_enM - lReste));
                                }
                            }
                        }
                        const lMinInputTimeStr = aContexteCourant.node.getAttribute('min');
                        if (lMinInputTimeStr) {
                            const lTimeMin = uFuncDate.parseHeureMinute(lMinInputTimeStr);
                            if (lTimeMin.ok) {
                                if (lTimeMin.heure > lTime.heure) {
                                    lTime.heure = lTimeMin.heure;
                                    lTime.minute = lTimeMin.minute;
                                } else if (lTimeMin.heure === lTime.heure && lTimeMin.minute > lTime.minute) {
                                    lTime.minute = lTimeMin.minute;
                                }
                            }
                        }
                        const lMaxInputTimeStr = aContexteCourant.node.getAttribute('max');
                        if (lMaxInputTimeStr) {
                            const lTimeMax = uFuncDate.parseHeureMinute(lMaxInputTimeStr);
                            if (lTimeMax.ok) {
                                if (lTime.heure > lTimeMax.heure) {
                                    lTime.heure = lTimeMax.heure;
                                    lTime.minute = lTimeMax.minute;
                                } else if (lTime.heure === lTimeMax.heure && lTime.minute > lTimeMax.minute) {
                                    lTime.minute = lTimeMax.minute;
                                }
                            }
                        }
                        const lDateModif = new Date();
                        lDateModif.setHours(lTime.heure);
                        lDateModif.setMinutes(lTime.minute);
                        lValue = uFuncDate.formatDate(lDateModif, '%hh:%mm');
                    }
                    lParametres.infosExitChange.callback([lValue, lParametresExitChange]);
                    _verificationInputModel(aContexteCourant, lParametres, lPatternValidateRegex);
                    lRefresh();
                    if (lParametresExitChange.selectionTexte && !aEstCB) {
                        aContexteCourant.node.select();
                    }
                }
                ;
                let lEventsExitChange = 'blur focusout';
                if (!lEstInputTime) {
                    lEventsExitChange += ' change';
                }
                aJNode.on(lEventsExitChange, (aEvent) => {
                    if (!lParametres.declencherExitChange) {
                        return;
                    }
                    lParametres.declencherExitChange = false;
                    lFuncExitChange(aEvent);
                }
                );
            }
            if (lParametres.infosNode) {
                lOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                    lParametres.infosNode.callback(aParams);
                }
                );
            }
            if (lParametres.infosNodeAfter) {
                lOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                    lParametres.infosNodeAfter.callback(aParams);
                }
                , true);
            }
            if (lParametres.infoskeyupEnter) {
                aJNode.on('keyup', (aEvent) => {
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                        lParametres.infoskeyupEnter.callback([aEvent]);
                        lRefresh();
                    }
                }
                );
            }
            if (!aEstCB && IE.estMobile && aJNode.is('input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea')) {
                aJNode.on({
                    'focus'() {
                        _findElementPourGererActive_mobile(this).addClass('active');
                    },
                    'blur'() {
                        if (this.value.length === 0 && !aContexteCourant.node.getAttribute('placeholder')) {
                            _findElementPourGererActive_mobile(this).removeClass('active');
                        }
                    },
                    'change input'() {
                        if (this.value.length !== 0 || aContexteCourant.node.getAttribute('placeholder')) {
                            _findElementPourGererActive_mobile(this).addClass('active');
                        }
                    }
                });
            }
        }
        function _findElementPourGererActive_mobile(aNode) {
            return $(aNode).closest('.input-field').find('>label, >.prefix');
        }
        function _gererInputCB(aContexteCourant, aAttributType) {
            _gererInputModele(aContexteCourant, $(aContexteCourant.node), true, aAttributType);
        }
        function _gererMaxLengthInputText(aContexteCourant, aNode, aJNode, aEstInput, aAttributType) {
            const lAttrMaxLength = aNode.getAttribute('maxlength');
            let lMaxLength = 0;
            if (aEstInput) {
                if (aContexteCourant.estIndicatifTelephone || aContexteCourant.estTelephone) {
                    return;
                }
                if (IEHtml.MAX_LENGTH_Default === 0) {
                    return;
                }
                if (!lAttrMaxLength && (aAttributType === 'text' || aAttributType === '' || aAttributType === 'number' || aAttributType === 'email' || aAttributType === 'url')) {
                    aJNode.attr('maxlength', IEHtml.MAX_LENGTH_Default);
                } else if (parseInt(lAttrMaxLength, 10) === 0) {
                    aNode.removeAttribute('maxlength');
                }
            } else {
                lMaxLength = lAttrMaxLength ? parseInt(lAttrMaxLength, 10) : IEHtml.MAX_LENGTH_Default;
                if (isNaN(lMaxLength)) {
                    lMaxLength = IEHtml.MAX_LENGTH_Default;
                }
            }
            return lMaxLength;
        }
        function _actualiserClassScrollTextArea(aNode) {
            if (aNode.scrollHeight > aNode.offsetHeight) {
                $(aNode).addClass('has-scroll');
            } else {
                $(aNode).removeClass('has-scroll');
            }
        }
        function _gererInputText(aContexteCourant, aAttributType) {
            let lJNode = $(aContexteCourant.node);
            const lEstInput = aContexteCourant.nodeName === 'input';
            const lEstTextArea = aContexteCourant.nodeName === 'textarea';
            if (lEstInput && aContexteCourant.node.hasAttribute('ie-indicatiftel')) {
                aContexteCourant.estIndicatifTelephone = true;
                lJNode.addClass('ie-indicatiftel');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-indicatiftel');
                aContexteCourant.node.removeAttribute('ie-indicatiftel');
            } else if (lEstInput && aContexteCourant.node.hasAttribute('ie-telephone')) {
                aContexteCourant.estTelephone = true;
                lJNode.addClass('ie-telephone');
                lOutils.addCommentaireDebug(aContexteCourant.node, 'ie-telephone');
                aContexteCourant.node.removeAttribute('ie-telephone');
            }
            const lMaxLength = lEstInput || lEstTextArea ? _gererMaxLengthInputText(aContexteCourant, aContexteCourant.node, lJNode, lEstInput, aAttributType) : 0;
            if (lEstInput && aAttributType === 'time') {
                aContexteCourant.node.setAttribute('ie-mask', '/[^0-9:]/i');
                if (IE.estMobile) {
                    aContexteCourant.node.setAttribute('pattern', '[0-9]{2}:[0-9]{2}');
                }
                aContexteCourant.node.setAttribute('size', '3');
            }
            if (lEstInput || lEstTextArea || aContexteCourant.data.$modeleValue) {
                _gererInputModele(aContexteCourant, lJNode, false, aAttributType, lMaxLength);
            }
            if (lEstTextArea) {
                lOutils.surInjectionHtml(aContexteCourant, () => {
                    _actualiserClassScrollTextArea(aContexteCourant.node);
                }
                , true);
                _abonnerRefresh( () => {
                    _actualiserClassScrollTextArea(aContexteCourant.node);
                }
                , aContexteCourant.node, aContexteCourant);
                $(aContexteCourant.node).on(IEHtml.C_eventsModifyInput, function() {
                    _actualiserClassScrollTextArea(this);
                });
            }
            lJNode = null;
        }
        function _getDataDeNode(aNode) {
            const lNodeValue = aNode.getAttribute('ie-data');
            let lData = null;
            if (lNodeValue && lNodeValue.length > 2 && lNodeValue.charAt(0) === '{' && lNodeValue.charAt(lNodeValue.length - 1) === '}') {
                try {
                    lData = ObjetJSON_1.ObjetJSON.parse(lNodeValue, {
                        ignorerEntites: true
                    });
                } catch (e) {
                    lData = null;
                }
            }
            return lData;
        }
        function _traiterIF(aNode, aNodeParent, aControleur, aContexte, aData) {
            const lValueAttr = aNode.getAttribute('ie-if');
            aNode.removeAttribute('ie-if');
            if (!lValueAttr) {
                return true;
            }
            if (!aControleur) {
                return true;
            }
            const lContexteCourant = _getContexteCourant(aControleur, aContexte, aNode, Object.assign({}, aData));
            _remplirDataModel(lContexteCourant);
            const lInfos = _getAccesParametres(lValueAttr, lContexteCourant);
            const lValue = !!lInfos.callback();
            let lOldValue = lValue;
            const lChaineData = 'ie-if';
            const lNodeComm = document.createComment(lChaineData);
            const lCloneModele = aNode.cloneNode(true);
            aNode.parentNode.insertBefore(lNodeComm, aNode);
            const lInvocateur = new Invocateur_1.ObjetInvocateur();
            _abonnerRefresh( () => {
                const lValue = !!lInfos.callback();
                if (lOldValue !== lValue) {
                    lOldValue = lValue;
                    if (lValue) {
                        const lParams = {
                            element: aNodeParent,
                            html: lCloneModele.cloneNode(true),
                            controleur: aControleur,
                            contexte: aContexte,
                            invocateur: lInvocateur,
                            childNodes: null
                        };
                        const lPreInjectionHtml = _preInjectionHTML(aNodeParent, null);
                        _injectEtCompilNode(lParams);
                        _transfererFragmentDansHTML(lParams.childNodes, aNodeParent, lNodeComm.nextSibling);
                        _finaliserInjectionHTML(lPreInjectionHtml, aContexte);
                        lParams.childNodes = null;
                    } else {
                        while (lNodeComm.nextSibling && _estNoeudCommentaire(lNodeComm.nextSibling)) {
                            $(lNodeComm.nextSibling).remove();
                        }
                        if (lNodeComm.nextSibling) {
                            $(lNodeComm.nextSibling).remove();
                        }
                    }
                } else {
                    lInvocateur.evenement(C_id_event_iemodel);
                }
            }
            , aNodeParent, lContexteCourant, null, () => {
                if (aNodeParent && aNodeParent.contains && !aNodeParent.contains(lNodeComm)) {
                    return true;
                }
                return false;
            }
            );
            if (!lValue) {
                $(aNode).remove();
            }
            return lValue;
        }
        function _addNodeDeREPEAT(aNodeParent, aControleur, aCloneModele, aNomVariableBoucle, aIndice, aInfosAcces, aNodeComm, aContexte, aArrayNodes, aInvocateur, aInitialisationRepeat) {
            let lNodeAvant;
            lNodeAvant = aNodeComm;
            if (aIndice > 0) {
                lNodeAvant = aArrayNodes[aIndice - 1];
            }
            if (!aContexte.repeat) {
                aContexte.repeat = {};
            }
            const lContexte = Object.assign({}, aContexte)
              , lContexteBoucles = {};
            if (!lContexte.eventsInjectionHtml) {
                lContexte.eventsInjectionHtml = aContexte.eventsInjectionHtml = [];
            }
            lContexteBoucles[aNomVariableBoucle] = {
                indice: aIndice,
                arguments: aInfosAcces.args,
                getterArray: function() {
                    return aInfosAcces.callback() || [];
                }
            };
            lContexte.repeat = Object.assign(lContexteBoucles, aContexte.repeat);
            if (aInitialisationRepeat) {
                const lNodeClone = aCloneModele.cloneNode(true);
                aNodeParent.insertBefore(lNodeClone, lNodeAvant.nextSibling);
                aArrayNodes[aIndice] = _compileNode(lNodeClone, aNodeParent, aControleur, lContexte, aInvocateur);
            } else {
                const lParams = {
                    element: aNodeParent,
                    html: aCloneModele.cloneNode(true),
                    controleur: aControleur,
                    contexte: lContexte,
                    invocateur: aInvocateur,
                    childNodes: null
                };
                _injectEtCompilNode(lParams);
                aArrayNodes[aIndice] = _transfererFragmentDansHTML(lParams.childNodes, aNodeParent, lNodeAvant.nextSibling);
                lParams.childNodes = null;
            }
        }
        function _getDiffTab(aTabOld, aTabNew) {
            const lLength = Math.max(aTabOld.length, aTabNew.length)
              , lResult = [];
            for (let i = 0; i < lLength; i++) {
                if (aTabOld[i] !== aTabNew[i]) {
                    lResult[i] = {
                        supprimer: true,
                        ajouter: aTabNew[i] !== null && aTabNew[i] !== undefined
                    };
                }
            }
            return lResult;
        }
        function _traiterREPEAT(aNode, aNodeParent, aControleur, aContexte, aData) {
            let lValueAttr = aNode.getAttribute('ie-repeat');
            aNode.removeAttribute('ie-repeat');
            if (!lValueAttr) {
                return true;
            }
            if (!aControleur) {
                return true;
            }
            const lTab = lValueAttr.split('in');
            if (lTab.length !== 2) {
                return true;
            }
            lValueAttr = lTab[1].trim();
            const lNomVariableBoucle = lTab[0].trim();
            if (!aContexte.repeat) {
                aContexte.repeat = {};
            }
            if (aContexte.repeat[lNomVariableBoucle]) {
                return true;
            }
            const lContexteCourant = _getContexteCourant(aControleur, aContexte, aNode, aData);
            const lInfos = _getAccesParametres(lValueAttr, lContexteCourant);
            let lArrayValue = [].concat(lInfos.callback() || []);
            const lChaineData = 'ie-repeat';
            const lNodeComm = document.createComment(lChaineData);
            const lArrayNodes = [];
            const lArrayComms = [];
            const lCloneModele = aNode.cloneNode(true);
            aNode.parentNode.insertBefore(lNodeComm, aNode);
            const lInvocateur = new Invocateur_1.ObjetInvocateur();
            _abonnerRefresh( () => {
                const lNewArrayValue = lInfos.callback() || [];
                const lDiff = _getDiffTab(lArrayValue, lNewArrayValue);
                let lArrayRemove;
                let lAvecModif = false;
                let lPreInjectionHtml;
                if (lDiff.length > 0) {
                    lArrayRemove = [];
                    for (let i = 0; i < lDiff.length; i++) {
                        if (lDiff[i] && lDiff[i].supprimer) {
                            lAvecModif = true;
                            if (!lPreInjectionHtml) {
                                lPreInjectionHtml = _preInjectionHTML(aNodeParent, null);
                            }
                            lArrayRemove.push(lArrayNodes[i]);
                            lArrayNodes[i] = null;
                            if (i > 0 && lArrayComms[i]) {
                                lArrayRemove.push(lArrayComms[i]);
                                lArrayComms[i] = null;
                            }
                        }
                    }
                    if (lArrayRemove.length > 0) {
                        $(lArrayRemove).remove();
                    }
                    for (let i = 0; i < lDiff.length; i++) {
                        if (lDiff[i] && lDiff[i].ajouter) {
                            lAvecModif = true;
                            if (!lPreInjectionHtml) {
                                lPreInjectionHtml = _preInjectionHTML(aNodeParent, null);
                            }
                            _addNodeDeREPEAT(aNodeParent, aControleur, lCloneModele, lNomVariableBoucle, i, lInfos, lNodeComm, aContexte, lArrayNodes, lInvocateur);
                        }
                    }
                    lArrayValue = [].concat(lNewArrayValue);
                    if (lAvecModif && lPreInjectionHtml) {
                        _finaliserInjectionHTML(lPreInjectionHtml, aContexte);
                    }
                }
                lInvocateur.evenement(C_id_event_iemodel);
            }
            , aNodeParent, lContexteCourant, null, () => {
                if (aNodeParent && aNodeParent.contains && !aNodeParent.contains(lNodeComm)) {
                    return true;
                }
                return false;
            }
            );
            $(aNode).remove();
            for (let i = 0; i < lArrayValue.length; i++) {
                _addNodeDeREPEAT(aNodeParent, aControleur, lCloneModele, lNomVariableBoucle, i, lInfos, lNodeComm, aContexte, lArrayNodes, lInvocateur, true);
            }
            return false;
        }
        function _compileNode(aNode, aNodeParent, aControleur, aContexte, aInvocateur, aProfondeur) {
            let lResultBalise, lNodeName, lNode = aNode, lData = null, lAvecAttributData = false, lJSONDebugData, lNameAttribut, lAvecCompilFils = true;
            const lProfondeur = aProfondeur || 0;
            const lContexteCourant = _getContexteCourant(aControleur, aContexte, aNode, null, aInvocateur);
            if (lProfondeur > 1000) {
                return;
            }
            const lNodeType = lNode.nodeType;
            lNodeName = lNode.nodeName;
            if (lNodeType === 1 && !!lNodeName) {
                lNodeName = lNodeName ? lNodeName.toLowerCase() : '';
                if (!aContexte.refresh) {
                    aContexte.refresh = function() {
                        if (aControleur && aControleur.$refresh) {
                            return aControleur.$refresh(true);
                        }
                        return IEHtml.refresh();
                    }
                    ;
                }
                if (!aContexte.refreshSelf) {
                    aContexte.refreshSelf = async function() {
                        if (aControleur && aControleur.$refreshSelf) {
                            return aControleur.$refreshSelf(true);
                        }
                        return Promise.resolve();
                    }
                    ;
                }
                lJSONDebugData = null;
                lData = _getDataDeNode(lNode);
                lAvecAttributData = !!lData;
                if (!lData) {
                    lData = {};
                }
                let lAvecIeRepeat = false;
                if (aNode.hasAttribute('ie-repeat')) {
                    lAvecIeRepeat = true;
                    if (!_traiterREPEAT(aNode, aNodeParent, aControleur, aContexte, lData)) {
                        return;
                    }
                }
                if (aNode.hasAttribute('ie-if')) {
                    if (!lAvecIeRepeat && !_traiterIF(aNode, aNodeParent, aControleur, aContexte, lData)) {
                        return;
                    }
                }
                lContexteCourant.data = lData;
                lContexteCourant.nodeName = lNodeName;
                _getModel(lContexteCourant);
                let lAvecTransformationNoeud = !!uBalises[lNodeName];
                let lNomBaliseTransform = lNodeName;
                if (!lAvecTransformationNoeud) {
                    for (lNameAttribut in uBalises) {
                        if (lNode.hasAttribute(lNameAttribut)) {
                            lAvecTransformationNoeud = true;
                            lNomBaliseTransform = lNameAttribut;
                            lNode.removeAttribute(lNameAttribut);
                            break;
                        }
                    }
                }
                if (lAvecTransformationNoeud) {
                    lResultBalise = uBalises[lNomBaliseTransform](lContexteCourant, lOutils);
                    lAvecCompilFils = !lResultBalise || lResultBalise.avecCompileFils !== false;
                    if (lResultBalise && lResultBalise.node) {
                        lNode = lResultBalise.node;
                        lContexteCourant.node = lNode;
                        lNodeName = lNode.nodeName ? lNode.nodeName.toLowerCase() : '';
                        lContexteCourant.nodeNameBefore = lContexteCourant.nodeName;
                        lContexteCourant.nodeName = lNodeName;
                    }
                }
                const lEstNodeInput = lNodeName === 'input';
                let lAttributType = '';
                if (lEstNodeInput) {
                    lAttributType = (lNode.getAttribute('type') || '').toLowerCase();
                }
                if (lEstNodeInput && (lAttributType === 'radio' || lAttributType === 'checkbox')) {
                    if (!lResultBalise || !lResultBalise.ignorerGererInputCB) {
                        _gererInputCB(lContexteCourant, lAttributType);
                    }
                } else if (lEstNodeInput || lNodeName === 'textarea' || _estNodeContentEditable(lNode)) {
                    if (!lResultBalise || !lResultBalise.ignorerInputText) {
                        _gererInputText(lContexteCourant, lAttributType);
                    }
                }
                if (lData && !$.isEmptyObject(lData)) {
                    $(lNode).ieData(lData);
                    if (lAvecAttributData) {
                        if (lJSONDebugData) {
                            lOutils.addCommentaireDebug(lNode, 'ie-data="' + lJSONDebugData + '"');
                        }
                        lNode.removeAttribute('ie-data');
                    }
                }
                for (lNameAttribut in uAttributs) {
                    if (lNode.hasAttribute(lNameAttribut)) {
                        const lAttrValue = lNode.getAttribute(lNameAttribut);
                        try {
                            const lParametresCompile = {};
                            lNode.removeAttribute(lNameAttribut);
                            uAttributs[lNameAttribut](lContexteCourant, lNodeName, lAttrValue, lOutils, lParametresCompile);
                            if (lAvecCompilFils) {
                                lAvecCompilFils = lParametresCompile.avecCompileFils !== false;
                            }
                        } catch (e) {}
                    }
                }
                for (const lClass of Array.from(lNode.classList)) {
                    if (uClassesCss[lClass]) {
                        try {
                            const lParametresCompile = {};
                            uClassesCss[lClass](lContexteCourant, lNodeName, lOutils, lParametresCompile);
                            if (lAvecCompilFils) {
                                lAvecCompilFils = lParametresCompile.avecCompileFils !== false;
                            }
                        } catch (e) {}
                    }
                }
                if (lNodeName === 'i' && !lNode.hasAttribute('role') && (lNode.hasAttribute('aria-label') || lNode.hasAttribute('aria-labelledby'))) {
                    lNode.setAttribute('role', 'img');
                    IE.log.addLog(`Balise i avec aria-label/labelledby a role img manquant - ajouté automatiquement (a corriger) : ${lNode.outerHTML}`, null, IE.log.genre.Avertissement);
                }
            }
            if (lAvecCompilFils && lNode.childNodes && lNode.childNodes.length > 0) {
                _compile(lNode.childNodes, lNode, aControleur, aContexte, aInvocateur, lProfondeur + 1);
            }
            return lContexteCourant.node;
        }
        function _compile(aNodeList, aNodeParent, aControleur, aContexte, aInvocateur, aProfondeur) {
            const lProfondeur = aProfondeur || 0;
            if (lProfondeur > 1000) {
                return;
            }
            const lChildNodes = _sliceNodes(aNodeList);
            let lNode;
            for (let i = 0; i < lChildNodes.length; i++) {
                lNode = lChildNodes[i];
                _compileNode(lNode, aNodeParent, aControleur, aContexte, aInvocateur, lProfondeur);
            }
        }
        const IEHtml = {
            initControleur: _initControleur,
            addBalise(aBalise, aFonction) {
                aBalise = aBalise.toLowerCase();
                uBalises[aBalise] = aFonction;
                uNodeNames.push(aBalise);
            },
            addAttribut(aAttribut, aFonction) {
                aAttribut = aAttribut.toLowerCase();
                uAttributs[aAttribut] = aFonction;
            },
            addClass(aClass, aFonction) {
                uClassesCss[aClass] = aFonction;
            },
            ieData(aObjet) {
                if (!aObjet) {
                    return '';
                }
                const lChaine = ObjetJSON_1.ObjetJSON.toJSON(aObjet, {
                    ignorerEntites: true
                });
                if (!lChaine) {
                    return '';
                }
                return ' ie-data="' + lChaine.replace(/"/g, '&quot;') + '" ';
            },
            async refresh(aRefreshAsynchrone) {
                if (aRefreshAsynchrone) {
                    return new Promise( (aResolve) => {
                        setTimeout( () => {
                            uInvocateur.evenement(C_id_event_iemodel);
                            aResolve();
                        }
                        , 0);
                    }
                    );
                } else {
                    uInvocateur.evenement(C_id_event_iemodel);
                    return Promise.resolve();
                }
            },
            injectHTML(aElement, aHtml, aControleur, aIgnorerScroll, aInsererAvantNode, aAvecCommentaireConstructeur, aCommentaireHtmlDebug) {
                return _injectHTML({
                    element: aElement,
                    insererAvantLeNode: aInsererAvantNode,
                    html: aHtml,
                    controleur: aControleur,
                    ignorerScroll: aIgnorerScroll,
                    avecCommentaireConstructeur: aAvecCommentaireConstructeur !== false,
                    commentaireHtmlDebug: aCommentaireHtmlDebug
                });
            },
            injectHTMLParams: _injectHTML,
            empty(aNode) {
                if (aNode && aNode.getElementsByTagName) {
                    $.cleanData(aNode.getElementsByTagName('*'));
                }
                while (aNode && aNode.firstChild) {
                    aNode.removeChild(aNode.firstChild);
                }
            },
            outils: lOutils,
            collectionIdentite: {},
            C_eventsModifyCheckbox: 'IEChecked change input',
            C_eventsModifyInput: 'input change paste cut keydown keypress keyup',
            MAX_LENGTH_Default: 0,
            REGEXP_INDICATIF_TELEPHONE: /[^0-9]/ig,
            TAILLEMAX_INDICATIF_TELEPHONE: 3,
            REGEXP_TELEPHONE: /[^0-9]/ig
        };
        _a = Object.assign({}, IEHtml),
        exports.initControleur = _a.initControleur,
        exports.addBalise = _a.addBalise,
        exports.addAttribut = _a.addAttribut,
        exports.addClass = _a.addClass,
        exports.ieData = _a.ieData,
        exports.refresh = _a.refresh,
        exports.injectHTML = _a.injectHTML,
        exports.injectHTMLParams = _a.injectHTMLParams,
        exports.empty = _a.empty,
        exports.outils = _a.outils,
        exports.collectionIdentite = _a.collectionIdentite,
        exports.C_eventsModifyCheckbox = _a.C_eventsModifyCheckbox,
        exports.C_eventsModifyInput = _a.C_eventsModifyInput,
        exports.MAX_LENGTH_Default = _a.MAX_LENGTH_Default,
        exports.REGEXP_INDICATIF_TELEPHONE = _a.REGEXP_INDICATIF_TELEPHONE,
        exports.TAILLEMAX_INDICATIF_TELEPHONE = _a.TAILLEMAX_INDICATIF_TELEPHONE,
        exports.REGEXP_TELEPHONE = _a.REGEXP_TELEPHONE;
        exports.default = IEHtml;
        const uFuncDate = {
            formatDate: null,
            parseHeureMinute: null
        };
        const setObjetDate = function(aFormatDate, aParseHeureMinute) {
            uFuncDate.formatDate = aFormatDate;
            uFuncDate.parseHeureMinute = aParseHeureMinute;
        };
        exports.setObjetDate = setObjetDate;
        $.fn.extend({
            ieHtml(aHtml, aParametres) {
                const lParametres = {
                    html: aHtml,
                    ignorerScroll: false,
                    controleur: null,
                    instance: null,
                    sansCompile: false,
                    avecCommentaireConstructeur: true,
                    commentaireHtmlDebug: ''
                };
                Object.assign(lParametres, aParametres);
                return this.empty().each(function() {
                    if (lParametres.sansCompile) {
                        this.innerHTML = aHtml;
                    } else {
                        while (this && this.firstChild) {
                            this.removeChild(this.firstChild);
                        }
                        IEHtml.injectHTMLParams(Object.assign({
                            element: this
                        }, lParametres));
                    }
                });
            }
        });
        $.fn.extend({
            ieHtmlAppend(aHtml, aParametres) {
                const lParametres = {
                    ignorerScroll: false,
                    controleur: null,
                    sansCompile: false
                };
                Object.assign(lParametres, aParametres);
                return this.each(function() {
                    if (lParametres.sansCompile) {
                        this.innerHTML += aHtml;
                    } else {
                        IEHtml.injectHTMLParams(Object.assign({
                            element: this,
                            html: aHtml
                        }, lParametres));
                    }
                });
            }
        });
        $.fn.extend({
            ieData(aData) {
                if (arguments.length > 0) {
                    return this.each(function() {
                        $(this).data('ieData', aData);
                    });
                }
                return $(this).data('ieData');
            }
        });
        let u_SurEventMouse_0x0 = false;
        let u_timer_SurEventMouse_0x0;
        const u_estEventEn0x0 = function(aEvent) {
            return (aEvent.pageX === 0 && aEvent.pageY === 0) || (aEvent.clientX === 0 && aEvent.clientY === 0);
        };
        $.fn.extend({
            eventValidation(aCallback) {
                return this.each(function() {
                    $(this).on({
                        mouseup: function(aEvent) {
                            u_SurEventMouse_0x0 = false;
                            if (u_timer_SurEventMouse_0x0) {
                                clearTimeout(u_timer_SurEventMouse_0x0);
                                u_timer_SurEventMouse_0x0 = null;
                            }
                            if (u_estEventEn0x0(aEvent)) {
                                u_SurEventMouse_0x0 = true;
                                u_timer_SurEventMouse_0x0 = setTimeout( () => {
                                    u_SurEventMouse_0x0 = false;
                                    u_timer_SurEventMouse_0x0 = null;
                                }
                                , 100);
                            }
                        },
                        click: function(aEvent) {
                            if (!u_SurEventMouse_0x0 && u_estEventEn0x0(aEvent)) {
                                return;
                            }
                            u_SurEventMouse_0x0 = false;
                            return aCallback.call(this, aEvent);
                        },
                        keyup: function(aEvent) {
                            if (aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                return aCallback.call(this, aEvent);
                            }
                        }
                    });
                });
            }
        });
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.refreshIEHtml, () => {
            IEHtml.refresh();
        }
        );
    },
    fn: 'iehtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GHtml = exports.ObjetHtml = void 0;
        require('Divers.js');
        const MethodesObjet_1 = require("MethodesObjet");
        const IEHtml = require("IEHtml");
        const tag_1 = require("tag");
        const ObjetChaine_1 = require("ObjetChaine");
        const cTagsFocusables = ['audio', 'button', 'canvas', 'details', 'iframe', 'input', 'select', 'summary', 'textarea', 'video'];
        const cAttributsFocusables = ['accesskey', 'contenteditable', 'href', 'tabindex'];
        const cSelectorFocusables = `${cTagsFocusables.join(', ')}, ${cAttributsFocusables.map(a => `[${a}]`).join(', ')}`;
        class ObjetHtml {
            elementExiste(aElement) {
                return !!this.getElement(aElement);
            }
            estElement(aElement) {
                return !!aElement && (aElement.nodeType === 1);
            }
            estDocument(aElement) {
                return !!aElement && (aElement.nodeType === 9);
            }
            estNoeudDeType(aElement, aTypeParent) {
                const lElement = this.getElement(aElement);
                return this.estElement(lElement) && (lElement.nodeName.toUpperCase() === aTypeParent.toUpperCase());
            }
            viderNode(aNode) {
                return IEHtml.empty(aNode);
            }
            getParent(aElement) {
                const lElement = this.getElement(aElement);
                if (this.estElement(lElement)) {
                    if (lElement.parentElement) {
                        return lElement.parentElement;
                    }
                    if (lElement.parentNode) {
                        return lElement.parentNode;
                    }
                }
                return null;
            }
            getParentOverflowNonVisible(aId) {
                const lParent = this.getParent(aId);
                if (lParent && lParent !== document.body) {
                    try {
                        if (global.getComputedStyle(lParent).getPropertyValue('overflow-y') !== 'visible') {
                            return lParent;
                        }
                    } catch (e) {
                        return document.body;
                    }
                    return this.getParentOverflowNonVisible(lParent);
                }
                return document.body;
            }
            getParentScrollable(aId) {
                let lElement = this.getElement(aId);
                try {
                    while (lElement) {
                        if (lElement === document.documentElement) {
                            return lElement;
                        }
                        let lAvecScroll = lElement.scrollTop > 0;
                        if (!lAvecScroll) {
                            const lOverflow = global.getComputedStyle(lElement).getPropertyValue('overflow');
                            lAvecScroll = lOverflow === 'auto' || lOverflow === 'scroll';
                        }
                        if (lAvecScroll) {
                            return lElement;
                        }
                        lElement = this.getParent(lElement);
                    }
                } catch (e) {}
                return null;
            }
            htmlToDOM(aHtml) {
                let lFrag = document.createDocumentFragment();
                let lDiv = document.createElement('div');
                let lNoeudDOM;
                lFrag.appendChild(lDiv);
                lDiv.insertAdjacentHTML('afterbegin', aHtml);
                if (lDiv.childNodes.length > 1) {
                    lNoeudDOM = Array.from(lDiv.childNodes);
                } else {
                    lNoeudDOM = lDiv.firstChild;
                }
                this.viderNode(lDiv);
                lDiv = null;
                lFrag = null;
                return lNoeudDOM;
            }
            insererElementDOM(aElementPere, aElement, aInsererEnPremier) {
                if (this.estElement(aElement) && this.estElement(aElementPere)) {
                    if (aInsererEnPremier && aElementPere.firstChild) {
                        aElementPere.insertBefore(aElement, aElementPere.firstChild);
                    } else {
                        aElementPere.appendChild(aElement);
                    }
                }
            }
            addHtml(aId, aHtml, aParametres) {
                const lElement = this.getElement(aId);
                if (this.elementExiste(lElement) && lElement.appendChild) {
                    const lParametres = Object.assign({}, aParametres);
                    if (lParametres.instance && lParametres.instance.controleur) {
                        lParametres.controleur = lParametres.instance.controleur;
                    }
                    if (lParametres.sansCompile) {
                        lElement.insertAdjacentHTML('beforeend', aHtml);
                    } else {
                        IEHtml.injectHTML(lElement, aHtml, lParametres.controleur, lParametres.ignorerScroll, null, false);
                    }
                }
            }
            supprimerElementDOM(aId) {
                const lElement = this.getElement(aId);
                if (lElement) {
                    $(lElement).remove();
                }
            }
            getElement(aId) {
                if (!aId) {
                    return null;
                }
                if (typeof aId === 'string') {
                    return document.getElementById(aId);
                }
                if (this.estElement(aId) || this.estDocument(aId)) {
                    return aId;
                }
                return null;
            }
            getHtml(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return E.innerHTML;
                }
                return '';
            }
            getValue(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return ObjetChaine_1.GChaine.ajouterEntites(E.value);
                }
                return '';
            }
            estTextNode(aElement) {
                return aElement && (aElement.nodeType === 3);
            }
            getTextesDeNode(aId) {
                let lResult = [];
                try {
                    if (aId instanceof Node && this.estTextNode(aId)) {
                        lResult.push((aId).nodeValue);
                    } else if (aId instanceof Node || MethodesObjet_1.MethodesObjet.isString(aId)) {
                        const lElement = this.getElement(aId);
                        if (this.estTextNode(lElement)) {
                            lResult.push(lElement.nodeValue);
                        } else if (this.estElement(lElement) && lElement.childNodes) {
                            for (let i = 0; i < lElement.childNodes.length; i++) {
                                lResult = lResult.concat(this.getTextesDeNode(lElement.childNodes[i]));
                            }
                        }
                    }
                } catch (e) {
                    IE.log.addLog('erreur getTextesDeNode : ' + e, null, IE.log.genre.Erreur);
                }
                return lResult;
            }
            getClass(aId) {
                const E = this.getElement(aId);
                return E && E.className ? E.className : '';
            }
            addClass(aId, aClass) {
                this.modifierClass(aId, null, aClass);
            }
            delClass(aId, aClass) {
                this.modifierClass(aId, aClass, null);
            }
            modifierClass(aId, aClassSuppression, aClasseAjout) {
                if ((!aClassSuppression && !aClasseAjout) || !this.elementExiste(aId)) {
                    return;
                }
                const lJElement = typeof aId === 'string' ? $('#' + aId.escapeJQ()) : $(aId);
                if (aClassSuppression) {
                    lJElement.removeClass(aClassSuppression);
                }
                if (aClasseAjout) {
                    lJElement.addClass(aClasseAjout);
                }
            }
            getClosestFocusable(aId) {
                const lNode = this.getElement(aId);
                if (lNode && lNode.closest) {
                    let lNodeCB = lNode.closest('.iecb');
                    if (lNodeCB) {
                        return lNodeCB.querySelector('input');
                    }
                    return lNode.closest(cSelectorFocusables);
                }
                return null;
            }
            getClosestInteractive(aId) {
                const lNode = this.getElement(aId);
                if (lNode && lNode.closest) {
                    let lNodeCB = lNode.closest('.iecb');
                    if (lNodeCB) {
                        return lNodeCB.querySelector('input');
                    }
                    return lNode.closest(cTagsFocusables.concat('a[href]').join(', '));
                }
                return null;
            }
            getElementsFocusablesDElement(aNode, aOptions) {
                const lNode = this.getElement(aNode);
                const lTab = [];
                if (lNode && lNode.querySelectorAll) {
                    const lOptions = Object.assign({
                        ignoreAriaHidden: true,
                        ignoreRolePresentation: true
                    }, aOptions);
                    const lNodes = lNode.querySelectorAll(cSelectorFocusables);
                    if (lNodes) {
                        Array.from(lNodes).forEach( (lNode) => {
                            if (lOptions.ignoreAriaHidden && lNode.closest('[aria-hidden]')) {
                                return;
                            }
                            if (lOptions.ignoreRolePresentation && ['presentation', 'none'].includes(lNode.role)) {
                                return;
                            }
                            lTab.push(lNode);
                        }
                        );
                    }
                }
                return lTab;
            }
            getDisplay(aId) {
                const E = this.getElement(aId);
                if (E) {
                    if (E.style && E.style.display === 'none') {
                        return false;
                    } else if (!E.parentNode) {
                        return true;
                    } else {
                        return this.getDisplay(E.parentNode);
                    }
                }
                return false;
            }
            extraireNombreDId(aId, aIndiceAvant, aSeparateur) {
                let lOptions, T, lResult, lId = aId;
                if (!MethodesObjet_1.MethodesObjet.isString(lId)) {
                    if (this.estElement(lId) && lId.id) {
                        lId = lId.id;
                    } else {
                        return null;
                    }
                }
                lOptions = {
                    separateur: aSeparateur || '_',
                    indiceAvant: aIndiceAvant || 0
                };
                T = lId.split(lOptions.separateur);
                lResult = parseInt(T[Math.max(0, T.length - 1 - lOptions.indiceAvant)], 10);
                return MethodesObjet_1.MethodesObjet.isNumber(lResult) ? lResult : null;
            }
            getCheckBox(aId) {
                const E = this.getElement(aId);
                if (E) {
                    return !!E.checked;
                }
                return false;
            }
            getElementEnFocus() {
                try {
                    return document.activeElement;
                } catch (e) {
                    return null;
                }
            }
            focusEstDansElement(aId) {
                const lElement = this.getElement(aId);
                if (this.estElement(lElement)) {
                    const lElementFocus = this.getElementEnFocus();
                    if (lElementFocus) {
                        return lElement === lElementFocus || $.contains(lElement, lElementFocus);
                    }
                }
                return false;
            }
            setClass(aId, aClass) {
                const E = this.getElement(aId);
                if (E) {
                    E.className = aClass;
                }
            }
            setHtml(aId, aHtml, aIgnorerScroll) {
                const E = this.getElement(aId);
                if (E) {
                    const lParametres = Object.assign({}, aIgnorerScroll);
                    if (aIgnorerScroll === true) {
                        lParametres.ignorerScroll = true;
                    }
                    if (lParametres.instance && lParametres.instance.controleur) {
                        lParametres.controleur = lParametres.instance.controleur;
                    }
                    if ($.fn.ieHtml && (!lParametres.instance || !lParametres.instance.IGNORER_IEHTML)) {
                        $(E).ieHtml(aHtml, lParametres);
                    } else {
                        if (E.getElementsByTagName) {
                            $.cleanData(E.getElementsByTagName('*'));
                        }
                        E.innerHTML = aHtml;
                        if (aIgnorerScroll !== true) {
                            const lOverflow = $(E).css('overflow');
                            if (lOverflow === 'auto' || lOverflow === 'scroll') {
                                E.scrollLeft = 0;
                                E.scrollTop = 0;
                            }
                        }
                    }
                }
            }
            setTitle(aId, aTitle) {
                const E = this.getElement(aId);
                if (E) {
                    E.title = _valeurToProp(aTitle);
                }
            }
            setValue(aId, aValue) {
                const E = this.getElement(aId);
                if (E) {
                    E.value = _valeurToProp(aValue);
                }
            }
            setDisabled(aId, aDisabled) {
                const E = this.getElement(aId);
                if (E) {
                    $(E).inputDisabled(aDisabled);
                }
            }
            setAvecMain(aId, aDisabled) {
                const E = this.getElement(aId);
                if (E) {
                    $(E).toggleClass('AvecMain', !aDisabled);
                }
            }
            setDisplay(aId, aVisible, aSpeed) {
                const E = this.getElement(aId);
                if (E) {
                    if (aVisible) {
                        $(E).show(aSpeed);
                    } else {
                        $(E).hide(aSpeed);
                    }
                }
            }
            setFocus(aId, aFocus, aAvecDecalage) {
                function _focus(aHtml, aElement) {
                    if (!aHtml.elementExiste(aElement)) {
                        return;
                    }
                    try {
                        if (aFocus || aFocus === null || aFocus === undefined) {
                            aElement.focus();
                        } else {
                            aElement.blur();
                        }
                    } catch (e) {
                        IE.log.addLog('Erreur ObjetHtml.setFocus : ' + e.toString() + ' ((fv) remarqué uniquement sur IE avec un delai)');
                    }
                }
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const lElement = this.getElement(aId);
                            if (lElement) {
                                let lAvecDecalage = aAvecDecalage
                                  , lDecalage = 200;
                                if (MethodesObjet_1.MethodesObjet.isNumber(aAvecDecalage) && aAvecDecalage >= 0) {
                                    lAvecDecalage = true;
                                    lDecalage = aAvecDecalage;
                                }
                                if (lAvecDecalage) {
                                    setTimeout(_focus.bind(null, this, lElement), lDecalage);
                                } else {
                                    _focus(this, lElement);
                                }
                            }
                        }
                    } catch (e) {}
                }
            }
            setFocusEdit(aId) {
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const E = this.getElement(aId);
                            if (E) {
                                E.focus();
                                E.value = E.value;
                            }
                        }
                    } catch (e) {}
                }
            }
            setCursorAtEnd(aId) {
                try {
                    const E = this.getElement(aId);
                    if (E && E.value !== undefined) {
                        const end = E.value.length;
                        this.setSelectionEdit(E, end, end);
                    }
                } catch (e) {}
            }
            setSelection(aId, aSelection) {
                const E = this.getElement(aId);
                if (E) {
                    E.selectedIndex = aSelection;
                }
            }
            setSelectionEdit(aId, aBegin, aEnd) {
                if (this.elementExiste(aId)) {
                    try {
                        if (this.getDisplay(aId)) {
                            const E = this.getElement(aId);
                            if (E) {
                                const begin = MethodesObjet_1.MethodesObjet.isNumber(aBegin) ? aBegin : 0
                                  , end = MethodesObjet_1.MethodesObjet.isNumber(aEnd) ? aEnd : E.value.length;
                                if (E.setSelectionRange) {
                                    E.setSelectionRange(begin, end);
                                } else if (E.createTextRange) {
                                    const range = E.createTextRange();
                                    range.collapse(true);
                                    range.moveEnd('character', end);
                                    range.moveStart('character', begin);
                                    range.select();
                                }
                            }
                        }
                    } catch (e) {}
                }
            }
            setImage(aId, aSrc) {
                const E = this.getElement(aId);
                if (E) {
                    E.src = aSrc;
                }
            }
            setAlt(aId, aValue) {
                const E = this.getElement(aId);
                if (E) {
                    E.alt = aValue;
                }
            }
            setTexte(aId, aTexte) {
                const E = this.getElement(aId);
                if (E) {
                    this.viderNode(E);
                    E.appendChild(document.createTextNode(aTexte));
                }
            }
            composeBlanc() {
                return '<span style="font-size : 1px">&nbsp;</span>';
            }
            setCheckBox(aId, aValue) {
                if (aValue === undefined) {
                    aValue = false;
                }
                const E = this.getElement(aId);
                if (E) {
                    $(E).inputChecked(aValue);
                }
            }
            setLien(aId, aValue) {
                const E = this.getElement(aId);
                if (E && (E.tagName.toUpperCase() === 'A')) {
                    E.href = aValue;
                }
            }
            setTabIndex(aId, aTabIndex) {
                const E = this.getElement(aId);
                if (E) {
                    E.tabIndex = aTabIndex;
                }
            }
            toArg(aArgs) {
                return tag_1.tag.toArg(aArgs);
            }
            composeAttr(aAttribut, aValue, ...aArgs) {
                return tag_1.tag.composeAttr(aAttribut, aValue, ...aArgs);
            }
            deselectionTexte() {
                try {
                    if (window.getSelection && window.getSelection() && window.getSelection().removeAllRanges) {
                        window.getSelection().removeAllRanges();
                    }
                } catch (e) {}
            }
            nettoyerEditeurRiche(aJNode, aEditeurEquationMaxFileSize) {
                let lResult = false;
                if (aJNode && aJNode.find && aJNode.length > 0) {
                    aJNode.find('img').each( (index, ele) => {
                        const lSrc = $(ele).attr('src');
                        if ($(ele).attr('data-latex')) {
                            if (lSrc && lSrc.length > (aEditeurEquationMaxFileSize || 4096)) {
                                $(ele).remove();
                                lResult = true;
                            }
                        } else if (lSrc && (lSrc.search('data') > -1 || lSrc.startsWith('blob'))) {
                            $(ele).remove();
                            lResult = true;
                        }
                    }
                    );
                }
                return lResult;
            }
            composeFondAucuneDonnee(aHtml) {
                return '<div style="width:1px;height:1px;"></div><div class="message-vide card card-nodata"><div class="card-content">' + aHtml + '</div><div class="Image_No_Data" aria-hidden="true"></div></div>';
            }
        }
        exports.ObjetHtml = ObjetHtml;
        function _valeurToProp(aValeur) {
            if (aValeur === null || aValeur === undefined) {
                return '';
            }
            if (MethodesObjet_1.MethodesObjet.isString(aValeur)) {
                return ObjetChaine_1.GChaine.enleverEntites(aValeur);
            }
            if (MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                return aValeur + '';
            }
            return aValeur;
        }
        const GHtml = new ObjetHtml();
        exports.GHtml = GHtml;
    },
    fn: 'objethtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GStyle = exports.ObjetStyle = exports.EGenreBordure = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetSupport_1 = require("ObjetSupport");
        const EGenreBordure = {
            gauche: 1,
            haut: 2,
            droite: 4,
            bas: 8,
            avecBordure(aBordures, aGenreBordure) {
                return aGenreBordure > 0 && aBordures > 0 ? !!(aBordures & aGenreBordure) : false;
            }
        };
        exports.EGenreBordure = EGenreBordure;
        class ObjetStyle {
            composeCouleur(aCouleurFond, aCouleurTexte, aCouleurBordure, aLargeurBordure, aListeBordures) {
                return this.composeCouleurFond(aCouleurFond) + this.composeCouleurTexte(aCouleurTexte) + this.composeCouleurBordure(aCouleurBordure, aLargeurBordure, aListeBordures);
            }
            composeCouleurBordure(aCouleurBordure, aLargeurBordure=1, aListeBordures=0, aStyle='solid') {
                if (aCouleurBordure && MethodesObjet_1.MethodesObjet.isString(aCouleurBordure)) {
                    const lStyle = aStyle || 'solid';
                    if (!MethodesObjet_1.MethodesObjet.isNumeric(aLargeurBordure)) {
                        aLargeurBordure = 1;
                    }
                    if (!aListeBordures) {
                        return ' border: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';';
                    }
                    const H = [];
                    H.push(aListeBordures & EGenreBordure.gauche ? ' border-left: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.haut ? ' border-top: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.droite ? ' border-right: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    H.push(aListeBordures & EGenreBordure.bas ? ' border-bottom: ' + aLargeurBordure + 'px ' + lStyle + ' ' + aCouleurBordure + ';' : '');
                    return H.join('');
                }
                return '';
            }
            composeCouleurFond(aCouleurFond) {
                if (!aCouleurFond) {
                    return '';
                }
                if (MethodesObjet_1.MethodesObjet.isString(aCouleurFond)) {
                    return ' background-color:' + aCouleurFond + ';';
                }
                ;return '';
            }
            composeCouleurTexte(aCouleurTexte) {
                if (!aCouleurTexte) {
                    return '';
                }
                if (MethodesObjet_1.MethodesObjet.isString(aCouleurTexte)) {
                    return ' color:' + aCouleurTexte + ';';
                }
                ;return '';
            }
            composeHeight(aValeur, aFormat) {
                if (aValeur && MethodesObjet_1.MethodesObjet.isString(aValeur) && aValeur.indexOf && aValeur.indexOf('%') > 0) {
                    aValeur = parseFloat(aValeur);
                    aFormat = '%';
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                if (!aFormat) {
                    aFormat = 'px';
                }
                return 'height:' + aValeur + aFormat + ';';
            }
            composeWidth(aValeur, aFormat) {
                if (aValeur && MethodesObjet_1.MethodesObjet.isString(aValeur) && aValeur.indexOf && aValeur.indexOf('%') > 0) {
                    aValeur = parseFloat(aValeur);
                    aFormat = '%';
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                if (!aFormat) {
                    aFormat = 'px';
                }
                return 'width:' + aValeur + aFormat + ';';
            }
            composeHeightCalc(aValeur) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                return 'height: calc(100% - ' + aValeur + 'px);';
            }
            composeWidthCalc(aValeur) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aValeur)) {
                    return '';
                }
                return 'width: calc(100% - ' + aValeur + 'px);';
            }
            composeMarge(aHaut, aBas, aGauche, aDroit) {
                let lResult = '';
                if (MethodesObjet_1.MethodesObjet.isNumeric(aHaut)) {
                    lResult += 'margin-top: ' + aHaut + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aBas)) {
                    lResult += 'margin-bottom: ' + aBas + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aGauche)) {
                    lResult += 'margin-left: ' + aGauche + 'px; ';
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(aDroit)) {
                    lResult += 'margin-right: ' + aDroit + 'px; ';
                }
                return lResult;
            }
            composeOpacite(aOpacite) {
                if (!MethodesObjet_1.MethodesObjet.isNumeric(aOpacite) || aOpacite < 0 || aOpacite > 1) {
                    return '';
                }
                aOpacite = Math.borner(aOpacite, 0, 1);
                if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Standard]) {
                    return 'opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Webkit]) {
                    return '-webkit-opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportOpacity[ObjetSupport_1.Support.GenreNavigateur.Moz]) {
                    return '-moz-opacity: ' + aOpacite + ';';
                } else if (ObjetSupport_1.Support.supportFilterIE) {
                    return 'FILTER: progid:DXImageTransform.Microsoft.Alpha(opacity=' + aOpacite * 100 + ')' + ';';
                } else {
                    return '';
                }
            }
            getStyle(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    return E.style;
                }
            }
            setStyle(aId, aStyle) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    if (E.setAttribute) {
                        E.setAttribute('style', aStyle);
                    }
                }
            }
            setCouleurBordure(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderColor = aCouleur;
                }
            }
            setCouleurBordureHaut(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderTopColor = aCouleur;
                }
            }
            setCouleurBordureBas(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && E.style) {
                    E.style.borderBottomColor = aCouleur;
                }
            }
            setCouleurBordureGauche(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderLeftColor = aCouleur;
                }
            }
            setCouleurBordureDroit(aId, aCouleur) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E) {
                    E.style.borderRightColor = aCouleur;
                }
            }
            setCouleur(aId, aCouleurFond, aCouleurTexte, aCouleurBordure) {
                if (aCouleurFond || aCouleurFond === '') {
                    this.setCouleurFond(aId, aCouleurFond);
                }
                if (aCouleurTexte || aCouleurTexte === '') {
                    this.setCouleurTexte(aId, aCouleurTexte);
                }
                if (aCouleurBordure || aCouleurBordure === '') {
                    this.setCouleurBordure(aId, aCouleurBordure);
                }
            }
            setCouleurFond(aId, aCouleurFond) {
                const S = this.getStyle(aId);
                if (S) {
                    S.backgroundColor = aCouleurFond;
                }
            }
            setCouleurTexte(aId, aCouleurTexte) {
                const S = this.getStyle(aId);
                if (S) {
                    S.color = aCouleurTexte;
                }
            }
            setVisible(aId, aVisible) {
                const S = this.getStyle(aId);
                if (S) {
                    S.visibility = aVisible ? 'visible' : 'hidden';
                }
            }
            setGras(aId, aGras) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && ObjetHtml_1.GHtml.estElement(E)) {
                    E.style.fontWeight = (aGras ? 'bold' : 'normal');
                }
            }
            getZindex(aId) {
                const S = this.getStyle(aId);
                if (S && S.zIndex) {
                    return parseInt(S.zIndex);
                }
            }
            setZindex(aId, aZindex) {
                const S = this.getStyle(aId);
                if (S) {
                    S.zIndex = aZindex;
                }
            }
            getDisplay(aId) {
                const S = this.getStyle(aId);
                return S.display === '';
            }
            setDisplay(aId, aDisplay, aSpeed) {
                ObjetHtml_1.GHtml.setDisplay(aId, aDisplay, aSpeed);
            }
            getVisible(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                return E.style ? E.style.visibility === 'visible' : false;
            }
            composeDegradeVertical(aCouleurDebut, aCouleurFin) {
                let lResult = this.composeCouleurFond(aCouleurDebut);
                if (ObjetSupport_1.Support.supportFilterIE) {
                    lResult += ' FILTER: progid:DXImageTransform.Microsoft.Gradient(gradientType=0,startColorStr=' + aCouleurDebut + ',endColorStr=' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Standard]) {
                    lResult += ' background: linear-gradient(to bottom, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.IE]) {
                    lResult += ' background: -ms-linear-gradient(top, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Moz]) {
                    lResult += ' background: -moz-linear-gradient(top, ' + aCouleurDebut + ', ' + aCouleurFin + ');';
                } else if (ObjetSupport_1.Support.supportGradient[ObjetSupport_1.Support.GenreNavigateur.Webkit]) {
                    lResult += ' background: -webkit-gradient(linear, left top, left bottom, from(' + aCouleurDebut + '), to(' + aCouleurFin + '));';
                }
                return lResult;
            }
            setImageFond(aId, aImage) {
                const S = this.getStyle(aId);
                if (S) {
                    S.backgroundImage = 'url(' + aImage + ')';
                    S.backgroundAttachment = 'fixed';
                }
            }
            getComputedValue(aNode, aPropertyName) {
                const lNode = ObjetHtml_1.GHtml.getElement(aNode);
                if (lNode && global.getComputedStyle && aPropertyName) {
                    try {
                        return global.getComputedStyle(lNode).getPropertyValue(aPropertyName);
                    } catch (e) {}
                }
                return '';
            }
            getFloatComputedValue(aNode, aPropertyName) {
                const lNumber = parseFloat(this.getComputedValue(aNode, aPropertyName));
                return isNaN(lNumber) ? 0 : lNumber;
            }
            styleSheetDisabled() {
                let lResult = false;
                try {
                    const lBody = document.getElementsByTagName('BODY')[0];
                    const lElement = document.createElement('div');
                    lBody.appendChild(lElement);
                    lElement.classList.add('support-css-test');
                    lResult = this.getFloatComputedValue(lElement, 'height') === 0;
                    lBody.removeChild(lElement);
                } catch (e) {}
                return lResult;
            }
        }
        exports.ObjetStyle = ObjetStyle;
        const GStyle = new ObjetStyle();
        exports.GStyle = GStyle;
    },
    fn: 'objetstyle.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GPosition = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        class ObjetPosition {
            constructor() {
                this._cacheFontSize = null;
            }
            getWidth(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? lElement.offsetWidth : 0;
            }
            getHeight(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? lElement.offsetHeight : 0;
            }
            getLeft(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? this.getClientRect(lElement).left : 0;
            }
            getTop(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                return ObjetHtml_1.GHtml.estElement(lElement) ? this.getClientRect(aId).top : 0;
            }
            setWidth(aId, aWidth, aAjuster, aFormat) {
                try {
                    if (aWidth === undefined || aWidth === null || isNaN(aWidth)) {
                        IE.log.addLog('setWidth invalide : ' + aWidth);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    const lWidthEnString = MethodesObjet_1.MethodesObjet.isString(aWidth);
                    aFormat = !aFormat && !lWidthEnString ? 'px' : aFormat;
                    if (lWidthEnString && aWidth === 'auto') {
                        lElement.style.width = aWidth;
                    } else {
                        aWidth = Math.max(0, aWidth);
                        lElement.style.width = aWidth + aFormat;
                    }
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lWidth = this.getWidth(lElement);
                        if (aWidth !== lWidth) {
                            lElement.style.width = Math.max(0, aWidth - (lWidth - aWidth)) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setHeight(aId, aHeight, aAjuster, aFormat) {
                try {
                    if (aHeight === undefined || aHeight === null || isNaN(aHeight)) {
                        IE.log.addLog('setHeight invalide : ' + aHeight);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    const lHeightEnString = MethodesObjet_1.MethodesObjet.isString(aHeight);
                    aFormat = !aFormat && !lHeightEnString ? 'px' : aFormat;
                    if (lHeightEnString && aHeight === 'auto') {
                        lElement.style.height = aHeight;
                    } else {
                        aHeight = Math.max(0, aHeight);
                        lElement.style.height = aHeight + aFormat;
                    }
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lHeight = this.getHeight(lElement);
                        if (aHeight !== lHeight) {
                            lElement.style.height = Math.max(0, aHeight - (lHeight - aHeight)) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setLeft(aId, aLeft, aAjuster, aFormat) {
                aFormat = !aFormat ? 'px' : aFormat;
                try {
                    if (aLeft === undefined || aLeft === null || isNaN(aLeft)) {
                        IE.log.addLog('setLeft invalide : ' + aLeft);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    aLeft = isNaN(aLeft) ? 0 : aLeft;
                    lElement.style.left = aLeft + aFormat;
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lLeft = this.getLeft(lElement);
                        if (aLeft !== lLeft) {
                            lElement.style.left = aLeft - (lLeft - aLeft) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            setTop(aId, aTop, aAjuster, aFormat) {
                aFormat = !aFormat ? 'px' : aFormat;
                try {
                    if (aTop === undefined || aTop === null || isNaN(aTop)) {
                        IE.log.addLog('setTop invalide : ' + aTop);
                        return;
                    }
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    if (!lElement || !lElement.style) {
                        return;
                    }
                    aTop = isNaN(aTop) ? 0 : aTop;
                    lElement.style.top = aTop + aFormat;
                    if (aAjuster && (aFormat === 'px') && ObjetHtml_1.GHtml.getDisplay(lElement)) {
                        const lTop = this.getTop(lElement);
                        if (aTop !== lTop) {
                            lElement.style.top = aTop - (lTop - aTop) + aFormat;
                        }
                    }
                } catch (e) {}
            }
            getRect(aId, aPositionAbsolue) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                if (lElement && lElement.getBoundingClientRect) {
                    const lBoundingRect = lElement.getBoundingClientRect();
                    if (lBoundingRect) {
                        const lOffsetX = window.pageXOffset || 0;
                        const lOffsetY = window.pageYOffset || 0;
                        const lRect = {
                            left: lBoundingRect.left + lOffsetX,
                            right: lBoundingRect.right + lOffsetX,
                            top: lBoundingRect.top + lOffsetY,
                            bottom: lBoundingRect.bottom + lOffsetY,
                            x: lBoundingRect.left + lOffsetX,
                            y: lBoundingRect.top + lOffsetY,
                            width: lBoundingRect.right - lBoundingRect.left,
                            height: lBoundingRect.bottom - lBoundingRect.top,
                            leftScroll: aPositionAbsolue ? lBoundingRect.left : 0,
                            topScroll: aPositionAbsolue ? lBoundingRect.top : 0
                        };
                        if (!aPositionAbsolue) {
                            const lOffsetParent = $(lElement).offsetParent().get(0);
                            if (lOffsetParent && lOffsetParent !== document.documentElement) {
                                const lRectOffset = this.getRect(lOffsetParent, true);
                                Object.assign(lRect, {
                                    x: lRect.x - lRectOffset.x,
                                    y: lRect.y - lRectOffset.y,
                                    left: lRect.left - lRectOffset.left,
                                    right: lRect.left - lRectOffset.left + lRect.width,
                                    top: lRect.top - lRectOffset.top,
                                    bottom: lRect.top - lRectOffset.top + lRect.height
                                });
                            }
                        }
                        try {
                            Object.assign(lRect, this.getComputedBoxRect(lElement));
                            Object.assign(lRect, {
                                contentLeft: lRect.left + lRect.paddingLeft + lRect.borderLeft,
                                contentRight: lRect.right - lRect.paddingRight - lRect.borderRight,
                                contentTop: lRect.top + lRect.paddingTop + lRect.borderTop,
                                contentBottom: lRect.bottom - lRect.paddingBottom - lRect.borderBottom
                            });
                            lRect.contentWidth = lRect.contentRight - lRect.contentLeft;
                            lRect.contentHeight = lRect.contentBottom - lRect.contentTop;
                            Object.assign(lRect, {
                                innerLeft: lRect.contentLeft - lRect.paddingLeft,
                                innerRight: lRect.contentRight + lRect.paddingRight,
                                innerTop: lRect.contentTop - lRect.paddingTop,
                                innerBottom: lRect.contentBottom + lRect.paddingBottom
                            });
                            lRect.innerWidth = lRect.innerRight - lRect.innerLeft;
                            lRect.innerHeight = lRect.innerBottom - lRect.innerTop;
                            Object.assign(lRect, {
                                outerLeft: lRect.left - lRect.marginLeft,
                                outerRight: lRect.right + lRect.marginRight,
                                outerTop: lRect.top - lRect.marginTop,
                                outerBottom: lRect.bottom + lRect.marginBottom
                            });
                            lRect.outerWidth = lRect.outerRight - lRect.outerLeft;
                            lRect.outerHeight = lRect.outerBottom - lRect.outerTop;
                        } catch (e) {}
                        return lRect;
                    }
                }
                ;return {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0,
                    width: 0,
                    height: 0,
                    x: 0,
                    y: 0,
                    leftScroll: 0,
                    topScroll: 0,
                    erreur: true
                };
            }
            getClientRect(aId) {
                return this.getRect(aId, true);
            }
            getComputedBoxRect(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                let lComputedStyle = null;
                if (lElement) {
                    lComputedStyle = global.getComputedStyle(lElement);
                }
                ;const lBox = {};
                ['left', 'right', 'top', 'bottom'].forEach( (aVal) => {
                    const lValMaj = aVal.ucfirst();
                    lBox[`padding${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`padding-${aVal}`)) : 0;
                    lBox[`margin${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`margin-${aVal}`)) : 0;
                    lBox[`border${lValMaj}`] = lComputedStyle ? parseFloat(lComputedStyle.getPropertyValue(`border-${aVal}-width`)) : 0;
                }
                );
                return lBox;
            }
            setPosition(aId, aLeft, aTop, aAjuster, aFormat) {
                this.setLeft(aId, aLeft, aAjuster, aFormat);
                this.setTop(aId, aTop, aAjuster, aFormat);
            }
            centrer(aId) {
                let lLeft, lTop, lWidth, lHeight;
                lLeft = window.pageXOffset || 0;
                lTop = window.pageYOffset || 0;
                if (document.documentElement) {
                    lLeft = lLeft || document.documentElement.scrollLeft;
                    lTop = lTop || document.documentElement.scrollTop;
                }
                if (window.visualViewport) {
                    lLeft = lLeft || window.visualViewport.offsetLeft;
                    lTop = lTop || window.visualViewport.offsetTop;
                }
                if (GNavigateur.isTactile && window.visualViewport) {
                    lWidth = window.visualViewport.width;
                    lHeight = window.visualViewport.height;
                } else if (GNavigateur.isTactile && window.innerHeight) {
                    lWidth = window.innerWidth;
                    lHeight = window.innerHeight;
                } else {
                    lWidth = GNavigateur.clientL;
                    lHeight = GNavigateur.clientH;
                }
                const lWidthId = this.getWidth(aId)
                  , lHeightId = this.getHeight(aId);
                if (lWidthId * lHeightId) {
                    const lPosition = {
                        x: Math.max(0, lLeft + (lWidth - lWidthId) / 2),
                        y: Math.max(0, lTop + (lHeight - lHeightId) / 2),
                        width: lWidthId,
                        height: lHeightId
                    };
                    _ramenerPositionDansLAffichage(lPosition);
                    this.setPosition(aId, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
                }
            }
            placer(aId, aLeft, aTop, aEcartBordEcran) {
                let lX1 = MethodesObjet_1.MethodesObjet.isNumber(aLeft) ? aLeft : (GNavigateur.pointerX || 0);
                const lX2 = lX1 + this.getWidth(aId);
                let lY1 = MethodesObjet_1.MethodesObjet.isNumber(aTop) ? aTop : (GNavigateur.pointerY || 0);
                const lY2 = lY1 + this.getHeight(aId);
                const lEcartBordEcran = $.extend({
                    x: 2,
                    y: 2
                }, aEcartBordEcran);
                if (lX2 + lEcartBordEcran.x > GNavigateur.ecranL) {
                    lX1 = GNavigateur.ecranL - this.getWidth(aId) - lEcartBordEcran.x;
                }
                if (lY2 + lEcartBordEcran.y > GNavigateur.ecranH) {
                    lY1 = GNavigateur.ecranH - this.getHeight(aId) - lEcartBordEcran.y;
                }
                this.setPosition(aId, Math.max(lEcartBordEcran.x, lX1), Math.max(lEcartBordEcran.y, lY1), true);
            }
            placerFiche(aId, aIdSource, aVisible, aDecalage) {
                const lPositionSource = _getPositionElement(aIdSource);
                this.placerFicheSource(aId, lPositionSource.x, lPositionSource.x + lPositionSource.width, lPositionSource.y, lPositionSource.y + lPositionSource.height, aVisible, aDecalage);
            }
            placerFicheSource(aId, aX1Source, aX2Source, aY1Source, aY2Source, aVisible, aDecalage) {
                const lVisible = aVisible === null || aVisible === undefined ? ObjetHtml_1.GHtml.getElement(aId).style.visibility === 'visible' : aVisible
                  , lDecalage = $.extend({
                    x: 6,
                    y: 0
                }, aDecalage);
                const lPosition = _getPositionElement(aId)
                  , lPositionSource = {
                    x: aX1Source,
                    y: aY1Source,
                    width: aX2Source - aX1Source,
                    height: aY2Source - aY1Source
                };
                _ramenerPositionDansLAffichage(lPosition);
                if (!lVisible || _avecChevauchement(lPosition, lPositionSource)) {
                    lPosition.x = lPositionSource.x + lPositionSource.width;
                    if (lPosition.x + lPosition.width + lDecalage.x > GNavigateur.ecranL) {
                        lPosition.x = Math.max(aX1Source - lPosition.width - lDecalage.x, 1);
                    } else {
                        lPosition.x += lDecalage.x;
                    }
                    if (!lVisible) {
                        lPosition.y = lPositionSource.y;
                        if (lPosition.y + lPosition.height + lDecalage.y > GNavigateur.ecranH) {
                            lPosition.y = Math.max(lPositionSource.y + lPositionSource.height - lPosition.height - lDecalage.y, 1);
                        } else {
                            lPosition.y += lDecalage.y;
                        }
                    }
                }
                _modifierPositionSiChevauchement(lPosition, lPositionSource);
                _ramenerPositionDansLAffichage(lPosition);
                if (lPosition.x < 10) {
                    lPosition.x = 10;
                }
                if (lPosition.y < 10) {
                    lPosition.y = 10;
                }
                this.setPosition(aId, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
            }
            deplacerSiChevauchement(aIdMobile, aIdReference) {
                const lPosition = _getPositionElement(aIdMobile)
                  , lPositionSource = _getPositionElement(aIdReference);
                _modifierPositionSiChevauchement(lPosition, lPositionSource);
                this.setPosition(aIdMobile, Math.max(0, lPosition.x), Math.max(0, lPosition.y), true);
            }
            getScrollTop(aId) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                return E ? E.scrollTop : 0;
            }
            setScrollTop(aId, aScrollTop) {
                const E = ObjetHtml_1.GHtml.getElement(aId);
                if (E && ObjetHtml_1.GHtml.estElement(E)) {
                    E.scrollTop = aScrollTop;
                }
            }
            setTaille(aId, aWidth, aHeight, aFormat) {
                this.setWidth(aId, aWidth, !!aFormat, aFormat);
                this.setHeight(aId, aHeight, !!aFormat, aFormat);
            }
            positionDansZone(aPosition, aId) {
                const lRect = this.getClientRect(aId);
                return !!aPosition && (aPosition.x > lRect.left) && (aPosition.x < lRect.right) && (aPosition.y > lRect.top) && (aPosition.y < lRect.bottom);
            }
            estEnCollision(aId1, aId2) {
                const E1 = ObjetHtml_1.GHtml.getElement(aId1);
                const E2 = ObjetHtml_1.GHtml.getElement(aId2);
                if (!!E1 && !!E2) {
                    const x1 = this.getLeft(aId1);
                    const y1 = this.getTop(aId1);
                    const h1 = this.getHeight(aId1);
                    const w1 = this.getWidth(aId1);
                    const b1 = y1 + h1;
                    const r1 = x1 + w1;
                    const x2 = this.getLeft(aId2);
                    const y2 = this.getTop(aId2);
                    const h2 = this.getHeight(aId2);
                    const w2 = this.getWidth(aId2);
                    const b2 = y2 + h2;
                    const r2 = x2 + w2;
                    return !(b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2);
                }
                return false;
            }
            getPositionEventJQuery(aEvent) {
                if (!aEvent) {
                    return {
                        x: 0,
                        y: 0
                    };
                }
                if (aEvent.pageX !== undefined) {
                    return {
                        x: Math.round(aEvent.pageX),
                        y: Math.round(aEvent.pageY)
                    };
                }
                const lEventTouch = aEvent;
                if (lEventTouch.originalEvent && lEventTouch.originalEvent.changedTouches && lEventTouch.originalEvent.changedTouches[0]) {
                    return {
                        x: lEventTouch.originalEvent.changedTouches[0].pageX || 0,
                        y: lEventTouch.originalEvent.changedTouches[0].pageY || 0
                    };
                }
                ;return {
                    x: 0,
                    y: 0
                };
            }
            remToPixels(aRem) {
                if (!this._cacheFontSize) {
                    this._cacheFontSize = ObjetStyle_1.GStyle.getFloatComputedValue(document.documentElement, 'font-size');
                }
                return aRem * this._cacheFontSize;
            }
            scrollToElement(aElement, aElementScrollParent) {
                const lElement = ObjetHtml_1.GHtml.getElement(aElement);
                const lElementScroll = ObjetHtml_1.GHtml.getElement(aElementScrollParent);
                if (!lElement || !lElementScroll) {
                    return;
                }
                const lRect = this.getRect(lElement, true);
                const lRectScroll = this.getRect(lElementScroll, true);
                let lTop = 0;
                let lLeft = 0;
                let lJElement = $(lElement);
                while (lJElement.get(0) !== lElementScroll && $.contains(lElementScroll, lJElement.get(0))) {
                    const lPosElement = lJElement.position();
                    lTop += lPosElement.top;
                    lLeft += lPosElement.left;
                    lJElement = lJElement.offsetParent();
                    if (/^body|html$/i.test(lJElement[0].nodeName)) {
                        break;
                    }
                }
                const lPosition = {
                    top: lTop,
                    left: lLeft,
                    heightVisible: Math.min(lRect.height, lRectScroll.height),
                    widthVisible: Math.min(lRect.width, lRectScroll.width)
                };
                if (lPosition.top < 0) {
                    lElementScroll.scrollTop = -lPosition.top;
                } else if (lPosition.top + lPosition.heightVisible - lElementScroll.scrollTop > lRectScroll.height) {
                    lElementScroll.scrollTop = lPosition.top + lPosition.heightVisible - lElementScroll.scrollTop - lRectScroll.height;
                }
                if (lPosition.left < 0) {
                    lElementScroll.scrollLeft = -lPosition.left;
                } else if (lPosition.left + lPosition.widthVisible - lElementScroll.scrollLeft > lRectScroll.width) {
                    lElementScroll.scrollLeft = lPosition.left + lPosition.widthVisible - lElementScroll.scrollLeft - lRectScroll.width;
                }
            }
        }
        function _ramenerPositionDansLAffichage(aPosition) {
            if (aPosition.x + aPosition.width > GNavigateur.ecranL) {
                aPosition.x = Math.max(0, GNavigateur.ecranL - aPosition.width);
            }
            if (aPosition.y + aPosition.height > GNavigateur.ecranH) {
                aPosition.y = Math.max(0, GNavigateur.ecranH - aPosition.height);
            }
        }
        function _avecChevauchement(aPosition, aPositionSource) {
            return (aPosition.x < (aPositionSource.x + aPositionSource.width)) && ((aPosition.x + aPosition.width) > aPositionSource.x) && (aPosition.y < (aPositionSource.y + aPositionSource.height)) && ((aPosition.y + aPosition.height) > aPositionSource.y);
        }
        function _getPositionElement(aElement) {
            const lX = GPosition.getLeft(aElement)
              , lY = GPosition.getTop(aElement)
              , lWidth = GPosition.getWidth(aElement)
              , lHeight = GPosition.getHeight(aElement);
            return {
                x: lX,
                y: lY,
                width: lWidth,
                height: lHeight
            };
        }
        function _modifierPositionSiChevauchement(aPositionMobile, aPositionSource) {
            if ((aPositionMobile.x + aPositionMobile.width) > GNavigateur.ecranL) {
                aPositionMobile.x = GNavigateur.ecranL - aPositionMobile.width;
            }
            if ((aPositionMobile.y + aPositionMobile.height) > GNavigateur.ecranH) {
                aPositionMobile.y = GNavigateur.ecranH - aPositionMobile.height;
            }
            if (_avecChevauchement(aPositionMobile, aPositionSource)) {
                aPositionMobile.x = aPositionSource.x + aPositionSource.width + 6;
                if (aPositionMobile.x + aPositionMobile.width > GNavigateur.ecranL) {
                    aPositionMobile.x = Math.max(aPositionSource.x - aPositionMobile.width, 1);
                }
            }
            if (aPositionMobile.x + aPositionMobile.width > GNavigateur.ecranL) {
                aPositionMobile.x = GNavigateur.ecranL - aPositionMobile.width;
            }
            if (aPositionMobile.x < 6) {
                aPositionMobile.x = 6;
            }
            if (_avecChevauchement(aPositionMobile, aPositionSource)) {
                aPositionMobile.y = aPositionSource.y + aPositionSource.height + 6;
                if (aPositionMobile.y + aPositionMobile.height > GNavigateur.ecranH) {
                    aPositionMobile.y = Math.max(aPositionSource.y - aPositionMobile.height, 1);
                }
            }
            if (aPositionMobile.y + aPositionMobile.height > GNavigateur.ecranH) {
                aPositionMobile.y = GNavigateur.ecranH - aPositionMobile.height;
            }
        }
        const GPosition = new ObjetPosition();
        exports.GPosition = GPosition;
        $(window).one('load', () => {
            GPosition._cacheFontSize = null;
        }
        );
    },
    fn: 'objetposition.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreBoutonSouris = void 0;
        var EGenreBoutonSouris;
        (function(EGenreBoutonSouris) {
            EGenreBoutonSouris[EGenreBoutonSouris["Gauche"] = 0] = "Gauche";
            EGenreBoutonSouris[EGenreBoutonSouris["Droite"] = 1] = "Droite";
        }
        )(EGenreBoutonSouris || (exports.EGenreBoutonSouris = EGenreBoutonSouris = {}));
    },
    fn: 'enumere_boutonsouris.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EEvent = void 0;
        var EEvent;
        (function(EEvent) {
            EEvent[EEvent["SurError"] = 1] = "SurError";
            EEvent[EEvent["SurResize"] = 2] = "SurResize";
            EEvent[EEvent["SurPreResize"] = 3] = "SurPreResize";
            EEvent[EEvent["SurPostResize"] = 4] = "SurPostResize";
            EEvent[EEvent["SurClick"] = 5] = "SurClick";
            EEvent[EEvent["SurScroll"] = 6] = "SurScroll";
            EEvent[EEvent["SurKeyDown"] = 7] = "SurKeyDown";
            EEvent[EEvent["SurKeyUp"] = 8] = "SurKeyUp";
            EEvent[EEvent["SurKeyPress"] = 9] = "SurKeyPress";
            EEvent[EEvent["SurMouseMove"] = 10] = "SurMouseMove";
            EEvent[EEvent["SurMouseDown"] = 11] = "SurMouseDown";
            EEvent[EEvent["SurSelectStart"] = 12] = "SurSelectStart";
            EEvent[EEvent["SurMouseUp"] = 13] = "SurMouseUp";
            EEvent[EEvent["SurFinDeplacement"] = 14] = "SurFinDeplacement";
            EEvent[EEvent["SurBlur"] = 15] = "SurBlur";
            EEvent[EEvent["SurChange"] = 16] = "SurChange";
            EEvent[EEvent["SurDblClick"] = 17] = "SurDblClick";
            EEvent[EEvent["SurFocus"] = 18] = "SurFocus";
            EEvent[EEvent["SurFocusIn"] = 19] = "SurFocusIn";
            EEvent[EEvent["SurFocusOut"] = 20] = "SurFocusOut";
            EEvent[EEvent["SurLoad"] = 21] = "SurLoad";
            EEvent[EEvent["SurUnload"] = 22] = "SurUnload";
            EEvent[EEvent["SurMouseOut"] = 23] = "SurMouseOut";
            EEvent[EEvent["SurMouseOver"] = 24] = "SurMouseOver";
            EEvent[EEvent["SurFinResize"] = 25] = "SurFinResize";
        }
        )(EEvent || (exports.EEvent = EEvent = {}));
    },
    fn: 'enumere_event.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetNavigateur = void 0;
        require("Divers.js");
        require("DeclarationJQuery.js");
        const Invocateur_1 = require("Invocateur");
        const ObjetSupport_1 = require("ObjetSupport");
        const ObjetPosition_1 = require("ObjetPosition");
        const ToucheClavier_1 = require("ToucheClavier");
        const TypeNote_1 = require("TypeNote");
        const Enumere_BoutonSouris_1 = require("Enumere_BoutonSouris");
        const Enumere_Event_1 = require("Enumere_Event");
        global.GNavigateur = null;
        let uTimerPresenceUtilisateur;
        let uTimerDeclencherVerifierPresenceUtilisateur = null;
        const c_dureeInteractionUtilisateur = 10 * 60 * 1000;
        let u_count_modal_mobile = 0;
        class ObjetNavigateur {
            constructor() {
                this.versionAndroid = [0, 0, 0];
                this.Nom = 'GNavigateur';
                this.OnEvent = [];
                this.nbBlocageClavier = 0;
                this.interactionUtilisateur = true;
                this.chargementTermine = false;
                if (document.body) {
                    this.initialiser();
                } else {
                    const lThis = this;
                    $(document).ready( () => {
                        lThis.initialiser();
                    }
                    );
                }
                this.interfaceBloquee = false;
                this.declarationEvenements();
            }
            initialiser() {
                this.UserAgent = navigator.userAgent;
                const LIndex = this.UserAgent.lastIndexOf('MSIE');
                this.isIpad = this.UserAgent.lastIndexOf('iPad') !== -1;
                this.isIphone = this.UserAgent.lastIndexOf('iPhone') !== -1;
                this.isAndroid = this.UserAgent.lastIndexOf('Android') !== -1;
                this.isWinMob = this.UserAgent.toLowerCase().lastIndexOf('windows phone') !== -1 || this.UserAgent.toLowerCase().lastIndexOf('windows mobile') !== -1;
                this.isEdge = this.UserAgent.lastIndexOf('Edge') !== -1;
                this.isMacOs = this.UserAgent.search(/Mac\s?OS/gi) > -1;
                if (this.isAndroid) {
                    try {
                        const lMatchAndroid = (this.UserAgent).match(/android\s([0-9.]*)/i);
                        if (lMatchAndroid && lMatchAndroid[1]) {
                            const lVersionAndroid = lMatchAndroid[1].split('.');
                            [0, 1, 2].forEach( (aVal) => {
                                this.versionAndroid[aVal] = parseInt(lVersionAndroid[aVal] || '0', 10);
                            }
                            );
                        }
                    } catch (e) {}
                }
                if (this.isIpad || this.isIphone) {
                    try {
                        const lMatchIOS = (navigator.appVersion || '').match(/OS (\d+)_(\d+)_?(\d+)?/);
                        if (lMatchIOS) {
                            this.isIOS = true;
                            this.versionIOS = [parseInt(lMatchIOS[1], 10), parseInt(lMatchIOS[2], 10), parseInt(lMatchIOS[3] || '0', 10)];
                        }
                    } catch (e) {}
                }
                if (this.isMacOs) {
                    try {
                        const lMatchMacOS = (navigator.appVersion || '').match(/Mac OS X (\d+)_(\d+)_?(\d+)?/);
                        if (lMatchMacOS) {
                            this.versionMacOS = [parseInt(lMatchMacOS[1], 10), parseInt(lMatchMacOS[2], 10), parseInt(lMatchMacOS[3] || '0', 10)];
                        }
                    } catch (e) {}
                }
                if (document.body.parentNode.parentNode.firstChild.nodeValue === null || document.body.parentNode.parentNode.firstChild.nodeValue === undefined) {
                    this.IsIE9 = parseInt(this.UserAgent.substring(LIndex + 5, LIndex + 6), 10) === 9;
                }
                try {
                    this.IsIE = LIndex !== -1;
                } catch (e) {
                    this.IsIE = LIndex !== -1;
                }
                this.IsIE = (LIndex !== -1) || (this.UserAgent.lastIndexOf('Trident') !== -1);
                if (this.IsIE) {
                    this.IEVersion = this.UserAgent.match(/MSIE (.*?);/) ? parseInt(this.UserAgent.match(/MSIE (.*?);/)[1], 10) : 0;
                    this.IEModeCompatible = this.IEVersion > document.documentMode;
                }
                this.isIETouch = this.IsIE && /Touch/.test(this.UserAgent);
                this.isIE9Mobile = this.IsIE && /Windows Phone OS 7/.test(this.UserAgent);
                this.isTactile = this.isIpad || this.isIphone || this.isAndroid || this.isIETouch;
                this.IsWebKit = this.UserAgent.lastIndexOf('AppleWebKit/') > -1;
                this.IsGecko = !this.IsIE && this.UserAgent.lastIndexOf('Gecko') > -1 && this.UserAgent.lastIndexOf('KHTML') === -1;
                this.IsOpera = Object.prototype.toString.call(window.opera) === '[object Opera]';
                this.isSafari = this.UserAgent.search(/safari/gi) > -1 && this.UserAgent.search(/chrome/gi) === -1;
                if (!this.isTactile && this.isSafari && this.isMacOs && this.UserAgent.lastIndexOf('Macintosh') !== -1 && 'ontouchstart'in window && window.navigator && window.navigator.maxTouchPoints > 1 && !this.isAndroid) {
                    this.isIpad = true;
                    this.isTactile = true;
                }
                this.withContentEditable = this.IsIE || this.IsOpera || this.IsGecko || (this.IsWebKit && !this.isAndroid && !this.isIphone && !this.isIpad) || (this.IsWebKit && parseInt(this.UserAgent.match(/AppleWebKit\/(\d*)/)[1], 10) >= 534);
                ObjetSupport_1.Support.addInit( () => {
                    _uniformisationTouch();
                    if (ObjetSupport_1.Support.supportTouch && (this.isIphone || this.isIpad)) {
                        _emulationContextMenu.call(this);
                    }
                    if (ObjetSupport_1.Support.supportTouch) {
                        document.addEventListener('touchmove', (aEvent) => {
                            if (aEvent.target.closest('.ie-draggable-handle') && !aEvent.target.closest('.ie-draggable-handle-cancel')) {
                                aEvent.preventDefault();
                            }
                        }
                        , {
                            passive: false
                        });
                    }
                }
                );
                const lThis = this;
                document.addEventListener('pointerdown', (aEvent) => {
                    lThis.pointerX = aEvent.pageX;
                    lThis.pointerY = aEvent.pageY;
                }
                , {
                    capture: true
                });
                document.addEventListener('pointermove', (aEvent) => {
                    lThis.pointerX = aEvent.pageX;
                    lThis.pointerY = aEvent.pageY;
                }
                , {
                    capture: true
                });
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.eventIOAjax, this._surEventIOAjax.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.patience, this._surPatience.bind(this));
                this.setIsTactile(this.isTactile);
            }
            get ecranL() {
                return document.body.scrollWidth;
            }
            get ecranH() {
                return document.body.scrollHeight;
            }
            get clientL() {
                return document.body.clientWidth;
            }
            get clientH() {
                return document.body.clientHeight;
            }
            get isLayoutTactile() {
                return false;
            }
            resetCodeTouche() {
                this.CodeTouche = null;
                this.ShiftTouche = null;
                this.AltTouche = null;
                this.CtrlTouche = null;
                this.CmdTouche = null;
            }
            setIsTactile(aVal) {
                this.isTactile = aVal;
                if (aVal) {
                    $(document.body).addClass('isTactile');
                } else {
                    $(document.body).removeClass('isTactile');
                }
            }
            getBloquerClavier() {
                return this.nbBlocageClavier > 0;
            }
            _surBeforeUnload() {
                let lData;
                if (Invocateur_1.Invocateur) {
                    lData = {};
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage, lData);
                    if (lData.message) {
                        return lData.message;
                    }
                }
                if (window.GApplication) {
                    GApplication._unloadEnCours = true;
                    setTimeout( () => {
                        if (window.GApplication) {
                            GApplication._unloadEnCours = false;
                        }
                    }
                    , 500);
                }
            }
            viderCache() {
                this.OnEvent = [];
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                }
                if (uTimerDeclencherVerifierPresenceUtilisateur) {
                    clearTimeout(uTimerDeclencherVerifierPresenceUtilisateur);
                }
            }
            getEventInvocateur(aGenreEvent) {
                return 'IIE_EventNavigateur_' + aGenreEvent;
            }
            stopperEvenement(AEvenement) {
                AEvenement = _getEvenement(AEvenement);
                if (AEvenement) {
                    AEvenement.cancelBubble = true;
                    if (AEvenement.stopPropagation) {
                        AEvenement.stopPropagation();
                    }
                }
            }
            bloquerValeurEvenement(aEvenement) {
                aEvenement = _getEvenement(aEvenement);
                if (aEvenement) {
                    if (aEvenement.preventDefault) {
                        aEvenement.preventDefault();
                    } else {
                        aEvenement.returnValue = false;
                    }
                }
            }
            declarationEvenements() {
                try {
                    const lThis = this;
                    window.onerror = function(AMessage, AUrl, ALigne) {
                        IE.log.addLog('ObjetNavigateur.surError : ' + AMessage + '; ' + AUrl + '; Ligne : ' + ALigne, 'ERROR', IE.log.genre.Erreur);
                        lThis.declencherEvenements(Enumere_Event_1.EEvent.SurError);
                    }
                    ;
                    document.onclick = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurClick);
                    }
                    ;
                    document.onkeyup = () => {
                        this.altPrecedent = this.AltTouche;
                        this.shiftPrecedent = this.ShiftTouche;
                        this.ShiftTouche = null;
                        this.AltTouche = null;
                        this.CtrlTouche = null;
                        this.CmdTouche = null;
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyUp);
                    }
                    ;
                    document.onkeypress = (e) => {
                        this.setCaractereTouche(e);
                        return this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyPress);
                    }
                    ;
                    document.onmousemove = () => {
                        this.enDeplacement();
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseMove);
                    }
                    ;
                    document.onmouseup = () => {
                        this.SourisBouton = false;
                        this.finDeplacement();
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseUp);
                    }
                    ;
                    document.onmousedown = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurMouseDown);
                    }
                    ;
                    document.onselectstart = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurSelectStart);
                    }
                    ;
                    $(document).on({
                        keydown: (aEvent) => {
                            if (aEvent.ctrlKey && aEvent.keyCode === 188) {
                                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.toucheDEBUG);
                            }
                            return this.declencherEvenements(Enumere_Event_1.EEvent.SurKeyDown);
                        }
                    });
                    $(document).on('click dblclick mousedown mouseup mousemove ' + 'keydown keyup keypress ' + 'touchstart touchend touchcancel touchmove ' + 'pointerdown pointerup pointermove ' + 'contextmenu ' + 'ie-pointerdownlong ' + 'ie-doubletap', function(event) {
                        if ((event.type === 'click' || event.type === 'dblclick') && event.which !== 1) {
                            return;
                        }
                        Invocateur_1.Invocateur.evenement(lThis.getEventInvocateur(event.type), event, this);
                    });
                    document.addEventListener('pointerdown', function(aEvent) {
                        Invocateur_1.Invocateur.evenement(`${lThis.getEventInvocateur(aEvent.type)}.capture`, aEvent, this);
                    }, {
                        capture: true
                    });
                    document.addEventListener('keydown', function(aEvent) {
                        Invocateur_1.Invocateur.evenement(`${lThis.getEventInvocateur(aEvent.type)}.capture`, aEvent, this);
                    }, {
                        capture: true
                    });
                    this._verifierPresenceUtilisateur();
                    $(document).on('visibilitychange', () => {
                        switch (document.hidden) {
                        case true:
                            lThis._utilisateurNonPresent();
                            break;
                        case false:
                            lThis._verifierPresenceUtilisateur();
                            break;
                        }
                    }
                    );
                    const lEventMap = {};
                    lEventMap.resize = (aEvent) => {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.resizeNavigateur, aEvent);
                        this.surResize();
                    }
                    ;
                    lEventMap.scroll = () => {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurScroll);
                    }
                    ;
                    lEventMap.load = () => {
                        this.chargementTermine = true;
                    }
                    ;
                    lEventMap.pagehide = () => {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.surRechargementPage);
                        this.viderCache();
                    }
                    ;
                    lEventMap.beforeunload = this._surBeforeUnload;
                    lEventMap.blur = () => {
                        this.resetCodeTouche();
                    }
                    ;
                    if (!IE.estMobile) {
                        lEventMap.orientationchange = () => {
                            if (lThis.isTactile) {
                                lThis._surResize();
                            }
                        }
                        ;
                    }
                    $(window).on(lEventMap, {
                        instance: this
                    });
                    document.addEventListener('mousedown', (aEvent) => {
                        lThis.SourisBouton = true;
                        lThis.BoutonSouris = lThis.getBoutonSouris(aEvent);
                    }
                    , true);
                    document.addEventListener('keydown', (aEvent) => {
                        if (lThis) {
                            lThis.setCodeTouche(aEvent);
                            lThis.CaractereTouche = '';
                        }
                    }
                    , true);
                    document.addEventListener('keypress', (aEvent) => {
                        if (lThis) {
                            lThis.setCaractereTouche(aEvent);
                        }
                    }
                    , true);
                    document.addEventListener('keyup', (aEvent) => {
                        if (lThis) {
                            lThis.setCodeTouche(aEvent);
                        }
                    }
                    , true);
                } catch (e) {
                    IE.log.addLog(`exception - ${e}`);
                }
            }
            _surEventIOAjax(aParametres) {
                if (aParametres.init || aParametres.actualisation || aParametres.ignorerBlocageClavier) {
                    return;
                }
                this._surPatience(!!aParametres.emission);
            }
            _surPatience(aActiver) {
                this.nbBlocageClavier = this.nbBlocageClavier + (aActiver ? 1 : -1);
                this.nbBlocageClavier = Math.max(0, this.nbBlocageClavier);
            }
            getZIndexModalMobile(aAdd) {
                if (aAdd === true) {
                    u_count_modal_mobile += 1;
                } else if (aAdd === false) {
                    u_count_modal_mobile = Math.max(0, u_count_modal_mobile - 1);
                }
                return 1000 + u_count_modal_mobile * 2;
            }
            addEvent(AGenre, APere, AEvenement) {
                if (!this.chargementTermine) {
                    return;
                }
                if (!AEvenement || !APere) {
                    return;
                }
                if (!this.OnEvent[AGenre]) {
                    this.OnEvent[AGenre] = [];
                }
                this.OnEvent[AGenre].push({
                    evenement: AEvenement,
                    pere: APere
                });
            }
            delEvent(AGenre, APere) {
                const LNom = APere.getNom();
                const LArrayEvent = this.OnEvent[AGenre];
                if (!LArrayEvent) {
                    IE.log.addLog('delEvent sur un element non ajouté ! APere = ' + APere.getNom(), null, IE.log.genre.Erreur);
                    return;
                }
                let i = 0;
                while (i < LArrayEvent.length) {
                    if (LArrayEvent[i].pere.getNom() === LNom) {
                        this.OnEvent[AGenre].splice(i, 1);
                    } else {
                        i++;
                    }
                }
            }
            declencherEvenements(AGenre) {
                let LContinuer;
                for (let I = 0; this.OnEvent[AGenre] && (I < this.OnEvent[AGenre].length); I++) {
                    let lEvent = this.OnEvent[AGenre][I];
                    LContinuer = !lEvent.evenement.call(lEvent.pere) && (LContinuer !== false);
                }
                return LContinuer;
            }
            isToucheEspace() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.Espace) && !this.ShiftTouche;
            }
            isToucheRetourChariot() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.RetourChariot) && !this.ShiftTouche && !this.AltTouche && !this.CtrlTouche;
            }
            isToucheSelection() {
                return (this.isToucheRetourChariot() || this.isToucheEspace());
            }
            isToucheMenuContextuel() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.ContextMenu) || ((this.CodeTouche === ToucheClavier_1.ToucheClavier.RetourChariot) && !this.ShiftTouche && (this.AltTouche || this.CtrlTouche));
            }
            isToucheEdition() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.RetourChariot) && this.ShiftTouche && !this.AltTouche && !this.CtrlTouche;
            }
            isToucheSupprimer() {
                return ((this.CodeTouche === 46) && !this.ShiftTouche && !this.AltTouche && !this.CtrlTouche) || ((this.CodeTouche === ToucheClavier_1.ToucheClavier.Backspace) && this.CmdTouche);
            }
            isToucheEchap() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Echap;
            }
            isToucheFlecheHaut() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheHaut;
            }
            isToucheFlecheBas() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheBas;
            }
            isToucheFlecheGauche() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheGauche;
            }
            isToucheFlecheDroite() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.FlecheDroite;
            }
            isToucheFleche() {
                return (this.isToucheFlecheHaut() || this.isToucheFlecheBas() || this.isToucheFlecheGauche() || this.isToucheFlecheDroite());
            }
            isToucheTab() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Tab;
            }
            isToucheShiftTab() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Tab && this.ShiftTouche;
            }
            isToucheOnlyTab() {
                return this.CodeTouche === ToucheClavier_1.ToucheClavier.Tab && !this.ShiftTouche;
            }
            isToucheOnglets() {
                return (this.CodeTouche === 66) && (this.AltTouche || this.CtrlTouche);
            }
            isToucheBackspace() {
                return (this.CodeTouche === ToucheClavier_1.ToucheClavier.Backspace) && !this.ShiftTouche && !this.AltTouche && !this.CtrlTouche;
            }
            getToucheAltNum(ADeb, AFin) {
                let LCodeTouche;
                if (this.CodeTouche >= ToucheClavier_1.ToucheClavier.Numpad_0) {
                    LCodeTouche = this.CodeTouche - ToucheClavier_1.ToucheClavier.Numpad_0;
                    return this.altPrecedent && !this.shiftPrecedent && (LCodeTouche >= ADeb) && (LCodeTouche <= AFin) ? LCodeTouche : null;
                }
                LCodeTouche = this.CodeTouche - ToucheClavier_1.ToucheClavier._0;
                return this.altPrecedent && this.shiftPrecedent && (LCodeTouche >= ADeb) && (LCodeTouche <= AFin) ? LCodeTouche : null;
            }
            estCaractereDecimal() {
                return this.estCaractere('0-9');
            }
            estCaractereHexa() {
                return this.estCaractere('0-9abcdefABCDEF');
            }
            estCaractereDate() {
                return this.estCaractere('0-9');
            }
            estCaractereNote(aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation) {
                return TypeNote_1.TypeNote.estCaractereNote(this.CaractereTouche, aAvecLettre, aAvecVirgule, aAvecMoins, aCaractereAnnotation);
            }
            estCaractereAlphaNumerique() {
                return !this.AltTouche && !this.CtrlTouche && (new RegExp('[0-9.a-z.A-Z]').test(this.CaractereTouche));
            }
            estCaractere(aRegExp) {
                return ToucheClavier_1.ToucheClavierUtil.estCaractere(this.CaractereTouche, aRegExp);
            }
            estSourisBoutonGauche() {
                return (this.BoutonSouris === Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche);
            }
            estSourisBoutonDroit() {
                return (this.BoutonSouris === Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite);
            }
            setCaractereTouche(e) {
                e = e || window.event;
                this.CaractereTouche = e.charCode === 0 ? '' : String.fromCharCode(e.charCode || e.keyCode);
            }
            setCodeTouche(e) {
                e = e || window.event;
                this.CodeTouche = e.keyCode;
                this.ShiftTouche = e.shiftKey;
                this.AltTouche = e.altKey;
                this.CtrlTouche = e.ctrlKey;
                this.CmdTouche = e.metaKey;
            }
            getBoutonSouris(e) {
                if (e) {
                    switch (e.button) {
                    case 0:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche;
                    case 2:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite;
                    }
                } else {
                    switch (window.event.button) {
                    case 1:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Gauche;
                    case 2:
                        return Enumere_BoutonSouris_1.EGenreBoutonSouris.Droite;
                    }
                }
            }
            getLargeurBarreDeScroll() {
                return ObjetSupport_1.Support.tailleScrollBar || 8;
            }
            getHost() {
                return window.location.href.slice(0, window.location.href.lastIndexOf('/') + 1);
            }
            surResize() {
                if (!IE.estMobile && !this.isTactile) {
                    this._surResize();
                }
            }
            _surResize() {
                if (IE.estMobile) {
                    return;
                }
                if (this.EnResize) {
                    window.clearTimeout(this.TimerResize);
                } else {
                    this.EnResize = true;
                    this.declencherEvenements(Enumere_Event_1.EEvent.SurPreResize);
                }
                this.declencherEvenements(Enumere_Event_1.EEvent.SurResize);
                this.TimerResize = setTimeout( () => {
                    try {
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurPostResize);
                        this.declencherEvenements(Enumere_Event_1.EEvent.SurFinResize);
                    } finally {
                        this.EnResize = false;
                    }
                }
                , 300);
            }
            positionnerMenuContextuelSurId(aId, aDeltaX, aDeltaY) {
                const lElement = document.getElementById(aId);
                if (lElement) {
                    this.pointerX = aDeltaX ? ObjetPosition_1.GPosition.getLeft(lElement) + aDeltaX : ObjetPosition_1.GPosition.getLeft(lElement);
                    this.pointerY = aDeltaY ? ObjetPosition_1.GPosition.getTop(lElement) + aDeltaY : ObjetPosition_1.GPosition.getTop(lElement);
                }
            }
            debDeplacement(APere, AId) {
                this._idDeplacement = AId;
                this.Deplacement = true;
                this.DecalageX = this.pointerX - ObjetPosition_1.GPosition.getLeft(this._idDeplacement);
                this.DecalageY = this.pointerY - ObjetPosition_1.GPosition.getTop(this._idDeplacement);
            }
            enDeplacement() {
                if (this.Deplacement) {
                    ObjetPosition_1.GPosition.placer(this._idDeplacement, this.pointerX - this.DecalageX, this.pointerY - this.DecalageY);
                }
            }
            finDeplacement() {
                if (this.Deplacement) {
                    this.Deplacement = false;
                    this.declencherEvenements(Enumere_Event_1.EEvent.SurFinDeplacement);
                    delete this._idDeplacement;
                }
            }
            _utilisateurNonPresent() {
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                    uTimerPresenceUtilisateur = null;
                }
                if (this.interactionUtilisateur) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, false);
                    this.interactionUtilisateur = false;
                }
            }
            _verifierPresenceUtilisateur() {
                if (!this.interactionUtilisateur) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, true);
                }
                this.interactionUtilisateur = true;
                if (uTimerPresenceUtilisateur) {
                    clearTimeout(uTimerPresenceUtilisateur);
                    uTimerPresenceUtilisateur = null;
                }
                uTimerPresenceUtilisateur = setTimeout(this._utilisateurNonPresent.bind(this), c_dureeInteractionUtilisateur);
                $(document).off('mousedown keydown mousemove pointerdown touchstart', this._verifierPresenceUtilisateur.bind(this));
                if (uTimerDeclencherVerifierPresenceUtilisateur) {
                    clearTimeout(uTimerDeclencherVerifierPresenceUtilisateur);
                    uTimerDeclencherVerifierPresenceUtilisateur = null;
                }
                uTimerDeclencherVerifierPresenceUtilisateur = setTimeout( () => {
                    uTimerDeclencherVerifierPresenceUtilisateur = null;
                    $(document).on('mousedown keydown mousemove pointerdown touchstart', this._verifierPresenceUtilisateur.bind(this));
                }
                , 1000 * 10);
            }
        }
        exports.ObjetNavigateur = ObjetNavigateur;
        function _emulationContextMenu() {
            const lDelai = 500;
            let uGestionTouch = null;
            const const_margesDeplacementContextMenu = 100;
            function _touchstart(event) {
                const lPosition = ObjetPosition_1.GPosition.getPositionEventJQuery(event);
                uGestionTouch = {
                    x: lPosition.x,
                    y: lPosition.y,
                    timeStart: Date.now()
                };
            }
            function _toucheend(aEvent) {
                let lGestionTouch = uGestionTouch;
                uGestionTouch = null;
                if (lGestionTouch && (Date.now() - lGestionTouch.timeStart > lDelai)) {
                    const lPosition = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                    const lAccepterContextMenu = aEvent.target && Math.abs(lPosition.x - lGestionTouch.x) < const_margesDeplacementContextMenu && Math.abs(lPosition.y - lGestionTouch.y) < const_margesDeplacementContextMenu && (!ObjetPosition_1.GPosition || ObjetPosition_1.GPosition.positionDansZone(lPosition, aEvent.target));
                    if (!lAccepterContextMenu) {
                        return;
                    }
                    aEvent.stopImmediatePropagation();
                    aEvent.preventDefault();
                    const lEvent = $.Event('contextmenu', {
                        pointerType: 'touch',
                        originalEvent: aEvent.originalEvent
                    });
                    setTimeout( () => {
                        $(aEvent.target).trigger(lEvent);
                    }
                    , 0);
                }
            }
            $(document).on({
                touchstart: _touchstart,
                touchend: _toucheend,
                touchcancel() {
                    uGestionTouch = {};
                },
                contextmenu() {
                    uGestionTouch = {};
                }
            });
        }
        function _uniformisationTouch() {
            let uLongTouch = null, uLongTouchTimer, uLongTouchTimerFin, const_delaiLongTouch = 500, const_delaiLongTouchFin = 1500, const_margesDeplacementLongTouch = 50, const_delaiDoubleTap = 300, const_margesDeplacementDoubleTap = 50, uLastTap = {
                time: 0,
                target: null,
                x: 0,
                y: 0
            };
            function _stopperLongTouch() {
                clearTimeout(uLongTouchTimer);
                clearTimeout(uLongTouchTimerFin);
                uLongTouch = null;
            }
            function _demarrageLongTouch(aEventOrigine) {
                _stopperLongTouch();
                uLongTouch = {
                    pointerId: aEventOrigine.pointerId,
                    x: aEventOrigine.clientX,
                    y: aEventOrigine.clientY,
                    ok: false
                };
                uLongTouchTimer = setTimeout( () => {
                    if (uLongTouch) {
                        uLongTouch.ok = true;
                    }
                }
                , const_delaiLongTouch);
                uLongTouchTimerFin = setTimeout( () => {
                    if (uLongTouch) {
                        _finaliserLongTouch(aEventOrigine, true);
                    }
                }
                , const_delaiLongTouchFin);
            }
            function _eventDansMargesLongTouch(aEvent) {
                return uLongTouch && Math.abs(aEvent.clientX - uLongTouch.x) < const_margesDeplacementLongTouch && Math.abs(aEvent.clientY - uLongTouch.y) < const_margesDeplacementLongTouch;
            }
            function _finaliserLongTouch(aEventOrigine, aSurTimer) {
                clearTimeout(uLongTouchTimer);
                clearTimeout(uLongTouchTimerFin);
                if (uLongTouch.ok && uLongTouch.pointerId === aEventOrigine.pointerId && _eventDansMargesLongTouch(aEventOrigine)) {
                    const lEventSimule = $.Event('ie-pointerdownlong', Object.assign(aEventOrigine, {
                        type: 'ie-pointerdownlong',
                        surTimer: false
                    }));
                    if (aSurTimer) {
                        lEventSimule.surTimer = true;
                    }
                    $(aEventOrigine.target).trigger(lEventSimule);
                }
                _stopperLongTouch();
            }
            function _detectDoubleTap(aEventOrigine) {
                const lCurrentTime = Date.now();
                const lDelaiTap = lCurrentTime - uLastTap.time;
                if (uLastTap.time > 0 && lDelaiTap < const_delaiDoubleTap && lDelaiTap > 0 && uLastTap.target === aEventOrigine.target && _eventDansMargesDoubleTap(aEventOrigine)) {
                    const lEventSimule = $.Event('ie-doubletap', Object.assign(aEventOrigine, {
                        type: 'ie-doubletap'
                    }));
                    $(aEventOrigine.target).trigger(lEventSimule);
                    uLastTap.time = 0;
                    uLastTap.target = null;
                    uLastTap.x = 0;
                    uLastTap.y = 0;
                } else {
                    uLastTap.time = lCurrentTime;
                    uLastTap.target = aEventOrigine.target;
                    uLastTap.x = aEventOrigine.clientX;
                    uLastTap.y = aEventOrigine.clientY;
                }
            }
            function _eventDansMargesDoubleTap(aEvent) {
                return uLastTap && Math.abs(aEvent.clientX - uLastTap.x) < const_margesDeplacementDoubleTap && Math.abs(aEvent.clientY - uLastTap.y) < const_margesDeplacementDoubleTap;
            }
            $(document).on({
                'pointerdown.pointerdownlong'(aEvent) {
                    if (aEvent.target) {
                        _demarrageLongTouch(aEvent);
                    }
                },
                'pointerup.pointerdownlong'(aEvent) {
                    if (aEvent.target && uLongTouch) {
                        _finaliserLongTouch(aEvent);
                    }
                },
                'pointermove.pointerdownlong'(aEvent) {
                    if (uLongTouch) {
                        if (uLongTouch.pointerId !== aEvent.pointerId || !_eventDansMargesLongTouch(aEvent)) {
                            _stopperLongTouch();
                        }
                    }
                },
                'pointercancel.pointerdownlong'() {
                    if (uLongTouch) {
                        _stopperLongTouch();
                    }
                },
                'scroll.pointerdownlong'() {
                    if (uLongTouch) {
                        _stopperLongTouch();
                    }
                },
                'click.doubleTap'(aEvent) {
                    if (aEvent.target) {
                        _detectDoubleTap(aEvent);
                    }
                }
            });
            _initSwipeEvent();
        }
        function _initSwipeEvent() {
            function triggerCustomEvent(obj, eventType, event, bubble) {
                const originalType = event.type;
                event.type = eventType;
                if (bubble) {
                    $.event.trigger(event, undefined, obj);
                } else {
                    $.event.dispatch.call(obj, event);
                }
                event.type = originalType;
            }
            const lJDocument = $(document);
            const lSwipe = {
                scrollSupressionThreshold: 30,
                durationThreshold: 1000,
                horizontalDistanceThreshold: GNavigateur.isIOS ? 60 : 30,
                verticalDistanceThreshold: GNavigateur.isIOS ? 60 : 30,
                getLocation: function(event) {
                    const winPageX = window.pageXOffset;
                    const winPageY = window.pageYOffset;
                    let x = event.clientX;
                    let y = event.clientY;
                    if (event.pageY === 0 && Math.floor(y) > Math.floor(event.pageY) || event.pageX === 0 && Math.floor(x) > Math.floor(event.pageX)) {
                        x = x - winPageX;
                        y = y - winPageY;
                    } else if (y < (event.pageY - winPageY) || x < (event.pageX - winPageX)) {
                        x = event.pageX - winPageX;
                        y = event.pageY - winPageY;
                    }
                    return {
                        x: x,
                        y: y
                    };
                },
                start: function(event) {
                    const data = event.originalEvent.touches ? event.originalEvent.touches[0] : event
                      , location = $.event.special.swipe.getLocation(data);
                    return {
                        time: (new Date()).getTime(),
                        coords: [location.x, location.y],
                        origin: $(event.target)
                    };
                },
                stop: function(event) {
                    const data = event.originalEvent.touches ? event.originalEvent.touches[0] : event
                      , location = $.event.special.swipe.getLocation(data);
                    return {
                        time: (new Date()).getTime(),
                        coords: [location.x, location.y]
                    };
                },
                handleSwipe: function(start, stop, thisObject, origTarget) {
                    if (stop.time - start.time < $.event.special.swipe.durationThreshold) {
                        let direction = null;
                        if (Math.abs(start.coords[0] - stop.coords[0]) > $.event.special.swipe.horizontalDistanceThreshold && Math.abs(start.coords[1] - stop.coords[1]) < $.event.special.swipe.verticalDistanceThreshold) {
                            direction = start.coords[0] > stop.coords[0] ? 'swipeleft' : 'swiperight';
                        } else if (Math.abs(start.coords[0] - stop.coords[0]) < $.event.special.swipe.horizontalDistanceThreshold && Math.abs(start.coords[1] - stop.coords[1]) > $.event.special.swipe.verticalDistanceThreshold) {
                            direction = start.coords[1] > stop.coords[1] ? 'swipeup' : 'swipedown';
                        }
                        if (direction) {
                            triggerCustomEvent(thisObject, 'swipe', $.Event('swipe', {
                                target: origTarget,
                                swipestart: start,
                                swipestop: stop
                            }), true);
                            triggerCustomEvent(thisObject, direction, $.Event(direction, {
                                target: origTarget,
                                swipestart: start,
                                swipestop: stop
                            }), true);
                            return true;
                        }
                    }
                    return false;
                },
                eventInProgress: false,
                setup: function() {
                    let events;
                    const thisObject = this;
                    const $this = $(thisObject);
                    const context = {};
                    events = $.data(this, 'mobile-events');
                    if (!events) {
                        events = {
                            length: 0
                        };
                        $.data(this, 'mobile-events', events);
                    }
                    events.length++;
                    events.swipe = context;
                    context.start = function(event) {
                        $.event.special.swipe.eventInProgress = true;
                        let stop;
                        const start = $.event.special.swipe.start(event);
                        const origTarget = event.target;
                        let emitted = false;
                        context.move = function(event) {
                            if (!start || event.isDefaultPrevented() || event.originalEvent.changedTouches.length > 1) {
                                return;
                            }
                            stop = $.event.special.swipe.stop(event);
                            if (!emitted) {
                                emitted = $.event.special.swipe.handleSwipe(start, stop, thisObject, origTarget);
                                if (emitted) {
                                    $.event.special.swipe.eventInProgress = false;
                                }
                            }
                        }
                        ;
                        context.stop = function() {
                            emitted = true;
                            $.event.special.swipe.eventInProgress = false;
                            lJDocument.off('touchmove', context.move);
                            context.move = null;
                        }
                        ;
                        lJDocument.on('touchmove', context.move).one('touchend', context.stop);
                    }
                    ;
                    $this.on('touchstart', context.start);
                },
                teardown: function() {
                    let events, context;
                    events = $.data(this, 'mobile-events');
                    if (events) {
                        context = events.swipe;
                        delete events.swipe;
                        events.length--;
                        if (events.length === 0) {
                            $.removeData(this, 'mobile-events');
                        }
                    }
                    if (context) {
                        if (context.start) {
                            $(this).off('touchstart', context.start);
                        }
                        if (context.move) {
                            lJDocument.off('touchmove', context.move);
                        }
                        if (context.stop) {
                            lJDocument.off('touchend', context.stop);
                        }
                    }
                }
            };
            $.event.special.swipe = lSwipe;
            $.each({
                swipeleft: 'swipe.left',
                swiperight: 'swipe.right',
                swipeup: 'swipe.up',
                swipedown: 'swipe.down'
            }, (event, sourceEvent) => {
                $.event.special[event] = {
                    setup: function() {
                        $(this).bind(sourceEvent, $.noop);
                    },
                    teardown: function() {
                        $(this).unbind(sourceEvent);
                    }
                };
            }
            );
        }
        function _getEvenement(aEvenement) {
            return aEvenement || window.event;
        }
        global.GNavigateur = new ObjetNavigateur();
    },
    fn: 'objetnavigateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeFormatDureeEnChaine = void 0;
        var TypeFormatDureeEnChaine;
        (function(TypeFormatDureeEnChaine) {
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcHeuresMinutes"] = 0] = "fdcHeuresMinutes";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcHeuresCentiemes"] = 1] = "fdcHeuresCentiemes";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcSequences"] = 2] = "fdcSequences";
            TypeFormatDureeEnChaine[TypeFormatDureeEnChaine["fdcPersonnalise"] = 3] = "fdcPersonnalise";
        }
        )(TypeFormatDureeEnChaine || (exports.TypeFormatDureeEnChaine = TypeFormatDureeEnChaine = {}));
    },
    fn: 'typeformatdureeenchaine.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TUtilitaireDuree = TUtilitaireDuree;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const C_HeuresParJour = 24
          , C_MinutesParHeure = 60
          , C_SecondesParMinute = 60
          , C_MilliSecondesParSeconde = 1000
          , C_MinutesParJour = C_MinutesParHeure * C_HeuresParJour
          , C_SecondesParJour = C_SecondesParMinute * C_MinutesParJour;
        function TUtilitaireDuree() {}
        TUtilitaireDuree.dureeEnHeures = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_HeuresParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnHeuresMinutes = function(aDuree) {
            const lResult = {
                jours: 0,
                heures: 0,
                minutes: 0,
                toString: function(aFormat) {
                    let lFormat = '%hh:%mm';
                    if (aFormat === true) {
                        lFormat = '%oh%sh%om%sm';
                    } else if (typeof (aFormat) === 'string') {
                        lFormat = aFormat;
                    }
                    lFormat = lFormat.replace('%jj', (this.jours < 10 ? '0' : '') + this.jours);
                    lFormat = lFormat.replace('%xj', this.jours + '');
                    lFormat = lFormat.replace('%oj%sj', this.jours > 0 ? this.jours + ObjetTraduction_1.GTraductions.getValeur('date.separateurJour') : '');
                    lFormat = lFormat.replace('%oj', this.jours > 0 ? this.jours + '' : '');
                    lFormat = lFormat.replace('%sj', ObjetTraduction_1.GTraductions.getValeur('date.separateurJour'));
                    lFormat = lFormat.replace('%hh', (this.heures < 10 ? '0' : '') + this.heures);
                    lFormat = lFormat.replace('%xh', this.heures + '');
                    lFormat = lFormat.replace('%oh%sh', this.heures > 0 ? this.heures + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') : '');
                    lFormat = lFormat.replace('%oh', this.heures > 0 ? this.heures + '' : '');
                    lFormat = lFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                    lFormat = lFormat.replace('%mm', (this.minutes < 10 ? '0' : '') + this.minutes);
                    lFormat = lFormat.replace('%xm', this.minutes + '');
                    lFormat = lFormat.replace('%om%sm', this.minutes > 0 ? ((this.heures > 0) && (this.minutes < 10) ? '0' : '') + this.minutes + ObjetTraduction_1.GTraductions.getValeur('date.separateurMin') : '');
                    lFormat = lFormat.replace('%om', this.minutes > 0 ? this.minutes + '' : '');
                    lFormat = lFormat.replace('%sm', ObjetTraduction_1.GTraductions.getValeur('date.separateurMin'));
                    return lFormat;
                }
            };
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                let lDureeEnMS = _get(aDuree * C_MilliSecondesParSeconde * C_SecondesParJour);
                lResult.heures = Math.floor(lDureeEnMS / (60 * 60 * 1000));
                lDureeEnMS = lDureeEnMS - lResult.heures * (60 * 60 * 1000);
                lResult.minutes = Math.floor(lDureeEnMS / (60 * 1000));
            }
            return lResult;
        }
        ;
        TUtilitaireDuree.dureeEnJoursHeuresMinutes = function(aDuree) {
            let lResult = TUtilitaireDuree.dureeEnHeuresMinutes(aDuree);
            lResult.jours = Math.floor(lResult.heures / C_HeuresParJour);
            lResult.heures = lResult.heures % C_HeuresParJour;
            return lResult;
        }
        ;
        TUtilitaireDuree.heuresEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / C_HeuresParJour;
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnMin = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_MinutesParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.minEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / C_MinutesParJour;
            }
            return 0;
        }
        ;
        TUtilitaireDuree.dureeEnMs = function(aDuree, aSansArrondi) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return _get(aDuree * C_MilliSecondesParSeconde * C_SecondesParJour, aSansArrondi);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.msEnDuree = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal / (C_MilliSecondesParSeconde * C_SecondesParJour);
            }
            return 0;
        }
        ;
        TUtilitaireDuree.minEnMs = function(aVal) {
            if (MethodesObjet_1.MethodesObjet.isNumber(aVal)) {
                return aVal * C_SecondesParMinute * C_MilliSecondesParSeconde;
            }
            return 0;
        }
        ;
        function _get(aVal, aSansArrondi) {
            return aSansArrondi === true ? aVal : Math.round(aVal);
        }
    },
    fn: 'utilitaireduree.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GDate = exports.ObjetDate = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetTri_1 = require("ObjetTri");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeFormatDureeEnChaine_1 = require("TypeFormatDureeEnChaine");
        const UtilitaireDuree_1 = require("UtilitaireDuree");
        const IEHtml = require("IEHtml");
        class ObjetDate {
            constructor() {
                this.DureeMillisecondes = 1;
                this.DureeSecondes = 1000 * this.DureeMillisecondes;
                this.DureeMinutes = 60 * this.DureeSecondes;
                this.DureeHeures = 60 * this.DureeMinutes;
                this.DureeJours = 24 * this.DureeHeures;
                this.DureeSemaines = 7 * this.DureeJours;
                this.semainesParAn = 52;
                this.aujourdhui = new Date();
                this.demain = new Date();
                this.demain.setDate(this.demain.getDate() + 1);
                this.hier = new Date();
                this.hier.setDate(this.hier.getDate() - 1);
                this.parametres = {
                    numeroPremiereSemaine: null,
                    formatDureeEnChaine: TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresMinutes
                };
                this._cacheSemainesCalendaires = {};
            }
            setDonnees(APremierLundi, aPremiereDate, aDerniereDate, APlacesParJour, APlacesParHeure, ADureeSequence, APremiereHeure, AListeHeures1, AListeHeures2, aJoursOuvres, aJour) {
                this.PremierLundi = APremierLundi;
                this.premiereDate = aPremiereDate;
                this.derniereDate = aDerniereDate;
                this.PlacesParJour = APlacesParJour;
                this.PlacesParHeure = APlacesParHeure;
                this.DureeSequence = ADureeSequence;
                this.PremiereHeure = APremiereHeure;
                this.ListeHeures = AListeHeures1 || new ObjetListeElements_1.ObjetListeElements();
                this.ListeHeuresFin = AListeHeures2;
                this.joursOuvres = aJoursOuvres || new TypeDomaine_1.TypeDomaine(true,7);
                this.jour = this.getDateDemiJour(aJour || new Date());
            }
            setParametresDate(aParams) {
                Object.assign(this.parametres, aParams);
                return this;
            }
            getDerniereDate() {
                return this.derniereDate;
            }
            estUnJourOuvre(aDate) {
                return this.joursOuvres.getValeur(GDate.getJourDeDate(aDate) + 1);
            }
            estDateEgale(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return (aDate1.getTime() - aDate2.getTime()) === 0;
                } else {
                    return false;
                }
            }
            estJourEgal(aDate1, aDate2) {
                return aDate1 && aDate2 && (aDate1.getDate() === aDate2.getDate()) && (aDate1.getMonth() === aDate2.getMonth()) && (aDate1.getFullYear() === aDate2.getFullYear());
            }
            estJourSemaineEgal(aDate1, aDate2) {
                return aDate1 && aDate2 && (aDate1.getDay() === aDate2.getDay()) && (aDate1.getMonth() === aDate2.getMonth()) && (aDate1.getFullYear() === aDate2.getFullYear());
            }
            estJourCourant(aDate, aBorner) {
                return this.estJourEgal(aDate, this.getDateCourante(aBorner));
            }
            estAvantJourCourant(aDate, aBorner) {
                if (aDate) {
                    if (!this.estDateValide(aDate)) {
                        return false;
                    }
                    return (aDate.getTime() - this.getDateCourante(aBorner).getTime()) < 0;
                } else {
                    return false;
                }
            }
            estAvantJour(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return (aDate1.getTime() - aDate2.getTime()) < 0;
                }
            }
            estDateValide(aDate) {
                return MethodesObjet_1.MethodesObjet.isDate(aDate) && !isNaN(aDate.getTime());
            }
            getDateJour(aDate, aBorner=false) {
                let lDate = aDate;
                if (!this.estDateValide(aDate)) {
                    lDate = new Date();
                }
                if (aBorner) {
                    lDate = this.getDateBornee(lDate);
                }
                return new Date(lDate.getFullYear(),lDate.getMonth(),lDate.getDate());
            }
            getPrecedentJourOuvre(aDate) {
                let lDate = aDate;
                do {
                    lDate = this.getJourSuivant(lDate, -1);
                } while (!this.estUnJourOuvre(lDate) && (lDate > this.premiereDate));
                return lDate;
            }
            getProchainJourOuvre(aDate) {
                let lDate = aDate;
                do {
                    lDate = this.getJourSuivant(lDate);
                } while (!this.estUnJourOuvre(lDate) && (lDate < this.derniereDate));
                return lDate;
            }
            getDateBornee(aDate) {
                if (aDate < this.premiereDate && !this.estJourEgal(aDate, this.premiereDate)) {
                    return new Date(this.premiereDate.getTime());
                }
                if (aDate > this.derniereDate && !this.estJourEgal(aDate, this.derniereDate)) {
                    return new Date(this.derniereDate.getTime());
                }
                return aDate;
            }
            getDateCourante(aBorner=false) {
                let lDate = new Date();
                lDate = new Date(lDate.getFullYear(),lDate.getMonth(),lDate.getDate());
                return aBorner === false ? lDate : this.getDateBornee(lDate);
            }
            getDateHeureCourante() {
                return this.getDateBornee(new Date());
            }
            dateEntreLesDates(aDate, aBorneDateDebut, aBorneDateFin, aComparaisonTime=false) {
                if (!aDate) {
                    return false;
                }
                return (!aBorneDateDebut || aDate >= aBorneDateDebut || (aComparaisonTime !== true && this.estJourEgal(aDate, aBorneDateDebut))) && (!aBorneDateFin || aDate <= aBorneDateFin || (aComparaisonTime !== true && this.estJourEgal(aDate, aBorneDateFin)));
            }
            estDateJourAvant(aDate1, aDate2) {
                if (aDate1 && aDate2) {
                    if (!this.estDateValide(aDate1) || !this.estDateValide(aDate2)) {
                        return false;
                    }
                    return this.estAvantJour(aDate1, aDate2) && !this.estJourEgal(aDate1, aDate2);
                } else {
                    return false;
                }
            }
            estDateDansAnneeScolaire(aDate) {
                return this.dateEntreLesDates(aDate, this.premiereDate, this.derniereDate);
            }
            getDateDemiJour(aDate) {
                return new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate(),12);
            }
            premierJourOuvreDeLaSemaine(aNrSemaine) {
                return IE.Cycles.datePremierJourOuvreCycle(aNrSemaine);
            }
            dernierJourOuvreDeLaSemaine(aNrSemaine) {
                return IE.Cycles.dateDernierJourOuvreCycle(aNrSemaine);
            }
            getJour(aDate, N=0) {
                return new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate(),N === null || N === undefined ? 0 : 24 * N);
            }
            getJourDeSemaine(ADate, B) {
                return (7 + ADate.getDay() - (B ? this.PremierLundi.getDay() : 1)) % 7;
            }
            getSemaineSuivante(ADate, N=1) {
                return new Date(ADate.getTime() + (N === null || N === undefined ? 1 : N) * this.DureeSemaines);
            }
            getJourSuivant(ADate, N=1) {
                if (!ADate || !ADate.getTime) {
                    return null;
                }
                let lDate = new Date(ADate.getTime());
                const lNombreJours = MethodesObjet_1.MethodesObjet.isNumber(N) ? N : 1;
                lDate.setDate(lDate.getDate() + lNombreJours);
                if (Math.abs(lNombreJours) === 1 && ADate.getDate() === lDate.getDate()) {
                    const lDateCorrigee = new Date(ADate.getTime());
                    lDateCorrigee.setHours(ADate.getHours() + 1);
                    if (lDateCorrigee.getDate() !== ADate.getDate()) {
                        lDateCorrigee.setHours(ADate.getHours() - 1);
                    }
                    lDateCorrigee.setDate(lDateCorrigee.getDate() + lNombreJours);
                    lDate = lDateCorrigee;
                }
                return lDate;
            }
            estAnneeBissextile(aAnnee) {
                return (new Date(aAnnee,1,29).getDate() === 29);
            }
            estUnJourDuWE(AAnnee, AMois, AJour) {
                const D = new Date(AAnnee,AMois,AJour).getDay();
                return (D === 0) || (D === 6);
            }
            getNombreJoursDuMois(AAnnee, AMois) {
                AMois = (AMois + 1) % 12;
                if (AMois === 0) {
                    AAnnee++;
                }
                return new Date(AAnnee,AMois,0).getDate();
            }
            getPremierJourDuMois(AAnnee, AMois) {
                return new Date(AAnnee,AMois,1,12);
            }
            getPremierLundiDuMois(AAnnee, AMois) {
                const LJour = this.getPremierJourDuMois(AAnnee, AMois)
                  , lJourPremierLundi = this.PremierLundi ? GDate.getJourDeSemaine(this.PremierLundi) : 0;
                return this.getJourSuivant(LJour, (lJourPremierLundi - (7 + GDate.getJourDeSemaine(LJour))) % 7);
            }
            getDernierJourDuMois(AAnnee, AMois) {
                return new Date(AAnnee,AMois,this.getNombreJoursDuMois(AAnnee, AMois),12);
            }
            estUnJourDuMois(AAnnee, AMois, AJour) {
                return new Date(AAnnee,AMois,AJour).getMonth() === AMois;
            }
            estHeureIdentique(aDate1, aDate2) {
                return (aDate1.getHours() === aDate2.getHours()) && (aDate1.getMinutes() === aDate2.getMinutes());
            }
            jourEstDansLaPeriode(AAnnee, AMois, AJour, ADateDebut, ADateFin) {
                const LDate = new Date(AAnnee,AMois,AJour);
                return (LDate >= ADateDebut) && (LDate <= ADateFin);
            }
            strMoisCourt(AAnnee, AMois, AAvecAnnee) {
                return ObjetTraduction_1.GTraductions.getValeur('MoisCourt')[AMois] + (AAvecAnnee ? '&nbsp;' + AAnnee : '');
            }
            nombreMoisSurPeriode(ADateDebut, ADateFin) {
                return 12 * (ADateFin.getFullYear() - ADateDebut.getFullYear()) + (ADateFin.getMonth() - ADateDebut.getMonth()) + 1;
            }
            nombresSemainesDansLAnnee(aSemaine) {
                let lDate;
                if (aSemaine > 0) {
                    lDate = IE.Cycles.dateDebutCycle(aSemaine);
                } else {
                    lDate = this.PremierLundi;
                }
                return this.getNombresSemainesPourLAnnee(lDate.getFullYear());
            }
            getNombresSemainesPourLAnnee(aAnnee) {
                const lDate = new Date(aAnnee,0,1);
                const lDay = this.getJourDeDate(lDate);
                return (lDay === 3) || (lDay === 2 && this.estAnneeBissextile(lDate.getFullYear())) ? this.semainesParAn + 1 : this.semainesParAn;
            }
            getJourDeDate(ADate) {
                return (ADate.getDay() + 7 - 1) % 7;
            }
            getFuseau(aDate) {
                return aDate ? aDate.getTimezoneOffset() / 60 : 0;
            }
            getEcartFuseau(aDate1, aDate2) {
                return this.getFuseau(aDate1) - this.getFuseau(aDate2);
            }
            getSemaine(aDate) {
                return IE.Cycles.cycleDeLaDate(aDate || new Date());
            }
            getNbrJoursDepuisPremiereLundi(aDate) {
                return this.getNbrJoursEntreDeuxDates(this.PremierLundi, aDate);
            }
            getNbrJoursEntreDeuxDates(aDateDebut, aDateFin) {
                if (!aDateDebut || !aDateDebut.getFullYear || !aDateFin || !aDateFin.getFullYear) {
                    return 0;
                }
                return Date.UTC(aDateFin.getFullYear(), aDateFin.getMonth(), aDateFin.getDate()) / this.DureeJours - Date.UTC(aDateDebut.getFullYear(), aDateDebut.getMonth(), aDateDebut.getDate()) / this.DureeJours;
            }
            getSemaineCalendaire() {
                return 1 + Math.round((this.PremierLundi.getTime() - new Date(this.PremierLundi.getFullYear(),0,1).getTime()) / this.DureeSemaines);
            }
            semaineToCalendaire(aSemaine, aNumeroPremiereSemaine) {
                let lNumero = aNumeroPremiereSemaine;
                if (!MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    lNumero = this.parametres.numeroPremiereSemaine;
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(lNumero)) {
                    lNumero = 1;
                }
                if (lNumero < 0) {
                    if (!this._cacheSemainesCalendaires[aSemaine]) {
                        const lNbSemaines = this.nombresSemainesDansLAnnee(aSemaine);
                        if (aSemaine <= 1) {
                            this._cacheSemainesCalendaires[aSemaine] = ((aSemaine - 1) + (this.getSemaineCalendaire() - 1)) % lNbSemaines + 1;
                        } else if (aSemaine > 0) {
                            let lSemaineCalPrec = this._cacheSemainesCalendaires[aSemaine - 1];
                            if (!lSemaineCalPrec) {
                                lSemaineCalPrec = this.semaineToCalendaire(aSemaine - 1, lNumero);
                            }
                            this._cacheSemainesCalendaires[aSemaine] = lSemaineCalPrec + 1 > lNbSemaines ? 1 : lSemaineCalPrec + 1;
                        }
                    }
                    return this._cacheSemainesCalendaires[aSemaine];
                }
                return aSemaine + lNumero - 1;
            }
            strDateCalendaireDeSemaine(aSemaine, avecDuAu) {
                const lNumeroSemaine = this.semaineToCalendaire(aSemaine);
                const H = [];
                H.push(ObjetTraduction_1.GTraductions.getValeur('Semaine') + ' ' + lNumeroSemaine);
                if (avecDuAu === true) {
                    const lDateDeb = this.formatDate(this.premierJourOuvreDeLaSemaine(aSemaine), '%JJ/%MM/%AAAA');
                    const lDateFin = this.formatDate(this.dernierJourOuvreDeLaSemaine(aSemaine), '%JJ/%MM/%AAAA');
                    H.push(', ');
                    H.push(ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lDateDeb);
                    H.push(' ');
                    H.push(ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lDateFin);
                }
                return H.join('');
            }
            getDifferenceJours(aDate1, aDate2) {
                const lJour1 = aDate1 ? Math.floor(this.getJour(aDate1).getTime() / this.DureeJours) : 0;
                const lJour2 = aDate2 ? Math.floor(this.getJour(aDate2).getTime() / this.DureeJours) : 0;
                return lJour1 - lJour2;
            }
            getDifferenceJoursPar24h(aDate1, aDate2) {
                const lDureeInMs = (this.estDateValide(aDate1) && this.estDateValide(aDate2)) ? aDate1.getTime() - aDate2.getTime() : 0;
                return Math.floor(lDureeInMs / this.DureeJours);
            }
            getDifferenceTime(aDate1, aDate2) {
                const lDureeInMs = (this.estDateValide(aDate1) && this.estDateValide(aDate2)) ? aDate1.getTime() - aDate2.getTime() : 0;
                const reste_heures = lDureeInMs - (Math.floor(lDureeInMs / this.DureeJours) * this.DureeJours);
                const nb_heures = Math.floor(reste_heures / this.DureeHeures);
                const reste_minutes = lDureeInMs - (Math.floor(lDureeInMs / this.DureeHeures) * this.DureeHeures);
                const nb_minutes = Math.floor(reste_minutes / this.DureeMinutes);
                const reste_secondes = lDureeInMs - (Math.floor(lDureeInMs / this.DureeMinutes) * this.DureeMinutes);
                const nb_secondes = Math.floor(reste_secondes / this.DureeSecondes);
                return (nb_heures < 10 ? '0' : '') + nb_heures + ':' + (nb_minutes < 10 ? '0' : '') + nb_minutes + ':' + (nb_secondes < 10 ? '0' : '') + nb_secondes;
            }
            formatDate(ADate, AFormat) {
                if (!ADate || !MethodesObjet_1.MethodesObjet.isDate(ADate)) {
                    IE.log.addLog('ObjetDate.formatDate, ADate n\'est pas une date : ' + ADate);
                    return '';
                }
                if (!AFormat || !MethodesObjet_1.MethodesObjet.isString(AFormat)) {
                    IE.log.addLog('ObjetDate.formatDate, AFormat n\'est pas format valide : ' + AFormat);
                    return '';
                }
                AFormat = AFormat.replace(/\[(.*?)\]/ig, !this.estJourEgal(ADate, this.aujourdhui) ? !this.estJourEgal(ADate, this.demain) ? !this.estJourEgal(ADate, this.hier) ? '$1' : ObjetTraduction_1.GTraductions.getValeur('Hier') : ObjetTraduction_1.GTraductions.getValeur('Demain') : ObjetTraduction_1.GTraductions.getValeur('Aujourdhui'));
                const LHour = ADate.getHours();
                const LMinute = ADate.getMinutes();
                const LSecond = ADate.getSeconds();
                const LDay = this.getJourDeDate(ADate);
                const LDate = ADate.getDate();
                const LMonth = ADate.getMonth() + 1;
                const LYear = ADate.getFullYear();
                AFormat = AFormat.replace('%hh', (LHour < 10 ? '0' : '') + LHour);
                AFormat = AFormat.replace('%xh', LHour + '');
                AFormat = AFormat.replace('%mm', (LMinute < 10 ? '0' : '') + LMinute);
                AFormat = AFormat.replace('%ss', (LSecond < 10 ? '0' : '') + LSecond);
                AFormat = AFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                AFormat = AFormat.replace('%JJJJ', ObjetTraduction_1.GTraductions.getValeur('Jours')[LDay]);
                AFormat = AFormat.replace('%Jjjj', (ObjetTraduction_1.GTraductions.getValeur('Jours')[LDay]).ucfirst());
                AFormat = AFormat.replace('%JJJ', ObjetTraduction_1.GTraductions.getValeur('JoursCourt')[LDay]);
                AFormat = AFormat.replace('%Jjj', (ObjetTraduction_1.GTraductions.getValeur('JoursCourt')[LDay]).ucfirst());
                AFormat = AFormat.replace('%JJ', (LDate < 10 ? '0' : '') + LDate);
                AFormat = AFormat.replace('%J', LDate + '');
                AFormat = AFormat.replace('%MMMM', ObjetTraduction_1.GTraductions.getValeur('Mois')[LMonth - 1]);
                AFormat = AFormat.replace('%MMM', ObjetTraduction_1.GTraductions.getValeur('MoisCourt')[LMonth - 1]);
                AFormat = AFormat.replace('%Mmm', (ObjetTraduction_1.GTraductions.getValeur('MoisCourt')[LMonth - 1]).ucfirst());
                AFormat = AFormat.replace('%MM', (LMonth < 10 ? '0' : '') + LMonth);
                AFormat = AFormat.replace('%AAAA', LYear + '');
                AFormat = AFormat.replace('%AA', (LYear % 100 < 10 ? '0' : '') + LYear % 100);
                return AFormat;
            }
            estDateParticulier(ADate) {
                return this.estJourEgal(ADate, this.aujourdhui) || this.estJourEgal(ADate, this.demain) || this.estJourEgal(ADate, this.hier);
            }
            formatDureeEnMillisecondes(aDureeEnMillisecondes, aFormat, aForcerFormatDuree) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMillisecondes)) {
                    return '';
                }
                let lFormatDureeEnChaine = this.parametres.formatDureeEnChaine;
                if (MethodesObjet_1.MethodesObjet.isNumber(aForcerFormatDuree)) {
                    lFormatDureeEnChaine = aForcerFormatDuree;
                }
                switch (lFormatDureeEnChaine) {
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresMinutes:
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcPersonnalise:
                    {
                        let lFormat = aFormat || '%hh%sh%mm';
                        lFormat = lFormat.replace('%sh', ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure'));
                        if ((lFormat.lastIndexOf('%hh') > -1) || (lFormat.lastIndexOf('%xh') > -1)) {
                            const LHour = Math.floor(aDureeEnMillisecondes / this.DureeHeures);
                            lFormat = lFormat.replace('%hh', (LHour < 10 ? '0' : '') + LHour);
                            lFormat = lFormat.replace('%xh', LHour + '');
                            aDureeEnMillisecondes = aDureeEnMillisecondes - LHour * this.DureeHeures;
                        }
                        if (lFormat.lastIndexOf('%mm') > -1 || (lFormat.lastIndexOf('%xm') > -1)) {
                            const LMinute = Math.floor(aDureeEnMillisecondes / this.DureeMinutes);
                            lFormat = lFormat.replace('%mm', (LMinute < 10 ? '0' : '') + LMinute);
                            lFormat = lFormat.replace('%xm', LMinute + '');
                            aDureeEnMillisecondes = aDureeEnMillisecondes - LMinute * this.DureeMinutes;
                        }
                        const LSecond = Math.floor(aDureeEnMillisecondes / this.DureeSecondes);
                        lFormat = lFormat.replace('%ss', (LSecond < 10 ? '0' : '') + LSecond);
                        return lFormat;
                    }
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcHeuresCentiemes:
                    {
                        const lNbHeures = Math.floor(aDureeEnMillisecondes / GDate.DureeHeures);
                        let lMinutesEnCentiemes = Math.floor((aDureeEnMillisecondes / GDate.DureeHeures - lNbHeures) * 100);
                        if (lMinutesEnCentiemes < 10) {
                            lMinutesEnCentiemes = '0' + lMinutesEnCentiemes;
                        }
                        return lNbHeures + ',' + lMinutesEnCentiemes;
                    }
                case TypeFormatDureeEnChaine_1.TypeFormatDureeEnChaine.fdcSequences:
                    {
                        const lNbSequences = Math.round10(aDureeEnMillisecondes / UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(this.DureeSequence), -2);
                        const lPartieEntiere = Math.floor(lNbSequences);
                        let lPartieDecimale = Math.floor((lNbSequences - lPartieEntiere) * 100);
                        if (lPartieDecimale < 10) {
                            lPartieDecimale = '0' + lPartieDecimale;
                        }
                        return lPartieEntiere + ',' + lPartieDecimale;
                    }
                default:
                    ;
                }
                return '';
            }
            dureeEnMillisecondesToHMS(aDureeEnMillisecondes) {
                const lResult = {
                    heures: 0,
                    minutes: 0,
                    secondes: 0
                };
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMillisecondes)) {
                    return lResult;
                }
                lResult.heures = Math.floor(aDureeEnMillisecondes / this.DureeHeures);
                aDureeEnMillisecondes = aDureeEnMillisecondes - lResult.heures * this.DureeHeures;
                lResult.minutes = Math.floor(aDureeEnMillisecondes / this.DureeMinutes);
                aDureeEnMillisecondes = aDureeEnMillisecondes - lResult.minutes * this.DureeMinutes;
                lResult.secondes = Math.floor(aDureeEnMillisecondes / this.DureeSecondes);
                return lResult;
            }
            hmsToDureeEnMillisecondes(aHMS) {
                const lHMS = {
                    heures: (aHMS && aHMS.heures) ? aHMS.heures : 0,
                    minutes: (aHMS && aHMS.minutes) ? aHMS.minutes : 0,
                    secondes: (aHMS && aHMS.secondes) ? aHMS.secondes : 0
                };
                return lHMS.heures * this.DureeHeures + lHMS.minutes * this.DureeMinutes + lHMS.secondes * this.DureeSecondes;
            }
            formatDureeEnPlaces(aPlaces, aFormat, aForcerFormatDuree) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aPlaces)) {
                    return '';
                }
                return this.formatDureeEnMillisecondes(this.nombrePlacesEnMillisecondes(aPlaces), aFormat, aForcerFormatDuree);
            }
            enCentiemeDHeure(aDureeEnMillisecondes) {
                const lDuree = Math.floor(aDureeEnMillisecondes);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lDuree)) {
                    return '';
                }
                const lNbHeures = Math.floor(lDuree / GDate.DureeHeures);
                let lMinutesEnCentiemes = Math.floor((lDuree / GDate.DureeHeures - lNbHeures) * 100);
                if (lMinutesEnCentiemes < 10) {
                    lMinutesEnCentiemes = '0' + lMinutesEnCentiemes;
                }
                return lNbHeures + ',' + lMinutesEnCentiemes;
            }
            strSemaine(aNumeroSemaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(this.premierJourOuvreDeLaSemaine(aNumeroSemaine), aFormatDebut);
                const lDateFin = this.formatDate(this.dernierJourOuvreDeLaSemaine(aNumeroSemaine), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strSemaineSelonCycle(aCycle, aNumeroSemaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(aCycle.datePremierJourOuvreCycle(aNumeroSemaine), aFormatDebut);
                const lDateFin = this.formatDate(aCycle.dateDernierJourOuvreCycle(aNumeroSemaine), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strDomaine(aDomaine, aFormatDebut, aFormatFin, aSeparateur1, aSeparateur2, aSeparateur3) {
                const lDateDeb = this.formatDate(IE.Cycles.datePremierJourOuvreCycle(aDomaine.getPremierePosition()), aFormatDebut);
                const lDateFin = this.formatDate(IE.Cycles.dateDernierJourOuvreCycle(aDomaine.getDernierePosition()), aFormatFin);
                return (aSeparateur1 || '') + lDateDeb + (aSeparateur2 || '') + lDateFin + (aSeparateur3 || '');
            }
            strDates(aDateDebut, aDateFin, aParams) {
                const lParams = {
                    sansHoraire: false,
                    sansCrochet: false,
                    formatDate: '%J %MMMM'
                };
                $.extend(lParams, aParams);
                const formatHeure = ' %hh' + ObjetTraduction_1.GTraductions.getValeur('date.separateurHeure') + '%mm';
                const lResult = [];
                if (GDate.getNbrJoursEntreDeuxDates(aDateDebut, aDateFin) >= 1) {
                    if (lParams.sansHoraire) {
                        lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate));
                        lResult.push(' ');
                        lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate));
                    } else {
                        lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate) + ' ' + (estMinuit.call(this, aDateDebut) ? '' : GDate.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                        lResult.push(' ');
                        lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate) + ' ' + (estMinuit.call(this, aDateFin) ? '' : GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                    }
                } else if (GDate.estDateEgale(aDateDebut, aDateFin)) {
                    lResult.push(GDate.formatDate(aDateDebut, (lParams.sansCrochet ? '' : '[') + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + (lParams.sansCrochet ? '' : ']')));
                    lResult.push(' ');
                    lResult.push(lParams.sansHoraire ? '' : (estMinuit.call(this, aDateFin) ? '' : GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure)));
                } else {
                    lResult.push(GDate.formatDate(aDateDebut, (lParams.sansCrochet ? '' : '[') + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + (lParams.sansCrochet ? '' : ']')));
                    lResult.push(' ');
                    lResult.push(lParams.sansHoraire ? '' : this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('De') + formatHeure) + ' ' + GDate.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('A') + formatHeure));
                }
                return lResult.join('');
            }
            strDatesAvecDemiJournees(aDateDebut, aDateDebutEstMatin, aDateFin, aDateFinEstMatin, aParams) {
                const lParams = {
                    formatDate: '%JJ/%MM'
                };
                $.extend(lParams, aParams);
                const lResult = [];
                if (!aDateFin || GDate.estJourEgal(aDateDebut, aDateFin)) {
                    const lEstJourneeComplete = (!!aDateFin && GDate.estJourEgal(aDateDebut, aDateFin) && aDateDebutEstMatin !== aDateFinEstMatin);
                    lResult.push(GDate.formatDate(aDateDebut, '[' + ObjetTraduction_1.GTraductions.getValeur('Le') + ' ' + lParams.formatDate + ']'));
                    if (!lEstJourneeComplete) {
                        lResult.push(' ', (aDateDebutEstMatin ? ObjetTraduction_1.GTraductions.getValeur('Matin') : ObjetTraduction_1.GTraductions.getValeur('ApresMidi')));
                    }
                } else {
                    lResult.push(this.formatDate(aDateDebut, ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + lParams.formatDate));
                    if (!aDateDebutEstMatin) {
                        lResult.push(' ', ObjetTraduction_1.GTraductions.getValeur('ApresMidi'));
                    }
                    lResult.push(' ');
                    lResult.push(this.formatDate(aDateFin, ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + lParams.formatDate));
                    if (!!aDateFinEstMatin) {
                        lResult.push(' ', ObjetTraduction_1.GTraductions.getValeur('Matin'));
                    }
                }
                return lResult.join('');
            }
            placeAnnuelleEnDate(APlace, AEstDateFin) {
                const LJour = this.getJourSuivant(IE.Cycles.dateDebutPremierCycle(), Math.floor(APlace / this.PlacesParJour));
                const lHrMin = this._getHrMinDeListeHeures(APlace % this.PlacesParJour, AEstDateFin);
                return new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m);
            }
            dateEnPlaceAnnuelle(aDate, aEstDateFin=false) {
                const lPlaceAnnuelleJour = this.getNbrJoursEntreDeuxDates(IE.Cycles.dateDebutPremierCycle(), aDate) * this.PlacesParJour;
                if (lPlaceAnnuelleJour < 0) {
                    return 0;
                }
                return lPlaceAnnuelleJour + this._dateEnPlaceJour(aDate, aEstDateFin);
            }
            placeParJourEnDate(APlace) {
                const LJour = this.getDateCourante();
                const lHrMin = this._getHrMinDeListeHeures(APlace);
                return new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m);
            }
            dateEnPlaceHebdomadaire(ADate, AEstDateFin=false) {
                let lJour = 0;
                const lResult = IE.Cycles.dateEnCycleEtJourCycle(ADate, null);
                if (lResult.trouve) {
                    lJour = lResult.indice;
                } else {
                    const lResult = IE.Cycles.dateEnCycleEtJourCycle(ADate, IE.Cycles.recherche.autoriserPrecedents);
                    if (lResult.trouve) {
                        return lResult.indice * this.PlacesParJour - 1;
                    }
                }
                return lJour * this.PlacesParJour + this._dateEnPlaceJour(ADate, AEstDateFin);
            }
            placeEnDate(aNumeroCycle, aPlace, aEstPlaceFin=false, aInstanceCycles) {
                const lCycles = aInstanceCycles || IE.Cycles
                  , lNumeroJour = Math.floor(aPlace / this.PlacesParJour)
                  , lNumeroCycle = Math.max(1, aNumeroCycle)
                  , LJour = lCycles.jourCycleEnDate(lNumeroJour, lNumeroCycle);
                let lPlaceJour = aPlace % this.PlacesParJour;
                if (lNumeroJour > lCycles.cache.datesAfficheesParCycle[lNumeroCycle].length) {
                    lPlaceJour = this.PlacesParJour - 1;
                }
                const lHrMin = this._getHrMinDeListeHeures(lPlaceJour, aEstPlaceFin);
                return lHrMin && lHrMin.ok ? new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate(),lHrMin.h,lHrMin.m) : new Date(LJour.getFullYear(),LJour.getMonth(),LJour.getDate());
            }
            placeEnDateHeure(aPlace, aEstPlaceFin=false) {
                return this.placeEnDate(1, aPlace, aEstPlaceFin);
            }
            nombrePlacesEnDuree(aPlaces) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aPlaces)) {
                    return 0;
                }
                return aPlaces * this.DureeSequence / this.PlacesParHeure;
            }
            minutesEnNombrePlaces(aDureeEnMinutes) {
                if (!MethodesObjet_1.MethodesObjet.isNumber(aDureeEnMinutes)) {
                    return 0;
                }
                const lDuree1PlaceEnMinutes = UtilitaireDuree_1.TUtilitaireDuree.dureeEnMin(this.nombrePlacesEnDuree(1));
                const lResult = aDureeEnMinutes / lDuree1PlaceEnMinutes;
                if (lResult !== Math.floor(lResult)) {}
                return lResult;
            }
            nombrePlacesEnMillisecondes(aPlaces) {
                return UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(this.nombrePlacesEnDuree(aPlaces));
            }
            getDateDeChaine(aChaine, aDateDebut, aDateFin) {
                aDateDebut = aDateDebut || this.PremierLundi;
                aDateFin = aDateFin || this.derniereDate;
                const T = aChaine.split('/');
                if (T[2] && (T[2].length === 2)) {
                    T[2] = '20' + T[2];
                }
                const lDate = new Date(T[2],T[1] - 1,T[0]);
                const lEstValide = ((lDate.getFullYear() === parseInt(T[2])) || (lDate.getFullYear() === parseInt('20' + T[2], 10))) && (lDate.getMonth() === Number(T[1] - 1)) && (lDate.getDate() === parseInt(T[0])) && (lDate >= aDateDebut) && (lDate <= aDateFin);
                return lEstValide ? lDate : null;
            }
            getListeSemaines(aSemaineDebut, aSemaineFin, aGenreTri) {
                let lLibelle, LDateDeb, LDateFin;
                const lSemaineCourante = IE.Cycles.cycleDeLaDate(new Date());
                const lListeSemaines = new ObjetListeElements_1.ObjetListeElements();
                const lSemaineDeb = Math.max(0, aSemaineDebut);
                const lSemaineFin = Math.min(IE.Cycles.nombreCyclesAnneeScolaire(), aSemaineFin);
                for (let lSemaine = lSemaineDeb; lSemaine <= lSemaineFin; lSemaine++) {
                    if (lSemaine === lSemaineCourante) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemaineEnCours');
                    } else if (lSemaine === lSemaineCourante + 1) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemaineSuivante');
                    } else if (lSemaine === lSemaineCourante - 1) {
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('SemainePrecedente');
                    } else {
                        LDateDeb = GDate.formatDate(IE.Cycles.dateDebutCycle(lSemaine), '%JJ/%MM');
                        LDateFin = GDate.formatDate(IE.Cycles.dateDernierJourOuvreCycle(lSemaine), '%JJ/%MM');
                        lLibelle = ObjetTraduction_1.GTraductions.getValeur('Du') + ' ' + LDateDeb + ' ' + ObjetTraduction_1.GTraductions.getValeur('Au') + ' ' + LDateFin;
                    }
                    lListeSemaines.addElement(new ObjetElement_1.ObjetElement(lLibelle,null,lSemaine));
                }
                lListeSemaines.setTri([ObjetTri_1.ObjetTri.init('Genre')]);
                lListeSemaines.trier(aGenreTri);
                return lListeSemaines;
            }
            getListeMoisAPartirDeDate(aDateDebut, aDateFin, aFormatMois='%MMMM %AAAA') {
                const lListeMois = new ObjetListeElements_1.ObjetListeElements();
                let lElement, lAnnee, lMois, lDate, lVrai = true;
                const lPremiereDate = aDateDebut || this.premiereDate
                  , lDerniereDate = aDateFin || this.derniereDate
                  , lAnneeDebut = lPremiereDate.getFullYear()
                  , lMoisDebut = lPremiereDate.getMonth()
                  , lAnneeFin = lDerniereDate.getFullYear()
                  , lMoisFin = lDerniereDate.getMonth();
                if (this.estAvantJour(lPremiereDate, lDerniereDate) || this.estJourEgal(lPremiereDate, lDerniereDate)) {
                    lMois = lMoisDebut;
                    lAnnee = lAnneeDebut;
                    while (lVrai) {
                        if (lMois >= lMoisFin && lAnnee >= lAnneeFin || lAnnee > lAnneeFin) {
                            lVrai = false;
                        }
                        lDate = new Date(lAnnee,lMois);
                        lElement = new ObjetElement_1.ObjetElement(GDate.formatDate(lDate, aFormatMois).ucfirst());
                        lElement.annee = lAnnee;
                        lElement.mois = lMois;
                        lDate = this.getPremierJourDuMois(lAnnee, lMois);
                        lElement.dateDebut = lDate >= lPremiereDate ? lDate : lPremiereDate;
                        lDate = this.getDernierJourDuMois(lAnnee, lMois);
                        lElement.dateFin = lDate <= lDerniereDate ? lDate : lDerniereDate;
                        lListeMois.addElement(lElement);
                        lMois += 1;
                        if (lMois > 11) {
                            lAnnee += 1;
                            lMois = 0;
                        }
                    }
                }
                return lListeMois;
            }
            parseHeureMinute(aValue, aDureeMinEnMin=0, aDureeMaxEnMin=1440) {
                function _estUnChiffre(aCar) {
                    return /[0-9]/.test(aCar);
                }
                const lResult = {
                    heure: 0,
                    minute: 0,
                    ok: false,
                    erreurMinMax: false
                };
                const lDureeMinEnMin = aDureeMinEnMin || 0
                  , lDureeMaxEnMin = aDureeMaxEnMin || 24 * 60;
                if (!MethodesObjet_1.MethodesObjet.isString(aValue)) {
                    return lResult;
                }
                const lValue = aValue.trim();
                let lHeure, lMinute = 0;
                let lIndice = 0;
                let lZeroDevant = false;
                if (!_estUnChiffre(lValue[lIndice]) && lValue[lIndice] !== '+') {
                    return lResult;
                }
                if (lValue[lIndice] === '+') {
                    lIndice += 1;
                    while (lIndice < lValue.length && lValue[lIndice] === ' ') {
                        lIndice += 1;
                    }
                }
                lZeroDevant = lValue[lIndice] === '0';
                lHeure = 0;
                while (lIndice < lValue.length && _estUnChiffre(lValue[lIndice])) {
                    lHeure = lHeure * 10 + parseInt(lValue[lIndice], 10);
                    lIndice += 1;
                }
                while (lIndice < lValue.length && !_estUnChiffre(lValue[lIndice])) {
                    lIndice += 1;
                }
                if (lIndice >= lValue.length) {
                    if (lZeroDevant || (lHeure >= 100 && lHeure * 60 >= lDureeMaxEnMin)) {
                        lMinute = lHeure % 100;
                        lHeure = Math.floor(lHeure / 100);
                    } else {
                        lMinute = 0;
                    }
                } else {
                    lMinute = 0;
                    while (lIndice < lValue.length && _estUnChiffre(lValue[lIndice])) {
                        lMinute = lMinute * 10 + parseInt(lValue[lIndice], 10);
                        lIndice += 1;
                    }
                    while (lIndice < lValue.length && !_estUnChiffre(lValue[lIndice])) {
                        lIndice += 1;
                    }
                    if (lIndice < lValue.length) {
                        return lResult;
                    }
                }
                if (lMinute >= 60 || lMinute < 0 || lHeure < 0) {
                    return lResult;
                }
                lResult.heure = lHeure;
                lResult.minute = lMinute;
                if ((lHeure * 60 + lMinute) < lDureeMinEnMin || (lHeure * 60 + lMinute) >= lDureeMaxEnMin) {
                    lResult.erreurMinMax = true;
                    return lResult;
                }
                lResult.ok = true;
                return lResult;
            }
            dateEnPlaceJour(aDate, AEstDateFin=false) {
                return this._dateEnPlaceJour(aDate, AEstDateFin);
            }
            _dateEnPlaceJour(ADate, AEstDateFin) {
                let I;
                let lNbMinutesLibelleHeure;
                const lNbMinutesLibelleHeureDebut = this._getNbrMinutesLibelleHeure(0);
                for (I = this.PlacesParJour - 1; I >= 0; I--) {
                    lNbMinutesLibelleHeure = this._getNbrMinutesLibelleHeure(I);
                    if (lNbMinutesLibelleHeure < lNbMinutesLibelleHeureDebut) {
                        lNbMinutesLibelleHeure += 24 * 60;
                    }
                    if (_GetNbrMinutes.call(this, ADate) - (AEstDateFin ? 1 : 0) >= lNbMinutesLibelleHeure) {
                        break;
                    }
                }
                return Math.max(I, 0);
            }
            _getHrMinDeListeHeures(aPlace, aEstPlaceFin) {
                const lResult = {
                    h: 0,
                    m: 0,
                    ok: false
                };
                let lChaine = null;
                let lElement = null;
                if (aEstPlaceFin) {
                    lElement = this.ListeHeuresFin ? this.ListeHeuresFin.get(aPlace) : this.ListeHeures.get(aPlace + 1);
                } else {
                    lElement = this.ListeHeures.get(aPlace);
                }
                if (lElement) {
                    lChaine = lElement.getLibelle();
                }
                if (!lChaine || !lChaine.indexOf || !lChaine.split) {
                    return lResult;
                }
                let lTab = lChaine.split(ObjetDate.separateurHeureDelphi);
                if (lTab.length < 2) {
                    lTab = lChaine.split(':');
                    if (lTab.length < 2) {
                        return lResult;
                    }
                }
                ;lResult.h = parseInt(lTab[0], 0) || 0;
                if (lTab.length > 1) {
                    lResult.m = parseInt(lTab[1], 0) || 0;
                }
                lResult.ok = true;
                return lResult;
            }
            _getNbrMinutesLibelleHeure(I) {
                const lHrMin = this._getHrMinDeListeHeures(I);
                return lHrMin.h * 60 + lHrMin.m;
            }
        }
        exports.ObjetDate = ObjetDate;
        ObjetDate.separateurHeureDelphi = 'h';
        function estMinuit(aDate) {
            const lHeure = aDate.getHours();
            const lMin = aDate.getMinutes();
            return (lHeure === 0 && lMin === 0);
        }
        function _GetNbrMinutes(aDate) {
            return aDate.getHours() * 60 + aDate.getMinutes();
        }
        const GDate = new ObjetDate();
        exports.GDate = GDate;
        IEHtml.setObjetDate(GDate.formatDate.bind(GDate), GDate.parseHeureMinute.bind(GDate));
    },
    fn: 'objetdate.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDroitsPN = exports.TypeDroits = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeDomaine_1 = require("TypeDomaine");
        exports.TypeDroits = {
            estEnConsultation: 1,
            cours: {
                domaineConsultationEDT: 1,
                avecReservationCreneauxLibres: 1,
                modifierElevesDetachesSurCoursDeplaceCreneauLibre: 1,
                modifierMatieres: 1,
                modifierMatieresCoursEPIEtAP: 1,
                modifierClasses: 1,
                modifierProfesseurs: 1,
                modifierSalles: 1,
                modifierMateriels: 1,
                creerCours: 1,
                creerCoursPermanenceFeuilleAppel: 1,
                deplacerCours: 1,
                estSemaineModifiable: 1,
                estGestionnaireSalle: 1,
                estGestionnaireMateriel: 1,
                avecMateriel: 1,
                avecFicheCoursConseil: 1,
                masquerPartiesDeClasse: 1,
                afficherElevesDetachesDansCours: 1
            },
            eleves: {
                voirTousLesEleves: 1,
                consulterIdentiteEleve: 1,
                consulterFichesResponsables: 1,
                consulterPhotosEleves: 1,
                avecSaisieParcoursPedagogique: 1,
                avecAffectationElevesGroupesNonGAEV: 1,
                avecAffectationElevesGroupesGAEV: 1,
                avecSaisieProjetIndividuel: 1,
                avecSaisieAttestations: 1,
                consulterDonneesAdministrativesAutresEleves: 1
            },
            communication: {
                toutesClasses: 1,
                avecDiscussion: 1,
                discussionDesactiveeSelonHoraire: 1,
                messageDiscussionDesactiveeSelonHoraire: 1,
                discussionInterdit: 1,
                avecDiscussionPersonnels: 1,
                avecDiscussionProfesseurs: 1,
                avecDiscussionParents: 1,
                avecDiscussionEleves: 1,
                avecMessageInstantane: 1,
                avecContactVS: 1,
                lancerAlertesPPMS: 1,
                estDestinataireChat: 1,
                avecDiscussionAvancee: 1,
                avecPublicationPageEtablissement: 0
            },
            absences: {
                domaineRecapitulatifAbsences: 1,
                avecSaisieAppelEtVS: 1,
                avecSaisieAppel: 1,
                avecSaisieCours: 1,
                avecSaisieAbsenceOuverte: 1,
                avecSaisieHorsCours: 1,
                avecSaisieSurGrille: 1,
                avecSaisieSurGrilleAppelProf: 1,
                avecSaisieAbsence: 1,
                avecSaisieRetard: 1,
                avecSaisiePassageInfirmerie: 1,
                avecSaisieExclusion: 1,
                avecSaisiePunition: 1,
                avecSaisieObservation: 1,
                avecConsultationDefautCarnet: 1,
                avecSaisieDefautCarnet: 1,
                avecSaisieObservationsParents: 1,
                avecSaisieEncouragements: 1,
                avecAccesAuxEvenementsAutresCours: 1,
                avecSaisieAbsencesToutesPermanences: 1,
                listeDatesSaisieAbsence: 1,
                avecAnciennesFeuilleDAppel: 1,
                avecSaisieAbsencesGrilleAbsencesRepas: 1,
                avecSaisieAbsencesGrilleAbsencesInternat: 1,
                avecSuiviAbsenceRetard: 1,
                avecSaisieMotifRetard: 1,
                avecDeclarerUneAbsence: 1,
                avecDeclarerDispensePonctuelle: 1,
                avecDeclarerDispenseLongue: 1
            },
            competence: {
                avecSaisieEvaluations: 1,
                avecSaisieItems: 1,
                avecValidationCompetences: 1
            },
            agenda: {
                avecSaisieAgenda: 1
            },
            actualite: {
                avecSaisieActualite: 1
            },
            listeDiffusion: {
                avecPublication: 1
            },
            casierNumerique: {
                avecAccesALaListeDesDocumentEleve: 1,
                avecSaisieDocumentsCasiersIntervenant: 1,
                avecSaisieDocumentsCasiersResponsable: 1
            },
            dossierVS: {
                creerDossiersVS: 1,
                modifierDossiersVS: 1,
                saisieMotifsDossiersVS: 1,
                publierDossiersVS: 1,
                consulterMemosEleve: 1,
                saisirMemos: 1
            },
            decrochageScolaire: {
                acces: 1,
                suivi: 1
            },
            dispenses: {
                saisie: 1
            },
            incidents: {
                acces: 1,
                uniquementMesIncidentsSignales: 1,
                saisie: 1,
                publier: 1
            },
            punition: {
                avecPublicationPunitions: 1,
                acces: 1,
                saisie: 1,
                avecRecapPunitions: 1,
                avecRecapSanctions: 1
            },
            creerMotifIncidentPunitionSanction: 1,
            stage: {
                autoriserEditionToutesOffresStages: 1
            },
            cahierDeTexte: {
                avecSaisieCahierDeTexte: 1,
                creerCategoriesDeCahierDeTexte: 1,
                avecSaisiePieceJointe: 1,
                tailleMaxPieceJointe: 1
            },
            notation: {
                avecSaisieDevoirs: 1
            },
            compte: {
                avecSaisieIdentifiant: 1,
                avecSaisieMotDePasse: 1,
                avecSaisieMotDePasseEleve: 1,
                avecInformationsPersonnelles: 1,
                avecSaisieInfosPersoCoordonnees: 1,
                avecSaisieInfosPersoAutorisations: 1
            },
            intendance: {
                avecDemandeTravauxIntendance: 1,
                uniquementMesTravauxIntendance: 1,
                avecExecutionTravauxIntendance: 1,
                avecGestionTravauxIntendance: 1,
                avecDemandeTachesSecretariat: 1,
                uniquementMesTachesSecretariat: 1,
                avecExecutionTachesSecretariat: 1,
                avecDemandeTachesInformatique: 1,
                uniquementMesTachesInformatique: 1,
                avecExecutionTachesInformatique: 1,
                avecGestionTachesInformatique: 1,
                avecDemandeCommandes: 1,
                uniquementMesCommandes: 1,
                avecExecutionCommandes: 1,
                avecGestionCommandes: 1
            },
            services: {
                avecCreationSousServices: 1,
                avecModificationCoefGeneral: 1
            },
            trombinoscope: {
                autoriseAConsulterPhotosDeTousLesEleves: 1
            },
            forum: {
                avecCreationSujetForum: 1,
                avecModificationForumAPosteriori: 1
            },
            autoriserImpressionBulletinReleveBrevet: 1,
            fonctionnalites: {
                gestionNotation: 1,
                gestionCompetences: 1,
                gestionBrevet: 1,
                gestionProgrammesBO: 1,
                gestionStages: 1,
                gestionIPR: 1,
                appelSaisirMotifJustifDAbsence: 1,
                gestionTwitter: 1,
                gestionBulletinClasse: 1,
                gestionNathan: 1,
                gestionPunitions: 1,
                gestionInfirmerie: 1,
                gestionPermanence: 1,
                gestionAbsencesDemiPension: 1,
                gestionAbsencesInternat: 1,
                gestionEtendueEleves: 1,
                gestionEleves: 1,
                gestionPersonnels: 1,
                forcerARInfos: 1,
                gestionSondageAnonyme: 1,
                gestionAbsenceDJParUtilisateur: 1,
                attestationEtendue: 1,
                afficherProjetsAccompagnement: 1,
                saisieEtendueAbsenceDepuisAppel: 1,
                importExportEducationNationale: 1,
                gestionCDT: 1,
                gestionPeriodeNotation: 1,
                gestionARBulletins: 1,
                avecTransformationFluxFichier: 1
            },
            avecAccesRemplacementsProfs: 1,
            voirAbsencesEtRemplacementsProfs: 1,
            sePorterVolontaireRemplacement: 1,
            avecSaisieAppreciationsGenerales: 1,
            assistantSaisieAppreciations: 1,
            tailleMaxDocJointEtablissement: 1,
            tailleMaxRenduTafEleve: 1,
            tailleTravailAFaire: 1000,
            tailleCirconstance: 1000,
            tailleCommentaire: 1000,
            avecDroitDeconnexionMessagerie: 1,
            estDirecteur: 1,
            estEnseignant: 1,
            tailleMaxUpload: 1
        };
        MethodesObjet_1.MethodesObjet.indenterEnumere(exports.TypeDroits);
        class ObjetDroitsPN {
            constructor() {
                this.init();
                this.initDroitsSession();
            }
            get(aGenreDroit, aNumeroSemine) {
                const lEstEnConsultation = GApplication.getModeExclusif();
                switch (aGenreDroit) {
                case exports.TypeDroits.estEnConsultation:
                    return lEstEnConsultation;
                case exports.TypeDroits.tailleMaxUpload:
                    return 50 * 1024 * 1024;
                case exports.TypeDroits.cours.domaineConsultationEDT:
                    return this._droits.cours.domaineConsultationEDT;
                case exports.TypeDroits.cours.avecReservationCreneauxLibres:
                    return this._droits.cours.avecReservationCreneauxLibres && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierElevesDetachesSurCoursDeplaceCreneauLibre:
                    return this._droits.cours.modifierElevesDetachesSurCoursDeplaceCreneauLibre && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMatieres:
                    return this._droits.cours.modifierMatieres && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMatieresCoursEPIEtAP:
                    return this._droits.cours.modifierMatieresCoursEPIEtAP && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierClasses:
                    return this._droits.cours.modifierClasses && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierProfesseurs:
                    return this._droits.cours.modifierProfesseurs && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierSalles:
                    return this._droits.cours.modifierSalles && !lEstEnConsultation;
                case exports.TypeDroits.cours.modifierMateriels:
                    return this._droits.cours.modifierMateriels && !lEstEnConsultation;
                case exports.TypeDroits.cours.deplacerCours:
                    return this._droits.cours.deplacerCours && !lEstEnConsultation;
                case exports.TypeDroits.cours.creerCours:
                    return this._droits.cours.creerCours && !lEstEnConsultation;
                case exports.TypeDroits.cours.creerCoursPermanenceFeuilleAppel:
                    return this._droits.cours.creerCoursPermanenceFeuilleAppel && !lEstEnConsultation;
                case exports.TypeDroits.cours.estSemaineModifiable:
                    if (lEstEnConsultation) {
                        return false;
                    }
                    if (this._droits.cours.modificationNonLimiteAuxSemaine) {
                        return true;
                    }
                    if (!this._droits.cours.domaineModificationCours) {
                        return false;
                    }
                    return this._droits.cours.domaineModificationCours.getValeur(aNumeroSemine);
                case exports.TypeDroits.cours.estGestionnaireSalle:
                    return this._droits.cours.estGestionnaireSalle && !lEstEnConsultation;
                case exports.TypeDroits.cours.estGestionnaireMateriel:
                    return this._droits.cours.estGestionnaireMateriel && !lEstEnConsultation;
                case exports.TypeDroits.cours.avecMateriel:
                    return this._droits.cours.avecMateriel;
                case exports.TypeDroits.cours.avecFicheCoursConseil:
                    return this._droits.cours.avecFicheCoursConseil;
                case exports.TypeDroits.cours.masquerPartiesDeClasse:
                    return this._droits.cours.masquerPartiesDeClasse;
                case exports.TypeDroits.cours.afficherElevesDetachesDansCours:
                    return this._droits.cours.afficherElevesDetachesDansCours;
                case exports.TypeDroits.eleves.voirTousLesEleves:
                    return this._droits.VoirTousLesEleves;
                case exports.TypeDroits.eleves.consulterIdentiteEleve:
                    return this._droits.ConsulterIdentiteEleve;
                case exports.TypeDroits.eleves.consulterFichesResponsables:
                    return this._droits.ConsulterFichesResponsables;
                case exports.TypeDroits.eleves.consulterPhotosEleves:
                    return this._droits.ConsulterPhotosEleves;
                case exports.TypeDroits.eleves.avecSaisieParcoursPedagogique:
                    return this._droits.avecSaisieParcoursPedagogique && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecAffectationElevesGroupesNonGAEV:
                    return this._droits.AvecAffectationElevesGroupesNonGAEV && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecAffectationElevesGroupesGAEV:
                    return this._droits.AvecAffectationElevesGroupesGAEV && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecSaisieProjetIndividuel:
                    return this._droits.AvecSaisieProjetIndividuel && !lEstEnConsultation;
                case exports.TypeDroits.eleves.avecSaisieAttestations:
                    return this._droits.AvecSaisieAttestations && !lEstEnConsultation;
                case exports.TypeDroits.eleves.consulterDonneesAdministrativesAutresEleves:
                    return this._droits.consulterDonneesAdministrativesAutresEleves;
                case exports.TypeDroits.communication.toutesClasses:
                    return this._droits.AutoriserCommunicationsToutesClasses;
                case exports.TypeDroits.communication.avecDiscussion:
                    return this._droits.AvecDiscussion;
                case exports.TypeDroits.communication.discussionDesactiveeSelonHoraire:
                    return this._droits.discussionDesactiveeSelonHoraire;
                case exports.TypeDroits.communication.messageDiscussionDesactiveeSelonHoraire:
                    return this._droits.messageDiscussionDesactiveeSelonHoraire;
                case exports.TypeDroits.communication.discussionInterdit:
                    return this._droits.discussionInterdit;
                case exports.TypeDroits.communication.avecDiscussionPersonnels:
                    return this._droits.AvecDiscussionPersonnels;
                case exports.TypeDroits.communication.avecDiscussionProfesseurs:
                    return this._droits.AvecDiscussionProfesseurs;
                case exports.TypeDroits.communication.avecDiscussionParents:
                    return this._droits.AvecDiscussionParents;
                case exports.TypeDroits.communication.avecDiscussionEleves:
                    return this._droits.AvecDiscussionEleves;
                case exports.TypeDroits.communication.avecMessageInstantane:
                    return this._droits.avecMessageInstantane && !lEstEnConsultation;
                case exports.TypeDroits.communication.avecContactVS:
                    return this._droits.AvecContactVS && !lEstEnConsultation;
                case exports.TypeDroits.communication.lancerAlertesPPMS:
                    return this._droits.lancerAlertesPPMS && !lEstEnConsultation;
                case exports.TypeDroits.communication.estDestinataireChat:
                    return this._droits.estDestinataireChat;
                case exports.TypeDroits.communication.avecDiscussionAvancee:
                    return this._droits.AvecDiscussionAvancee;
                case exports.TypeDroits.absences.domaineRecapitulatifAbsences:
                    return this._droits.DomaineRecapitulatifAbsences;
                case exports.TypeDroits.absences.avecSaisieAppelEtVS:
                    return this._droits.AvecSaisieAppelEtVS;
                case exports.TypeDroits.absences.avecSaisieAppel:
                    return this._droits.AvecSaisieAppel;
                case exports.TypeDroits.absences.avecSaisieCours:
                    return this._droits.AvecSaisieCours;
                case exports.TypeDroits.absences.avecSaisieAbsenceOuverte:
                    return this._droits.AvecSaisieAbsenceOuverte;
                case exports.TypeDroits.absences.avecSaisieHorsCours:
                    return this._droits.AvecSaisieHorsCours;
                case exports.TypeDroits.absences.avecSaisieSurGrille:
                    return this._droits.AvecSaisieSurGrille;
                case exports.TypeDroits.absences.avecSaisieSurGrilleAppelProf:
                    return this._droits.AvecSaisieSurGrilleAppelProf;
                case exports.TypeDroits.absences.avecSaisieAbsence:
                    return this._droits.AvecSaisieAbsence;
                case exports.TypeDroits.absences.avecSaisieRetard:
                    return this._droits.AvecSaisieRetard;
                case exports.TypeDroits.absences.avecSaisiePassageInfirmerie:
                    return this._droits.AvecSaisiePassageInfirmerie;
                case exports.TypeDroits.absences.avecAnciennesFeuilleDAppel:
                    return this._droits.avecAnciennesFeuilleDAppel;
                case exports.TypeDroits.absences.avecSaisieExclusion:
                    return this._droits.AvecSaisieExclusion;
                case exports.TypeDroits.absences.avecSaisiePunition:
                    return this._droits.AvecSaisiePunition;
                case exports.TypeDroits.absences.avecSaisieObservation:
                    return this._droits.AvecSaisieObservation;
                case exports.TypeDroits.absences.avecConsultationDefautCarnet:
                    return this._droits.AvecConsultationDefautCarnet;
                case exports.TypeDroits.absences.avecSaisieDefautCarnet:
                    return this._droits.AvecSaisieDefautCarnet;
                case exports.TypeDroits.absences.avecSaisieObservationsParents:
                    return this._droits.AvecSaisieObservationsParents;
                case exports.TypeDroits.absences.avecSaisieEncouragements:
                    return this._droits.AvecSaisieEncouragements;
                case exports.TypeDroits.absences.avecAccesAuxEvenementsAutresCours:
                    return this._droits.AvecAccesAuxEvenementsAutresCours;
                case exports.TypeDroits.absences.avecSaisieAbsencesToutesPermanences:
                    return this._droits.AvecSaisieAbsencesToutesPermanences;
                case exports.TypeDroits.absences.listeDatesSaisieAbsence:
                    return (MethodesObjet_1.MethodesObjet.dupliquer(this._droits.listeDatesSaisieAbsence) || new ObjetListeElements_1.ObjetListeElements());
                case exports.TypeDroits.absences.avecSaisieAbsencesGrilleAbsencesRepas:
                    return this._droits.AvecSaisieAbsencesGrilleAbsencesRepas;
                case exports.TypeDroits.absences.avecSaisieAbsencesGrilleAbsencesInternat:
                    return this._droits.AvecSaisieAbsencesGrilleAbsencesInternat;
                case exports.TypeDroits.absences.avecSuiviAbsenceRetard:
                    return this._droits.AvecSuiviAbsenceRetard;
                case exports.TypeDroits.absences.avecSaisieMotifRetard:
                    return this._droits.AvecSaisieMotifRetard;
                case exports.TypeDroits.absences.avecDeclarerUneAbsence:
                    return this._droits.AvecDeclarerUneAbsence;
                case exports.TypeDroits.absences.avecDeclarerDispensePonctuelle:
                    return this._droits.AvecDeclarerDispensePonctuelle;
                case exports.TypeDroits.absences.avecDeclarerDispenseLongue:
                    return this._droits.AvecDeclarerDispenseLongue;
                case exports.TypeDroits.competence.avecSaisieEvaluations:
                    return this._droits.AvecSaisieEvaluations && !lEstEnConsultation;
                case exports.TypeDroits.competence.avecSaisieItems:
                    return this._droits.AvecSaisieItems && !lEstEnConsultation;
                case exports.TypeDroits.competence.avecValidationCompetences:
                    return this._droits.AvecValidationCompetences && !lEstEnConsultation;
                case exports.TypeDroits.agenda.avecSaisieAgenda:
                    return this._droits.AvecSaisieAgenda && !lEstEnConsultation;
                case exports.TypeDroits.actualite.avecSaisieActualite:
                    return this._droits.AvecSaisieActualite && !lEstEnConsultation;
                case exports.TypeDroits.communication.avecPublicationPageEtablissement:
                    return this._droits.avecPublicationPageEtablissement && !lEstEnConsultation;
                case exports.TypeDroits.listeDiffusion.avecPublication:
                    return this._droits.avecPublicationListeDiffusion && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersIntervenant:
                    return this._droits.avecSaisieDocumentsCasiersIntervenant && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecSaisieDocumentsCasiersResponsable:
                    return this._droits.avecSaisieDocumentsCasiersResponsable && !lEstEnConsultation;
                case exports.TypeDroits.casierNumerique.avecAccesALaListeDesDocumentEleve:
                    return this._droits.avecAccesALaListeDesDocumentEleve;
                case exports.TypeDroits.dossierVS.creerDossiersVS:
                    return this._droits.CreerDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.modifierDossiersVS:
                    return this._droits.ModifierDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.saisieMotifsDossiersVS:
                    return this._droits.SaisieMotifsDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.publierDossiersVS:
                    return this._droits.PublierDossiersVS && !lEstEnConsultation;
                case exports.TypeDroits.dossierVS.consulterMemosEleve:
                    return this._droits.ConsulterMemosEleve;
                case exports.TypeDroits.dossierVS.saisirMemos:
                    return this._droits.SaisirMemos && !lEstEnConsultation;
                case exports.TypeDroits.decrochageScolaire.acces:
                    return this._droits.accesDecrochage;
                case exports.TypeDroits.decrochageScolaire.suivi:
                    return this._droits.suiviDecrochage && !lEstEnConsultation;
                case exports.TypeDroits.dispenses.saisie:
                    return this._droits.avecSaisieDispense && !lEstEnConsultation;
                case exports.TypeDroits.incidents.acces:
                    return this._droits.incidents.acces;
                case exports.TypeDroits.incidents.saisie:
                    return this._droits.incidents.saisie && !lEstEnConsultation;
                case exports.TypeDroits.incidents.uniquementMesIncidentsSignales:
                    return this._droits.incidents.uniquementMesIncidentsSignales;
                case exports.TypeDroits.incidents.publier:
                    return this._droits.incidents.publier && !lEstEnConsultation;
                case exports.TypeDroits.punition.avecPublicationPunitions:
                    return this._droits.AvecPublicationPunitions;
                case exports.TypeDroits.punition.acces:
                    return this._droits.avecAccesPunitions;
                case exports.TypeDroits.punition.saisie:
                    return this._droits.avecSaisiePunitions && !lEstEnConsultation;
                case exports.TypeDroits.creerMotifIncidentPunitionSanction:
                    return this._droits.avecCreerMotifIncidentPunitionSanction && !lEstEnConsultation;
                case exports.TypeDroits.punition.avecRecapPunitions:
                    return this._droits.avecRecapPunitions;
                case exports.TypeDroits.punition.avecRecapSanctions:
                    return this._droits.avecRecapSanctions;
                case exports.TypeDroits.stage.autoriserEditionToutesOffresStages:
                    return this._droits.autoriserEditionToutesOffresStages && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.avecSaisieCahierDeTexte:
                    return this._droits.avecSaisieCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.creerCategoriesDeCahierDeTexte:
                    return this._droits.creerCategoriesDeCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.avecSaisiePieceJointe:
                    return this._droits.avecSaisiePieceJointeCahierDeTexte && !lEstEnConsultation;
                case exports.TypeDroits.cahierDeTexte.tailleMaxPieceJointe:
                    return Math.min(this._droits.tailleMaxPieceJointeCahierDeTexte, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.notation.avecSaisieDevoirs:
                    return this._droits.AvecSaisieDevoirs && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieIdentifiant:
                    return this._droits.compte.avecSaisieIdentifiant && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieMotDePasse:
                    return this._droits.compte.avecSaisieMotDePasse && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieMotDePasseEleve:
                    return this._droits.compte.avecSaisieMotDePasseEleve && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecInformationsPersonnelles:
                    return this._droits.compte.avecInformationsPersonnelles;
                case exports.TypeDroits.compte.avecSaisieInfosPersoCoordonnees:
                    return this._droits.compte.avecSaisieInfosPersoCoordonnees && !lEstEnConsultation;
                case exports.TypeDroits.compte.avecSaisieInfosPersoAutorisations:
                    return this._droits.compte.avecSaisieInfosPersoAutorisations && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTravauxIntendance:
                    return this._droits.intendance.avecDemandeTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTravauxIntendance:
                    return this._droits.intendance.uniquementMesTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTravauxIntendance:
                    return this._droits.intendance.avecExecutionTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionTravauxIntendance:
                    return this._droits.intendance.avecGestionTravauxIntendance && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTachesSecretariat:
                    return this._droits.intendance.avecDemandeTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTachesSecretariat:
                    return this._droits.intendance.uniquementMesTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTachesSecretariat:
                    return this._droits.intendance.avecExecutionTachesSecretariat && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeTachesInformatique:
                    return this._droits.intendance.avecDemandeTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesTachesInformatique:
                    return this._droits.intendance.uniquementMesTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionTachesInformatique:
                    return this._droits.intendance.avecExecutionTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionTachesInformatique:
                    return this._droits.intendance.avecGestionTachesInformatique && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecDemandeCommandes:
                    return this._droits.intendance.avecDemandeCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.uniquementMesCommandes:
                    return this._droits.intendance.uniquementMesCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecExecutionCommandes:
                    return this._droits.intendance.avecExecutionCommandes && !lEstEnConsultation;
                case exports.TypeDroits.intendance.avecGestionCommandes:
                    return this._droits.intendance.avecGestionCommandes && !lEstEnConsultation;
                case exports.TypeDroits.services.avecCreationSousServices:
                    return this._droits.services.avecCreationSousServices && !lEstEnConsultation;
                case exports.TypeDroits.services.avecModificationCoefGeneral:
                    return this._droits.services.avecModificationCoefGeneral && !lEstEnConsultation;
                case exports.TypeDroits.trombinoscope.autoriseAConsulterPhotosDeTousLesEleves:
                    return this._droits.autoriseAConsulterPhotosDeTousLesEleves;
                case exports.TypeDroits.forum.avecCreationSujetForum:
                    return this._droits.avecCreationSujetForum;
                case exports.TypeDroits.forum.avecModificationForumAPosteriori:
                    return this._droits.avecModificationForumAPosteriori;
                case exports.TypeDroits.avecAccesRemplacementsProfs:
                    return this._droits.avecAccesRemplacementsProfs;
                case exports.TypeDroits.voirAbsencesEtRemplacementsProfs:
                    return this._droits.voirAbsencesEtRemplacementsProfs;
                case exports.TypeDroits.sePorterVolontaireRemplacement:
                    return this._droits.sePorterVolontaireRemplacement;
                case exports.TypeDroits.avecSaisieAppreciationsGenerales:
                    return this._droits.avecSaisieAppreciationsGenerales && !lEstEnConsultation;
                case exports.TypeDroits.assistantSaisieAppreciations:
                    return this._droits.AssistantSaisieAppreciations && !lEstEnConsultation;
                case exports.TypeDroits.tailleMaxDocJointEtablissement:
                    return Math.min(this._droits.tailleMaxDocJointEtablissement, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.tailleMaxRenduTafEleve:
                    return Math.min(this._droits.tailleMaxRenduTafEleve, this.get(exports.TypeDroits.tailleMaxUpload));
                case exports.TypeDroits.tailleTravailAFaire:
                    return this._droits.tailleTravailAFaire;
                case exports.TypeDroits.tailleCirconstance:
                    return this._droits.tailleCirconstance;
                case exports.TypeDroits.tailleCommentaire:
                    return this._droits.tailleCommentaire;
                case exports.TypeDroits.autoriserImpressionBulletinReleveBrevet:
                    return this._droits.autoriserImpressionBulletinReleveBrevet;
                case exports.TypeDroits.avecDroitDeconnexionMessagerie:
                    return this._droits.avecDroitDeconnexionMessagerie;
                case exports.TypeDroits.estDirecteur:
                    return this._droits.estDirecteur;
                case exports.TypeDroits.estEnseignant:
                    return this._droits.estEnseignant;
                case exports.TypeDroits.fonctionnalites.gestionNotation:
                    return this._droitsSession.fonctionnalites.gestionNotation;
                case exports.TypeDroits.fonctionnalites.gestionCompetences:
                    return this._droitsSession.fonctionnalites.gestionCompetences;
                case exports.TypeDroits.fonctionnalites.gestionBrevet:
                    return this._droitsSession.fonctionnalites.gestionBrevet;
                case exports.TypeDroits.fonctionnalites.gestionProgrammesBO:
                    return this._droitsSession.fonctionnalites.gestionProgrammesBO;
                case exports.TypeDroits.fonctionnalites.gestionStages:
                    return this._droitsSession.fonctionnalites.gestionStages;
                case exports.TypeDroits.fonctionnalites.gestionIPR:
                    return this._droitsSession.fonctionnalites.gestionIPR;
                case exports.TypeDroits.fonctionnalites.appelSaisirMotifJustifDAbsence:
                    return this._droitsSession.fonctionnalites.appelSaisirMotifJustifDAbsence;
                case exports.TypeDroits.fonctionnalites.saisieEtendueAbsenceDepuisAppel:
                    return this._droitsSession.fonctionnalites.saisieEtendueAbsenceDepuisAppel;
                case exports.TypeDroits.fonctionnalites.gestionTwitter:
                    return this._droitsSession.fonctionnalites.gestionTwitter;
                case exports.TypeDroits.fonctionnalites.gestionBulletinClasse:
                    return this._droitsSession.fonctionnalites.gestionBulletinClasse;
                case exports.TypeDroits.fonctionnalites.gestionNathan:
                    return this._droitsSession.fonctionnalites.gestionNathan;
                case exports.TypeDroits.fonctionnalites.gestionPunitions:
                    return this._droitsSession.fonctionnalites.gestionPunitions;
                case exports.TypeDroits.fonctionnalites.gestionCDT:
                    return this._droitsSession.fonctionnalites.gestionCDT;
                case exports.TypeDroits.fonctionnalites.gestionPeriodeNotation:
                    return this._droitsSession.fonctionnalites.gestionPeriodeNotation;
                case exports.TypeDroits.fonctionnalites.gestionInfirmerie:
                    return this._droitsSession.fonctionnalites.gestionInfirmerie;
                case exports.TypeDroits.fonctionnalites.gestionPermanence:
                    return this._droitsSession.fonctionnalites.gestionPermanence;
                case exports.TypeDroits.fonctionnalites.gestionAbsencesDemiPension:
                    return this._droitsSession.fonctionnalites.gestionAbsencesDemiPension;
                case exports.TypeDroits.fonctionnalites.gestionAbsencesInternat:
                    return this._droitsSession.fonctionnalites.gestionAbsencesInternat;
                case exports.TypeDroits.fonctionnalites.gestionEtendueEleves:
                    return this._droitsSession.fonctionnalites.gestionEtendueEleves;
                case exports.TypeDroits.fonctionnalites.gestionEleves:
                    return this._droitsSession.fonctionnalites.gestionEleves;
                case exports.TypeDroits.fonctionnalites.gestionPersonnels:
                    return this._droitsSession.fonctionnalites.gestionPersonnels;
                case exports.TypeDroits.fonctionnalites.forcerARInfos:
                    return this._droitsSession.fonctionnalites.forcerARInfos;
                case exports.TypeDroits.fonctionnalites.gestionSondageAnonyme:
                    return this._droitsSession.fonctionnalites.gestionSondageAnonyme;
                case exports.TypeDroits.fonctionnalites.gestionAbsenceDJParUtilisateur:
                    return this._droitsSession.fonctionnalites.gestionAbsenceDJParUtilisateur;
                case exports.TypeDroits.fonctionnalites.attestationEtendue:
                    return this._droitsSession.fonctionnalites.attestationEtendue;
                case exports.TypeDroits.fonctionnalites.afficherProjetsAccompagnement:
                    return this._droitsSession.fonctionnalites.afficherProjetsAccompagnement;
                case exports.TypeDroits.fonctionnalites.gestionARBulletins:
                    return this._droitsSession.fonctionnalites.gestionARBulletins;
                case exports.TypeDroits.fonctionnalites.importExportEducationNationale:
                    return this._droitsSession.fonctionnalites.importExportEducationNationale;
                case exports.TypeDroits.fonctionnalites.avecTransformationFluxFichier:
                    return this._droitsSession.fonctionnalites.avecTransformationFluxFichier;
                default:
                    ;return false;
                }
            }
            init() {
                this._droits = {
                    AssistantSaisieAppreciations: false,
                    VoirTousLesEleves: false,
                    ConsulterIdentiteEleve: false,
                    ConsulterFichesResponsables: false,
                    ConsulterPhotosEleves: false,
                    avecSaisieParcoursPedagogique: false,
                    AvecAffectationElevesGroupesNonGAEV: false,
                    AvecAffectationElevesGroupesGAEV: false,
                    AvecSaisieProjetIndividuel: false,
                    AvecSaisieAttestations: false,
                    consulterDonneesAdministrativesAutresEleves: true,
                    AutoriserCommunicationsToutesClasses: false,
                    AvecDiscussion: false,
                    discussionDesactiveeSelonHoraire: false,
                    messageDiscussionDesactiveeSelonHoraire: '',
                    discussionInterdit: false,
                    AvecDiscussionPersonnels: false,
                    AvecDiscussionProfesseurs: false,
                    AvecDiscussionParents: false,
                    AvecDiscussionEleves: false,
                    avecMessageInstantane: false,
                    AvecContactVS: false,
                    lancerAlertesPPMS: false,
                    estDestinataireChat: false,
                    AvecDiscussionAvancee: false,
                    DomaineRecapitulatifAbsences: new TypeDomaine_1.TypeDomaine(),
                    AvecSaisieAppelEtVS: false,
                    AvecSaisieAppel: false,
                    AvecSaisieCours: false,
                    AvecSaisieAbsenceOuverte: false,
                    AvecSaisieHorsCours: false,
                    AvecSaisieSurGrille: false,
                    AvecSaisieSurGrilleAppelProf: false,
                    AvecSaisieAbsence: false,
                    AvecSaisieRetard: false,
                    AvecSaisiePassageInfirmerie: false,
                    avecAnciennesFeuilleDAppel: false,
                    AvecSaisieExclusion: false,
                    AvecSaisiePunition: false,
                    AvecSaisieObservation: false,
                    AvecConsultationDefautCarnet: false,
                    AvecSaisieDefautCarnet: false,
                    AvecSaisieObservationsParents: false,
                    AvecSaisieEncouragements: false,
                    AvecAccesAuxEvenementsAutresCours: false,
                    AvecSaisieAbsencesToutesPermanences: false,
                    DateSaisieAbsence: null,
                    AvecDeclarerUneAbsence: false,
                    AvecDeclarerDispensePonctuelle: false,
                    AvecDeclarerDispenseLongue: false,
                    AvecSaisieAbsencesGrilleAbsencesRepas: false,
                    AvecSaisieAbsencesGrilleAbsencesInternat: false,
                    AvecSuiviAbsenceRetard: false,
                    AvecSaisieEvaluations: false,
                    AvecSaisieItems: false,
                    AvecValidationCompetences: false,
                    AvecSaisieAgenda: false,
                    AvecSaisieActualite: false,
                    avecPublicationPageEtablissement: false,
                    avecPublicationListeDiffusion: false,
                    avecSaisieDocumentsCasiersIntervenant: false,
                    avecSaisieDocumentsCasiersResponsable: false,
                    avecAccesALaListeDesDocumentEleve: false,
                    CreerDossiersVS: false,
                    ModifierDossiersVS: false,
                    SaisieMotifsDossiersVS: false,
                    PublierDossiersVS: false,
                    ConsulterMemosEleve: false,
                    SaisirMemos: false,
                    accesDecrochage: false,
                    suiviDecrochage: false,
                    avecSaisieDispense: false,
                    incidents: {
                        acces: false,
                        saisie: false,
                        publier: false
                    },
                    AvecPublicationPunitions: false,
                    avecAccesPunitions: false,
                    avecSaisiePunitions: false,
                    avecRecapPunitions: false,
                    avecRecapSanctions: false,
                    avecCreerMotifIncidentPunitionSanction: false,
                    avecAccesRemplacementsProfs: false,
                    voirAbsencesEtRemplacementsProfs: false,
                    sePorterVolontaireRemplacement: false,
                    avecSaisieAppreciationsGenerales: false,
                    cours: {
                        domaineConsultationEDT: new TypeDomaine_1.TypeDomaine(),
                        avecReservationCreneauxLibres: false,
                        modifierElevesDetachesSurCoursDeplaceCreneauLibre: false,
                        modifierMatieres: false,
                        modifierMatieresCoursEPIEtAP: false,
                        modifierClasses: false,
                        modifierProfesseurs: false,
                        modifierSalles: false,
                        modifierMateriels: false,
                        creerCours: false,
                        creerCoursPermanenceFeuilleAppel: false,
                        deplacerCours: false,
                        modificationNonLimiteAuxSemaine: false,
                        domaineModificationCours: new TypeDomaine_1.TypeDomaine(),
                        estGestionnaireSalle: false,
                        estGestionnaireMateriel: false,
                        avecMateriel: false,
                        avecFicheCoursConseil: false,
                        masquerPartiesDeClasse: false,
                        afficherElevesDetachesDansCours: false
                    },
                    autoriserEditionToutesOffresStages: false,
                    avecSaisieCahierDeTexte: false,
                    creerCategoriesDeCahierDeTexte: false,
                    avecSaisiePieceJointeCahierDeTexte: false,
                    tailleMaxPieceJointeCahierDeTexte: 0,
                    AvecSaisieDevoirs: false,
                    tailleMaxDocJointEtablissement: 0,
                    tailleMaxRenduTafEleve: 0,
                    tailleTravailAFaire: 1000,
                    tailleCirconstance: 1000,
                    tailleCommentaire: 1000,
                    compte: {
                        avecSaisieIdentifiant: false,
                        avecSaisieMotDePasse: false,
                        avecSaisieMotDePasseEleve: false,
                        avecInformationsPersonnelles: false,
                        avecSaisieInfosPersoCoordonnees: false,
                        avecSaisieInfosPersoAutorisations: false
                    },
                    intendance: {
                        avecDemandeTravauxIntendance: false,
                        uniquementMesTravauxIntendance: false,
                        avecExecutionTravauxIntendance: false,
                        avecGestionTravauxIntendance: false,
                        avecDemandeTachesSecretariat: false,
                        uniquementMesTachesSecretariat: false,
                        avecExecutionTachesSecretariat: false,
                        avecDemandeTachesInformatique: false,
                        uniquementMesTachesInformatique: false,
                        avecExecutionTachesInformatique: false,
                        avecGestionTachesInformatique: false,
                        avecDemandeCommandes: false,
                        uniquementMesCommandes: false,
                        avecExecutionCommandes: false,
                        avecGestionCommandes: false
                    },
                    services: {
                        avecCreationSousServices: false,
                        avecModificationCoefGeneral: false
                    },
                    autoriseAConsulterPhotosDeTousLesEleves: false,
                    avecCreationSujetForum: false,
                    avecModificationForumAPosteriori: false,
                    autoriserImpressionBulletinReleveBrevet: false,
                    avecDroitDeconnexionMessagerie: false,
                    estDirecteur: false,
                    estEnseignant: false
                };
            }
            initDroitsSession() {
                this._droitsSession = {
                    fonctionnalites: {
                        gestionNotation: true,
                        gestionCompetences: true,
                        gestionBrevet: true,
                        gestionProgrammesBO: true,
                        gestionStages: true,
                        gestionIPR: true,
                        appelSaisirMotifJustifDAbsence: false,
                        gestionTwitter: false,
                        gestionBulletinClasse: true,
                        gestionNathan: true,
                        gestionPunitions: true,
                        gestionInfirmerie: true,
                        gestionPermanence: true,
                        gestionAbsencesDemiPension: true,
                        gestionAbsencesInternat: true,
                        gestionEtendueEleves: true,
                        gestionEleves: true,
                        gestionPersonnels: true,
                        forcerARInfos: false,
                        gestionSondageAnonyme: true,
                        gestionAbsenceDJParUtilisateur: false,
                        attestationEtendue: true,
                        afficherProjetsAccompagnement: true,
                        saisieEtendueAbsenceDepuisAppel: false,
                        importExportEducationNationale: true,
                        gestionCDT: true,
                        gestionPeriodeNotation: true,
                        gestionARBulletins: false,
                        avecTransformationFluxFichier: false
                    }
                };
            }
            chargerJSON(aJSON) {
                if (aJSON && aJSON.autorisationsSession) {
                    this.initDroitsSession();
                    $.extend(true, this._droitsSession, aJSON.autorisationsSession);
                }
                if (aJSON && aJSON.autorisations) {
                    this._autorisationsChargees = true;
                    this.init();
                    $.extend(true, this._droits, aJSON.autorisations);
                    this._droits.listeDatesSaisieAbsence = new ObjetListeElements_1.ObjetListeElements();
                    for (let I = 0; this._droits.DateSaisieAbsence && (I < this._droits.DateSaisieAbsence.length); I++) {
                        const lDate = new ObjetElement_1.ObjetElement();
                        lDate.Date = aJSON.autorisations.DateSaisieAbsence[I];
                        lDate.Libelle = ObjetDate_1.GDate.formatDate(lDate.Date, '%JJJJ %JJ %MMM');
                        this._droits.listeDatesSaisieAbsence.addElement(lDate);
                    }
                }
            }
        }
        exports.ObjetDroitsPN = ObjetDroitsPN;
    },
    fn: 'objetdroitspn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Callback = void 0;
        class Callback {
            constructor(aPere, aEvenement, aIdentifiant) {
                this.pere = aPere;
                this.evenement = aEvenement;
                this.identifiant = aIdentifiant;
            }
            appel(...aParams) {
                if (this.pere && this.evenement) {
                    return this.evenement.call(this.pere, ...aParams);
                }
            }
        }
        exports.Callback = Callback;
    },
    fn: 'callback.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteConsultation = exports.ObjetRequeteSaisie = exports.ObjetRequeteJSON = exports.utils = exports.EGenreReponseSaisie = exports.c_constantesJSON = void 0;
        require("Divers");
        const Callback_1 = require("Callback");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        var c_constantesJSON;
        (function(c_constantesJSON) {
            c_constantesJSON["noeudJSON"] = "D";
            c_constantesJSON["Signature"] = "Signature";
            c_constantesJSON["SignatureAttente"] = "_SignatureAttente_";
            c_constantesJSON["Donnees"] = "data";
        }
        )(c_constantesJSON || (exports.c_constantesJSON = c_constantesJSON = {}));
        var EGenreReponseSaisie;
        (function(EGenreReponseSaisie) {
            EGenreReponseSaisie["erreur"] = "reponseSaisie_erreur";
            EGenreReponseSaisie["annulation"] = "reponseSaisie_annulation";
            EGenreReponseSaisie["succes"] = "reponseSaisie_succes";
        }
        )(EGenreReponseSaisie || (exports.EGenreReponseSaisie = EGenreReponseSaisie = {}));
        const utils = {
            getIdentNotification(aIdent) {
                return 'notificationsRequete_' + aIdent;
            }
        };
        exports.utils = utils;
        Invocateur_1.Invocateur.abonner('deserialisation_notificationsPolling', (aJSONRacine) => {
            const lJSON = aJSONRacine[c_constantesJSON.Signature];
            if (lJSON) {
                if (lJSON.ModeExclusif !== undefined) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, lJSON.ModeExclusif);
                }
                if (ObjetRequeteJSON.modules.deserialiserPolling) {
                    ObjetRequeteJSON.modules.deserialiserPolling(lJSON, aJSONRacine);
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
            }
        }
        );
        class ObjetRequeteJSON {
            constructor(aPere, aEvenementSurReussite, aEvenementSurEchec) {
                this.communication = GApplication.getCommunication();
                this.setOptions(null);
                const lSelf = this;
                const lPere = aPere;
                this.callbackReussite = new Callback_1.Callback(lPere || {},( (...aParams) => {
                    if (lPere && lPere.isDestroyed && lPere.isDestroyed()) {
                        IE.log.addLog('callbackReussite avec un pere detruit');
                        return;
                    }
                    const lResult = aEvenementSurReussite ? aEvenementSurReussite.apply(aPere, aParams) : null
                      , lResultPromesse = lSelf._executionFonctionPromesse(lSelf.reussitePromesse, aParams);
                    lSelf._refreshHTML(!!aEvenementSurReussite);
                    return aEvenementSurReussite ? lResult : lResultPromesse;
                }
                ));
                if (!this.estUneSaisie) {
                    this.callbackEchec = new Callback_1.Callback(lPere || {},( (...aParams) => {
                        if (lPere && lPere.isDestroyed && lPere.isDestroyed()) {
                            IE.log.addLog('callbackEchec avec un pere detruit');
                            return;
                        }
                        const lResult = aEvenementSurEchec ? aEvenementSurEchec.apply(aPere, aParams) : null
                          , lResultPromesse = lSelf._executionFonctionPromesse(lSelf.echecPromesse, aParams);
                        lSelf._refreshHTML(!!aEvenementSurReussite);
                        return aEvenementSurEchec ? lResult : lResultPromesse;
                    }
                    ));
                }
                this.reussitePromesse = null;
                this.echecPromesse = null;
                this._jsonRacineParametres = {};
                this.JSON = {};
                if (ObjetRequeteJSON.modules.modifierRechercheSignature) {
                    this.modifierRechercheSignature = ObjetRequeteJSON.modules.modifierRechercheSignature;
                }
                if (ObjetRequeteJSON.modules.initialiser) {
                    const lFunc = (aJSONSignature) => {
                        this._jsonRacineParametres[c_constantesJSON.Signature] = aJSONSignature;
                    }
                    ;
                    ObjetRequeteJSON.modules.initialiser(lFunc);
                }
                if (ObjetRequeteJSON.modules.factoryModuleUploadCloud) {
                    this.moduleUploadCloud = ObjetRequeteJSON.modules.factoryModuleUploadCloud();
                }
            }
            static declarerModules(aModules) {
                Object.assign(ObjetRequeteJSON.modules, aModules);
            }
            setOptions(aOptions) {
                if (!this.options) {
                    this.options = {
                        avecRefreshHTML: true,
                        avecControleModeExclusif: false,
                        messageDetail: '',
                        gererMessageErreur: null,
                        sansBlocageInterface: false,
                        titreEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif'),
                        messageEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SaisieImpossibleConsultation')
                    };
                }
                Object.assign(this.options, aOptions);
                return this;
            }
            _reponseRequete(aJSONRacine, aErreurCommunication) {
                this._jsonRacine = aJSONRacine || {};
                this.JSONReponse = {};
                this.JSONSignature = {};
                if (aErreurCommunication) {
                    this.JSONReponse.erreurCommunication = aErreurCommunication;
                }
                if (this._jsonRacine[c_constantesJSON.Donnees]) {
                    this.JSONReponse = this._jsonRacine[c_constantesJSON.Donnees];
                }
                if (this._jsonRacine[c_constantesJSON.Signature]) {
                    this.JSONSignature = this._jsonRacine[c_constantesJSON.Signature];
                }
                this.traiterReponseRequete(aErreurCommunication);
                this.apresReponseRequete();
            }
            traiterReponseRequete(aErreurCommunication) {}
            apresReponseRequete() {}
            serialiserJSON() {
                if (this._jsonRacineParametres) {
                    if (this.JSON && !$.isEmptyObject(this.JSON)) {
                        this._jsonRacineParametres[c_constantesJSON.Donnees] = this.JSON;
                    }
                }
            }
            async appelAsynchrone() {
                if (this.options.avecControleModeExclusif && GApplication.getModeExclusif()) {
                    const lPromiseMessage = GApplication.getMessage().afficher({
                        titre: this.options.titreEchecModeExclusif,
                        message: this.options.messageEchecModeExclusif
                    });
                    return Promise.reject({
                        modeExclusif: true,
                        promiseMessage: lPromiseMessage
                    });
                }
                if (!this._jsonRacineParametres) {
                    IE.log.addLog('La requete n\'a pas de json definit !', null, IE.log.genre.Avertissement);
                }
                if (this.moduleUploadCloud && this.moduleUploadCloud.actif()) {
                    return this.moduleUploadCloud.lancer().then( () => {
                        return this._serialisationJSONEtEnvoieRequeteSaisie();
                    }
                    );
                }
                return this._serialisationJSONEtEnvoieRequeteSaisie();
            }
            lancerRequete(...aParametres) {
                if (aParametres.length > 0) {
                    Object.assign(this.JSON, aParametres[0]);
                }
                return this.appelAsynchrone();
            }
            addUpload(aParams) {
                this.paramsUpload = aParams;
                if (aParams && aParams.listeDJCloud) {
                    if (this.moduleUploadCloud && this.moduleUploadCloud.setListePJs) {
                        this.moduleUploadCloud.setListePJs(aParams.listeDJCloud);
                    } else {}
                }
                return this;
            }
            deserialiserSignature() {
                if (ObjetRequeteJSON.modules.deserialiserSignature) {
                    ObjetRequeteJSON.modules.deserialiserSignature(this.JSONSignature);
                }
            }
            _refreshHTML(aAvecEvenementSurReussite) {
                if (this.options.avecRefreshHTML) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                    if (!aAvecEvenementSurReussite) {
                        setTimeout( () => {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                        }
                        , 0);
                    }
                }
            }
            _executionFonctionPromesse(aMethodes, aArguments) {
                let lResult;
                if (aMethodes) {
                    if (aArguments.length === 0) {
                        lResult = aMethodes();
                    } else if (aArguments.length === 1) {
                        lResult = aMethodes(aArguments[0]);
                    } else {
                        lResult = aMethodes(Array.prototype.slice.call(aArguments));
                    }
                }
                return lResult;
            }
            _serialisationJSONEtEnvoieRequeteSaisie() {
                return new Promise( (aResolve, aReject) => {
                    this.reussitePromesse = aResolve;
                    this.echecPromesse = aReject;
                    this.serialiserJSON();
                    const lParams = {
                        nom: this.nom,
                        json: this._jsonRacineParametres,
                        callbackPere: this,
                        callbackEvenement: this._reponseRequete,
                        numeroRequete: undefined,
                        messageDetail: this.options.messageDetail,
                        requetePrioritaire: this.options.requetePrioritaire,
                        sansBlocageInterface: !!this.options.sansBlocageInterface,
                        estRequeteDeconnexion: this.options.estRequeteDeconnexion,
                        paramsUpload: this.paramsUpload
                    };
                    this.paramsUpload = null;
                    this.communication.appelFonctionAsynchroneXML(lParams);
                }
                );
            }
        }
        exports.ObjetRequeteJSON = ObjetRequeteJSON;
        ObjetRequeteJSON.modules = {};
        class ObjetRequeteSaisie extends ObjetRequeteJSON {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    avecControleModeExclusif: true,
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('requete.validationEnCours'),
                    titreEchecValidation: ObjetTraduction_1.GTraductions.getValeur('requete.validationEchec'),
                    titreAnnulationValidation: '',
                    afficherMessageErreur: true
                });
            }
            actionApresRequete(aGenreReponse) {
                this.callbackReussite.appel({
                    JSONRapportSaisie: this.JSONRapportSaisie,
                    JSONReponse: this.JSONReponse,
                    genreReponse: aGenreReponse,
                    messageErreur: this.messageErreur,
                    promiseMessage: this.promiseMessage
                });
            }
            traiterReponseRequete(aErreurCommunication) {
                this.actionApresRequete(this.traiterReponseSaisie(aErreurCommunication));
            }
            _getMessageErreurSaisie(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                let lDetails = '';
                if (aMessagesErreurRapportSaisie && Array.isArray(aMessagesErreurRapportSaisie)) {
                    lDetails = aMessagesErreurRapportSaisie.join('\n');
                }
                let lTitre = aTitre || '';
                if (!lTitre) {
                    switch (aReponse) {
                    case EGenreReponseSaisie.erreur:
                        lTitre = this.options.titreEchecValidation || '';
                        break;
                    case EGenreReponseSaisie.annulation:
                        lTitre = this.options.titreAnnulationValidation || '';
                        break;
                    }
                }
                if (lTitre || lDetails) {
                    this.messageErreur = {
                        titre: lTitre,
                        message: lDetails || ''
                    };
                }
            }
            traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                this._getMessageErreurSaisie(aMessagesErreurRapportSaisie, aReponse, aTitre);
                if (this.messageErreur && this.options.afficherMessageErreur) {
                    this.promiseMessage = GApplication.getMessage().afficher(this.messageErreur);
                }
            }
            traiterReponseSaisie(aErreurCommunication) {
                let lReponse = aErreurCommunication ? EGenreReponseSaisie.erreur : EGenreReponseSaisie.succes;
                if (!this.JSONRapportSaisie) {
                    this.JSONRapportSaisie = (this._jsonRacine && this._jsonRacine.RapportSaisie ? this._jsonRacine.RapportSaisie : {});
                }
                let lMessagesErreurRapportSaisie = !this.JSONRapportSaisie ? null : this.JSONRapportSaisie._messagesErreur_ ? this.JSONRapportSaisie._messagesErreur_ : this.JSONRapportSaisie._erreurSaisie_ ? [] : null;
                if (!lMessagesErreurRapportSaisie) {
                    lMessagesErreurRapportSaisie = this.JSONSignature && this.JSONSignature.Erreur ? this.JSONSignature.MessageErreur ? [this.JSONSignature.MessageErreur] : [] : null;
                }
                const lTitreErreur = !this.JSONRapportSaisie ? null : this.JSONRapportSaisie.titre_Messages_Erreur || '';
                if (this.reponseEnErreur()) {
                    lReponse = EGenreReponseSaisie.erreur;
                } else if (lMessagesErreurRapportSaisie) {
                    lReponse = EGenreReponseSaisie.annulation;
                }
                if (lMessagesErreurRapportSaisie) {
                    this.traiterReponseSaisieMessage(lMessagesErreurRapportSaisie, lReponse, lTitreErreur);
                }
                this.deserialiserSignature();
                if (!lMessagesErreurRapportSaisie && this.options.avecControleModeExclusif && GApplication.getModeExclusif()) {
                    lReponse = EGenreReponseSaisie.annulation;
                    this.messageErreur = {
                        titre: this.options.titreEchecModeExclusif,
                        message: this.options.messageEchecModeExclusif
                    };
                    if (this.options.afficherMessageErreur) {
                        this.promiseMessage = GApplication.getMessage().afficher(this.messageErreur);
                    }
                }
                return lReponse;
            }
            reponseEnErreur() {
                return (this.JSONRapportSaisie && this.JSONRapportSaisie._erreurSaisie_) || (this.JSONSignature && this.JSONSignature.Erreur);
            }
        }
        exports.ObjetRequeteSaisie = ObjetRequeteSaisie;
        ObjetRequeteSaisie.prototype.estUneSaisie = true;
        class ObjetRequeteConsultation extends ObjetRequeteJSON {
            constructor(...aParams) {
                super(...aParams);
                this._evenementEchec = aParams[2];
                this.setOptions({
                    gererMessageErreur: function(aMessage) {
                        const lMessage = aMessage && (aMessage.length > 0) ? aMessage : ObjetTraduction_1.GTraductions.getValeur('requete.erreur');
                        try {
                            return GApplication.getMessage().afficher({
                                message: lMessage
                            });
                        } catch (e) {}
                    }
                });
            }
            traiterReponseRequete(aErreurCommunication) {
                if (!aErreurCommunication) {
                    this.deserialiserSignature();
                }
                if (this.callbackEchec.evenement && this.JSONSignature && this.JSONSignature.Erreur) {
                    this.traiterReponseEchecConsultation();
                } else {
                    this.actionApresRequete();
                }
            }
            traiterReponseEchecConsultation() {
                const lMessage = this.JSONSignature && this.JSONSignature.MessageErreur ? this.JSONSignature.MessageErreur : '';
                IE.log.addLog('Erreur de consultation controlé avec le message : ' + lMessage, null, IE.log.genre.Avertissement);
                let lParametresEchec = lMessage;
                if (!this._evenementEchec) {
                    if (this.options.gererMessageErreur) {
                        lParametresEchec = {
                            promiseMessage: this.options.gererMessageErreur(lMessage),
                            message: lMessage
                        };
                    }
                }
                if (this.callbackEchec.appel(lParametresEchec)) {
                    this.actionApresRequete();
                }
            }
            actionApresRequete() {
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteConsultation = ObjetRequeteConsultation;
    },
    fn: 'objetrequetejson.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Requetes = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const lCollectionRequetes = {};
        const lRequetes = function(aIdentRequete, ...aParams) {
            const lClasseRequete = lCollectionRequetes[aIdentRequete];
            if (!lClasseRequete) {
                return {
                    lancerRequete: function() {}
                };
            }
            const lInstanceRequete = new lClasseRequete(...aParams);
            lInstanceRequete.nom = aIdentRequete;
            return lInstanceRequete;
        };
        exports.Requetes = lRequetes;
        lRequetes.inscrire = function(aIdentRequete, aClasse) {
            if (!aIdentRequete) {
                return this;
            }
            if (!aClasse) {
                return this;
            }
            if (lCollectionRequetes[aIdentRequete]) {
                if (lCollectionRequetes[aIdentRequete] !== aClasse) {}
                return this;
            }
            if (!(aClasse === ObjetRequeteJSON_1.ObjetRequeteConsultation || aClasse === ObjetRequeteJSON_1.ObjetRequeteSaisie)) {
                aClasse.prototype.nom = aIdentRequete;
            }
            lCollectionRequetes[aIdentRequete] = aClasse;
        }
        ;
        lRequetes.collection = lCollectionRequetes;
    },
    fn: 'collectionrequetes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.IELocalStorage = void 0;
        let lLocalStorage = null;
        try {
            lLocalStorage = window.localStorage || (window.globalStorage ? window.globalStorage[window.location.hostname] : null);
            if (lLocalStorage.setItem) {
                lLocalStorage.setItem('_bidon_', '1');
                lLocalStorage.removeItem('_bidon_');
            }
        } catch (e) {
            lLocalStorage = null;
        }
        exports.IELocalStorage = {
            actif: !!lLocalStorage,
            getItem(aCle) {
                if (lLocalStorage) {
                    try {
                        return lLocalStorage.getItem ? lLocalStorage.getItem(aCle) : lLocalStorage[aCle];
                    } catch (e) {}
                }
                return null;
            },
            getItemJSON(aCle) {
                const lResult = this.getItem(aCle);
                let lJSON = null;
                try {
                    lJSON = lResult ? JSON.parse(lResult) : null;
                } catch (e) {
                    lJSON = null;
                }
                return lJSON;
            },
            setItem(aCle, aValeur) {
                if (lLocalStorage) {
                    try {
                        if (lLocalStorage.setItem) {
                            lLocalStorage.setItem(aCle, aValeur);
                        } else {
                            lLocalStorage[aCle] = aValeur;
                        }
                    } catch (e) {}
                }
            },
            setItemJSON(aCle, aJSON) {
                let lChaineJSON = '';
                try {
                    lChaineJSON = JSON.stringify(aJSON);
                } catch (e) {}
                this.setItem(aCle, lChaineJSON || '');
            },
            removeItem(aCle) {
                if (lLocalStorage) {
                    try {
                        if (lLocalStorage.removeItem) {
                            lLocalStorage.removeItem(aCle);
                        } else {
                            lLocalStorage[aCle] = null;
                        }
                    } catch (e) {}
                }
            }
        };
    },
    fn: 'localstorage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireIdentifiantNavigateur = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const c_marqueur = '_idNavIndex_';
        exports.UtilitaireIdentifiantNavigateur = {
            get() {
                try {
                    return LocalStorage_1.IELocalStorage.getItem(c_marqueur);
                } catch (e) {
                    return '';
                }
            },
            set(aValue) {
                try {
                    LocalStorage_1.IELocalStorage.setItem(c_marqueur, aValue);
                } catch (e) {}
            }
        };
    },
    fn: 'utilitaireidentifiantnavigateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteFonctionParametres = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const UtilitaireIdentifiantNavigateur_1 = require("UtilitaireIdentifiantNavigateur");
        class ObjetRequeteFonctionParametres extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aObjet) {
                this.JSON = {
                    Uuid: aObjet.uuidRSA,
                    identifiantNav: UtilitaireIdentifiantNavigateur_1.UtilitaireIdentifiantNavigateur.get()
                };
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if (this.JSONReponse.identifiantNav) {
                    UtilitaireIdentifiantNavigateur_1.UtilitaireIdentifiantNavigateur.set(this.JSONReponse.identifiantNav);
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteFonctionParametres = ObjetRequeteFonctionParametres;
        CollectionRequetes_1.Requetes.inscrire('FonctionParametres', ObjetRequeteFonctionParametres);
    },
    fn: 'objetrequetefonctionparametres.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCycles = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetDate_1 = require("ObjetDate");
        const C_JourCycleHorsGrille = -1;
        const C_MaxJoursParSemaine = 7;
        const {C_MaxDomaineCycle} = TypeDomaine_1.TypeDomaine;
        const C_NbJoursCaches = C_MaxDomaineCycle * 7 + 21;
        var EnumRecherche;
        (function(EnumRecherche) {
            EnumRecherche[EnumRecherche["strict"] = 0] = "strict";
            EnumRecherche[EnumRecherche["autoriserSuivants"] = 1] = "autoriserSuivants";
            EnumRecherche[EnumRecherche["autoriserPrecedents"] = 2] = "autoriserPrecedents";
        }
        )(EnumRecherche || (EnumRecherche = {}));
        class ObjetCycles {
            constructor() {
                this.donneesCycles = {
                    premiereDate: null,
                    derniereDate: null,
                    dateDebutPremierCycle: null,
                    joursOuvresParCycle: null,
                    premierJourSemaine: 2,
                    joursOuvres: null,
                    joursFeries: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    cyclesSansFeries: false,
                    cyclesHebdomadaire: true
                };
                this.cache = {
                    datePremierJourOuvre: null,
                    cycleEtIndiceParDate: [],
                    datesAfficheesParCycle: [],
                    bornesCycles: [],
                    nombreCyclesAnneeScolaire: null,
                    domaineFerie: null,
                    indicesJoursOuvres: null
                };
                this.recherche = EnumRecherche;
            }
            init(aParametres) {
                $.extend(this.donneesCycles, aParametres);
                this._calculer();
                return this;
            }
            nombreJoursOuvresParCycle() {
                return this.donneesCycles.joursOuvresParCycle;
            }
            dateDebutPremierCycle() {
                return new Date(this.cache.bornesCycles[1].DateDebut);
            }
            dateFinDernierCycle() {
                return new Date(this.cache.bornesCycles[this.cache.nombreCyclesAnneeScolaire].DateFin);
            }
            dateEnCycleEtJourCycle(aDate, aTypeRecherche) {
                let LDate;
                let LCycleEtIndice = {
                    cycle: -1,
                    indice: C_JourCycleHorsGrille
                };
                let lResult = {
                    trouve: false
                };
                try {
                    LDate = aDate;
                    if (LDate < this.dateDebutPremierCycle()) {
                        if (aTypeRecherche !== ObjetCycles.recherche.autoriserSuivants) {
                            return lResult;
                        }
                        LDate = this.dateDebutPremierCycle();
                    }
                    if (LDate > this.dateFinDernierCycle()) {
                        if (aTypeRecherche !== ObjetCycles.recherche.autoriserPrecedents) {
                            return lResult;
                        }
                        LDate = this.dateFinDernierCycle();
                    }
                    while (LCycleEtIndice.indice === C_JourCycleHorsGrille && LDate >= this.dateDebutPremierCycle() && LDate <= this.dateFinDernierCycle()) {
                        LCycleEtIndice = this.cycleEtIndiceCycleDeDate(LDate);
                        if (LCycleEtIndice.indice === C_JourCycleHorsGrille) {
                            switch (aTypeRecherche) {
                            case ObjetCycles.recherche.autoriserSuivants:
                                LDate = ObjetDate_1.GDate.getJourSuivant(LDate, 1);
                                break;
                            case ObjetCycles.recherche.autoriserPrecedents:
                                LDate = ObjetDate_1.GDate.getJourSuivant(LDate, -1);
                                break;
                            default:
                                return lResult;
                            }
                        }
                    }
                } finally {
                    lResult.cycle = LCycleEtIndice.cycle;
                    lResult.indice = LCycleEtIndice.indice;
                    lResult.trouve = lResult.indice !== C_JourCycleHorsGrille;
                }
                return lResult;
            }
            nombreCyclesAnneeScolaire() {
                return this.cache.nombreCyclesAnneeScolaire;
            }
            cycleDeLaDate(aDate) {
                const LDate = this._getDateBornee(aDate)
                  , lObj = this.cycleEtIndiceCycleDeDate(LDate);
                return lObj ? lObj.cycle : 0;
            }
            dateEnJourCycle(aDate) {
                const lTimeJour = new Date(aDate.getFullYear(),aDate.getMonth(),aDate.getDate()).getTime();
                if (!this._cacheDateEnJourCycle) {
                    this._cacheDateEnJourCycle = {};
                }
                if (!this._cacheDateEnJourCycle[lTimeJour] && this._cacheDateEnJourCycle[lTimeJour] !== 0) {
                    const lResult = this.dateEnCycleEtJourCycle(aDate, ObjetCycles.recherche.autoriserPrecedents);
                    if (lResult.trouve) {
                        this._cacheDateEnJourCycle[lTimeJour] = lResult.indice;
                    }
                }
                const lJourCycle = this._cacheDateEnJourCycle[lTimeJour];
                return lJourCycle === undefined ? 0 : lJourCycle;
            }
            cycleCourant() {
                return this.cycleDeLaDate(new Date());
            }
            dateDebutCycle(aCycle) {
                const lDate = this.cache.bornesCycles[Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire())].DateDebut;
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            dateFinCycle(aCycle) {
                const lDate = this.cache.bornesCycles[Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire())].DateFin;
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            datePremierJourOuvreCycle(aCycle) {
                const lCycle = Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire());
                let lResult = null;
                for (let lIndice = 0; lIndice < this.donneesCycles.joursOuvresParCycle; lIndice++) {
                    lResult = this.cache.datesAfficheesParCycle[lCycle][lIndice] || null;
                    if (lResult !== null) {
                        break;
                    }
                }
                return MethodesObjet_1.MethodesObjet.isDate(lResult) ? new Date(lResult) : lResult;
            }
            dateDernierJourOuvreCycle(aCycle) {
                const lCycle = Math.borner(aCycle, 1, this.nombreCyclesAnneeScolaire());
                let lIndice = this.donneesCycles.joursOuvresParCycle;
                let lResult = null;
                while (lResult === null && lIndice >= 0) {
                    lResult = this.cache.datesAfficheesParCycle[lCycle][lIndice] || null;
                    lIndice += -1;
                }
                return MethodesObjet_1.MethodesObjet.isDate(lResult) ? new Date(lResult) : lResult;
            }
            jourCycleEnDate(AJourCycle, ACycle) {
                if (ACycle < 1) {
                    return this.dateDebutPremierCycle();
                }
                if (ACycle > this.cache.nombreCyclesAnneeScolaire) {
                    return this.dateFinCycle(this.cache.nombreCyclesAnneeScolaire);
                }
                if (AJourCycle < 0) {
                    return this.dateDebutCycle(ACycle);
                }
                if (!this.cache.datesAfficheesParCycle[ACycle]) {
                    return this.dateDebutPremierCycle();
                }
                if (AJourCycle >= this.cache.datesAfficheesParCycle[ACycle].length) {
                    return this.dateFinCycle(ACycle);
                }
                const lDate = this.cache.datesAfficheesParCycle[ACycle][AJourCycle];
                return MethodesObjet_1.MethodesObjet.isDate(lDate) ? new Date(lDate) : lDate;
            }
            estDateFerie(aDate) {
                if (this.donneesCycles.joursFeries) {
                    const lJourAnnuel = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle(), aDate);
                    return this.donneesCycles.joursFeries.contains(lJourAnnuel + 1);
                }
                return false;
            }
            getDomaineFerie() {
                if (!this.cache.domaineFerie) {
                    this.cache.domaineFerie = new TypeDomaine_1.TypeDomaine();
                    let lJourCycle, LSemaineFeriee, lNombreCycles = this.nombreCyclesAnneeScolaire(), lNombreJoursCycle = this.nombreJoursOuvresParCycle(), lDate;
                    for (let lCycle = 1; lCycle <= lNombreCycles; lCycle += 1) {
                        LSemaineFeriee = true;
                        for (lJourCycle = 0; lJourCycle < lNombreJoursCycle && LSemaineFeriee; lJourCycle += 1) {
                            lDate = this.jourCycleEnDate(lJourCycle, lCycle);
                            LSemaineFeriee = this.estDateFerie(lDate) || !this._dateDansBorne(lDate);
                        }
                        this.cache.domaineFerie.setValeur(LSemaineFeriee, lCycle);
                    }
                }
                return this.cache.domaineFerie;
            }
            cycleDansAnnee(aCycle) {
                return Math.max(1, Math.min(this.nombreCyclesAnneeScolaire(), aCycle));
            }
            indicesJoursOuvres() {
                if (!this.cache.indicesJoursOuvres) {
                    this.cache.indicesJoursOuvres = [];
                    if (this.donneesCycles.cyclesHebdomadaire) {
                        for (let i = 0; i < 7; i++) {
                            if (this.donneesCycles.joursOuvres.contains(i)) {
                                let lJour = (i + this.donneesCycles.premierJourSemaine - 2) % 7;
                                if (lJour < 0) {
                                    lJour = 6;
                                }
                                this.cache.indicesJoursOuvres.push(lJour);
                            }
                        }
                    } else {
                        for (let i = 0; i < this.donneesCycles.joursOuvresParCycle; i++) {
                            this.cache.indicesJoursOuvres.push(i);
                        }
                    }
                }
                return this.cache.indicesJoursOuvres;
            }
            _calculer() {
                let lDatesAIgnorer = new TypeEnsembleNombre_1.TypeEnsembleNombre(), lEnSemaine, lJourSemaine, iJour, iCycle, lIndiceCycle, lJourHebdo, LCycle, IDate, LIndiceJourAnnee, LPasToutRempli, lTab, i;
                this._cacheDateEnJourCycle = null;
                if (!this.donneesCycles.joursOuvres || this.donneesCycles.joursOuvres.count() === 0) {
                    return;
                }
                if (this.donneesCycles.cyclesSansFeries && this.donneesCycles.joursFeries) {
                    lTab = this.donneesCycles.joursFeries.items();
                    for (i in lTab) {
                        lDatesAIgnorer.add(ObjetDate_1.GDate.getJourSuivant(this.donneesCycles.dateDebutPremierCycle, lTab[i] - 1).getTime());
                    }
                }
                this.cache.datePremierJourOuvre = this.donneesCycles.premiereDate;
                lEnSemaine = lDatesAIgnorer.count() === 0 && (this.donneesCycles.joursOuvresParCycle % this.donneesCycles.joursOuvres.count() === 0);
                if (lEnSemaine) {
                    lJourSemaine = this.cache.datePremierJourOuvre.getDay() + 1;
                    while (lJourSemaine !== this.donneesCycles.premierJourSemaine) {
                        this.cache.datePremierJourOuvre = ObjetDate_1.GDate.getJourSuivant(this.cache.datePremierJourOuvre, -1);
                        lJourSemaine = this.cache.datePremierJourOuvre.getDay() + 1;
                    }
                }
                for (iJour = 0; iJour <= C_NbJoursCaches; iJour++) {
                    this.cache.cycleEtIndiceParDate[iJour] = {
                        cycle: 1,
                        indice: C_JourCycleHorsGrille
                    };
                }
                for (iCycle = 0; iCycle <= ObjetCycles.C_MaxDomaineCycle; iCycle += 1) {
                    this.cache.datesAfficheesParCycle[iCycle] = [];
                    this.cache.bornesCycles[iCycle] = {
                        DateDebut: new Date(0),
                        DateFin: new Date(0)
                    };
                }
                this.cache.bornesCycles[1].DateDebut = this.cache.datePremierJourOuvre;
                lIndiceCycle = -1;
                lJourHebdo = _DateEnJourHebdo(this.cache.datePremierJourOuvre, this.donneesCycles.premierJourSemaine) - 1;
                LCycle = 0;
                let lIncDate = 0;
                this.cache.nombreCyclesAnneeScolaire = 0;
                LIndiceJourAnnee = 0;
                LPasToutRempli = true;
                while (LPasToutRempli) {
                    IDate = ObjetDate_1.GDate.getJourSuivant(this.cache.datePremierJourOuvre, lIncDate);
                    lIncDate++;
                    lJourHebdo = _IncJourHebdo(lJourHebdo);
                    if (lDatesAIgnorer.contains(IDate.getTime()) || ((!lEnSemaine) && (IDate.getTime() < this.donneesCycles.premiereDate.getTime())) || !(this.donneesCycles.joursOuvres.contains(lJourHebdo))) {
                        if (LIndiceJourAnnee <= C_NbJoursCaches) {
                            this.cache.cycleEtIndiceParDate[LIndiceJourAnnee] = {
                                cycle: Math.max(1, LCycle),
                                indice: C_JourCycleHorsGrille
                            };
                        }
                    } else {
                        lIndiceCycle = (lIndiceCycle + 1) % this.donneesCycles.joursOuvresParCycle;
                        if (lIndiceCycle === 0) {
                            LCycle += 1;
                        }
                        if (LIndiceJourAnnee <= C_NbJoursCaches) {
                            this.cache.cycleEtIndiceParDate[LIndiceJourAnnee] = {
                                cycle: LCycle,
                                indice: lIndiceCycle
                            };
                        }
                        if (LCycle <= ObjetCycles.C_MaxDomaineCycle) {
                            this.cache.datesAfficheesParCycle[LCycle][lIndiceCycle] = IDate;
                        }
                        if ((lIndiceCycle === 0) && (LCycle > 1)) {
                            if (LCycle <= ObjetCycles.C_MaxDomaineCycle) {
                                this.cache.bornesCycles[LCycle].DateDebut = new Date(IDate.getTime());
                            }
                            if (LCycle - 1 <= ObjetCycles.C_MaxDomaineCycle) {
                                this.cache.bornesCycles[LCycle - 1].DateFin = ObjetDate_1.GDate.getJourSuivant(IDate, -1);
                            }
                        }
                    }
                    if (ObjetDate_1.GDate.estJourEgal(IDate, this.donneesCycles.derniereDate)) {
                        this.cache.nombreCyclesAnneeScolaire = LCycle;
                    }
                    LIndiceJourAnnee += 1;
                    LPasToutRempli = (LCycle <= ObjetCycles.C_MaxDomaineCycle) || (LIndiceJourAnnee <= C_NbJoursCaches);
                }
            }
            cycleEtIndiceCycleDeDate(aDate) {
                const lDate = ObjetDate_1.GDate.getJour(aDate);
                const LDateRef = this.cache.bornesCycles[1].DateDebut;
                let lResult = {
                    cycle: -1,
                    indice: C_JourCycleHorsGrille
                };
                if ((lDate.getTime() >= LDateRef.getTime()) && (lDate.getTime() <= this.cache.bornesCycles[this.cache.nombreCyclesAnneeScolaire].DateFin.getTime())) {
                    lResult = this.cache.cycleEtIndiceParDate[ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(LDateRef, lDate)];
                }
                return lResult;
            }
            _getDateBornee(aDate) {
                if (aDate < this.donneesCycles.premiereDate) {
                    return new Date(this.donneesCycles.premiereDate.getTime());
                }
                if (aDate > this.donneesCycles.derniereDate) {
                    return new Date(this.donneesCycles.derniereDate.getTime());
                } else {
                    return aDate;
                }
            }
            _dateDansBorne(aDate) {
                return (aDate >= this.donneesCycles.premiereDate || ObjetDate_1.GDate.estJourEgal(aDate, this.donneesCycles.premiereDate)) && (aDate <= this.donneesCycles.derniereDate || ObjetDate_1.GDate.estJourEgal(aDate, this.donneesCycles.derniereDate));
            }
        }
        exports.ObjetCycles = ObjetCycles;
        ObjetCycles.C_IndicePremierJourCycle = 0;
        ObjetCycles.C_IndiceDernierJourCycle = Number.MAX_VALUE;
        ObjetCycles.C_IndiceDernierJourOuvreCycle = Number.MAX_VALUE - 1;
        ObjetCycles.C_MaxDomaineCycle = C_MaxDomaineCycle;
        ObjetCycles.recherche = EnumRecherche;
        function _DateEnJourHebdo(ADate, APremierJourSemaine) {
            let LPremierJour = APremierJourSemaine;
            if (LPremierJour > C_MaxJoursParSemaine) {
                LPremierJour = LPremierJour - C_MaxJoursParSemaine;
            }
            let LJourTt = ADate.getDay() + 1;
            if (LJourTt >= LPremierJour) {
                return LJourTt - LPremierJour;
            }
            return LJourTt + C_MaxJoursParSemaine - LPremierJour;
        }
        function _IncJourHebdo(aJourHebdo) {
            return (aJourHebdo + 1) % C_MaxJoursParSemaine;
        }
    },
    fn: 'objetcycles.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ChoixThemesPourAppli = exports.ChoixDarkMode = exports.TypeThemeCollectivite = exports.TypeThemeProduit = exports.TypeThemeCouleur = void 0;
        exports.forEachThemesCouleurEtProduitEtCollectivite = forEachThemesCouleurEtProduitEtCollectivite;
        const MethodesObjet_1 = require("MethodesObjet");
        var TypeThemeCouleur;
        (function(TypeThemeCouleur) {
            TypeThemeCouleur[TypeThemeCouleur["Bordeaux"] = 0] = "Bordeaux";
            TypeThemeCouleur[TypeThemeCouleur["Jaune"] = 1] = "Jaune";
            TypeThemeCouleur[TypeThemeCouleur["Bleu"] = 2] = "Bleu";
            TypeThemeCouleur[TypeThemeCouleur["Turquoise"] = 3] = "Turquoise";
            TypeThemeCouleur[TypeThemeCouleur["Vert"] = 4] = "Vert";
            TypeThemeCouleur[TypeThemeCouleur["Violet"] = 5] = "Violet";
        }
        )(TypeThemeCouleur || (exports.TypeThemeCouleur = TypeThemeCouleur = {}));
        var TypeThemeProduit;
        (function(TypeThemeProduit) {
            TypeThemeProduit[TypeThemeProduit["ProduitPN"] = 1003] = "ProduitPN";
            TypeThemeProduit[TypeThemeProduit["ProduitEDT"] = 1004] = "ProduitEDT";
            TypeThemeProduit[TypeThemeProduit["ProduitHP"] = 1005] = "ProduitHP";
            TypeThemeProduit[TypeThemeProduit["Pronote"] = 1006] = "Pronote";
            TypeThemeProduit[TypeThemeProduit["EDT"] = 1007] = "EDT";
            TypeThemeProduit[TypeThemeProduit["MobileHP"] = 1008] = "MobileHP";
        }
        )(TypeThemeProduit || (exports.TypeThemeProduit = TypeThemeProduit = {}));
        var TypeThemeCollectivite;
        (function(TypeThemeCollectivite) {
            TypeThemeCollectivite[TypeThemeCollectivite["ColIdf"] = 1009] = "ColIdf";
        }
        )(TypeThemeCollectivite || (exports.TypeThemeCollectivite = TypeThemeCollectivite = {}));
        function forEachThemesCouleurEtProduitEtCollectivite(aCallback) {
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeCouleur)) {
                aCallback(TypeThemeCouleur[lKey], lKey);
            }
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeProduit)) {
                aCallback(TypeThemeProduit[lKey], lKey);
            }
            for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(TypeThemeCollectivite)) {
                aCallback(TypeThemeCollectivite[lKey], lKey);
            }
        }
        var ChoixDarkMode;
        (function(ChoixDarkMode) {
            ChoixDarkMode["systeme"] = "systeme";
            ChoixDarkMode["clair"] = "clair";
            ChoixDarkMode["sombre"] = "sombre";
        }
        )(ChoixDarkMode || (exports.ChoixDarkMode = ChoixDarkMode = {}));
        exports.ChoixThemesPourAppli = [TypeThemeProduit.Pronote, TypeThemeProduit.MobileHP, TypeThemeProduit.EDT, TypeThemeCollectivite.ColIdf];
    },
    fn: 'typethemecouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ThemesCouleurs = void 0;
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const Invocateur_1 = require("Invocateur");
        class ObjetThemesCouleurs {
            constructor() {
                var _a;
                this.elementZoneFenetre = null;
                this.choixDarkMode = TypeThemeCouleur_1.ChoixDarkMode.clair;
                this.estDarkModeSysteme = false;
                this.avecChoixForcerDarkMode_DEBUG = !IE.estMobile;
                this.setTheme(null, true);
                Invocateur_1.Invocateur.abonner('creationZoneFenetre', (aElement) => {
                    this.elementZoneFenetre = aElement;
                    $(this.elementZoneFenetre).addClass(this.getClassThemeCourant());
                }
                );
                if (global.matchMedia) {
                    try {
                        this.estDarkModeSysteme = (_a = global.matchMedia) === null || _a === void 0 ? void 0 : _a.call(global, '(prefers-color-scheme: dark)').matches;
                        global.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                            var _a;
                            this.estDarkModeSysteme = (_a = global.matchMedia) === null || _a === void 0 ? void 0 : _a.call(global, '(prefers-color-scheme: dark)').matches;
                            this.actualiserDarkMode();
                        }
                        );
                    } catch (e) {}
                }
            }
            setTheme(aGenreTheme, aModeAccessible) {
                this.genreTheme = aGenreTheme;
                this.estModeAccessible = aModeAccessible;
                if (document.body && global.GApplication) {
                    this.setModeAccessible(aModeAccessible);
                    this.actualiserDarkMode();
                    this.actualiserTheme();
                }
            }
            getClassThemeCourant() {
                if (!this.estModeAccessible) {
                    let lNomTheme = '';
                    (0,
                    TypeThemeCouleur_1.forEachThemesCouleurEtProduitEtCollectivite)( (aTheme, aKey) => {
                        if (aTheme === this.genreTheme) {
                            lNomTheme = aKey;
                        }
                    }
                    );
                    if (lNomTheme) {
                        return 'Theme' + lNomTheme;
                    } else {
                        return 'ThemeNeutre';
                    }
                }
                return 'ThemeNeutre';
            }
            actualiserTheme() {
                const lTabRemove = ['ThemeNeutre'];
                (0,
                TypeThemeCouleur_1.forEachThemesCouleurEtProduitEtCollectivite)( (aTheme, aKey) => {
                    lTabRemove.push('Theme' + aKey);
                }
                );
                const lNomTheme = this.getClassThemeCourant();
                $('#' + GApplication.getIdConteneur().escapeJQ()).removeClass(lTabRemove.join(' ')).addClass(lNomTheme);
                if (this.elementZoneFenetre) {
                    $(this.elementZoneFenetre).removeClass(lTabRemove.join(' ')).addClass(lNomTheme);
                }
            }
            getDarkMode() {
                var _a, _b, _c, _d, _e;
                if (this.avecChoixForcerDarkMode_DEBUG && ((_b = (_a = global.GApplication) === null || _a === void 0 ? void 0 : _a.estDebug) === null || _b === void 0 ? void 0 : _b.call(_a))) {
                    return (_e = (_d = (_c = global.GApplication) === null || _c === void 0 ? void 0 : _c.getOptionsDebug) === null || _d === void 0 ? void 0 : _d.call(_c)) === null || _e === void 0 ? void 0 : _e.forcerDarkMode;
                }
                switch (this.choixDarkMode) {
                case TypeThemeCouleur_1.ChoixDarkMode.clair:
                    {
                        return false;
                    }
                case TypeThemeCouleur_1.ChoixDarkMode.sombre:
                    {
                        return true;
                    }
                case TypeThemeCouleur_1.ChoixDarkMode.systeme:
                    {
                        return this.estDarkModeSysteme;
                    }
                default:
                    ;
                }
                return false;
            }
            setChoixDarkMode(aChoixThemeSombre) {
                this.choixDarkMode = aChoixThemeSombre;
                this.actualiserDarkMode();
            }
            actualiserDarkMode() {
                if (this.getDarkMode()) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
            getModeAccessible() {
                return this.estModeAccessible;
            }
            setModeAccessible(aModeAccessible) {
                this.estModeAccessible = aModeAccessible;
                if (this.estModeAccessible) {
                    document.body.classList.add('ThemeAccessible');
                } else {
                    document.body.classList.remove('ThemeAccessible');
                }
                this.actualiserTheme();
            }
        }
        exports.ThemesCouleurs = new ObjetThemesCouleurs();
    },
    fn: 'themescouleurs.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDomaineFrequence = void 0;
        var EGenreDomaineFrequence;
        (function(EGenreDomaineFrequence) {
            EGenreDomaineFrequence[EGenreDomaineFrequence["H"] = 0] = "H";
            EGenreDomaineFrequence[EGenreDomaineFrequence["QZ1"] = 1] = "QZ1";
            EGenreDomaineFrequence[EGenreDomaineFrequence["QZ2"] = 2] = "QZ2";
        }
        )(EGenreDomaineFrequence || (exports.EGenreDomaineFrequence = EGenreDomaineFrequence = {}));
    },
    fn: 'enumere_domainefrequence.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEspace = void 0;
        var EGenreEspace;
        (function(EGenreEspace) {
            EGenreEspace[EGenreEspace["Commun"] = 0] = "Commun";
            EGenreEspace[EGenreEspace["Professeur"] = 1] = "Professeur";
            EGenreEspace[EGenreEspace["Parent"] = 2] = "Parent";
            EGenreEspace[EGenreEspace["Eleve"] = 3] = "Eleve";
            EGenreEspace[EGenreEspace["Entreprise"] = 4] = "Entreprise";
            EGenreEspace[EGenreEspace["Academie"] = 5] = "Academie";
            EGenreEspace[EGenreEspace["Mobile_Eleve"] = 6] = "Mobile_Eleve";
            EGenreEspace[EGenreEspace["Mobile_Parent"] = 7] = "Mobile_Parent";
            EGenreEspace[EGenreEspace["Mobile_Professeur"] = 8] = "Mobile_Professeur";
            EGenreEspace[EGenreEspace["Mobile_Commun"] = 9] = "Mobile_Commun";
            EGenreEspace[EGenreEspace["Etablissement"] = 13] = "Etablissement";
            EGenreEspace[EGenreEspace["Mobile_Etablissement"] = 14] = "Mobile_Etablissement";
            EGenreEspace[EGenreEspace["Gestion_SSO"] = 15] = "Gestion_SSO";
            EGenreEspace[EGenreEspace["Administrateur"] = 16] = "Administrateur";
            EGenreEspace[EGenreEspace["Mobile_Administrateur"] = 17] = "Mobile_Administrateur";
            EGenreEspace[EGenreEspace["Inscription"] = 18] = "Inscription";
            EGenreEspace[EGenreEspace["PrimProfesseur"] = 19] = "PrimProfesseur";
            EGenreEspace[EGenreEspace["PrimParent"] = 20] = "PrimParent";
            EGenreEspace[EGenreEspace["Mobile_PrimProfesseur"] = 21] = "Mobile_PrimProfesseur";
            EGenreEspace[EGenreEspace["Mobile_PrimParent"] = 22] = "Mobile_PrimParent";
            EGenreEspace[EGenreEspace["PrimEleve"] = 23] = "PrimEleve";
            EGenreEspace[EGenreEspace["Mobile_PrimEleve"] = 24] = "Mobile_PrimEleve";
            EGenreEspace[EGenreEspace["Accompagnant"] = 25] = "Accompagnant";
            EGenreEspace[EGenreEspace["Mobile_Accompagnant"] = 26] = "Mobile_Accompagnant";
            EGenreEspace[EGenreEspace["PrimAccompagnant"] = 27] = "PrimAccompagnant";
            EGenreEspace[EGenreEspace["Mobile_PrimAccompagnant"] = 28] = "Mobile_PrimAccompagnant";
            EGenreEspace[EGenreEspace["Tuteur"] = 29] = "Tuteur";
            EGenreEspace[EGenreEspace["Mobile_Tuteur"] = 30] = "Mobile_Tuteur";
            EGenreEspace[EGenreEspace["PrimPeriscolaire"] = 31] = "PrimPeriscolaire";
            EGenreEspace[EGenreEspace["Mobile_PrimPeriscolaire"] = 32] = "Mobile_PrimPeriscolaire";
            EGenreEspace[EGenreEspace["PagePubliqueEtablissement"] = 33] = "PagePubliqueEtablissement";
            EGenreEspace[EGenreEspace["Mobile_PagePubliqueEtablissement"] = 34] = "Mobile_PagePubliqueEtablissement";
            EGenreEspace[EGenreEspace["PrimMairie"] = 35] = "PrimMairie";
            EGenreEspace[EGenreEspace["Mobile_PrimMairie"] = 36] = "Mobile_PrimMairie";
            EGenreEspace[EGenreEspace["PrimDirection"] = 37] = "PrimDirection";
            EGenreEspace[EGenreEspace["Mobile_PrimDirection"] = 38] = "Mobile_PrimDirection";
        }
        )(EGenreEspace || (exports.EGenreEspace = EGenreEspace = {}));
    },
    fn: 'enumere_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenrePeriodeDeNotationUtil = exports.EGenrePeriodeDeNotation = void 0;
        var EGenrePeriodeDeNotation;
        (function(EGenrePeriodeDeNotation) {
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre1"] = 0] = "Trimestre1";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre2"] = 1] = "Trimestre2";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Trimestre3"] = 2] = "Trimestre3";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Semestre1"] = 3] = "Semestre1";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Semestre2"] = 4] = "Semestre2";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Annuelle"] = 5] = "Annuelle";
            EGenrePeriodeDeNotation[EGenrePeriodeDeNotation["Utilisateur"] = 6] = "Utilisateur";
        }
        )(EGenrePeriodeDeNotation || (exports.EGenrePeriodeDeNotation = EGenrePeriodeDeNotation = {}));
        const EGenrePeriodeDeNotationUtil = {
            estTrimestrielle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Trimestre1, EGenrePeriodeDeNotation.Trimestre2, EGenrePeriodeDeNotation.Trimestre3].includes(aGenrePeriodeDeNotation);
            },
            estSemestrielle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Semestre1, EGenrePeriodeDeNotation.Semestre2].includes(aGenrePeriodeDeNotation);
            },
            estAnnuelle(aGenrePeriodeDeNotation) {
                return [EGenrePeriodeDeNotation.Annuelle].includes(aGenrePeriodeDeNotation);
            },
            estOfficielle(aGenrePeriodeDeNotation) {
                return EGenrePeriodeDeNotationUtil.estTrimestrielle(aGenrePeriodeDeNotation) || EGenrePeriodeDeNotationUtil.estSemestrielle(aGenrePeriodeDeNotation) || EGenrePeriodeDeNotationUtil.estAnnuelle(aGenrePeriodeDeNotation);
            }
        };
        exports.EGenrePeriodeDeNotationUtil = EGenrePeriodeDeNotationUtil;
    },
    fn: 'enumere_periodedenotation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametresCP = void 0;
        class ObjetParametresCP {
            getNomEspace() {
                return '';
            }
            getCookieValidationAppli() {
                return '';
            }
        }
        exports.ObjetParametresCP = ObjetParametresCP;
    },
    fn: 'objetparametrescp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireCouleur = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const UtilitaireCouleur = {
            hslDelphiMax: 240,
            couleurToRGB: function(aHex) {
                if (!aHex || !aHex.substring || aHex[0] !== '#' || (aHex.length !== 4 && aHex.length < 7)) {
                    return {
                        r: 0,
                        g: 0,
                        b: 0
                    };
                }
                if (aHex.length === 4) {
                    const lRGBHex = {
                        r: aHex.substring(1, 2),
                        g: aHex.substring(2, 3),
                        b: aHex.substring(3, 4)
                    };
                    return {
                        r: parseInt(lRGBHex.r + lRGBHex.r, 16),
                        g: parseInt(lRGBHex.g + lRGBHex.g, 16),
                        b: parseInt(lRGBHex.b + lRGBHex.b, 16)
                    };
                }
                return {
                    r: parseInt(aHex.substring(1, 3), 16),
                    g: parseInt(aHex.substring(3, 5), 16),
                    b: parseInt(aHex.substring(5, 7), 16)
                };
            },
            couleurToHSV: function(hex) {
                return this.rgbToHSV(this.couleurToRGB(hex));
            },
            rgbToCouleur: function(aRGB) {
                if (!aRGB) {
                    return null;
                }
                let lRGB = null;
                if (typeof aRGB === 'string') {
                    const lRegex = /rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/;
                    const lRGBRegex = lRegex.exec(aRGB);
                    if (lRGBRegex) {
                        lRGB = {
                            r: parseInt(lRGBRegex[1]),
                            g: parseInt(lRGBRegex[2]),
                            b: parseInt(lRGBRegex[3])
                        };
                    }
                } else {
                    lRGB = aRGB;
                }
                if (!lRGB || isNaN(lRGB.r) || isNaN(lRGB.g) || isNaN(lRGB.b) || lRGB.r < 0 || lRGB.g < 0 || lRGB.b < 0) {
                    return null;
                }
                const hex = [lRGB.r.toString(16), lRGB.g.toString(16), lRGB.b.toString(16)];
                $.each(hex, (nr, val) => {
                    if (val.length === 1) {
                        hex[nr] = '0' + val;
                    }
                }
                );
                return '#' + hex.join('');
            },
            rgbToHSV: function(rgb) {
                let rr, gg, bb;
                const r = rgb.r / 255
                  , g = rgb.g / 255
                  , b = rgb.b / 255;
                let h, s;
                const v = Math.max(r, g, b)
                  , diff = v - Math.min(r, g, b)
                  , diffc = function(c) {
                    return (v - c) / 6 / diff + 1 / 2;
                };
                if (diff === 0) {
                    h = s = 0;
                } else {
                    s = diff / v;
                    rr = diffc(r);
                    gg = diffc(g);
                    bb = diffc(b);
                    if (r === v) {
                        h = bb - gg;
                    } else if (g === v) {
                        h = (1 / 3) + rr - bb;
                    } else if (b === v) {
                        h = (2 / 3) + gg - rr;
                    }
                    if (h < 0) {
                        h += 1;
                    } else if (h > 1) {
                        h -= 1;
                    }
                }
                return {
                    h: Math.round(h * 360),
                    s: Math.round(s * 100),
                    l: Math.round(v * 100)
                };
            },
            hsvToCouleur: function(hsl) {
                return this.rgbToCouleur(this.hsvToRGB(hsl));
            },
            hsvToRGB: function(hsl) {
                const rgb = {};
                let h = Math.round(hsl.h);
                const s = Math.round(hsl.s * 255 / 100);
                const v = Math.round(hsl.l * 255 / 100);
                if (s === 0) {
                    rgb.r = rgb.g = rgb.b = v;
                } else {
                    const t1 = v;
                    const t2 = (255 - s) * v / 255;
                    const t3 = (t1 - t2) * (h % 60) / 60;
                    if (h === 360) {
                        h = 0;
                    }
                    if (h < 60) {
                        rgb.r = t1;
                        rgb.b = t2;
                        rgb.g = t2 + t3;
                    } else if (h < 120) {
                        rgb.g = t1;
                        rgb.b = t2;
                        rgb.r = t1 - t3;
                    } else if (h < 180) {
                        rgb.g = t1;
                        rgb.r = t2;
                        rgb.b = t2 + t3;
                    } else if (h < 240) {
                        rgb.b = t1;
                        rgb.r = t2;
                        rgb.g = t1 - t3;
                    } else if (h < 300) {
                        rgb.b = t1;
                        rgb.g = t2;
                        rgb.r = t2 + t3;
                    } else if (h < 360) {
                        rgb.r = t1;
                        rgb.g = t2;
                        rgb.b = t1 - t3;
                    } else {
                        rgb.r = 0;
                        rgb.g = 0;
                        rgb.b = 0;
                    }
                }
                return {
                    r: Math.round(rgb.r),
                    g: Math.round(rgb.g),
                    b: Math.round(rgb.b)
                };
            },
            hsvToHSLDelphi: function(hsv) {
                const lLuminance = (200 - hsv.s) * hsv.l / 200
                  , lHSL = {
                    h: hsv.h * this.hslDelphiMax / 360,
                    s: 0,
                    l: lLuminance * this.hslDelphiMax / 100
                };
                lHSL.s = (hsv.l > 0 ? hsv.s * hsv.l / (lLuminance < 50 ? lLuminance * 2 : 200 - lLuminance * 2) : hsv.s) * this.hslDelphiMax / 100;
                if (isNaN(lHSL.s)) {
                    lHSL.s = 0;
                }
                return lHSL;
            },
            hslDelphiToHSV: function(hsl) {
                const lHSV = {
                    h: hsl.h * 360 / this.hslDelphiMax,
                    s: hsl.s * 100 / this.hslDelphiMax,
                    l: hsl.l * 100 / this.hslDelphiMax
                };
                const t = lHSV.s * (lHSV.l < 50 ? lHSV.l : 100 - lHSV.l) / 100;
                lHSV.s = lHSV.l > 0 ? 200 * t / (lHSV.l + t) : lHSV.s;
                if (isNaN(lHSV.s)) {
                    lHSV.s = 0;
                }
                lHSV.l = t + lHSV.l;
                return lHSV;
            },
            getContrastedColor(aColor) {
                const lWhite = '#FFFFFF';
                const lBlack = '#000000';
                if (this.contrastRatio(aColor, lWhite) > this.contrastRatio(aColor, lBlack)) {
                    return lWhite;
                }
                return lBlack;
            },
            contrastRatio(aColor1, aColor2) {
                let ratio = (0.05 + this.relativeLum(aColor1)) / (0.05 + this.relativeLum(aColor2));
                if (ratio < 1) {
                    ratio = 1 / ratio;
                }
                return ratio;
            },
            relativeLum(aColor) {
                let lRGB = null;
                if (MethodesObjet_1.MethodesObjet.isString(aColor)) {
                    lRGB = this.couleurToRGB(aColor);
                } else if (aColor && 'r'in aColor) {
                    lRGB = aColor;
                }
                if (!lRGB) {
                    return 1;
                }
                lRGB.r = (lRGB.r || 0) / 255;
                lRGB.g = (lRGB.g || 0) / 255;
                lRGB.b = (lRGB.b || 0) / 255;
                let transformed = {};
                for (let x in lRGB) {
                    if (lRGB[x] <= 0.03928) {
                        transformed[x] = lRGB[x] / 12.92;
                    } else {
                        transformed[x] = Math.pow(((lRGB[x] + 0.055) / 1.055), 2.4);
                    }
                }
                let lum = ((transformed.r * 0.2126) + (transformed.g * 0.7152) + (transformed.b * 0.0722));
                return lum;
            }
        };
        exports.UtilitaireCouleur = UtilitaireCouleur;
    },
    fn: 'utilitairecouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjectCouleurCelluleListe = exports.ObjectCouleurCellule = exports._ObjetCouleur = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const UtilitaireCouleur_1 = require("UtilitaireCouleur");
        if (!global.GCouleur) {
            global.GCouleur = null;
        }
        class _ObjetCouleur {
            constructor(aAvecNonEditable) {
                this.blanc = 'var(--color-background)';
                this.noir = 'var(--color-text)';
                this.eleve = {
                    garcon: '#2D24F0',
                    fille: '#EE01F6'
                };
                this.fond = 'var(--color-background)';
                this.themeNeutre = {};
                ['light', 'legere', 'legere2', 'claire', 'moyen1', 'moyen2', 'moyen3', 'foncee', 'sombre'].forEach( (aKey) => {
                    this.themeNeutre[aKey] = `var(--theme-neutre-${aKey})`;
                }
                );
                this.themeCouleur = {};
                ['claire', 'moyen1', 'foncee', 'sombre'].forEach( (aKey) => {
                    this.themeCouleur[aKey] = `var(--theme-${aKey})`;
                }
                );
                this.texte = this.noir;
                this.bordure = this.trait = this.themeNeutre.moyen2;
                this.cumul = this.themeNeutre.moyen2;
                this.nonEditable = {
                    fond: 'var(--color-background-non-editable)',
                    texte: this.themeNeutre.foncee,
                    bordure: this.themeNeutre.moyen2
                };
                this.intermediaire = this.themeNeutre.claire;
                this.avecNonEditable = aAvecNonEditable === null || aAvecNonEditable === undefined ? true : aAvecNonEditable;
                this.texteListeCreation = '#444444';
                this.fenetre = {
                    fond: this.fond,
                    bordure: this.bordure,
                    bandeau: {
                        fond: this.blanc,
                        texte: this.noir
                    },
                    nonEditable: this.nonEditable,
                    cumul: this.cumul,
                    texte: this.themeNeutre.foncee,
                    intermediaire: this.themeNeutre.claire
                };
                this.rouge = 'var(--color-red)';
                this.rougeClair = 'var(--color-light-red)';
                this.vert = 'var(--color-green)';
                this.grisTresClair = this.fenetre.nonEditable;
                this.grisClair = this.fenetre.intermediaire;
                this.grisFonce = this.fenetre.cumul;
                this.grisTresFonce = this.fenetre.texte;
                this.standard = new ObjectCouleurCellule(this.blanc,this.noir);
                this.selection = new ObjectCouleurCelluleFC('var(--couleur-selection)',this.blanc);
                this.selection.fondClair = 'var(--couleur-selection-fond-clair)';
                this.inactif = new ObjectCouleurCellule('#F0F0F0','#AAAAAA');
                this.grille = {
                    fond: this.themeNeutre.moyen1,
                    bordure: '#848484',
                    texte: 'black',
                    gabarit: 'var(--color-grille-gabarit)',
                    fondCoursSuperpose: '#f9f4f0',
                    selectionCours: this.selection.fond
                };
                this.bandeau = {
                    fond: this.themeNeutre.moyen1,
                    texte: this.noir,
                    bordure: this.themeNeutre.light,
                    separateur: this.themeCouleur.foncee
                };
                this.titre = new ObjectCouleurCellule(this.themeNeutre.light,this.themeCouleur.foncee,this.bordure);
                this.liste = new ObjectCouleurCelluleListe();
                this.liste.bordure = this.bordure;
                this.liste.cellule = new ObjectCouleurCellule(this.fond,this.texte,this.bordure);
                this.liste.editable = new ObjectCouleurCellule(this.blanc,this.noir,this.bordure);
                this.liste.editableAlternee1 = new ObjectCouleurCellule(this.themeNeutre.light,this.noir,this.bordure);
                this.liste.editableAlternee2 = new ObjectCouleurCellule(this.blanc,this.noir,this.bordure);
                this.liste.nonEditable = new ObjectCouleurCellule(this.avecNonEditable ? this.themeNeutre.legere2 : this.blanc,this.noir,this.bordure);
                this.liste.nonEditableAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.nonEditableAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.nonApplicable = new ObjectCouleurCellule(this.themeNeutre.moyen1,this.noir,this.bordure);
                this.liste.colonneFixe = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.colonneFixeAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.colonneFixeAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.moyenne = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.moyenneAlternee1 = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.liste.moyenneAlternee2 = new ObjectCouleurCellule(this.themeNeutre.legere2,this.noir,this.bordure);
                this.liste.total = new ObjectCouleurCellule(this.themeNeutre.foncee,this.blanc,this.bordure);
                this.liste.totalAlternee1 = new ObjectCouleurCellule(this.themeNeutre.sombre,this.blanc,this.bordure);
                this.liste.totalAlternee2 = new ObjectCouleurCellule(this.themeNeutre.foncee,this.blanc,this.bordure);
                this.liste.cumul = new ObjectCouleurCelluleCumul(this.themeCouleur.claire,this.noir,this.bordure);
                this.liste.cumul[0] = new ObjectCouleurCellule(this.themeCouleur.moyen1,this.blanc,this.bordure);
                this.liste.cumul[1] = new ObjectCouleurCellule(this.themeCouleur.claire,this.noir,this.bordure);
                this.liste.cumul[2] = new ObjectCouleurCellule(this.themeNeutre.moyen1,this.noir,this.bordure);
                this.liste.cumul[3] = new ObjectCouleurCellule(this.themeNeutre.claire,this.noir,this.bordure);
                this.listeNeutre = MethodesObjet_1.MethodesObjet.dupliquer(this.liste);
                this.listeNeutre.cumul[0].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[1].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[2].fond = this.themeNeutre.claire;
                this.listeNeutre.cumul[3].fond = this.themeNeutre.claire;
                this.correspondance = {};
                this.accessible = {};
                this.devoir = {
                    commeUnBonus: '#00FF00',
                    commeUneNote: 'darkorange',
                    commeUnSeuil: '#9933FF'
                };
                this.surlignageTexte = '#99cde4';
            }
            getCouleurCellule(aEditable, aSelectionne) {
                if (aSelectionne) {
                    return this.selection;
                }
                return aEditable ? this.liste.editable : this.liste.nonEditable;
            }
            couleurToRGB(aHex) {
                return UtilitaireCouleur_1.UtilitaireCouleur.couleurToRGB(aHex);
            }
            couleurToHSV(hex) {
                return UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(hex);
            }
            rgbToCouleur(aRGB) {
                return UtilitaireCouleur_1.UtilitaireCouleur.rgbToCouleur(aRGB);
            }
            rgbToHSV(rgb) {
                return UtilitaireCouleur_1.UtilitaireCouleur.rgbToHSV(rgb);
            }
            hsvToCouleur(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToCouleur(hsl);
            }
            hsvToRGB(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToRGB(hsl);
            }
            hsvToHSLDelphi(hsv) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(hsv);
            }
            hslDelphiToHSV(hsl) {
                return UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiToHSV(hsl);
            }
            getCouleurCorrespondance(aCouleur) {
                return UtilitaireCouleur_1.UtilitaireCouleur.getContrastedColor(aCouleur);
            }
            getCouleurAccessible(aCouleur) {
                if (!aCouleur || !aCouleur.substring) {
                    return aCouleur;
                }
                if (this.accessible[aCouleur] !== undefined) {
                    return this.accessible[aCouleur];
                }
                let r = parseInt(aCouleur.substring(1, 3), 16) / 255;
                let g = parseInt(aCouleur.substring(3, 5), 16) / 255;
                let b = parseInt(aCouleur.substring(5, 7), 16) / 255;
                const max = Math.max(r, g, b)
                  , min = Math.min(r, g, b);
                const l = (max + min) / 2;
                r = g = b = Math.round(l * 255);
                this.accessible[aCouleur] = '#' + (r < 16 ? '0' : '') + r.toString(16) + (g < 16 ? '0' : '') + g.toString(16) + (b < 16 ? '0' : '') + b.toString(16);
                return this.accessible[aCouleur];
            }
            getCouleurTransparente(aColor, aOpacity, aBackground, aBackOpa) {
                if (!aColor || !aColor.substring) {
                    return false;
                }
                if (aOpacity < 0 || aOpacity > 1) {
                    return false;
                }
                if (!aBackOpa || aBackOpa < 0 || aBackOpa > 1) {
                    aBackOpa = 1;
                }
                const lDest = [];
                const lFond = [255, 255, 255];
                const lOrig = [];
                if (aBackground && aBackground.substring) {
                    lFond[0] = parseInt(aBackground.substring(1, 3), 16);
                    lFond[1] = parseInt(aBackground.substring(3, 5), 16);
                    lFond[2] = parseInt(aBackground.substring(5, 7), 16);
                }
                lDest[0] = parseInt(aColor.substring(1, 3), 16);
                lDest[1] = parseInt(aColor.substring(3, 5), 16);
                lDest[2] = parseInt(aColor.substring(5, 7), 16);
                for (let i = 0; i < 3; i++) {
                    lOrig[i] = Math.floor(((lDest[i] * (aOpacity + aBackOpa * (1 - aOpacity))) - ((lFond[i] * aBackOpa) * (1 - aOpacity))) / aOpacity);
                    if (lOrig[i] > 255 || lOrig[i] < 0) {
                        return false;
                    }
                }
                return '#' + (lOrig[0] < 16 ? '0' : '') + lOrig[0].toString(16) + (lOrig[1] < 16 ? '0' : '') + lOrig[1].toString(16) + (lOrig[2] < 16 ? '0' : '') + lOrig[2].toString(16);
            }
            getCouleurTransformationCours(aCouleur) {
                const lRGB = this.couleurToRGB(aCouleur)
                  , lHSL = this.hsvToHSLDelphi(this.rgbToHSV(lRGB));
                let lEstProcheDuGris = (Math.abs(lRGB.r - lRGB.g) < 10) && (Math.abs(lRGB.r - lRGB.b) < 10) && (Math.abs(lRGB.g - lRGB.b) < 10);
                if (!lEstProcheDuGris) {
                    lEstProcheDuGris = lHSL.s < 8;
                }
                if (lEstProcheDuGris) {
                    lRGB.r = Math.borner(lRGB.r + 50, 180, 255);
                    lRGB.g = Math.borner(lRGB.g + 50, 180, 255);
                    lRGB.b = Math.borner(lRGB.b + 50, 180, 255);
                    return this.rgbToCouleur(lRGB);
                } else {
                    lHSL.s = Math.max(lHSL.s - 100, 60);
                    if (lHSL.l < 140) {
                        lHSL.l = 160;
                    } else if (lHSL.l < 160) {
                        lHSL.l = 200;
                    } else {
                        lHSL.l = 220;
                    }
                    return this.hsvToCouleur(this.hslDelphiToHSV(lHSL));
                }
            }
            getCouleurContrastee(aCouleur, aCouleurFond, aParametresContraste) {
                if (!aCouleur || !aCouleurFond) {
                    return aCouleur || '#000';
                }
                if (!aParametresContraste) {
                    aParametresContraste = {};
                }
                if (aParametresContraste.ponderationFoncee === undefined) {
                    aParametresContraste.ponderationFoncee = 1;
                }
                if (aParametresContraste.ponderationClaire === undefined) {
                    aParametresContraste.ponderationClaire = 1;
                }
                const lHSL = UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(aCouleur));
                const lHSLFond = UtilitaireCouleur_1.UtilitaireCouleur.hsvToHSLDelphi(UtilitaireCouleur_1.UtilitaireCouleur.couleurToHSV(aCouleurFond));
                const lDeltaInitial = 30;
                const lDeltaRenduPlusFoncee = lDeltaInitial * aParametresContraste.ponderationFoncee;
                const lDeltaRenduPlusClair = lDeltaInitial * aParametresContraste.ponderationClaire;
                if (lHSLFond.l > 75) {
                    if (lHSL.l >= lDeltaRenduPlusFoncee) {
                        lHSL.l += (-1 * lDeltaRenduPlusFoncee);
                    } else {
                        lHSL.l = 0;
                    }
                } else {
                    lHSL.l = UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiMax - lDeltaRenduPlusClair;
                }
                return UtilitaireCouleur_1.UtilitaireCouleur.hsvToCouleur(UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiToHSV(lHSL));
            }
        }
        exports._ObjetCouleur = _ObjetCouleur;
        _ObjetCouleur.hslDelphiMax = UtilitaireCouleur_1.UtilitaireCouleur.hslDelphiMax;
        class ObjectCouleurCellule {
            constructor(aFond, aTexte, aBordure) {
                this.fond = aFond;
                this.texte = aTexte;
                this.bordure = aBordure;
            }
            getFond(aPourImpression) {
                return aPourImpression ? global.GCouleur.blanc : this.fond;
            }
            getTexte(aPourImpression) {
                return aPourImpression ? global.GCouleur.noir : this.texte;
            }
            getBordure(aPourImpression) {
                return aPourImpression ? global.GCouleur.noir : this.bordure;
            }
        }
        exports.ObjectCouleurCellule = ObjectCouleurCellule;
        class ObjectCouleurCelluleCumul extends ObjectCouleurCellule {
        }
        class ObjectCouleurCelluleFC extends ObjectCouleurCellule {
        }
        class ObjectCouleurCelluleListe extends ObjectCouleurCellule {
        }
        exports.ObjectCouleurCelluleListe = ObjectCouleurCelluleListe;
    },
    fn: '_objetcouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCouleur = void 0;
        const _ObjetCouleur_1 = require("_ObjetCouleur");
        const ObjetStyle_1 = require("ObjetStyle");
        class ObjetCouleur extends _ObjetCouleur_1._ObjetCouleur {
            constructor(aAvecNonEditable) {
                super(aAvecNonEditable);
                this.service = this.intermediaire;
                this.note = '#FFFFCC';
                this.periodesFonce = ['', '#CC33CC', '#399361', '#3399FF', '#CC33CC', '#399361', '#CC33CC'];
                this.periodesClair = ['', '#EBA2D5', '#8CE4A3', '#A9D4E9', '#EBA2D5', '#8CE4A3', '#EBA2D5'];
                this.grilleOccupation = {
                    fond: '#808080',
                    placeLibre: '#FFFFFF',
                    bordure: '#f9f4f0'
                };
                this.grilleSlider = {
                    fond: '#D8D8D8',
                    fondBouton: '#F0F0F0',
                    fondBoutonSurvol: '#D0D0D0',
                    fondBoutonSelectionne: '#FFFFFF',
                    boutonBordureFonce: '#A0A0A0',
                    boutonBordureClaire: '#FFFFFF'
                };
                this.voeuxRencontres = ['#FFFFFF', '#F7B95D', '#7EECAA', '#F95959'];
                this.diagnostic = {
                    placeLibre: 'white',
                    occupation: 'red',
                    occupationPermanence: '#FFBF3A',
                    demiPension: '#884605',
                    site: '#FF00CC',
                    absenceRessource: '#CC0033',
                    indisponibilite: '#d5818a',
                    gaev: '#CC0033',
                    recreation: '#784c1e'
                };
                $.extend(this.grille, {
                    indisponibilite: '#F18280',
                    indisponibiliteSouple: '#f9d059',
                    voeu: '#8acb63',
                    priorite1: '#f000f0',
                    priorite2: '#990099',
                    priorite3: '#500070',
                    demiPensionActive: '#52E252',
                    demiPensionInactive: '#B54095',
                    indisponibiliteSession: '#0066CC',
                    indisponibiliteSessionPlanning: '#326699',
                    horsPlageSessionRencontre: '#F0F0F0',
                    recreations: '#F4D217'
                });
            }
            composeCouleurSelection() {
                return ObjetStyle_1.GStyle.composeCouleur(this.selection.fond, this.selection.texte);
            }
            setCouleurSelection(aId) {
                ObjetStyle_1.GStyle.setCouleur(aId, this.selection.fond, this.selection.texte);
            }
        }
        exports.ObjetCouleur = ObjetCouleur;
    },
    fn: 'objetcouleur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeCollectiviteToTypeThemeCollectivite = exports.TypeCollectivite = void 0;
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        var TypeCollectivite;
        (function(TypeCollectivite) {
            TypeCollectivite[TypeCollectivite["TCL_Aucune"] = 0] = "TCL_Aucune";
            TypeCollectivite[TypeCollectivite["TCL_IleDeFrance"] = 1] = "TCL_IleDeFrance";
        }
        )(TypeCollectivite || (exports.TypeCollectivite = TypeCollectivite = {}));
        const TypeCollectiviteToTypeThemeCollectivite = (aType) => {
            switch (aType) {
            case TypeCollectivite.TCL_IleDeFrance:
                return TypeThemeCouleur_1.TypeThemeCollectivite.ColIdf;
            }
        }
        ;
        exports.TypeCollectiviteToTypeThemeCollectivite = TypeCollectiviteToTypeThemeCollectivite;
    },
    fn: 'typecollectivite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametres = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetCycles_1 = require("ObjetCycles");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        const TypeDomaine_1 = require("TypeDomaine");
        const TypeNote_1 = require("TypeNote");
        const Enumere_DomaineFrequence_1 = require("Enumere_DomaineFrequence");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_PeriodeDeNotation_1 = require("Enumere_PeriodeDeNotation");
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const ObjetParametresCP_1 = require("ObjetParametresCP");
        const ObjetCouleur_1 = require("ObjetCouleur");
        const TypeCollectivite_1 = require("TypeCollectivite");
        global.GParametres = null;
        class ObjetParametres extends ObjetParametresCP_1.ObjetParametresCP {
            constructor(aJSON) {
                super();
                this.application = GApplication;
                this.application.initDateServeur(aJSON.DateServeurHttp);
                this.application.setDateDemo(aJSON.DateDemo);
                if (aJSON.urlLogout) {
                    this.application.urlLogout = aJSON.urlLogout;
                }
                this.avecMembre = aJSON.avecMembre;
                this.pourNouvelleCaledonie = aJSON.pourNouvelleCaledonie;
                this.genreImageConnexion = aJSON.genreImageConnexion;
                this.urlImageConnexion = aJSON.urlImageConnexion;
                this.urlFondEcran = aJSON.urlFondEcran;
                this.avecAccesMobile = aJSON.AvecEspaceMobile;
                this.URLMobile = aJSON.URLMobile;
                this.URLEspace = aJSON.URLEspace;
                this.logoProduitCss = aJSON.logoProduitCss;
                this.listeCivilites = aJSON.listeCivilites;
                this.listePays = aJSON.listePays;
                this.listeLienParente = aJSON.listeLienParente;
                this.listeMatieres = aJSON.listeMatieres;
                this.listeOrientations = aJSON.listeOrientations;
                this.listeVilles = aJSON.listeVilles;
                this.listeRegimes = aJSON.listeRegimes;
                this.listeEtablissements = aJSON.listeEtablissements;
                this.listeSituations = aJSON.listeSituations;
                this.listeProfessions = aJSON.listeProfessions;
                this.listeSessionsInscriptions = aJSON.listeSessionsInscriptions;
                this.listePolices = aJSON.listePolices;
                this.PageEtablissement = aJSON.PageEtablissement;
                const lJGeneral = this.general = aJSON.General;
                this.version = lJGeneral.version;
                this.versionPN = lJGeneral.versionPN;
                this.millesime = lJGeneral.millesime;
                this.nomProduit = lJGeneral.nomProduit;
                this.langue = lJGeneral.langue;
                this.langID = lJGeneral.langID;
                this.listeLangues = lJGeneral.listeLangues;
                this.publierMentions = lJGeneral.publierMentions;
                this.avecForum = lJGeneral.avecForum;
                this.estHebergeEnFrance = lJGeneral.estHebergeEnFrance;
                this.urlSiteIndexEducation = lJGeneral.urlSiteIndexEducation;
                this.urlInfosHebergement = lJGeneral.urlSiteInfosHebergement;
                this.urlAide = lJGeneral.UrlAide;
                this.urlAccesVideos = lJGeneral.urlAccesVideos;
                this.urlAccesTwitter = lJGeneral.urlAccesTwitter;
                this.urlFAQEnregistrementDoubleAuth = lJGeneral.urlFAQEnregistrementDoubleAuth;
                this.urlTutoVideoSecurite = lJGeneral.urlTutoVideoSecurite;
                this.urlCanope = lJGeneral.urlCanope;
                this.urlDeclarationAccessibilite = lJGeneral.urlDeclarationAccessibilite;
                this.accessibiliteNonConforme = lJGeneral.accessibiliteNonConforme;
                this.labelLienProduit = aJSON.labelLienProduit;
                this.urlLogo = lJGeneral.urlLogo;
                this.logoDepartementImage = lJGeneral.logoDepartementImage;
                this.logoDepartementLien = lJGeneral.logoDepartementLien;
                this.avecChoixConnexion = lJGeneral.AvecChoixConnexion;
                this.numeroPremiereSemaine = lJGeneral.numeroPremiereSemaine;
                this.anneeScolaire = lJGeneral.AnneeScolaire;
                this.dateDebutPremierCycle = lJGeneral.dateDebutPremierCycle;
                this.PremierLundi = lJGeneral.PremierLundi;
                this.PremiereDate = lJGeneral.PremiereDate;
                this.DerniereDate = lJGeneral.DerniereDate;
                this.PremierJourSemaine = ObjetDate_1.GDate.getJourDeDate(this.PremierLundi);
                this.DernierJourSemaine = (this.PremierJourSemaine + 6) % 7;
                this.listeJoursFeries = lJGeneral.listeJoursFeries;
                this.JourOuvre = lJGeneral.JourOuvre;
                this.JoursOuvres = lJGeneral.JoursOuvres;
                this.DemiJourneesOuvrees = lJGeneral.DemiJourneesOuvrees;
                this.joursDemiPension = lJGeneral.JoursDemiPension;
                this.JoursFeries = this.getJoursFeries();
                this.PlacesParJour = lJGeneral.PlacesParJour;
                this.PlacesParHeure = lJGeneral.PlacesParHeure;
                this.DureeSequence = lJGeneral.DureeSequence;
                this.PlaceDemiJournee = lJGeneral.PlaceDemiJourneeAbsence;
                this.saisirAbsencesParDJ = lJGeneral.saisirAbsencesParDJ;
                this.joursOuvresParCycle = lJGeneral.joursOuvresParCycle;
                this.premierJourSemaine = lJGeneral.premierJourSemaine;
                this.grillesEDTEnCycle = lJGeneral.grillesEDTEnCycle;
                this.setOfJoursCycleOuvre = lJGeneral.setOfJoursCycleOuvre;
                this.activationDemiPension = lJGeneral.activationDemiPension;
                this.debutDemiPension = lJGeneral.debutDemiPension;
                this.finDemiPension = lJGeneral.finDemiPension;
                this.recreations = lJGeneral.recreations;
                this.AvecHeuresPleinesApresMidi = lJGeneral.AvecHeuresPleinesApresMidi;
                this.LibellesHeures = lJGeneral.ListeHeures;
                this.LibellesHeuresFin = lJGeneral.ListeHeuresFin;
                this.LibellesHeuresFinPourVS = lJGeneral.ListeHeuresFinPourVS;
                this.PremiereHeure = lJGeneral.PremiereHeure;
                this.afficherSequences = lJGeneral.afficherSequences;
                this.sequences = lJGeneral.sequences;
                this.ActivationMessagerieEntreParents = lJGeneral.ActivationMessagerieEntreParents;
                this.GestionParcoursExcellence = lJGeneral.GestionParcoursExcellence;
                this.activerBlog = lJGeneral.activerBlog;
                this.NomEtablissement = lJGeneral.NomEtablissement;
                this.NomEtablissementConnexion = lJGeneral.NomEtablissementConnexion;
                this.NomEspace = aJSON.Nom;
                this.listeComboPeriodes = lJGeneral.listeComboPeriodes;
                this.listeAnneesPrecedentes = lJGeneral.listeAnneesPrecedentes;
                this.tailleMaxAppreciation = lJGeneral.TailleMaxAppreciation;
                this.baremeNotation = lJGeneral.BaremeNotation;
                if (TypeNote_1.TypeNote) {
                    TypeNote_1.TypeNote.baremeNotation = this.baremeNotation;
                }
                this.baremeMaxDevoirs = lJGeneral.BaremeMaxDevoirs;
                this.nbJDecalageDatePublicationParDefautDevoirEval = lJGeneral.NbJDecalageDatePublicationParDefaut || 0;
                this.nbJDecalagePublicationAuxParents = lJGeneral.NbJDecalagePublicationAuxParents || 0;
                this.avecAffichageDecalagePublicationNotesAuxParents = !!lJGeneral.AvecAffichageDecalagePublicationNotesAuxParents;
                this.avecAffichageDecalagePublicationEvalsAuxParents = !!lJGeneral.AvecAffichageDecalagePublicationEvalsAuxParents;
                if (TypeNote_1.TypeNote) {
                    TypeNote_1.TypeNote.listeAnnotationsAutorisees = lJGeneral.listeAnnotationsAutorisees;
                }
                this.minBaremeQuestionQCM = lJGeneral.minBaremeQuestionQCM;
                this.maxBaremeQuestionQCM = lJGeneral.maxBaremeQuestionQCM;
                this.maxNombrePointsQCM = lJGeneral.maxNbPointQCM;
                this.maxNiveauQCM = lJGeneral.maxNiveauQCM;
                this.tailleLibelleElementGrilleCompetence = lJGeneral.tailleLibelleElementGrilleCompetence;
                this.tailleCommentaireDevoir = lJGeneral.tailleCommentaireDevoir;
                this.tailleMaxLibelleUrlCours = lJGeneral.tailleLibelleUrlCours;
                this.tailleMaxCommentaireUrlCours = lJGeneral.tailleCommentaireUrlCours;
                this.listeNiveauxDAcquisitions = lJGeneral.ListeNiveauxDAcquisitions;
                this.afficherAbbreviationNiveauDAcquisition = lJGeneral.AfficherAbbreviationNiveauDAcquisition;
                this.avecEvaluationHistorique = lJGeneral.AvecEvaluationHistorique;
                this.avecRecuperationInfosConnexion = lJGeneral.AvecRecuperationInfosConnexion;
                this.parentAutoriseChangerMDP = !!lJGeneral.parentAutoriseChangerMDP;
                this.avecElevesRattaches = lJGeneral.AvecElevesRattaches;
                this.police = lJGeneral.Police;
                this.taillePolice = lJGeneral.TaillePolice + 'px';
                this.collectivite = lJGeneral.Collectivite;
                this.publicationSuiviStageParDefaut = lJGeneral.publicationSuiviStage;
                if (lJGeneral.maskTelephone) {
                    ObjetChaine_1.GChaine.maskTelephone = lJGeneral.maskTelephone;
                }
                const lDomainesFrequences = lJGeneral.DomainesFrequences;
                const lLibellesFrequences = lJGeneral.LibellesFrequences;
                this.frequences = null;
                if (!this.application.getEtatUtilisateur().pourPrimaire()) {
                    this.frequences = [];
                    for (let lNumeroSemaine = 1; lNumeroSemaine <= ObjetCycles_1.ObjetCycles.C_MaxDomaineCycle; lNumeroSemaine++) {
                        this.frequences[lNumeroSemaine] = {};
                        for (const lKey of MethodesObjet_1.MethodesObjet.enumKeys(Enumere_DomaineFrequence_1.EGenreDomaineFrequence)) {
                            const lGenre = Enumere_DomaineFrequence_1.EGenreDomaineFrequence[lKey];
                            if ((lGenre === Enumere_DomaineFrequence_1.EGenreDomaineFrequence.QZ1) || (lGenre === Enumere_DomaineFrequence_1.EGenreDomaineFrequence.QZ2)) {
                                if (lDomainesFrequences[lGenre].getValeur(lNumeroSemaine)) {
                                    this.frequences[lNumeroSemaine].genre = lGenre;
                                    this.frequences[lNumeroSemaine].libelle = lLibellesFrequences[lGenre];
                                }
                            }
                        }
                    }
                }
                this.initialiserCouleur();
                this.listePeriodes = new ObjetListeElements_1.ObjetListeElements().fromJSON(lJGeneral.ListePeriodes, this._ajouterPeriode);
                this.nomCookieAppli = lJGeneral.nomCookieAppli;
                if ((GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Inscription) && aJSON.infosInscription) {
                    this.infosInscription = aJSON.infosInscription;
                }
                this.mentionsPagesPubliques = aJSON.mentionsPagesPubliques;
                this.aideContextuelle = false;
                if (lJGeneral.aideContextuelle) {
                    this.aideContextuelle = lJGeneral.aideContextuelle;
                    this.aideContextuelle.getNombreDeGenreOnglet = function(aGenre) {
                        let lResult = 0;
                        let lAccessor;
                        if (MethodesObjet_1.MethodesObjet.isNumber(aGenre)) {
                            lAccessor = aGenre.toString();
                        } else if (MethodesObjet_1.MethodesObjet.isString(aGenre)) {
                            lAccessor = aGenre;
                        }
                        if (lAccessor !== undefined) {
                            lResult = this[lAccessor];
                            if (lResult === undefined) {
                                lResult = 0;
                            }
                        }
                        return lResult;
                    }
                    ;
                }
            }
            getLibelleHeure(aPlace) {
                try {
                    return this.LibellesHeures.getLibelle(aPlace);
                } catch (e) {
                    return '';
                }
            }
            initAuthentification(aParam) {
                this.domaineVerrou = aParam.domaineVerrou ? aParam.domaineVerrou : new TypeDomaine_1.TypeDomaine();
                if (aParam.avecMembre !== undefined) {
                    this.avecMembre = aParam.avecMembre;
                }
            }
            initialiserCouleur() {
                var _a, _b;
                this.themeParDefaut = this.application.estEDT ? TypeThemeCouleur_1.TypeThemeProduit.EDT : TypeThemeCouleur_1.TypeThemeProduit.Pronote;
                if ((this === null || this === void 0 ? void 0 : this.collectivite) && Object.values(TypeCollectivite_1.TypeCollectivite).includes((_a = this === null || this === void 0 ? void 0 : this.collectivite) === null || _a === void 0 ? void 0 : _a.genreCollectivite) && ((_b = this === null || this === void 0 ? void 0 : this.collectivite) === null || _b === void 0 ? void 0 : _b.genreCollectivite) !== TypeCollectivite_1.TypeCollectivite.TCL_Aucune) {
                    const lThemeCollectivite = (0,
                    TypeCollectivite_1.TypeCollectiviteToTypeThemeCollectivite)(this.collectivite.genreCollectivite);
                    if (lThemeCollectivite) {
                        this.themeParDefaut = lThemeCollectivite;
                    }
                }
                ThemesCouleurs_1.ThemesCouleurs.setTheme(this.themeParDefaut, this.application.getEtatUtilisateur().estAvecThemeAccessible());
                global.GCouleur = new ObjetCouleur_1.ObjetCouleur(![Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Inscription, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur].includes(GEtatUtilisateur.GenreEspace));
            }
            getNomEspace() {
                return this.NomEspace;
            }
            getCookieValidationAppli() {
                return this.nomCookieAppli;
            }
            getJoursFeries() {
                const lJoursFeries = new TypeDomaine_1.TypeDomaine(null,ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, this.DerniereDate) + 1);
                for (let I = 0; I < this.listeJoursFeries.count(); I++) {
                    const lJourFerie = this.listeJoursFeries.get(I);
                    lJoursFeries.setValeur(true, ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, lJourFerie.dateDebut) + 1, ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, lJourFerie.dateFin) + 1);
                }
                return lJoursFeries;
            }
            getDomaineCycleFerie() {
                if (!this.domaineCycleFerie) {
                    this.domaineCycleFerie = new TypeDomaine_1.TypeDomaine();
                    let LSemaineFeriee;
                    const lNombreCycles = IE.Cycles.nombreCyclesAnneeScolaire();
                    const lNombreJoursCycle = IE.Cycles.nombreJoursOuvresParCycle();
                    for (let lCycle = 1; lCycle <= lNombreCycles; lCycle += 1) {
                        LSemaineFeriee = true;
                        for (let lJourCycle = 0; lJourCycle < lNombreJoursCycle && LSemaineFeriee; lJourCycle += 1) {
                            const lJourAnnuel = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(this.dateDebutPremierCycle, IE.Cycles.jourCycleEnDate(lJourCycle, lCycle));
                            LSemaineFeriee = this.JoursFeries.getValeur(lJourAnnuel + 1);
                        }
                        this.domaineCycleFerie.setValeur(LSemaineFeriee, lCycle);
                    }
                }
                return this.domaineCycleFerie;
            }
            getTailleMaxAppreciationParEnumere(aGenre) {
                let lTailleMaxAppreciation = 255;
                if (aGenre !== null) {
                    lTailleMaxAppreciation = this.tailleMaxAppreciation[aGenre];
                }
                return lTailleMaxAppreciation ? lTailleMaxAppreciation : 1000000;
            }
            _ajouterPeriode(aJSON, aElement) {
                aElement.periodeNotation = aJSON.periodeNotation;
                aElement.dates = {
                    debut: aJSON.dateDebut,
                    fin: aJSON.dateFin
                };
            }
            getDatesPeriodeDeNotation(aNumeroPeriode) {
                const lPeriode = this.listePeriodes.getElementParNumero(aNumeroPeriode);
                return lPeriode ? lPeriode.dates : null;
            }
            getDateDansPeriodeDeNotation(aDate, aNumeroPeriode) {
                const lDates = this.getDatesPeriodeDeNotation(aNumeroPeriode);
                const lDate = aDate ? aDate : ObjetDate_1.GDate.getDateCourante();
                if (lDates && (lDate > lDates.fin)) {
                    return lDates.fin;
                }
                if (lDates && (lDate < lDates.debut)) {
                    return lDates.debut;
                }
                return lDate;
            }
            getPeriodeDeNotation(aNumeroPeriode) {
                const lPeriode = this.listePeriodes.getElementParNumero(aNumeroPeriode);
                return lPeriode ? lPeriode.periodeNotation : null;
            }
            getPeriodeDeNotationParGenre(aGenrePeriodeDeNotation) {
                for (let i = 0; i < this.listePeriodes.count(); i++) {
                    const lPeriode = this.listePeriodes.get(i);
                    if (aGenrePeriodeDeNotation === lPeriode.periodeNotation) {
                        return lPeriode;
                    }
                }
            }
            estPeriodeTrimestrielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estTrimestrielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeSemestrielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estSemestrielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeAnnuelle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estAnnuelle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            estPeriodeOfficielle(aNumeroPeriode) {
                return Enumere_PeriodeDeNotation_1.EGenrePeriodeDeNotationUtil.estOfficielle(this.getPeriodeDeNotation(aNumeroPeriode));
            }
            getListeComboPeriodes(aGenres) {
                if (!aGenres) {
                    return this.listeComboPeriodes;
                }
                const lListePeriodes = new ObjetListeElements_1.ObjetListeElements();
                for (let I = 0; I < this.listeComboPeriodes.count(); I++) {
                    const lPeriode = this.listeComboPeriodes.get(I);
                    if (aGenres.includes(lPeriode.getGenre())) {
                        lListePeriodes.addElement(lPeriode);
                    }
                }
                return lListePeriodes;
            }
        }
        exports.ObjetParametres = ObjetParametres;
    },
    fn: 'parametres.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Chronometre = void 0;
        class Chronometre {
            constructor() {
                this.reset();
                this.actif = true;
            }
            start() {
                this.dateChrono = Date.now();
                this.actif = true;
            }
            stop() {
                this.valeur += Date.now() - this.dateChrono;
                this.actif = false;
            }
            reset() {
                this.dateChrono = Date.now();
                this.valeur = 0;
            }
            toString() {
                const lValeur = this.valeur + (this.actif ? (Date.now() - this.dateChrono) : 0);
                if (lValeur > 1000) {
                    return (lValeur / 1000) + ' s';
                }
                return lValeur + ' ms';
            }
        }
        exports.Chronometre = Chronometre;
    },
    fn: 'chronometre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.deferLoadingScript = void 0;
        require("NamespaceIE");
        require("Divers");
        const Invocateur_1 = require("Invocateur");
        const Chronometre_1 = require("Chronometre");
        const lModules = {}
          , isOpera = typeof window.opera !== 'undefined' && window.opera.toString() === '[object Opera]'
          , uUrlsProcess = {}
          , options = {
            done: null,
            fail: null,
            messageChargement: ''
        };
        let lModuleEnCours = null, lSupportASync, lHead = null;
        const uPileChargementEnCours = {};
        function createNode(config) {
            const node = config.xhtml ? document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') : document.createElement('script');
            if (config.scriptType) {
                node.type = config.scriptType;
            }
            node.async = false;
            return node;
        }
        function removeListener(node, func, name, ieName) {
            if (node.detachEvent && !isOpera) {
                if (ieName) {
                    node.detachEvent(ieName, func);
                }
            } else {
                node.removeEventListener(name, func, false);
            }
        }
        function _getHead() {
            if (!lHead) {
                lHead = document.getElementsByTagName('head')[0];
            }
            return lHead;
        }
        function createLoaderScript(aUrl, aCallback, aParams) {
            let lLoader = null;
            function finScript(evt) {
                const node = (evt.currentTarget || evt.srcElement);
                removeListener(node, onScriptLoad, 'load', 'onreadystatechange');
                removeListener(node, onScriptError, 'error');
                return node;
            }
            function onScriptLoad(evt) {
                if (evt.type === 'load' || (/^(complete|loaded)$/.test((evt.currentTarget || evt.srcElement).readyState))) {
                    finScript(evt);
                    lLoader.loaded = true;
                    lLoader.finChargement();
                }
            }
            lLoader = {
                url: aUrl,
                loaded: false,
                loadedFail: false,
                chrono: null,
                supportASync: false,
                timerFail: -1,
                params: aParams,
                load: function() {
                    if (this.loaded) {
                        this.finChargement();
                        return;
                    }
                    const node = createNode({});
                    if (lSupportASync === undefined) {
                        if (!document.addEventListener) {
                            lSupportASync = false;
                        } else {
                            lSupportASync = 'async'in node;
                        }
                    }
                    if (node.attachEvent && !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) && !isOpera) {
                        node.attachEvent('onreadystatechange', onScriptLoad);
                        lSupportASync = false;
                    } else {
                        node.addEventListener('load', onScriptLoad, false);
                        node.addEventListener('error', onScriptError, false);
                    }
                    node.src = this.url;
                    if (lSupportASync && this.params.accepteASync) {
                        node.async = false;
                    }
                    _getHead().appendChild(node);
                    const lSelf = this;
                    this.timerFail = setTimeout( () => {
                        lSelf.loadedTimeoutFail = true;
                        onScriptError({
                            currentTarget: node
                        });
                    }
                    , aParams.timeoutFailScript);
                    if (lSupportASync && this.params.accepteASync && this.next) {
                        this.params._compteurTimeout += 1;
                        if (this.params.timeoutLoad >= 0 && this.params._compteurTimeout >= this.params.nbPourDelaiTimeout) {
                            this.params._compteurTimeout = 0;
                            setTimeout( () => {
                                lSelf.next.load();
                            }
                            , this.params.timeoutLoad);
                        } else {
                            Promise.resolve().then( () => {
                                this.next.load();
                            }
                            );
                        }
                    }
                },
                finChargement: function() {
                    clearTimeout(this.timerFail);
                    aCallback(this);
                    if (this.next && !(lSupportASync && this.params.accepteASync)) {
                        this.next.load();
                    }
                }
            };
            function onScriptError(evt) {
                finScript(evt);
                lLoader.loadedFail = true;
                lLoader.finChargement();
            }
            return lLoader;
        }
        function _loadSingletonModule(aNom, aParams) {
            const lNom = aNom.toLowerCase()
              , lModule = lModules[lNom];
            lModule.nom = lNom;
            lModule.params = aParams;
            const _callbackFin = (aEchec) => {
                if (aEchec) {
                    if (options.fail) {
                        options.fail(aNom, lModule);
                    }
                    if (aParams.fail) {
                        aParams.fail(aNom, lModule);
                    }
                } else {
                    if (options.done) {
                        options.done(aNom, lModule);
                    }
                    aParams.done(aNom, lModule);
                }
            }
            ;
            if (uPileChargementEnCours[lNom]) {
                uPileChargementEnCours[lNom].push(_callbackFin);
                return;
            }
            uPileChargementEnCours[lNom] = [];
            const lCallbackPile = (aEchec) => {
                _callbackFin();
                if (uPileChargementEnCours[lNom]) {
                    const lTab = uPileChargementEnCours[lNom];
                    delete uPileChargementEnCours[lNom];
                    lTab.forEach( (aFunc) => {
                        aFunc(aEchec);
                    }
                    );
                }
            }
            ;
            if (!aParams || !aParams.done) {
                lCallbackPile(true);
                return exports.deferLoadingScript;
            }
            if (!lModule) {
                lCallbackPile(true);
                return exports.deferLoadingScript;
            }
            lModuleEnCours = lNom;
            let lUrl, i, lScript, LPrevScript;
            function _callback(aLoader) {
                if (lModule.interrupt) {
                    return;
                }
                if (aLoader.loadedFail) {
                    aLoader.next = null;
                    lModule.interrupt = true;
                    uUrlsProcess[aLoader.url].failed = true;
                    lCallbackPile(true);
                    return;
                }
                uUrlsProcess[aLoader.url].resolved = true;
                if (!aLoader.next) {
                    lCallbackPile();
                }
            }
            let lSurStartLoading = true;
            lModule.first = null;
            for (i = 0; i < lModule.urls.length; i++) {
                lUrl = lModule.urls[i];
                if (!uUrlsProcess[lUrl]) {
                    uUrlsProcess[lUrl] = {
                        started: true
                    };
                    if (lSurStartLoading) {
                        lSurStartLoading = false;
                    }
                    lScript = createLoaderScript(lUrl, _callback, aParams);
                    if (LPrevScript) {
                        LPrevScript.next = lScript;
                    }
                    if (!lModule.first) {
                        lModule.first = lScript;
                    }
                    LPrevScript = lScript;
                }
            }
            if (lModule.first) {
                lModule.first.load(lModule);
            } else {
                lCallbackPile();
            }
        }
        exports.deferLoadingScript = {
            add(aNom, aUrls) {
                const lNom = aNom.toLowerCase()
                  , lModule = {
                    urls: [],
                    count: 0
                };
                let lUrl, i;
                lModules[lNom] = lModule;
                for (i = 0; i < aUrls.length; i++) {
                    lUrl = aUrls[i];
                    lModule.urls.push(lUrl);
                }
                return exports.deferLoadingScript;
            },
            contains(aNom) {
                return !!lModules[aNom.toLowerCase()];
            },
            setOptions(aOptions) {
                Object.assign(options, aOptions);
                return exports.deferLoadingScript;
            },
            load(aNom, aParam) {
                if (typeof aNom === 'string') {
                    exports.deferLoadingScript.load([aNom], aParam);
                    return;
                }
                function _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail) {
                    if (aNomsTraites.length === 0) {
                        lModuleEnCours = null;
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        aDone();
                        return;
                    }
                    aParam.done = function() {
                        aNomsTraites.shift();
                        if (aParam.timeoutLoadGroupe >= 0) {
                            setTimeout( () => {
                                _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail);
                            }
                            , aParam.timeoutLoadGroupe);
                        } else {
                            Promise.resolve().then( () => {
                                _loadSingletonDeTableau(aNomsTraites, aParam, aDone, aFail);
                            }
                            );
                        }
                    }
                    ;
                    aParam.fail = function(aNom) {
                        aNomsTraites = [];
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        if (aFail) {
                            aFail(aNom);
                        }
                    }
                    ;
                    aParam._compteurTimeout = 0;
                    if (exports.deferLoadingScript.contains(aNomsTraites[0])) {
                        if (aParam.eventIOExt) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                        if (aParam.eventIO !== false) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                                actualisation: true,
                                message: (options.messageChargement + ' ' + aNomsTraites[0]).trim()
                            });
                        }
                        _loadSingletonModule(aNomsTraites[0], aParam);
                    } else {
                        aParam.done();
                    }
                }
                const lParams = Object.assign({
                    done: null,
                    fail: null,
                    eventIO: false,
                    timeoutLoadGroupe: -1,
                    timeoutLoad: -1,
                    nbPourDelaiTimeout: 1,
                    accepteASync: true,
                    timeoutFailScript: 3 * 60 * 1000
                }, aParam);
                if (Array.isArray(aNom)) {
                    const lDone = lParams.done
                      , lFail = lParams.fail;
                    if (lParams.eventIO !== false) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                            message: options.messageChargement
                        });
                    }
                    _loadSingletonDeTableau(aNom, lParams, lDone, lFail);
                    return exports.deferLoadingScript;
                } else {
                    return exports.deferLoadingScript;
                }
            },
            loadAsync(aNom, aParam) {
                return new Promise( (aResolve, aReject) => {
                    const lParams = Object.assign(aParam || {}, {
                        done: function(aParam) {
                            aResolve(aParam);
                        },
                        fail: function(aParam) {
                            aReject(aParam);
                        }
                    });
                    exports.deferLoadingScript.load(aNom, lParams);
                }
                );
            },
            afficherPatience() {
                var _a;
                if (!lModuleEnCours) {
                    return false;
                }
                const lModule = lModules[lModuleEnCours.toLowerCase()];
                if (!lModule || !lModule.nom || !lModule.params) {
                    return false;
                }
                lModule.params.eventIO = true;
                lModule.params.eventIOExt = true;
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                    message: (options.messageChargement + ' ' + lModule.nom).trim()
                });
                return true;
            }
        };
    },
    fn: 'deferloadingscript.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("forge.min.js");
    },
    fn: 'declarationforge.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreCryptage = void 0;
        var EGenreCryptage;
        (function(EGenreCryptage) {
            EGenreCryptage[EGenreCryptage["Aucun"] = 0] = "Aucun";
            EGenreCryptage[EGenreCryptage["Unicode"] = 1] = "Unicode";
            EGenreCryptage[EGenreCryptage["AES"] = 2] = "AES";
            EGenreCryptage[EGenreCryptage["RSA1024"] = 3] = "RSA1024";
            EGenreCryptage[EGenreCryptage["RSA2048"] = 4] = "RSA2048";
        }
        )(EGenreCryptage || (exports.EGenreCryptage = EGenreCryptage = {}));
    },
    fn: 'enumere_cryptage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreIdsRequeteAjax = void 0;
        var EGenreIdsRequeteAjax;
        (function(EGenreIdsRequeteAjax) {
            EGenreIdsRequeteAjax["SignatureAttente"] = "_SignatureAttente_";
            EGenreIdsRequeteAjax["numeroSession"] = "session";
            EGenreIdsRequeteAjax["numeroOrdre"] = "numeroOrdre";
            EGenreIdsRequeteAjax["donneesSecurisee"] = "donneesSec";
            EGenreIdsRequeteAjax["donneesNonSecurisee"] = "donneesNonSec";
            EGenreIdsRequeteAjax["nomFonction"] = "nom";
            EGenreIdsRequeteAjax["echecReseau"] = "echecReseau";
        }
        )(EGenreIdsRequeteAjax || (exports.EGenreIdsRequeteAjax = EGenreIdsRequeteAjax = {}));
    },
    fn: 'enumere_idsrequeteajax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("pako.min");
        require("pako");
    },
    fn: 'declarationpako.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCryptageAES = void 0;
        require('DeclarationForge.js');
        class ObjetCryptageAES {
            decrypter(aChaine, aCle, aIv) {
                try {
                    aCle = forge.md.md5.create().update(aCle.bytes()).digest();
                    aIv = aIv.length() ? forge.md.md5.create().update(aIv.bytes()).digest() : new forge.util.ByteBuffer('\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0');
                    aChaine = new forge.util.ByteBuffer(forge.util.hexToBytes(aChaine));
                    const lChiffreur = forge.cipher.createDecipher('AES-CBC', aCle);
                    lChiffreur.start({
                        iv: aIv
                    });
                    lChiffreur.update(aChaine);
                    return lChiffreur.finish() && lChiffreur.output.bytes();
                } catch (e) {
                    return false;
                }
            }
            encrypter(aChaine, aCle, aIv) {
                try {
                    aCle = forge.md.md5.create().update(aCle.bytes()).digest();
                    aIv = aIv.length() ? forge.md.md5.create().update(aIv.bytes()).digest() : new forge.util.ByteBuffer('\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0');
                    aChaine = new forge.util.ByteBuffer(aChaine);
                    const lChiffreur = forge.cipher.createCipher('AES-CBC', aCle);
                    lChiffreur.start({
                        iv: aIv
                    });
                    lChiffreur.update(aChaine);
                    return lChiffreur.finish() && lChiffreur.output.toHex();
                } catch (e) {
                    return false;
                }
            }
        }
        exports.ObjetCryptageAES = ObjetCryptageAES;
    },
    fn: 'objetcryptageaes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCryptageRSA = void 0;
        require("DeclarationForge.js");
        const c_rsaPub_modulo_2048 = '83261A50C8778C33B533BF8324A433A536DD5E9F4F08DDBC3EA6F918C3A9B17A37E5B3B1535301ADCFE4ECA4E0A5AC6000195F75C38F55CA2D1F14470EE5CB5DCDAE5750610EBA1BB0C747DC8B85A83003F9B91969704F44D2B7098039AE35A5E67BF854CD94EB1CA888AAA2EB9F5EFC8016E70DEB4E3ADB9D57621139D08918BD63F90C899703E1879A30FCAF92AC9ADDEFCAE432911D05822FDB333FC75C6D3307E4AE7FF6982E54F9F47AD6E421239F287EE110053335FFA55E25C11AA4EE6D0DA2DB90489906BE029D0AF2CBB3227802E2E19577DDA7E149D6D6DE7BFDC447AB0AE7779AC7916FC3C67A72EEFE75C4C3A5A4B694D9B44B25CF43D6075D0D';
        const c_rsaPub_exposant_2048 = '00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001';
        const c_rsaPub_modulo_1024 = 'B99B77A3D72D3A29B4271FC7B7300E2F791EB8948174BE7B8024667E915446D4EEA0C2424B8D1EBF7E2DDFF94691C6E994E839225C627D140A8F1146D1B0B5F18A09BBD3D8F421CA1E3E4796B301EEBCCF80D81A32A1580121B8294433C38377083C5517D5921E8A078CDC019B15775292EFDA2C30251B1CCABE812386C893E5';
        const c_rsaPub_exposant_1024 = '0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001';
        class ObjetCryptageRSA {
            encrypter1024(aChaine) {
                return this._encrypter(c_rsaPub_modulo_1024, c_rsaPub_exposant_1024, aChaine);
            }
            encrypter2048(aChaine) {
                return this._encrypter(c_rsaPub_modulo_2048, c_rsaPub_exposant_2048, aChaine);
            }
            _encrypter(aModulo, aExposant, aChaine) {
                const lRSA = forge.pki.rsa.setPublicKey(new forge.jsbn.BigInteger(aModulo,16), new forge.jsbn.BigInteger(aExposant,16));
                const lResult = forge.util.encode64(lRSA.encrypt(aChaine.bytes()), 64);
                return lResult;
            }
        }
        exports.ObjetCryptageRSA = ObjetCryptageRSA;
    },
    fn: 'objetcryptagersa.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GCryptage = void 0;
        require("DeclarationForge");
        require("DeclarationPako");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const ObjetCryptageAES_1 = require("ObjetCryptageAES");
        const ObjetCryptageRSA_1 = require("ObjetCryptageRSA");
        class ObjetCryptage {
            constructor() {
                this.Minuscules = 'abcdefghijklmnopkrstuvwxyz';
                this.Majuscules = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                this.Nombres = '0123456789';
                this.Caracteres = '&#|^@£$µ?!%ù§~°()[]{}+-*/=.,;';
                this.cryptageAES = new ObjetCryptageAES_1.ObjetCryptageAES();
                this.cryptageRSA = new ObjetCryptageRSA_1.ObjetCryptageRSA();
            }
            getCryptageAES() {
                return this.cryptageAES;
            }
            getCryptageRSA() {
                return this.cryptageRSA;
            }
            genererTexteAleatoire(ALongueur) {
                const LListeCaracteres = this.Minuscules + this.Majuscules + this.Nombres;
                const N = LListeCaracteres.length;
                let LChaine = '';
                while (LChaine.length < ALongueur) {
                    LChaine += LListeCaracteres.charAt(Math.floor(N * Math.random()));
                }
                return LChaine;
            }
            getBuffer(aChaine) {
                return new forge.util.ByteBuffer(forge.util.encodeUtf8(aChaine));
            }
            encrypter(aOptions) {
                const lDefault = {
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.Aucun,
                    chaine: '',
                    cle: '',
                    iv: '',
                    avecAlea: false,
                    avecCompression: false
                };
                const lOptions = {};
                $.extend(lOptions, lDefault, aOptions);
                lOptions.chaine = '' + lOptions.chaine;
                lOptions.chaine = forge.util.encodeUtf8(lOptions.chaine);
                if (lOptions.avecAlea) {
                    lOptions.chaine = this.ajouterAlea(lOptions.chaine);
                }
                if (lOptions.avecCompression) {
                    lOptions.chaine = new forge.util.ByteBuffer(lOptions.chaine).toHex();
                    const lUint = window.pako.deflateRaw(lOptions.chaine, {
                        level: 6,
                        to: 'string'
                    });
                    if (typeof lUint === 'string') {
                        lOptions.chaine = lUint;
                    } else {
                        lOptions.chaine = this.uint8ArrayToStrRaw(lUint);
                    }
                }
                let lChaineEncrypte = '';
                switch (lOptions.genreCryptage) {
                case Enumere_Cryptage_1.EGenreCryptage.Aucun:
                    lChaineEncrypte = lOptions.chaine;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.Unicode:
                    lChaineEncrypte = lOptions.chaine;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.AES:
                    lChaineEncrypte = this.cryptageAES.encrypter(lOptions.chaine, lOptions.cle, lOptions.iv);
                    break;
                default:
                    ;break;
                }
                return lChaineEncrypte;
            }
            decrypter(aOptions) {
                const lDefault = {
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.Aucun,
                    chaine: '',
                    cle: '',
                    iv: '',
                    avecAlea: false,
                    enBytes: false,
                    avecCompression: false
                };
                const lOptions = {};
                $.extend(lOptions, lDefault, aOptions);
                let lChaineEncrypte = lOptions.chaine;
                let lChaineDecrypte = '';
                switch (lOptions.genreCryptage) {
                case Enumere_Cryptage_1.EGenreCryptage.Aucun:
                    lChaineDecrypte = lChaineEncrypte;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.Unicode:
                    lChaineDecrypte = lChaineEncrypte;
                    break;
                case Enumere_Cryptage_1.EGenreCryptage.AES:
                    lChaineDecrypte = this.cryptageAES.decrypter(lChaineEncrypte, lOptions.cle, lOptions.iv);
                    break;
                default:
                    ;break;
                }
                if (lChaineDecrypte !== '' && lOptions.avecCompression) {
                    const lUint = this.strRawToUint8Array(lChaineDecrypte);
                    lChaineDecrypte = window.pako.inflateRaw(lUint, {
                        to: 'string'
                    });
                }
                if (lChaineDecrypte !== '') {
                    try {
                        lChaineDecrypte = forge.util.decodeUtf8(lChaineDecrypte);
                    } catch (e) {
                        lChaineDecrypte = '';
                    }
                }
                if (lChaineDecrypte !== '' && lOptions.avecAlea) {
                    lChaineDecrypte = this.enleverAlea(lChaineDecrypte);
                }
                if (lOptions.enBytes) {
                    const lBuff = new forge.util.ByteBuffer();
                    const lArrInt = lChaineDecrypte.split(',');
                    for (let i = 0; i < lArrInt.length; i++) {
                        lBuff.putInt(parseInt(lArrInt[i]), 8);
                    }
                    lChaineDecrypte = lBuff;
                }
                return lChaineDecrypte;
            }
            ajouterAlea(AChaine) {
                const N = AChaine.length;
                const LTableauAvecAlea = [];
                const LListeCaracteres = this.Minuscules + this.Majuscules + this.Nombres;
                const C = LListeCaracteres.length;
                for (let I = 0; I < N; I++) {
                    LTableauAvecAlea.push(LListeCaracteres.charAt(Math.floor(C * Math.random())));
                    LTableauAvecAlea.push(String(AChaine).charAt(I));
                }
                return LTableauAvecAlea.join('');
            }
            enleverAlea(AChaine) {
                const N = AChaine.length;
                const LTableauSansAlea = new Array(N);
                for (let I = 0; I < N; I += 1) {
                    if (I % 2 === 0) {
                        LTableauSansAlea.push(AChaine.charAt(I));
                    }
                }
                return LTableauSansAlea.join('');
            }
            chiffrementUrl(LChemin, LNomFichier, ACle, ANumeroSession) {
                const LUrlChiffree = this.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: LChemin,
                    cle: ACle
                });
                return 'cheminsecurise' + LUrlChiffree + '/' + LNomFichier + '?Session=' + ANumeroSession;
            }
            strRawToUint8Array(aStr) {
                return Uint8Array.from([...aStr].map(aChar => aChar.charCodeAt(0)));
            }
            uint8ArrayToStrRaw(aUint) {
                const cCHUNK_SZ = 0x8000;
                const lArray = [];
                for (let i = 0; i < aUint.length; i += cCHUNK_SZ) {
                    lArray.push(String.fromCharCode.apply(null, Array.from(aUint.subarray(i, i + cCHUNK_SZ))));
                }
                return lArray.join('');
            }
        }
        const GCryptage = new ObjetCryptage();
        exports.GCryptage = GCryptage;
    },
    fn: 'objetcryptage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getXmlHttp = getXmlHttp;
        try {
            global.Document.prototype.loadXML = function(S) {
                const LDocument = (new DOMParser()).parseFromString(S, 'text/xml');
                while (this.hasChildNodes()) {
                    this.removeChild(this.lastChild);
                }
                for (let I = 0; I < LDocument.childNodes.length; I++) {
                    this.appendChild(this.importNode(LDocument.childNodes[I], true));
                }
            }
            ;
        } catch (e) {}
        try {
            global.Document.prototype.__defineGetter__('xml', function() {
                return (new XMLSerializer()).serializeToString(this);
            });
        } catch (e) {}
        function getXmlHttp() {
            try {
                if (global.XMLHttpRequest) {
                    return new XMLHttpRequest();
                }
                const lActiveX = global.ActiveXObject;
                if (lActiveX) {
                    try {
                        return new lActiveX('Msxml2.XMLHTTP');
                    } catch (e) {
                        return new lActiveX('Microsoft.XMLHTTP');
                    }
                }
            } catch (e) {
                throw new Error('XmlHttp> ' + e);
            }
        }
    },
    fn: 'xmlhttp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEtatRequeteAjax = void 0;
        var TypeEtatRequeteAjax;
        (function(TypeEtatRequeteAjax) {
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["initial"] = 0] = "initial";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["preparationEnvoi"] = 1] = "preparationEnvoi";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["envoye"] = 2] = "envoye";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["recu"] = 3] = "recu";
            TypeEtatRequeteAjax[TypeEtatRequeteAjax["termine"] = 4] = "termine";
        }
        )(TypeEtatRequeteAjax || (exports.TypeEtatRequeteAjax = TypeEtatRequeteAjax = {}));
    },
    fn: 'typeetatrequeteajax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequete = void 0;
        const Enumere_IdsRequeteAjax_1 = require("Enumere_IdsRequeteAjax");
        const XmlHttp_1 = require("XmlHttp");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        class ObjetRequete {
            constructor(aParametres) {
                this.Parametres = {
                    numeroSession: '0',
                    asynchrone: true,
                    post: true,
                    nomRequete: '',
                    genreEspace: 0,
                    sansBlocageInterface: false,
                    nomDeFonction: '',
                    parametres: '',
                    jsonNonSecurise: null,
                    fichiers: null,
                    callBackReadyStateChange: null,
                    pereReponse: null,
                    evenementReponse: null,
                    messageDetail: '',
                    jsonOrigine: null,
                    echecReseau: false,
                    estBackup: false,
                    dataPOST: null,
                    log: {},
                    numeroRequete: 0
                };
                $.extend(this.Parametres, aParametres);
                this.estUneRequete = true;
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial;
            }
            getXmlRequest() {
                return this.Requete;
            }
            enAttente() {
                return this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
            }
            envoieRequete(aParametres) {
                const lParametres = $.extend({
                    numeroOrdre: 0,
                    numeroOrdreChiffre: ''
                }, aParametres);
                const lCheminSecurise = this.Parametres.nomRequete + '/' + (this.Parametres.genreEspace || 0).toString() + '/' + this.Parametres.numeroSession + '/' + lParametres.numeroOrdreChiffre;
                this.Requete = (0,
                XmlHttp_1.getXmlHttp)();
                this.Requete.open(this.Parametres.post ? 'Post' : 'Get', lCheminSecurise, this.Parametres.asynchrone);
                this.Requete.onreadystatechange = this.onReadyStateChange.bind(this);
                this.Requete.setRequestHeader('Content-Type', 'application/json');
                let lDataPost = null;
                if (this.Parametres.post) {
                    lDataPost = this.Parametres.estBackup ? this.Parametres.dataPOST : this._getData(lParametres.numeroOrdreChiffre);
                }
                this.backupDataJSON = lDataPost;
                this.Requete.send(lDataPost);
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye;
                try {
                    if (IE.log.getActifRequete()) {
                        let lEstAttente = false;
                        IE.log.addRequete({
                            nomRequete: this.Parametres.nomDeFonction,
                            numeroRequete: this.Parametres.numeroRequete,
                            numeroOrdre: lParametres.numeroOrdre,
                            chrono: {
                                xml: '',
                                traitement: this.Parametres.log.tempsChiffre
                            },
                            estReponse: false,
                            estBackup: this.Parametres.estBackup,
                            lgcontenu: this.Parametres.log.tailleDonnees,
                            estPolling: this.Parametres.estPolling,
                            estAttente: lEstAttente
                        });
                    }
                } catch (e) {}
            }
            toString() {
                return this.Parametres.nomDeFonction;
            }
            _getData(aNumeroOrdreChiffre) {
                const lJSON = {};
                lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.numeroSession] = parseInt(this.Parametres.numeroSession, 10);
                lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.numeroOrdre] = aNumeroOrdreChiffre;
                lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.nomFonction] = this.Parametres.nomDeFonction;
                lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.donneesSecurisee] = this.Parametres.parametres;
                if (this.Parametres.jsonNonSecurise) {
                    lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.donneesNonSecurisee] = this.Parametres.jsonNonSecurise;
                }
                if (this.Parametres.echecReseau) {
                    lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.echecReseau] = true;
                }
                return JSON.stringify(lJSON);
            }
            onReadyStateChange() {
                if (this.Requete.readyState === 4) {
                    this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
                    if (this.Parametres.callBackReadyStateChange) {
                        const lRequeteXmlHttp = this.Requete;
                        delete this.Requete;
                        this.Parametres.callBackReadyStateChange(this, lRequeteXmlHttp.responseText, lRequeteXmlHttp.status);
                        lRequeteXmlHttp.onreadystatechange = null;
                    }
                }
            }
        }
        exports.ObjetRequete = ObjetRequete;
    },
    fn: 'objetrequete.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeEtatUpload = void 0;
        var TypeEtatUpload;
        (function(TypeEtatUpload) {
            TypeEtatUpload[TypeEtatUpload["TEU_Inconnu"] = 0] = "TEU_Inconnu";
            TypeEtatUpload[TypeEtatUpload["TEU_Reussi"] = 1] = "TEU_Reussi";
            TypeEtatUpload[TypeEtatUpload["TEU_Erreur"] = 2] = "TEU_Erreur";
            TypeEtatUpload[TypeEtatUpload["TEU_EnCours"] = 3] = "TEU_EnCours";
        }
        )(TypeEtatUpload || (exports.TypeEtatUpload = TypeEtatUpload = {}));
    },
    fn: 'typeetatupload.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UploadFileAjax = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const XmlHttp_1 = require("XmlHttp");
        const Invocateur_1 = require("Invocateur");
        const u_blobSlice = global.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice);
        class UploadFileAjax {
            static sendPromise(aParams) {
                const lParams = Object.assign({
                    url: '',
                    file: null,
                    remplisseurFormData: null,
                    remplisseurHeaders: null,
                    responseType: 'json',
                    maxChunkSize: 100 * 1024,
                    fournisseurAbort: null,
                    callbackProgress: null
                }, aParams);
                if (!lParams.url || !lParams.file) {
                    return Promise.reject();
                }
                Object.assign(lParams, {
                    _fileSize: lParams.file.size,
                    funcAbort: () => {}
                });
                if (lParams.fournisseurAbort) {
                    lParams.fournisseurAbort( () => {
                        return lParams.funcAbort();
                    }
                    );
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                }
                return this._sendChunk(lParams, 0).finally( () => {
                    if (lParams.fournisseurAbort) {
                        lParams.fournisseurAbort(null);
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
                    }
                }
                );
            }
            static _sendChunk(aParams, aIndexStart) {
                let lIndexStartSuivant = aIndexStart;
                return new Promise( (aResolve, aReject) => {
                    if (aParams._aborted) {
                        aReject({
                            fail: true,
                            isAborted: true,
                            estReponseRequete: false,
                            statut: 0,
                            response: null
                        });
                        return;
                    }
                    const lRequete = (0,
                    XmlHttp_1.getXmlHttp)();
                    if (aParams.responseType) {
                        lRequete.responseType = aParams.responseType;
                    }
                    lRequete.open('POST', aParams.url);
                    let lFile = null;
                    if (aParams._fileSize > aParams.maxChunkSize && aParams.maxChunkSize > 0 && u_blobSlice) {
                        const lIndexEnd = Math.min(aIndexStart + aParams.maxChunkSize, aParams._fileSize);
                        lFile = u_blobSlice.call(aParams.file, aIndexStart, lIndexEnd, aParams.file.type);
                        lRequete.setRequestHeader('content-range', `bytes ${aIndexStart}-${lIndexEnd - 1}/${aParams._fileSize}`);
                        lIndexStartSuivant += aParams.maxChunkSize;
                    } else {
                        lFile = aParams.file;
                        lIndexStartSuivant += aParams._fileSize;
                    }
                    if (aParams.file.name) {
                        lRequete.setRequestHeader('content-disposition', `attachment; filename="${encodeURI(aParams.file.name)}"`);
                    }
                    let lBody = null;
                    if (MethodesObjet_1.MethodesObjet.isFunction(aParams.remplisseurFormData)) {
                        lBody = new FormData();
                        aParams.remplisseurFormData(lBody, lFile);
                    } else {
                        lBody = lFile;
                    }
                    if (MethodesObjet_1.MethodesObjet.isFunction(aParams.remplisseurHeaders)) {
                        aParams.remplisseurHeaders(lRequete);
                    }
                    lRequete.onreadystatechange = () => {
                        if (lRequete.readyState === 4) {
                            aParams.funcAbort = () => {
                                aParams._aborted = true;
                            }
                            ;
                            if (aParams.callbackProgress) {
                                aParams.callbackProgress({
                                    pourcent: Math.min(aIndexStart + aParams.maxChunkSize, aParams._fileSize) * 100 / aParams._fileSize
                                });
                            }
                            const lResult = {
                                estReponseRequete: true,
                                statut: lRequete.status,
                                response: lRequete.response
                            };
                            if (lRequete.status >= 200 && lRequete.status < 300) {
                                aResolve(Object.assign(lResult, {
                                    done: true
                                }));
                            } else {
                                aReject(Object.assign(lResult, {
                                    fail: true,
                                    isAborted: !!lRequete._aborted && lRequete.status === 0
                                }));
                            }
                        }
                    }
                    ;
                    aParams.funcAbort = () => {
                        lRequete._aborted = true;
                        lRequete.abort();
                    }
                    ;
                    lRequete.send(lBody);
                }
                ).then( (aResult) => {
                    if (lIndexStartSuivant < aParams._fileSize) {
                        return this._sendChunk(aParams, lIndexStartSuivant);
                    }
                    return aResult;
                }
                );
            }
        }
        exports.UploadFileAjax = UploadFileAjax;
    },
    fn: 'uploadfileajax.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteUploadFile = void 0;
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeEtatUpload_1 = require("TypeEtatUpload");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        const MethodesObjet_1 = require("MethodesObjet");
        const UploadFileAjax_1 = require("UploadFileAjax");
        let uIdFichier = 0;
        class ObjetRequeteUploadFile {
            constructor(aParametres) {
                this.estUneRequete = false;
                this.estUploadFile = true;
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial;
                this.donnees = Object.assign({
                    listeFichiers: null,
                    maxChunkSize: 100 * 1024,
                    messageEchec: ObjetTraduction_1.GTraductions.getValeur('inputFile.echecEnvoi'),
                    callbackDone: null,
                    callback: null,
                    callbackEach: null,
                    getFormData: null,
                    getUrl: null,
                    callbackInterrupt: null,
                    moduleMD5: null
                }, aParametres);
                this.progression = {
                    requete: this,
                    listeFichiersEnAttente: this.donnees.listeFichiers.getListeElements(),
                    nbReussi: 0,
                    error: null
                };
            }
            estVide() {
                return !this.donnees || !this.donnees.listeFichiers || !this.donnees.listeFichiers.count || this.donnees.listeFichiers.count() === 0;
            }
            envoiRequete(aParams) {
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye;
                Object.assign(this.donnees, aParams);
                const lSelf = this;
                let lParams = null;
                if (this.donnees.callbackInterrupt) {
                    lParams = {
                        htmlPied: '<ie-bouton ie-model="btnInterrupt">' + ObjetTraduction_1.GTraductions.getValeur('inputFile.AnnulerLEnvoi') + '</ie-bouton>',
                        controleur: {
                            btnInterrupt: {
                                event: function() {
                                    if (lSelf.progression.funcAbortRequete) {
                                        lSelf.progression.funcAbortRequete();
                                    }
                                },
                                getDisabled: function() {
                                    return !lSelf.progression.funcAbortRequete;
                                }
                            }
                        }
                    };
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: true,
                    upload: true,
                    nombreFichiers: this.donnees.listeFichiers.getNbrElementsExistes(),
                    init: true,
                    params: lParams
                });
                this._sendNextFile();
            }
            enAttente() {
                return this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye || this.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
            }
            _eventAjaxIOProgression(aParams) {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: true,
                    upload: true,
                    message: aParams.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'),
                    nombreFichiers: this.donnees.listeFichiers.getNbrElementsExistes(),
                    ignorerBlocageClavier: true,
                    progress: {
                        personnalise: true,
                        actualFile: this.progression.nbReussi + 1,
                        percent: aParams.pourcent || 0,
                        md5: aParams.md5 || false
                    }
                });
            }
            _send(aFichier, aMD5) {
                return new Promise( (aResolve) => {
                    this._eventAjaxIOProgression({});
                    if (!aFichier.idFichier) {
                        uIdFichier += 1;
                        aFichier.idFichier = 'reqUpl_' + uIdFichier + '_' + Date.now();
                    }
                    this.progression.json = null;
                    const lFormData = this.donnees.getFormData(aFichier) || {};
                    if (aMD5) {
                        lFormData.md5 = aMD5;
                    }
                    return UploadFileAjax_1.UploadFileAjax.sendPromise({
                        url: this.donnees.getUrl(),
                        file: aFichier.file,
                        remplisseurFormData: (aFormData, aFile) => {
                            Object.keys(lFormData).forEach( (aKeys) => {
                                aFormData.append(aKeys, lFormData[aKeys]);
                            }
                            );
                            aFormData.append('files[]', aFile, aFichier.file.name);
                        }
                        ,
                        maxChunkSize: this.donnees.maxChunkSize,
                        fournisseurAbort: (aAbortRequete) => {
                            this.progression.funcAbortRequete = aAbortRequete;
                        }
                        ,
                        callbackProgress: (aParams) => {
                            const lProgressBar = Math.round(aParams.pourcent);
                            this._eventAjaxIOProgression({
                                pourcent: lProgressBar
                            });
                        }
                    }).then( (aResult) => {
                        if (aResult.response && MethodesObjet_1.MethodesObjet.isNumber(aResult.response.etat)) {
                            this.progression.json = aResult.response;
                            if (aResult.response.etat === TypeEtatUpload_1.TypeEtatUpload.TEU_Reussi) {
                                this.progression.nbReussi += 1;
                            } else {
                                this.progression.error = {
                                    message: aResult.response.message
                                };
                            }
                        } else {
                            this.progression.error = {};
                        }
                    }
                    , (aError) => {
                        if (aError) {
                            if (aError.isAborted) {
                                this.progression.error = {
                                    abort: true,
                                    message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEnvoiFichierAnnule')
                                };
                            } else {
                                this.progression.error = {
                                    fail: true
                                };
                            }
                            if (aError.response) {
                                this.progression.json = aError.response;
                                if (this.progression.json && this.progression.json.message) {
                                    this.progression.error.message = this.progression.json.message;
                                }
                            }
                        } else {
                            IE.log.addLog(`echec fichier ${aError}`);
                            this.progression.error = {
                                fail: true
                            };
                        }
                    }
                    ).finally( () => {
                        IEHtml.refresh();
                        aResolve(aFichier);
                    }
                    );
                }
                );
            }
            _debloquerPatience() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                    emission: false,
                    upload: true,
                    debloquerForcer: true
                });
            }
            _doneFile(aFichier) {
                this.progression.funcAbortRequete = null;
                IEHtml.refresh();
                let lErreurSession = null;
                const lSurAnnulationUpload = this.progression.error && this.progression.error.abort;
                if (!lSurAnnulationUpload && this.donnees.callbackEach && this.progression.json) {
                    lErreurSession = this.donnees.callbackEach(this.progression.json);
                }
                if (lErreurSession) {
                    this.progression.error = {};
                }
                if (this.progression.error) {
                    this.progression.listeFichiersEnAttente = new ObjetListeElements_1.ObjetListeElements();
                    this._debloquerPatience();
                    if (lSurAnnulationUpload && !lErreurSession && this.donnees.callbackInterrupt) {
                        this.donnees.callbackInterrupt();
                    }
                    Promise.resolve().then( () => {
                        if (!lErreurSession) {
                            return GApplication.getMessage().afficher({
                                titre: this.progression.error.titre || '',
                                message: this.progression.error.message || this.donnees.messageEchec
                            });
                        }
                    }
                    ).then( () => {
                        this._doneAll(lErreurSession);
                    }
                    );
                } else {
                    this._sendNextFile();
                }
            }
            _doneAll(aErreurSession) {
                this.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.recu;
                this._debloquerPatience();
                let lErreurSession = aErreurSession;
                if (this.progression && this.progression.error && this.progression.json && this.progression.json.Erreur) {
                    lErreurSession = this.progression.json.Erreur;
                }
                if (this.donnees.callbackDone) {
                    this.donnees.callbackDone({
                        requete: this,
                        progression: this.progression,
                        erreurSession: lErreurSession,
                        callback: this.donnees.callback
                    });
                }
                if (this.donnees.callback) {
                    this.donnees.callback(this.progression);
                }
                IEHtml.refresh();
            }
            _sendNextFile() {
                if (this.progression.listeFichiersEnAttente.count() > 0) {
                    const lFichier = this.progression.listeFichiersEnAttente.get(0);
                    this.progression.listeFichiersEnAttente.remove(0);
                    let lPromise = null;
                    if (this.donnees.moduleMD5 && this.donnees.moduleMD5.calculMD5) {
                        lPromise = this.donnees.moduleMD5.calculMD5({
                            instance: this,
                            fichier: lFichier,
                            eventAjaxIOProgression: this._eventAjaxIOProgression
                        });
                    }
                    return Promise.resolve(lPromise).then( (aMD5) => {
                        return this._send(lFichier, aMD5);
                    }
                    , () => {
                        IE.log.addLog('Echec calcul md5 (erreur ou fichier trop gros)');
                        return this._send(lFichier, '');
                    }
                    ).catch( (aErreur) => {
                        this.progression.error = {
                            abort: true,
                            message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEnvoiFichierAnnule')
                        };
                    }
                    ).then( () => {
                        return this._doneFile(lFichier);
                    }
                    );
                } else {
                    this._doneAll();
                }
            }
        }
        exports.ObjetRequeteUploadFile = ObjetRequeteUploadFile;
    },
    fn: 'objetrequeteuploadfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ModuleMD5_RequeteUploadFile = void 0;
        require("DeclarationForge");
        const ObjetTraduction_1 = require("ObjetTraduction");
        function _toBinaryString(aParams) {
            return new Promise( (aResolve) => {
                const lChunk = 100 * 1024;
                if (aParams.start >= aParams.bytes.length) {
                    aParams.done = true;
                } else {
                    aParams.tabResult.push(String.fromCharCode.apply(null, aParams.bytes.slice(aParams.start, aParams.start + lChunk)));
                }
                aParams.eventAjaxIOProgression.call(aParams.instance, {
                    message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgPreparationFichier'),
                    pourcent: Math.round((aParams.compteur * lChunk) / (aParams.bytes.length * 100 * 1024)),
                    md5: true
                });
                aParams.start += lChunk;
                aParams.compteur += 1;
                setTimeout( () => {
                    aResolve(aParams);
                }
                , 0);
            }
            );
        }
        function _toBinaryStringPromise(aParams) {
            return _toBinaryString(aParams).then( () => {
                if (!aParams.done) {
                    return _toBinaryStringPromise(aParams);
                }
            }
            );
        }
        exports.ModuleMD5_RequeteUploadFile = {
            calculMD5(aParams) {
                const lParams = Object.assign({
                    instance: null,
                    fichier: null,
                    eventAjaxIOProgression: null,
                    maxSizePourMD5: 30 * 1024 * 1024
                }, aParams);
                return new Promise( (aResolve, aReject) => {
                    if (!window.FileReader || !window.Uint8Array) {
                        IE.log.addLog('FileReader ou Uint8Array non supporté => pas de controle de MD5');
                        aReject();
                        return;
                    }
                    if (lParams.fichier.file.size > lParams.maxSizePourMD5) {
                        IE.log.addLog('Fichier trop gros pur calculer le MD5');
                        aReject();
                        return;
                    }
                    try {
                        lParams.eventAjaxIOProgression.call(lParams.instance, {
                            message: ObjetTraduction_1.GTraductions.getValeur('inputFile.msgPreparationFichier')
                        });
                        const lReader = new FileReader();
                        lReader.onload = function() {
                            try {
                                const lParamsReader = Object.assign({
                                    bytes: new Uint8Array(lReader.result),
                                    tabResult: [],
                                    start: 0,
                                    compteur: 0
                                }, lParams);
                                if (!lParamsReader.bytes.slice) {
                                    lParamsReader.bytes = Array.from(lParamsReader.bytes);
                                }
                                _toBinaryStringPromise(lParamsReader).then( () => {
                                    let lMd5 = '';
                                    if (lParamsReader.done) {
                                        lMd5 = forge.md.md5.create().update(lParamsReader.tabResult.join('')).digest().toHex();
                                    }
                                    aResolve(lMd5);
                                }
                                , () => {
                                    aReject();
                                }
                                );
                            } catch (e) {}
                        }
                        .bind(lParams.instance);
                        lReader.onerror = function() {
                            aReject();
                        }
                        .bind(lParams.instance);
                        lReader.readAsArrayBuffer(lParams.fichier.file);
                    } catch (e) {
                        aReject();
                    }
                }
                );
            }
        };
    },
    fn: 'modulemd5_requeteuploadfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.CommunicationProduit = void 0;
        require("Divers");
        require("DeclarationForge");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const Enumere_IdsRequeteAjax_1 = require("Enumere_IdsRequeteAjax");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetRequete_1 = require("ObjetRequete");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetJSON_1 = require("ObjetJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetRequeteUploadFile_1 = require("ObjetRequeteUploadFile");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const TypeEtatRequeteAjax_1 = require("TypeEtatRequeteAjax");
        const ModuleMD5_RequeteUploadFile_1 = require("ModuleMD5_RequeteUploadFile");
        CollectionRequetes_1.Requetes.inscrire('annulation', ObjetRequeteJSON_1.ObjetRequeteConsultation);
        class CommunicationProduit {
            constructor(AGenreEspace, aNumeroSession) {
                this.nom = 'GCommunication';
                this._pileTimerEnAttente = {};
                this._attenteEnCours = false;
                this.FDureeEnCours = 1000 * 0.5;
                this._dureeTimerPresence = CommunicationProduit.cDureeTimerPresence;
                this.GenreEspace = AGenreEspace;
                this.NomRequete = 'appelfonction';
                this.pileRequetes = [];
                this.compteurRequete = 0;
                this.NumeroDeSession = aNumeroSession ? aNumeroSession : '0';
                this.NumeroOrdreCommunication = 1;
                this.cleAES = new forge.util.ByteBuffer();
                this.ivAES = new forge.util.ByteBuffer();
                this.ivAESTemp = new forge.util.ByteBuffer(forge.random.generate(16));
                this.backupAjax = {
                    nbBackupEchec: 20,
                    delaiTimeoutEchecReseau: 30 * 60 * 1000,
                    delaiRepetitionEchecReseau: 3 * 1000
                };
                this.polling = {
                    nbRequetes: 0,
                    numeroOrdre: 1,
                    nbRepetitionEchecReseau: 15,
                    delaiRepetitionEchecReseau: 3000,
                    delaiTimeoutEchecReseau: 30 * 60 * 1000,
                    delaiTimeoutRequete: 10 * 60 * 1000
                };
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.modificationPresenceUtilisateur, this._modificationPresenceUtilisateur.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.interruption_Requete, this._eventInterruptionRequete.bind(this));
                window.addEventListener('pagehide', this._requeteBeaconDeconnexion.bind(this));
            }
            getNom() {
                return this.nom;
            }
            setNom(aNom) {
                this.nom = aNom;
            }
            arreter() {
                if (this.estArrete) {
                    return;
                }
                this._requeteBeaconDeconnexion();
                clearTimeout(this._timeoutRequeteBackup);
                this.estArrete = true;
                this.desactiverPresence();
                delete this.ivAES;
                delete this.cleAES;
                delete this.NumeroOrdreCommunication;
            }
            getIvAES() {
                return this.ivAES;
            }
            setIvAES() {
                this.ivAES = this.ivAESTemp;
                delete (this.ivAESTemp);
            }
            setCleAES(aCleAES) {
                this.cleAES = aCleAES;
            }
            appelFonctionAsynchroneXML(aParametres) {
                if (this.estArrete) {
                    return;
                }
                const lParametresAppel = {
                    nom: '',
                    json: {},
                    callbackPere: null,
                    callbackEvenement: null,
                    requetePrioritaire: false,
                    sansBlocageInterface: false,
                    messageDetail: '',
                    estBackup: false,
                    backupDataJSON: null
                };
                $.extend(lParametresAppel, aParametres);
                let lRequeteUpload = null;
                const lParamsRequete = {
                    numeroSession: this.NumeroDeSession,
                    numeroRequete: this.compteurRequete,
                    nomRequete: this.NomRequete,
                    genreEspace: this.GenreEspace,
                    sansBlocageInterface: lParametresAppel.sansBlocageInterface === true,
                    nomDeFonction: lParametresAppel.nom,
                    callBackReadyStateChange: this._evenementSurReponseRequete.bind(this, lParametresAppel),
                    pereReponse: lParametresAppel.callbackPere,
                    evenementReponse: lParametresAppel.callbackEvenement,
                    messageDetail: lParametresAppel.messageDetail,
                    log: {
                        tailleDonnees: '',
                        tempsChiffre: ''
                    }
                };
                if (!lParametresAppel.estBackup) {
                    const lJSONCollection = {};
                    lParametresAppel.json = ObjetJSON_1.ObjetJSON.preparerJSON(lParametresAppel.json, {
                        JSONCollection: lJSONCollection
                    });
                    if (lParametresAppel.paramsUpload && lParametresAppel.paramsUpload.listeFichiers) {
                        lRequeteUpload = this._factoryRequeteUploadFile(Object.assign({
                            nomRequete: lParametresAppel.nom
                        }, lParametresAppel.paramsUpload));
                        if (!lRequeteUpload.estVide()) {
                            this.pileRequetes.push(lRequeteUpload);
                            this._envoieRequete();
                        } else {
                            lRequeteUpload = null;
                        }
                    }
                    const lResultJSON = this._traiterJSONEnvoi(lParametresAppel.json);
                    Object.assign(lParamsRequete, {
                        parametres: lResultJSON.JSON,
                        jsonOrigine: lParametresAppel.json,
                        jsonNonSecurise: $.isEmptyObject(lJSONCollection) ? null : lJSONCollection,
                        log: {
                            tailleDonnees: lResultJSON.JSONStr_clair.length,
                            tempsChiffre: lResultJSON.chronoStr
                        }
                    });
                } else {
                    Object.assign(lParamsRequete, {
                        estBackup: true,
                        dataPOST: lParametresAppel.backupDataJSON
                    });
                }
                const lRequete = new ObjetRequete_1.ObjetRequete(lParamsRequete);
                if (lParametresAppel.estBackup) {
                    this.pileRequetes.splice(0, 0, lRequete);
                } else if (lParametresAppel.requetePrioritaire && !lRequeteUpload) {
                    this.pileRequetes.splice(1, 0, lRequete);
                } else {
                    this.pileRequetes.push(lRequete);
                }
                this.compteurRequete += 1;
                if (lRequeteUpload) {
                    lRequeteUpload.requeteSaisieApresUpload = lRequete;
                }
                this._envoieRequete();
                return lRequete;
            }
            setMAJServeurEnCours(aMAJEnCours) {
                this._MAJServeurEnCours = aMAJEnCours;
                if (this._requetePresenceActive) {
                    this._requetePresenceDelai();
                }
            }
            activerPresence() {
                this._requetePresenceActive = true;
                this._requetePresenceDelai();
                this._envoiRequetePolling();
            }
            desactiverPresence() {
                this._requetePresenceActive = false;
                window.clearTimeout(this.timerPresence);
            }
            setDureeTimerPresence(aDureeMs) {
                this._dureeTimerPresence = aDureeMs;
                if (this._requetePresenceActive) {
                    this._requetePresenceDelai();
                }
            }
            requeteEnCours() {
                return (this.pileRequetes[0] && this.pileRequetes[0].enAttente()) || this._attenteEnCours;
            }
            composeUrlFichier(aPrefix, aNomFichier, aParam) {
                let lResult = '';
                if (aPrefix !== '') {
                    lResult += aPrefix + '/';
                }
                lResult += this.getChaineChiffreeAES(JSON.stringify(aParam && aParam.toJSONAll ? aParam.toJSONAll() : aParam));
                lResult += '/' + aNomFichier;
                lResult += '?Session=' + this.NumeroDeSession;
                if ((aParam.miniature !== null) && (aParam.miniature !== undefined)) {
                    lResult += '&miniature=' + aParam.miniature;
                }
                return lResult;
            }
            composeUrlFichierExterne(aNomFichier, aParam) {
                return this.composeUrlFichier('FichiersExternes', ObjetChaine_1.GChaine.enleverEntites(aNomFichier), aParam);
            }
            getChaineChiffreeAES(aChaine) {
                return ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChaine,
                    cle: this.cleAES,
                    iv: this.ivAES
                });
            }
            getChaineDechiffreeAES(aChaine) {
                return ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChaine,
                    cle: this.cleAES,
                    iv: this.ivAES
                });
            }
            serialiserIVAESPourSeveur() {
                if (CommunicationProduit.optionsSecurite.http) {
                    return ObjetCryptage_1.GCryptage.getCryptageRSA().encrypter1024(this.ivAESTemp);
                }
                return forge.util.encode64(this.ivAESTemp.bytes(), 64);
            }
            sendLogClient(aMessage) {
                if (aMessage && navigator && navigator.sendBeacon) {
                    try {
                        navigator.sendBeacon('LogClientLeger', ObjetJSON_1.ObjetJSON.toJSON({
                            ns: parseInt(this.NumeroDeSession, 10),
                            msg: aMessage
                        }));
                    } catch (e) {}
                }
            }
            startPolling() {
                this._envoiRequetePolling();
            }
            _traiterJSONEnvoi(aJSON) {
                const lResult = {
                    JSON: aJSON,
                    JSONStr_clair: '',
                    chronoStr: ''
                };
                if (!aJSON) {
                    return lResult;
                }
                const lSecurise = !CommunicationProduit.optionsSecurite.sansCryptageAES;
                let lChrono;
                if (lSecurise) {
                    if (IE.log && IE.log.getActifRequete && IE.log.getActifRequete() && Chronometre_1.Chronometre) {
                        lChrono = new Chronometre_1.Chronometre();
                    }
                    lResult.JSONStr_clair = JSON.stringify(lResult.JSON) || '';
                    lResult.JSON = ObjetCryptage_1.GCryptage.encrypter({
                        genreCryptage: lSecurise ? Enumere_Cryptage_1.EGenreCryptage.AES : Enumere_Cryptage_1.EGenreCryptage.Unicode,
                        chaine: lResult.JSONStr_clair,
                        cle: this.cleAES,
                        iv: lSecurise ? this.ivAES : null,
                        avecCompression: lSecurise && !CommunicationProduit.optionsSecurite.sansCompressionAES
                    });
                    if (lChrono) {
                        lResult.chronoStr = lChrono.toString();
                    }
                } else {}
                return lResult;
            }
            _factoryRequeteUploadFile(aDonnees) {
                const lDonnees = Object.assign({
                    listeFichiers: null,
                    moduleMD5: ModuleMD5_RequeteUploadFile_1.ModuleMD5_RequeteUploadFile,
                    conserverIdFichier: false,
                    filtreFichiers: function(D) {
                        return !!D && ((D.getEtat() === Enumere_Etat_1.EGenreEtat.Creation) || (D.getEtat() === Enumere_Etat_1.EGenreEtat.Modification)) && D.existe() && D.idFichier !== CommunicationProduit.c_IdFichierAIgnorer && D.idFichier !== undefined && !!D.file;
                    },
                    getFormData: (aFichier) => {
                        return {
                            'numeroOrdre': this.getChaineChiffreeAES(this.NumeroOrdreCommunication),
                            'numeroSession': this.NumeroDeSession,
                            'nomRequete': lDonnees.nomRequete,
                            'idFichier': aFichier.idFichier
                        };
                    }
                    ,
                    getUrl: () => {
                        return ObjetChaine_1.GChaine.format('%s/%s/%s', ['uploadfilesession', this.GenreEspace, this.NumeroDeSession]);
                    }
                    ,
                    callbackInterrupt: function() {
                        (0,
                        CollectionRequetes_1.Requetes)('annulation').setOptions({
                            requetePrioritaire: true
                        }).lancerRequete({
                            annulationUpload: true
                        });
                    },
                    callbackEach: (aJSON) => {
                        let lNumeroOrdre = null;
                        try {
                            if (aJSON && aJSON.numeroOrdre) {
                                lNumeroOrdre = parseInt(ObjetCryptage_1.GCryptage.decrypter({
                                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                                    chaine: aJSON.numeroOrdre,
                                    cle: this.cleAES,
                                    iv: this.ivAES
                                }), 10);
                            }
                        } catch (e) {}
                        if (lNumeroOrdre !== this.NumeroOrdreCommunication + 1) {
                            return this._getErreurConnexionInterrompue();
                        } else {
                            this.NumeroOrdreCommunication += 2;
                        }
                        return null;
                    }
                    ,
                    callbackDone: (aParams) => {
                        if (aParams.erreurSession) {
                            this._composePageErreur(aParams.erreurSession);
                            return;
                        }
                        if (aParams.requete && aParams.requete.requeteSaisieApresUpload && aParams.requete.requeteSaisieApresUpload.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.initial && aParams.progression.error && (aParams.requete.donnees.annulerSurErreurUpload || (aParams.progression.error.abort && aParams.requete.donnees.annulerSurAbortUpload))) {
                            aParams.requete.requeteSaisieApresUpload.estRequeteAnnulee = true;
                        }
                        if (aParams.requete.estUploadFile && aParams.requete.enAttente()) {
                            this._setRequeteEtatTermine(aParams.requete);
                        } else {}
                        if (!CommunicationProduit.optionsSecurite.avecPollingActif) {
                            this.activerPresence();
                        }
                        this._envoieRequete();
                    }
                }, aDonnees);
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                if (lDonnees.listeFichiers && lDonnees.listeFichiers.parcourir) {
                    lDonnees.listeFichiers.parcourir( (D) => {
                        if (lDonnees.filtreFichiers && lDonnees.filtreFichiers(D)) {
                            const lElement = MethodesObjet_1.MethodesObjet.dupliquer(D);
                            lElement.file = D.file;
                            lListe.addElement(lElement);
                            if (!lDonnees.conserverIdFichier) {
                                D.idFichier = CommunicationProduit.c_IdFichierAIgnorer;
                            }
                        }
                    }
                    );
                }
                lDonnees.listeFichiers = lListe;
                return new ObjetRequeteUploadFile_1.ObjetRequeteUploadFile(lDonnees);
            }
            _envoieRequete() {
                clearTimeout(this._timeoutRequeteBackup);
                const lRequete = this.pileRequetes[0];
                if (!lRequete) {
                    return;
                }
                const lEstRequeteAjax = lRequete instanceof ObjetRequete_1.ObjetRequete;
                const lEstRequeteUpload = lRequete instanceof ObjetRequeteUploadFile_1.ObjetRequeteUploadFile;
                if (lRequete.estRequeteAnnulee && !lRequete.enAttente() && lEstRequeteAjax) {
                    this._surReception(lRequete, null, {
                        annulationRequete: true
                    });
                    return;
                }
                if (!lRequete.enAttente()) {
                    lRequete.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.preparationEnvoi;
                    if (!this._attenteEnCours && (lEstRequeteUpload || (lEstRequeteAjax && (!lRequete.Parametres || !lRequete.Parametres.sansBlocageInterface)))) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            emission: true,
                            upload: !lRequete.estUneRequete,
                            message: lEstRequeteAjax ? lRequete.Parametres.messageDetail : null,
                            delai: this.pileRequetes.length > 1 || (lEstRequeteAjax && lRequete.Parametres && lRequete.Parametres.estBackup) ? 0 : null
                        });
                    }
                    if (lRequete.estUneRequete && lEstRequeteAjax) {
                        lRequete.envoieRequete({
                            numeroOrdre: this.NumeroOrdreCommunication,
                            numeroOrdreChiffre: this.getChaineChiffreeAES(this.NumeroOrdreCommunication)
                        });
                    } else if (lRequete.estUploadFile && lEstRequeteUpload) {
                        if (!CommunicationProduit.optionsSecurite.avecPollingActif) {
                            this.desactiverPresence();
                        }
                        lRequete.envoiRequete();
                    } else {}
                } else {
                    if (lRequete && lEstRequeteAjax && lRequete.etat === TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.envoye && !this._attenteEnCours && lRequete.Parametres && lRequete.Parametres.sansBlocageInterface) {
                        let lAvecBlocageEnAttente = false;
                        this.pileRequetes.every( (aRequete, aIndex) => {
                            if (aRequete && (aRequete instanceof ObjetRequeteUploadFile_1.ObjetRequeteUploadFile || (aRequete instanceof ObjetRequete_1.ObjetRequete && (!aRequete.Parametres || !aRequete.Parametres.sansBlocageInterface)))) {
                                lAvecBlocageEnAttente = true;
                                this.pileRequetes.every( (aRequete, aIndex2) => {
                                    if (aRequete && aRequete instanceof ObjetRequete_1.ObjetRequete && aRequete.Parametres && aRequete.Parametres.sansBlocageInterface) {
                                        aRequete.Parametres.sansBlocageInterface = false;
                                    }
                                    return aIndex2 < aIndex;
                                }
                                );
                                return false;
                            }
                            return true;
                        }
                        );
                        if (lAvecBlocageEnAttente) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                emission: true,
                                upload: false,
                                delai: 0
                            });
                        }
                    }
                }
            }
            _getErreurConnexionInterrompue() {
                return {
                    Titre: '',
                    Message: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexionInterrompue')
                };
            }
            _getXmlReponseStatut200(ARequete, AReponse, aJSON, aSurPolling) {
                if (this.estArrete) {
                    return;
                }
                const lNumeroSession = aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.numeroSession];
                const lNumeroOrdre = aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.numeroOrdre];
                const lDonneesSecurisees = aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.donneesSecurisee];
                const lSecurise = !CommunicationProduit.optionsSecurite.sansCryptageAES;
                let lNomRequete = aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.nomFonction] + 'Reponse';
                const lErreur = this._getErreurConnexionInterrompue();
                if (aSurPolling) {
                    lNomRequete = 'pollingReponse';
                }
                if (parseInt(this.NumeroDeSession, 10) !== lNumeroSession && lNumeroSession !== 0) {
                    if (!aJSON.Erreur) {
                        aJSON.Erreur = lErreur;
                    }
                    return null;
                }
                const lNumOrdreServeur = parseInt(ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lNumeroOrdre,
                    cle: this.cleAES,
                    iv: this.ivAES
                }), 10);
                let lEstErreurNumeroOrdre = false;
                if (aSurPolling) {
                    lEstErreurNumeroOrdre = lNumOrdreServeur !== this.polling.numeroOrdre - 1;
                } else {
                    lEstErreurNumeroOrdre = lNumOrdreServeur !== this.NumeroOrdreCommunication + 1;
                }
                if (lEstErreurNumeroOrdre) {
                    if (!aJSON.Erreur) {
                        aJSON.Erreur = lErreur;
                    }
                    return null;
                }
                if (!aSurPolling) {
                    this.NumeroOrdreCommunication += 2;
                }
                let lChrono;
                let lChronoTrait = '';
                if (lSecurise) {
                    if (IE.log && IE.log.getActifRequete && IE.log.getActifRequete() && Chronometre_1.Chronometre) {
                        lChrono = new Chronometre_1.Chronometre();
                    }
                    const lReponse = ObjetCryptage_1.GCryptage.decrypter({
                        genreCryptage: CommunicationProduit.optionsSecurite.sansCryptageAES ? Enumere_Cryptage_1.EGenreCryptage.Unicode : Enumere_Cryptage_1.EGenreCryptage.AES,
                        chaine: lDonneesSecurisees,
                        cle: this.cleAES,
                        iv: this.ivAES,
                        avecCompression: !CommunicationProduit.optionsSecurite.sansCompressionAES
                    });
                    aJSON.donnees = ObjetJSON_1.ObjetJSON.parseJSON(lReponse);
                    if (lChrono && IE.log.getActifRequete()) {
                        lChronoTrait = lChrono.toString();
                    }
                } else {
                    aJSON.donnees = lDonneesSecurisees;
                }
                delete aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.donneesSecurisee];
                if (!aJSON.donnees) {
                    aJSON.Erreur = lErreur;
                    return null;
                }
                aJSON.donnees = ObjetJSON_1.ObjetJSON.parseVariables(aJSON.donnees, {
                    JSONCollection: aJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.donneesNonSecurisee]
                });
                try {
                    if (IE.log.getActifRequete()) {
                        let lChronoServeur = null;
                        let lChronoSaisieMs;
                        let lEstAttente = false;
                        IE.log.addRequete({
                            nomRequete: lNomRequete,
                            numeroRequete: ARequete.Parametres.numeroRequete,
                            numeroOrdre: aSurPolling ? this.polling.numeroOrdre : this.NumeroOrdreCommunication - 1,
                            chrono: {
                                requeteServeurtickMs: lChronoServeur,
                                traitement: lChronoTrait,
                                saisieMS: lChronoSaisieMs
                            },
                            estReponse: true,
                            lgcontenu: AReponse.length,
                            estPolling: ARequete.Parametres.estPolling,
                            estAttente: lEstAttente
                        });
                    }
                } catch (e) {}
            }
            _evenementSurReponseRequete(aParametresAppel, ARequete, AReponse, AStatut) {
                this._traiterPileAttenteSurReponseRequete(ARequete);
                clearTimeout(this._timeoutRequeteBackup);
                const lStatut = typeof AStatut === 'number' ? AStatut : parseInt(AStatut, 10);
                switch (lStatut) {
                case 200:
                    {
                        if (aParametresAppel.estRequeteDeconnexion) {
                            this._requeteDeconnexionEnvoyee = true;
                        }
                        const lJSONReseau = ObjetJSON_1.ObjetJSON.parseJSON(AReponse);
                        if (!lJSONReseau) {
                            this._composePageErreur(this._getErreurConnexionInterrompue());
                            return;
                        } else {
                            this._getXmlReponseStatut200(ARequete, AReponse, lJSONReseau);
                        }
                        if (lJSONReseau.Erreur || (lJSONReseau.donnees && lJSONReseau.donnees.Erreur)) {
                            this._composePageErreur((lJSONReseau.Erreur ? lJSONReseau.Erreur : lJSONReseau.donnees.Erreur));
                        } else {
                            const lJSONAttente = lJSONReseau.donnees[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.SignatureAttente];
                            const lParametresAttente = lJSONAttente ? this._recupererParametresAttente(lJSONAttente.Parametres) : {};
                            if (lJSONAttente) {
                                if (!lParametresAttente.sansBlocageInterface) {
                                    this._attenteEnCours = !!lJSONAttente;
                                }
                            } else {
                                this._attenteEnCours = false;
                            }
                            if (this._attenteEnCours) {
                                if (ARequete.Parametres.sansBlocageInterface) {
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        emission: true,
                                        upload: false,
                                        message: ARequete.Parametres.messageDetail
                                    });
                                    delete ARequete.Parametres.sansBlocageInterface;
                                }
                                this._declencherAttente({
                                    JSONAttente: lJSONAttente,
                                    requeteModele: ARequete,
                                    parametresAttente: lParametresAttente
                                });
                            } else {
                                if (!ARequete.Parametres.sansBlocageInterface) {
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        emission: false
                                    });
                                }
                                if (lJSONAttente && lParametresAttente.sansBlocageInterface) {
                                    this._declencherAttente({
                                        JSONAttente: lJSONAttente,
                                        requeteModele: ARequete,
                                        parametresAttente: lParametresAttente
                                    });
                                    if (lParametresAttente.deserialisation) {
                                        this._surReception(ARequete, lJSONReseau);
                                    } else {
                                        this._setRequeteEtatTermine(ARequete);
                                        this._envoieRequete();
                                    }
                                } else {
                                    this._surReception(ARequete, lJSONReseau);
                                }
                            }
                        }
                        break;
                    }
                default:
                    {
                        IE.log.addLog('échec requête ajax. requête = ' + ARequete + '. statut = ' + AStatut);
                        if (this._renvoyerRequeteSurErreur(ARequete, lStatut)) {
                            return;
                        }
                        if (!window.GApplication || !GApplication._unloadEnCours) {
                            let lMessage = `erreur ajax - requete : ${ARequete} - statut : ${AStatut}`;
                            if (ARequete.Parametres && ARequete.Parametres.estBackup) {
                                lMessage += ' (backup)';
                            }
                            this.sendLogClient(lMessage);
                        }
                        this._composePageErreur(null, AStatut);
                        break;
                    }
                }
            }
            _renvoyerRequeteSurErreur(aRequete, aStatut) {
                clearTimeout(this._timeoutRequeteBackup);
                if (this.estArrete || !aRequete || !aRequete.backupDataJSON || !aRequete.Parametres) {
                    return false;
                }
                if (aStatut !== 0 && !aRequete.Parametres.DEBUG_decoSimule) {
                    return false;
                }
                if (aRequete.nbBackup > this.backupAjax.nbBackupEchec) {
                    return false;
                }
                if (aRequete.nbBackup >= 4 && aRequete.timeDebutBackup && (Date.now() - aRequete.timeDebutBackup) > this.backupAjax.delaiTimeoutEchecReseau) {
                    return false;
                }
                this._timeoutRequeteBackup = setTimeout( () => {
                    if (!aRequete.Parametres.sansBlocageInterface) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            emission: false
                        });
                    }
                    if (this.estArrete) {
                        return;
                    }
                    this._setRequeteEtatTermine(aRequete);
                    const lRequeteBackup = this.appelFonctionAsynchroneXML({
                        estBackup: true,
                        backupDataJSON: aRequete.backupDataJSON,
                        json: null,
                        nom: aRequete.Parametres.nomDeFonction,
                        callbackPere: aRequete.Parametres.pereReponse,
                        callbackEvenement: aRequete.Parametres.evenementReponse,
                        messageDetail: aRequete.nbBackup > 3 ? ObjetTraduction_1.GTraductions.getValeur('requete.ConnexionPerdue') : aRequete.Parametres.messageDetail,
                        sansBlocageInterface: false
                    });
                    if (!aRequete.timeDebutBackup) {
                        lRequeteBackup.nbBackup = 1;
                        lRequeteBackup.timeDebutBackup = Date.now();
                    } else {
                        lRequeteBackup.nbBackup = aRequete.nbBackup + 1;
                        lRequeteBackup.timeDebutBackup = aRequete.timeDebutBackup;
                    }
                }
                , this.backupAjax.delaiRepetitionEchecReseau);
                return true;
            }
            _declencherAttente(aParametres) {
                const lParametres = {
                    JSONAttente: null,
                    requeteModele: null,
                    parametresAttente: {}
                };
                $.extend(lParametres, aParametres);
                if (!lParametres.parametresAttente.sansBlocageInterface) {
                    window.clearTimeout(this.Timer);
                    this.Timer = setTimeout(this._repeterRequeteAttente.bind(this, lParametres), lParametres.parametresAttente.delai);
                } else {
                    const lNomFunction = lParametres.requeteModele.Parametres.nomDeFonction;
                    if (this._pileTimerEnAttente[lNomFunction]) {
                        if (this._pileTimerEnAttente[lNomFunction].timer) {
                            clearTimeout(this._pileTimerEnAttente[lNomFunction].timer);
                        }
                        delete this._pileTimerEnAttente[lNomFunction];
                    }
                    if (lParametres.requeteModele.__interruptionReponse) {
                        delete lParametres.requeteModele.__interruptionReponse;
                        return;
                    }
                    const lTimer = setTimeout(this._repeterRequeteAttente.bind(this, lParametres), lParametres.parametresAttente.delai);
                    this._pileTimerEnAttente[lNomFunction] = {
                        timer: lTimer
                    };
                }
            }
            _repeterRequeteAttente(aParametres) {
                let lJSON;
                const lNomRequete = aParametres.requeteModele.Parametres.nomDeFonction;
                if (aParametres.parametresAttente.repeterRequete) {
                    lJSON = aParametres.requeteModele.Parametres.jsonOrigine;
                    if (!(lJSON && lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.SignatureAttente]) && aParametres.JSONAttente) {
                        lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.SignatureAttente] = MethodesObjet_1.MethodesObjet.dupliquer(aParametres.JSONAttente);
                    }
                } else {
                    lJSON = {};
                    if (aParametres.JSONAttente) {
                        lJSON[Enumere_IdsRequeteAjax_1.EGenreIdsRequeteAjax.SignatureAttente] = MethodesObjet_1.MethodesObjet.dupliquer(aParametres.JSONAttente);
                    }
                }
                ;this._setRequeteEtatTermine(aParametres.requeteModele);
                const lRequete = this.appelFonctionAsynchroneXML({
                    nom: lNomRequete,
                    json: lJSON,
                    callbackPere: aParametres.requeteModele.Parametres.pereReponse,
                    callbackEvenement: aParametres.requeteModele.Parametres.evenementReponse,
                    requetePrioritaire: !aParametres.parametresAttente.sansBlocageInterface,
                    sansBlocageInterface: aParametres.parametresAttente.sansBlocageInterface
                });
                if (aParametres.parametresAttente.sansBlocageInterface) {
                    lRequete.__estUneAttenteNonBloquante = true;
                    this._pileTimerEnAttente[lRequete.Parametres.nomDeFonction].requete = lRequete;
                }
            }
            _traiterPileAttenteSurReponseRequete(aRequete) {
                if (aRequete && aRequete.__estUneAttenteNonBloquante) {
                    const lNomRequete = aRequete.Parametres.nomDeFonction;
                    if (this._pileTimerEnAttente[lNomRequete]) {
                        if (this._pileTimerEnAttente[lNomRequete].timer) {
                            clearTimeout(this._pileTimerEnAttente[lNomRequete].timer);
                        }
                        delete this._pileTimerEnAttente[lNomRequete];
                    }
                    delete aRequete.__estUneAttenteNonBloquante;
                }
            }
            _eventInterruptionRequete(aParametres) {
                if (this.estArrete) {
                    return;
                }
                const lParametres = {
                    nomRequete: ''
                };
                $.extend(lParametres, aParametres);
                if (lParametres.nomRequete && this._pileTimerEnAttente[lParametres.nomRequete]) {
                    if (this._pileTimerEnAttente[lParametres.nomRequete].timer) {
                        clearTimeout(this._pileTimerEnAttente[lParametres.nomRequete].timer);
                        delete this._pileTimerEnAttente[lParametres.nomRequete].timer;
                    }
                    if (this._pileTimerEnAttente[lParametres.nomRequete].requete) {
                        this._pileTimerEnAttente[lParametres.nomRequete].requete.__interruptionReponse = true;
                    } else {
                        delete this._pileTimerEnAttente[lParametres.nomRequete];
                    }
                    IE.log.addLog('requete en attente : [' + lParametres.nomRequete + '] interrompu');
                }
            }
            _recupererParametresAttente(aParametres) {
                const lParametres = {
                    sansBlocageInterface: false,
                    delai: this.FDureeEnCours,
                    repeterRequete: false,
                    deserialisation: false,
                    date: null
                };
                if (aParametres) {
                    if (aParametres.sansBlocageInterface) {
                        lParametres.sansBlocageInterface = true;
                    }
                    if (aParametres.delai && aParametres.delai > 0) {
                        lParametres.delai = aParametres.delai * 1000;
                    }
                    if (aParametres.repeterRequete) {
                        lParametres.repeterRequete = true;
                    }
                    if (aParametres.date) {
                        lParametres.date = aParametres.date;
                    }
                    if (aParametres.deserialisation) {
                        lParametres.deserialisation = aParametres.deserialisation;
                    }
                }
                return lParametres;
            }
            _setRequeteEtatTermine(aRequete) {
                if (aRequete) {
                    aRequete.etat = TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.termine;
                    this.pileRequetes = this.pileRequetes.filter( (aRequete, aIndex) => {
                        return !!aRequete && aRequete.etat !== TypeEtatRequeteAjax_1.TypeEtatRequeteAjax.termine;
                    }
                    );
                }
                this._requetePresenceDelai();
            }
            _surReception(aRequete, aJSON, aDonneesEchec) {
                this._setRequeteEtatTermine(aRequete);
                this._envoieRequete();
                if (aRequete.Parametres.pereReponse && aRequete.Parametres.evenementReponse) {
                    aRequete.Parametres.evenementReponse.call(aRequete.Parametres.pereReponse, aJSON ? aJSON.donnees : {}, aDonneesEchec);
                }
            }
            _composePageErreur(aJSONErreur, aStatut) {
                const lParametres = {
                    constructionPage: true,
                    statut: aStatut,
                    jsonErreur: aJSONErreur
                };
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.erreurCommunication, lParametres);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.fermerFenetres, true);
            }
            _requeteBeaconDeconnexion() {
                if (navigator && navigator.sendBeacon && !this.estArrete && this.NumeroOrdreCommunication > 0 && !this._requeteDeconnexionEnvoyee) {
                    this._requeteDeconnexionEnvoyee = true;
                    const lNumeroOrdre = this.getChaineChiffreeAES(this.NumeroOrdreCommunication);
                    if (lNumeroOrdre) {
                        try {
                            navigator.sendBeacon('appeldeconnexion/' + lNumeroOrdre + '/' + new Date().getTime(), ObjetJSON_1.ObjetJSON.toJSON({
                                ns: parseInt(this.NumeroDeSession, 10),
                                no: lNumeroOrdre
                            }));
                        } catch (e) {}
                    }
                }
            }
            _requetePresenceDelai() {
                window.clearTimeout(this.timerPresence);
                this.timerPresence = setTimeout(this._requeteDePresence.bind(this), this._getDureeTimerPresence());
            }
            _getDureeTimerPresence() {
                return this._MAJServeurEnCours ? Math.min(CommunicationProduit.cDureeTimerPresenceMAJServeurEnCours, this._dureeTimerPresence) : this._dureeTimerPresence;
            }
            _requeteDePresence() {
                if (CommunicationProduit.optionsSecurite.avecPollingActif) {
                    return;
                }
                if (!this.requeteEnCours() && this._requetePresenceActive && this._requetePresenceEnPause !== true) {}
                this._requetePresenceDelai();
            }
            _modificationPresenceUtilisateur(aPresenceUtilisateur) {
                if (this.estArrete) {
                    return;
                }
                let lNomRequete;
                if (aPresenceUtilisateur) {
                    delete this._requetePresenceEnPause;
                    this._requeteDePresence();
                    this._envoiRequetePolling({
                        presence: true
                    });
                } else {
                    this._requetePresenceEnPause = true;
                    window.clearTimeout(this.timerPresence);
                    for (lNomRequete in this._pileTimerEnAttente) {
                        if (this._pileTimerEnAttente[lNomRequete]) {
                            this._eventInterruptionRequete({
                                nomRequete: lNomRequete
                            });
                        }
                    }
                }
            }
            _arretTimeoutsPolling() {
                if (this.polling.timeoutEchec) {
                    clearTimeout(this.polling.timeoutEchec);
                    this.polling.timeoutEchec = null;
                }
                if (this.polling.timeoutExpirationRequete) {
                    clearTimeout(this.polling.timeoutExpirationRequete);
                    this.polling.timeoutExpirationRequete = null;
                }
            }
            _envoiRequetePolling(aParams) {
                if (!CommunicationProduit.optionsSecurite.avecPollingActif) {
                    return;
                }
                if (this.estArrete) {
                    return;
                }
                const lParams = Object.assign({
                    presence: false
                }, aParams);
                this._arretTimeoutsPolling();
                if (this.polling.requeteEnCours) {
                    if (!lParams.presence) {
                        IE.log.addLog('Double envoi Polling');
                    }
                    return;
                }
                if (!this.polling.echecReseau && (this._requetePresenceEnPause || !this._requetePresenceActive)) {
                    if (this.polling.messageDecoEnCours) {
                        this.polling.messageDecoEnCours = false;
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                            blocageDeconnexion: false
                        });
                    }
                    return;
                }
                let lJSONEnvoi = {};
                lJSONEnvoi = ObjetJSON_1.ObjetJSON.preparerJSON(lJSONEnvoi, {
                    JSONCollection: {}
                });
                const lResultJSON = this._traiterJSONEnvoi(lJSONEnvoi);
                this.polling.requeteEnCours = new ObjetRequete_1.ObjetRequete({
                    numeroSession: this.NumeroDeSession,
                    numeroRequete: this.polling.nbRequetes,
                    nomRequete: 'appelpolling',
                    genreEspace: this.GenreEspace,
                    nomDeFonction: 'polling',
                    estPolling: true,
                    parametres: lResultJSON.JSON,
                    echecReseau: this.polling.echecReseau,
                    callBackReadyStateChange: (aRequete, aReponse, aStatut) => {
                        this.polling.requeteEnCours = null;
                        this._arretTimeoutsPolling();
                        if (this.estArrete) {
                            return;
                        }
                        this.polling.nbRequetes += 1;
                        const lStatut = typeof aStatut === 'number' ? aStatut : parseInt(aStatut, 10);
                        switch (lStatut) {
                        case 200:
                            {
                                this.polling.numeroOrdre += 1;
                                delete this.polling.echecReseau;
                                if (this.polling.messageDecoEnCours) {
                                    this.polling.messageDecoEnCours = false;
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        blocageDeconnexion: false
                                    });
                                }
                                const lJSONReseau = aReponse ? ObjetJSON_1.ObjetJSON.parseJSON(aReponse) : null;
                                if (lJSONReseau) {
                                    this._getXmlReponseStatut200(aRequete, aReponse, lJSONReseau, true);
                                    if (lJSONReseau.Erreur || (lJSONReseau.donnees && lJSONReseau.donnees.Erreur)) {
                                        this._composePageErreur((lJSONReseau.Erreur ? lJSONReseau.Erreur : lJSONReseau.donnees.Erreur));
                                        return;
                                    }
                                    if (lJSONReseau.donnees) {
                                        Invocateur_1.Invocateur.evenement('deserialisation_notificationsPolling', lJSONReseau.donnees);
                                    }
                                }
                                this._envoiRequetePolling();
                                break;
                            }
                        default:
                            {
                                if (!this.polling.echecReseau) {
                                    this.polling.echecReseau = {
                                        nb: 0,
                                        timeDebut: Date.now(),
                                        log: ''
                                    };
                                }
                                this.polling.echecReseau.nb += 1;
                                if (this.polling.echecReseau.nb >= this.polling.nbRepetitionEchecReseau || (this.polling.echecReseau.timeDebut && this.polling.echecReseau.nb > 2 && ((Date.now() - this.polling.echecReseau.timeDebut) > this.polling.delaiTimeoutEchecReseau))) {
                                    if (!global.GApplication || !global.GApplication._unloadEnCours) {
                                        this.sendLogClient(`erreur polling - statut : ${aStatut}`);
                                    }
                                    IE.log.addLog('FIN SESSION : Echec requête polling. statut = ' + aStatut);
                                    this._composePageErreur(null, aStatut);
                                    return;
                                }
                                const lDateEchec = new Date();
                                this.polling.echecReseau.log += (this.polling.echecReseau.log ? ' / ' : '') + lDateEchec.getHours() + ':' + lDateEchec.getMinutes() + ':' + lDateEchec.getSeconds() + ':' + lDateEchec.getMilliseconds() + ' -statut:' + aStatut;
                                if (!this.polling.messageDecoEnCours && (this.polling.echecReseau.nb === 3 || lParams.presence)) {
                                    this.polling.messageDecoEnCours = true;
                                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.eventIOAjax, {
                                        blocageDeconnexion: true,
                                        message: ObjetTraduction_1.GTraductions.getValeur('requete.ConnexionPerdue')
                                    });
                                }
                                IE.log.addLog('Echec polling => rejeu requête polling. Statut = ' + aStatut + ' - nb:' + this.polling.echecReseau.nb);
                                this.polling.timeoutEchec = setTimeout( () => {
                                    this._envoiRequetePolling();
                                }
                                , this.polling.delaiRepetitionEchecReseau);
                            }
                        }
                    }
                    ,
                    log: {
                        tailleDonnees: lResultJSON.JSONStr_clair.length,
                        tempsChiffre: ''
                    }
                });
                this.polling.requeteEnCours.envoieRequete({
                    numeroOrdre: this.polling.numeroOrdre,
                    numeroOrdreChiffre: this.getChaineChiffreeAES(this.polling.numeroOrdre)
                });
                this.polling.timeoutExpirationRequete = setTimeout( () => {
                    this.polling.timeoutExpirationRequete = null;
                    IE.log.addLog('Timeout Polling');
                    if (this.polling.requeteEnCours && this.polling.requeteEnCours.getXmlRequest() && this.polling.requeteEnCours.getXmlRequest().abort) {
                        return this.polling.requeteEnCours.getXmlRequest().abort();
                    }
                }
                , this.polling.delaiTimeoutRequete);
            }
        }
        exports.CommunicationProduit = CommunicationProduit;
        CommunicationProduit.optionsSecurite = {};
        CommunicationProduit.cDureeTimerPresence = 2 * 60 * 1000;
        CommunicationProduit.cDureeTimerPresenceMAJServeurEnCours = 20 * 1000;
        CommunicationProduit.c_IdFichierAIgnorer = '__idFichierAIgnorer__';
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.initChiffrement, (aParam) => {
            const lOptionsSecurite = {};
            if (aParam.http) {
                lOptionsSecurite.http = true;
            }
            if (aParam.sCrA) {
                lOptionsSecurite.sansCryptageAES = true;
            }
            if (aParam.sCoA) {
                lOptionsSecurite.sansCompressionAES = true;
            }
            if (aParam.poll) {
                lOptionsSecurite.avecPollingActif = true;
            }
            CommunicationProduit.optionsSecurite = lOptionsSecurite;
        }
        );
    },
    fn: 'communicationproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreBoiteMessage = void 0;
        var EGenreBoiteMessage;
        (function(EGenreBoiteMessage) {
            EGenreBoiteMessage[EGenreBoiteMessage["Information"] = 0] = "Information";
            EGenreBoiteMessage[EGenreBoiteMessage["Confirmation"] = 1] = "Confirmation";
            EGenreBoiteMessage[EGenreBoiteMessage["MrFiche"] = 2] = "MrFiche";
        }
        )(EGenreBoiteMessage || (exports.EGenreBoiteMessage = EGenreBoiteMessage = {}));
    },
    fn: 'enumere_boitemessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpAcces = void 0;
        var TypeHttpAcces;
        (function(TypeHttpAcces) {
            TypeHttpAcces[TypeHttpAcces["HttpAcces_Espace"] = 0] = "HttpAcces_Espace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionEspace"] = 1] = "HttpAcces_ConnexionEspace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionDirect"] = 2] = "HttpAcces_ConnexionDirect";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionJetonEspace"] = 3] = "HttpAcces_ConnexionJetonEspace";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionJetonDirect"] = 4] = "HttpAcces_ConnexionJetonDirect";
            TypeHttpAcces[TypeHttpAcces["HttpAcces_ConnexionCookie"] = 5] = "HttpAcces_ConnexionCookie";
        }
        )(TypeHttpAcces || (exports.TypeHttpAcces = TypeHttpAcces = {}));
    },
    fn: 'enumere_acces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetAcces = void 0;
        const Enumere_Acces_1 = require("Enumere_Acces");
        class ObjetAcces {
            constructor(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire) {
                this.genre = aGenreAcces;
                this.genreEspace = aGenreEspace;
                this.genreOnglet = aGenreOnglet;
                this.genreSousOnglet = aGenreSousOnglet;
                this.numeroRessource = aNumeroRessource;
                this.numeroRessourceSecondaire = aNumeroRessourceSecondaire;
                this.avecRecherche = false;
                this.initialisation();
            }
            initialisation() {
                this.utilisateur = {};
                this.utilisateur.nom = '';
                this.utilisateur.libelleRecherche = '';
                this.utilisateur.identifiant = '';
                this.utilisateur.password = '';
            }
            setNom(aNom, aLibelleRecherche) {
                this.utilisateur.nom = aNom;
                this.utilisateur.libelleRecherche = aLibelleRecherche;
            }
            getNom() {
                return this.utilisateur.nom;
            }
            setIdentification(aIdentifiant, aPassword) {
                this.utilisateur.identifiant = aIdentifiant;
                this.utilisateur.password = aPassword ? aPassword : '@direct';
            }
            estConnexionCAS() {
                return (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace || this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonDirect);
            }
            estConnexionCookie() {
                return this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionCookie;
            }
            estConnexionDirect() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionDirect) {}
                const lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonDirect);
                return lResult;
            }
            estConnexionEspaceEtudiant() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionEspace) {}
                const lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace);
                return lResult;
            }
        }
        exports.ObjetAcces = ObjetAcces;
    },
    fn: 'objetacces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetAccesPN = void 0;
        const Enumere_Acces_1 = require("Enumere_Acces");
        const ObjetAcces_1 = require("ObjetAcces");
        const Enumere_Espace_1 = require("Enumere_Espace");
        class ObjetAccesPN extends ObjetAcces_1.ObjetAcces {
            constructor(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire) {
                super(aGenreAcces, aGenreEspace, aGenreOnglet, aGenreSousOnglet, aNumeroRessource, aNumeroRessourceSecondaire);
            }
            estConnexionEspaceEtudiant() {
                if (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_Espace) {}
                let lResult = (this.genre === Enumere_Acces_1.TypeHttpAcces.HttpAcces_ConnexionJetonEspace);
                lResult = (lResult && this.genreEspace === Enumere_Espace_1.EGenreEspace.Eleve);
                return lResult;
            }
        }
        exports.ObjetAccesPN = ObjetAccesPN;
    },
    fn: 'objetaccespn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetOptionsEspaceLocal = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        const TypeThemeCouleur_1 = require("TypeThemeCouleur");
        const MethodesObjet_1 = require("MethodesObjet");
        class ObjetOptionsEspaceLocal {
            constructor(aOptions) {
                this.options = $.extend({
                    racine: 'OPTIONS_ESPACE_',
                    nomProduit: '',
                    espace: ''
                }, aOptions);
                try {
                    ThemesCouleurs_1.ThemesCouleurs.setChoixDarkMode(this.getChoixDarkMode());
                } catch (e) {}
            }
            getOptionsJSON() {
                let lJSON = LocalStorage_1.IELocalStorage.getItemJSON(this.options.racine + (this.options.nomProduit || ''));
                if (!lJSON) {
                    lJSON = {};
                }
                return lJSON;
            }
            setOptionsJSON(aJSON) {
                LocalStorage_1.IELocalStorage.setItemJSON(this.options.racine + (this.options.nomProduit || ''), aJSON);
            }
            getOptionEspace(aNomOption) {
                return this.getOptionsJSON()[aNomOption + '_' + this.options.espace];
            }
            setOptionEspace(aNomOption, aValeur) {
                const lJSON = this.getOptionsJSON();
                if (aValeur) {
                    lJSON[aNomOption + '_' + this.options.espace] = aValeur;
                } else if (aValeur === undefined || aValeur === null || aValeur === false) {
                    delete lJSON[aNomOption + '_' + this.options.espace];
                }
                this.setOptionsJSON(lJSON);
                return this;
            }
            getAvecCodeCompetences() {
                return !!this.getOptionEspace('avecCC');
            }
            setAvecCodeCompetences(aModeAccessible) {
                this.setOptionEspace('avecCC', aModeAccessible);
            }
            getAvecThemeAccessible() {
                return !!this.getOptionEspace('themeA');
            }
            setAvecThemeAccessible(aThemeAccessible) {
                this.setOptionEspace('themeA', aThemeAccessible);
            }
            getChoixDarkMode() {
                let lResult = this.getOptionEspace('choix-darkmode');
                if (!MethodesObjet_1.MethodesObjet.valueInEnum(lResult, TypeThemeCouleur_1.ChoixDarkMode)) {
                    lResult = TypeThemeCouleur_1.ChoixDarkMode.clair;
                }
                return lResult;
            }
            setChoixDarkMode(aChoix) {
                this.setOptionEspace('choix-darkmode', aChoix);
                ThemesCouleurs_1.ThemesCouleurs.setChoixDarkMode(aChoix);
            }
            getSyntheseVocaleActif() {
                return false;
            }
            setSyntheseVocaleActif(aActif) {
                return this;
            }
            getSyntheseVocaleAvecSurlignage() {
                return !!this.getOptionEspace('ieSVSurLignage');
            }
            setSyntheseVocaleAvecSurlignage(aValeur) {
                return this;
            }
            getVoixSyntheseVocale() {
                return this.getOptionEspace('ieSVVoix');
            }
            setVoixSyntheseVocale(aUriVoix) {
                this.setOptionEspace('ieSVVoix', aUriVoix);
                return this;
            }
        }
        exports.ObjetOptionsEspaceLocal = ObjetOptionsEspaceLocal;
    },
    fn: 'objetoptionsespacelocal.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetOptionsEspaceLocalPN = void 0;
        const ObjetOptionsEspaceLocal_1 = require("ObjetOptionsEspaceLocal");
        class ObjetOptionsEspaceLocalPN extends ObjetOptionsEspaceLocal_1.ObjetOptionsEspaceLocal {
            getGenreConnexion() {
                return this.getOptionsJSON().genreConnexion;
            }
            setGenreConnexion(aGenreConnexion) {
                const lJSON = this.getOptionsJSON();
                lJSON.genreConnexion = aGenreConnexion;
                this.setOptionsJSON(lJSON);
            }
            getSyntheseVocaleActif() {
                const lApp = GApplication;
                return lApp.estPrimaire && !!this.getOptionEspace('ieSVActive');
            }
            setSyntheseVocaleActif(aActif) {
                const lApp = GApplication;
                if (lApp.estPrimaire) {
                    this.setOptionEspace('ieSVActive', aActif);
                }
                return this;
            }
            getSyntheseVocaleAvecSurlignage() {
                const lApp = GApplication;
                return lApp.estPrimaire && !!this.getOptionEspace('ieSVSurLignage');
            }
            setSyntheseVocaleAvecSurlignage(aValeur) {
                const lApp = GApplication;
                if (lApp.estPrimaire) {
                    this.setOptionEspace('ieSVSurLignage', aValeur);
                }
                return this;
            }
        }
        exports.ObjetOptionsEspaceLocalPN = ObjetOptionsEspaceLocalPN;
    },
    fn: 'objetoptionsespacelocalpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeModeGrillesEDT = void 0;
        var TypeModeGrillesEDT;
        (function(TypeModeGrillesEDT) {
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleHebdomadaire"] = 0] = "TMG_CycleHebdomadaire";
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleAvecferies"] = 1] = "TMG_CycleAvecferies";
            TypeModeGrillesEDT[TypeModeGrillesEDT["TMG_CycleSansFeries"] = 2] = "TMG_CycleSansFeries";
        }
        )(TypeModeGrillesEDT || (exports.TypeModeGrillesEDT = TypeModeGrillesEDT = {}));
    },
    fn: 'typemodegrillesedt.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        require("NamespaceIE");
        require('DeclarationJQuery.js');
        const Invocateur_1 = require("Invocateur");
        let _actif = false;
        let _actifRequete = false;
        const _idLogAutorises = {};
        let _compteurRequete = 0;
        const _nbRequetesMax = 200;
        let _pileLog = [];
        const _pileRequete = [];
        var TypeGenreLog;
        (function(TypeGenreLog) {
            TypeGenreLog[TypeGenreLog["Message"] = 0] = "Message";
            TypeGenreLog[TypeGenreLog["Avertissement"] = 1] = "Avertissement";
            TypeGenreLog[TypeGenreLog["Erreur"] = 2] = "Erreur";
            TypeGenreLog[TypeGenreLog["Deprecated"] = 3] = "Deprecated";
        }
        )(TypeGenreLog || (TypeGenreLog = {}));
        const Log = {
            genre: TypeGenreLog,
            getActif() {
                return _actif;
            },
            setActif(aActif) {
                _actif = aActif;
                if (aActif) {
                    this.addLog('Démarrage Log', null, Log.genre.Avertissement);
                }
            },
            getActifRequete() {
                return _actifRequete;
            },
            setActifRequete(aActif) {
                _actifRequete = aActif;
            },
            addLog(aMessage, aIdFiltrage, aGenreLog) {
                if (!_actif) {
                    return;
                }
                if (aIdFiltrage && _idLogAutorises && !_idLogAutorises[aIdFiltrage]) {
                    return;
                }
                const lMessage = aMessage && aMessage.toString ? aMessage.toString() : 'aMessage NON LOGGABLE !!!';
                const lLog = {
                    message: lMessage,
                    genreLog: aGenreLog,
                    date: new Date()
                };
                _pileLog.push(lLog);
                this.addConsoleLog(aMessage, aGenreLog);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_log, lLog);
            },
            vider() {
                _pileLog = [];
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_log, null);
            },
            setIDFiltrageLog(aID, aAutoriser) {
                if (aAutoriser) {
                    _idLogAutorises[aID] = true;
                } else {
                    delete _idLogAutorises[aID];
                }
            },
            addRequete(aDonnees) {
                if (!this.getActifRequete()) {
                    return;
                }
                const lDonnees = {
                    nomRequete: '',
                    numeroRequete: 0,
                    numeroOrdre: 0,
                    chrono: null,
                    estReponse: false,
                    lgcontenu: null
                };
                Object.assign(lDonnees, aDonnees);
                lDonnees.date = new Date();
                if (!lDonnees.estReponse) {
                    _compteurRequete += 1;
                }
                _pileRequete.push(lDonnees);
                if (_pileRequete.length > _nbRequetesMax) {
                    _pileRequete.shift();
                }
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.DEBUG_logRequete, lDonnees);
            },
            getCompteurRequete() {
                return _compteurRequete;
            },
            getPile() {
                return _pileLog;
            },
            getRequetes() {
                return _pileRequete;
            },
            addConsoleLog(aMessage, aGenreMsg) {},
            addConsoleLogObjet(aObjet, aLibelle) {},
            addConsolePileAppel(aLibelle) {}
        };
        IE.log = Log;
        module.exports = Log;
    },
    fn: 'ielog.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        var __extends;
        var __assign;
        var __rest;
        var __decorate;
        var __param;
        var __esDecorate;
        var __runInitializers;
        var __propKey;
        var __setFunctionName;
        var __metadata;
        var __awaiter;
        var __generator;
        var __exportStar;
        var __values;
        var __read;
        var __spread;
        var __spreadArrays;
        var __spreadArray;
        var __await;
        var __asyncGenerator;
        var __asyncDelegator;
        var __asyncValues;
        var __makeTemplateObject;
        var __importStar;
        var __importDefault;
        var __classPrivateFieldGet;
        var __classPrivateFieldSet;
        var __classPrivateFieldIn;
        var __createBinding;
        var __addDisposableResource;
        var __disposeResources;
        (function(factory) {
            var root = typeof global === "object" ? global : typeof self === "object" ? self : typeof this === "object" ? this : {};
            if (typeof define === "function" && define.amd) {
                define("tslib", ["exports"], function(exports) {
                    factory(createExporter(root, createExporter(exports)));
                });
            } else if (typeof module === "object" && typeof module.exports === "object") {
                factory(createExporter(root, createExporter(module.exports)));
            } else {
                factory(createExporter(root));
            }
            function createExporter(exports, previous) {
                if (exports !== root) {
                    if (typeof Object.create === "function") {
                        Object.defineProperty(exports, "__esModule", {
                            value: true
                        });
                    } else {
                        exports.__esModule = true;
                    }
                }
                return function(id, v) {
                    return exports[id] = previous ? previous(id, v) : v;
                }
                ;
            }
        }
        )(function(exporter) {
            var extendStatics = Object.setPrototypeOf || ({
                __proto__: []
            }instanceof Array && function(d, b) {
                d.__proto__ = b;
            }
            ) || function(d, b) {
                for (var p in b)
                    if (Object.prototype.hasOwnProperty.call(b, p))
                        d[p] = b[p];
            }
            ;
            __extends = function(d, b) {
                if (typeof b !== "function" && b !== null)
                    throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
                extendStatics(d, b);
                function __() {
                    this.constructor = d;
                }
                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype,
                new __());
            }
            ;
            __assign = Object.assign || function(t) {
                for (var s, i = 1, n = arguments.length; i < n; i++) {
                    s = arguments[i];
                    for (var p in s)
                        if (Object.prototype.hasOwnProperty.call(s, p))
                            t[p] = s[p];
                }
                return t;
            }
            ;
            __rest = function(s, e) {
                var t = {};
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
                        t[p] = s[p];
                if (s != null && typeof Object.getOwnPropertySymbols === "function")
                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                            t[p[i]] = s[p[i]];
                    }
                return t;
            }
            ;
            __decorate = function(decorators, target, key, desc) {
                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
                if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
                    r = Reflect.decorate(decorators, target, key, desc);
                else
                    for (var i = decorators.length - 1; i >= 0; i--)
                        if (d = decorators[i])
                            r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
                return c > 3 && r && Object.defineProperty(target, key, r),
                r;
            }
            ;
            __param = function(paramIndex, decorator) {
                return function(target, key) {
                    decorator(target, key, paramIndex);
                }
            }
            ;
            __esDecorate = function(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
                function accept(f) {
                    if (f !== void 0 && typeof f !== "function")
                        throw new TypeError("Function expected");
                    return f;
                }
                var kind = contextIn.kind
                  , key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
                var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
                var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
                var _, done = false;
                for (var i = decorators.length - 1; i >= 0; i--) {
                    var context = {};
                    for (var p in contextIn)
                        context[p] = p === "access" ? {} : contextIn[p];
                    for (var p in contextIn.access)
                        context.access[p] = contextIn.access[p];
                    context.addInitializer = function(f) {
                        if (done)
                            throw new TypeError("Cannot add initializers after decoration has completed");
                        extraInitializers.push(accept(f || null));
                    }
                    ;
                    var result = (0,
                    decorators[i])(kind === "accessor" ? {
                        get: descriptor.get,
                        set: descriptor.set
                    } : descriptor[key], context);
                    if (kind === "accessor") {
                        if (result === void 0)
                            continue;
                        if (result === null || typeof result !== "object")
                            throw new TypeError("Object expected");
                        if (_ = accept(result.get))
                            descriptor.get = _;
                        if (_ = accept(result.set))
                            descriptor.set = _;
                        if (_ = accept(result.init))
                            initializers.unshift(_);
                    } else if (_ = accept(result)) {
                        if (kind === "field")
                            initializers.unshift(_);
                        else
                            descriptor[key] = _;
                    }
                }
                if (target)
                    Object.defineProperty(target, contextIn.name, descriptor);
                done = true;
            }
            ;
            __runInitializers = function(thisArg, initializers, value) {
                var useValue = arguments.length > 2;
                for (var i = 0; i < initializers.length; i++) {
                    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
                }
                return useValue ? value : void 0;
            }
            ;
            __propKey = function(x) {
                return typeof x === "symbol" ? x : "".concat(x);
            }
            ;
            __setFunctionName = function(f, name, prefix) {
                if (typeof name === "symbol")
                    name = name.description ? "[".concat(name.description, "]") : "";
                return Object.defineProperty(f, "name", {
                    configurable: true,
                    value: prefix ? "".concat(prefix, " ", name) : name
                });
            }
            ;
            __metadata = function(metadataKey, metadataValue) {
                if (typeof Reflect === "object" && typeof Reflect.metadata === "function")
                    return Reflect.metadata(metadataKey, metadataValue);
            }
            ;
            __awaiter = function(thisArg, _arguments, P, generator) {
                function adopt(value) {
                    return value instanceof P ? value : new P(function(resolve) {
                        resolve(value);
                    }
                    );
                }
                return new (P || (P = Promise))(function(resolve, reject) {
                    function fulfilled(value) {
                        try {
                            step(generator.next(value));
                        } catch (e) {
                            reject(e);
                        }
                    }
                    function rejected(value) {
                        try {
                            step(generator["throw"](value));
                        } catch (e) {
                            reject(e);
                        }
                    }
                    function step(result) {
                        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
                    }
                    step((generator = generator.apply(thisArg, _arguments || [])).next());
                }
                );
            }
            ;
            __generator = function(thisArg, body) {
                var _ = {
                    label: 0,
                    sent: function() {
                        if (t[0] & 1)
                            throw t[1];
                        return t[1];
                    },
                    trys: [],
                    ops: []
                }, f, y, t, g;
                return g = {
                    next: verb(0),
                    "throw": verb(1),
                    "return": verb(2)
                },
                typeof Symbol === "function" && (g[Symbol.iterator] = function() {
                    return this;
                }
                ),
                g;
                function verb(n) {
                    return function(v) {
                        return step([n, v]);
                    }
                    ;
                }
                function step(op) {
                    if (f)
                        throw new TypeError("Generator is already executing.");
                    while (g && (g = 0,
                    op[0] && (_ = 0)),
                    _)
                        try {
                            if (f = 1,
                            y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y),
                            0) : y.next) && !(t = t.call(y, op[1])).done)
                                return t;
                            if (y = 0,
                            t)
                                op = [op[0] & 2, t.value];
                            switch (op[0]) {
                            case 0:
                            case 1:
                                t = op;
                                break;
                            case 4:
                                _.label++;
                                return {
                                    value: op[1],
                                    done: false
                                };
                            case 5:
                                _.label++;
                                y = op[1];
                                op = [0];
                                continue;
                            case 7:
                                op = _.ops.pop();
                                _.trys.pop();
                                continue;
                            default:
                                if (!(t = _.trys,
                                t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                                    _ = 0;
                                    continue;
                                }
                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                    _.label = op[1];
                                    break;
                                }
                                if (op[0] === 6 && _.label < t[1]) {
                                    _.label = t[1];
                                    t = op;
                                    break;
                                }
                                if (t && _.label < t[2]) {
                                    _.label = t[2];
                                    _.ops.push(op);
                                    break;
                                }
                                if (t[2])
                                    _.ops.pop();
                                _.trys.pop();
                                continue;
                            }
                            op = body.call(thisArg, _);
                        } catch (e) {
                            op = [6, e];
                            y = 0;
                        } finally {
                            f = t = 0;
                        }
                    if (op[0] & 5)
                        throw op[1];
                    return {
                        value: op[0] ? op[1] : void 0,
                        done: true
                    };
                }
            }
            ;
            __exportStar = function(m, o) {
                for (var p in m)
                    if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p))
                        __createBinding(o, m, p);
            }
            ;
            __createBinding = Object.create ? (function(o, m, k, k2) {
                if (k2 === undefined)
                    k2 = k;
                var desc = Object.getOwnPropertyDescriptor(m, k);
                if (!desc || ("get"in desc ? !m.__esModule : desc.writable || desc.configurable)) {
                    desc = {
                        enumerable: true,
                        get: function() {
                            return m[k];
                        }
                    };
                }
                Object.defineProperty(o, k2, desc);
            }
            ) : (function(o, m, k, k2) {
                if (k2 === undefined)
                    k2 = k;
                o[k2] = m[k];
            }
            );
            __values = function(o) {
                var s = typeof Symbol === "function" && Symbol.iterator
                  , m = s && o[s]
                  , i = 0;
                if (m)
                    return m.call(o);
                if (o && typeof o.length === "number")
                    return {
                        next: function() {
                            if (o && i >= o.length)
                                o = void 0;
                            return {
                                value: o && o[i++],
                                done: !o
                            };
                        }
                    };
                throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
            }
            ;
            __read = function(o, n) {
                var m = typeof Symbol === "function" && o[Symbol.iterator];
                if (!m)
                    return o;
                var i = m.call(o), r, ar = [], e;
                try {
                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                        ar.push(r.value);
                } catch (error) {
                    e = {
                        error: error
                    };
                } finally {
                    try {
                        if (r && !r.done && (m = i["return"]))
                            m.call(i);
                    } finally {
                        if (e)
                            throw e.error;
                    }
                }
                return ar;
            }
            ;
            __spread = function() {
                for (var ar = [], i = 0; i < arguments.length; i++)
                    ar = ar.concat(__read(arguments[i]));
                return ar;
            }
            ;
            __spreadArrays = function() {
                for (var s = 0, i = 0, il = arguments.length; i < il; i++)
                    s += arguments[i].length;
                for (var r = Array(s), k = 0, i = 0; i < il; i++)
                    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++,
                    k++)
                        r[k] = a[j];
                return r;
            }
            ;
            __spreadArray = function(to, from, pack) {
                if (pack || arguments.length === 2)
                    for (var i = 0, l = from.length, ar; i < l; i++) {
                        if (ar || !(i in from)) {
                            if (!ar)
                                ar = Array.prototype.slice.call(from, 0, i);
                            ar[i] = from[i];
                        }
                    }
                return to.concat(ar || Array.prototype.slice.call(from));
            }
            ;
            __await = function(v) {
                return this instanceof __await ? (this.v = v,
                this) : new __await(v);
            }
            ;
            __asyncGenerator = function(thisArg, _arguments, generator) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var g = generator.apply(thisArg, _arguments || []), i, q = [];
                return i = {},
                verb("next"),
                verb("throw"),
                verb("return", awaitReturn),
                i[Symbol.asyncIterator] = function() {
                    return this;
                }
                ,
                i;
                function awaitReturn(f) {
                    return function(v) {
                        return Promise.resolve(v).then(f, reject);
                    }
                    ;
                }
                function verb(n, f) {
                    if (g[n]) {
                        i[n] = function(v) {
                            return new Promise(function(a, b) {
                                q.push([n, v, a, b]) > 1 || resume(n, v);
                            }
                            );
                        }
                        ;
                        if (f)
                            i[n] = f(i[n]);
                    }
                }
                function resume(n, v) {
                    try {
                        step(g[n](v));
                    } catch (e) {
                        settle(q[0][3], e);
                    }
                }
                function step(r) {
                    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
                }
                function fulfill(value) {
                    resume("next", value);
                }
                function reject(value) {
                    resume("throw", value);
                }
                function settle(f, v) {
                    if (f(v),
                    q.shift(),
                    q.length)
                        resume(q[0][0], q[0][1]);
                }
            }
            ;
            __asyncDelegator = function(o) {
                var i, p;
                return i = {},
                verb("next"),
                verb("throw", function(e) {
                    throw e;
                }),
                verb("return"),
                i[Symbol.iterator] = function() {
                    return this;
                }
                ,
                i;
                function verb(n, f) {
                    i[n] = o[n] ? function(v) {
                        return (p = !p) ? {
                            value: __await(o[n](v)),
                            done: false
                        } : f ? f(v) : v;
                    }
                    : f;
                }
            }
            ;
            __asyncValues = function(o) {
                if (!Symbol.asyncIterator)
                    throw new TypeError("Symbol.asyncIterator is not defined.");
                var m = o[Symbol.asyncIterator], i;
                return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](),
                i = {},
                verb("next"),
                verb("throw"),
                verb("return"),
                i[Symbol.asyncIterator] = function() {
                    return this;
                }
                ,
                i);
                function verb(n) {
                    i[n] = o[n] && function(v) {
                        return new Promise(function(resolve, reject) {
                            v = o[n](v),
                            settle(resolve, reject, v.done, v.value);
                        }
                        );
                    }
                    ;
                }
                function settle(resolve, reject, d, v) {
                    Promise.resolve(v).then(function(v) {
                        resolve({
                            value: v,
                            done: d
                        });
                    }, reject);
                }
            }
            ;
            __makeTemplateObject = function(cooked, raw) {
                if (Object.defineProperty) {
                    Object.defineProperty(cooked, "raw", {
                        value: raw
                    });
                } else {
                    cooked.raw = raw;
                }
                return cooked;
            }
            ;
            var __setModuleDefault = Object.create ? (function(o, v) {
                Object.defineProperty(o, "default", {
                    enumerable: true,
                    value: v
                });
            }
            ) : function(o, v) {
                o["default"] = v;
            }
            ;
            __importStar = function(mod) {
                if (mod && mod.__esModule)
                    return mod;
                var result = {};
                if (mod != null)
                    for (var k in mod)
                        if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k))
                            __createBinding(result, mod, k);
                __setModuleDefault(result, mod);
                return result;
            }
            ;
            __importDefault = function(mod) {
                return (mod && mod.__esModule) ? mod : {
                    "default": mod
                };
            }
            ;
            __classPrivateFieldGet = function(receiver, state, kind, f) {
                if (kind === "a" && !f)
                    throw new TypeError("Private accessor was defined without a getter");
                if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
                    throw new TypeError("Cannot read private member from an object whose class did not declare it");
                return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
            }
            ;
            __classPrivateFieldSet = function(receiver, state, value, kind, f) {
                if (kind === "m")
                    throw new TypeError("Private method is not writable");
                if (kind === "a" && !f)
                    throw new TypeError("Private accessor was defined without a setter");
                if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
                    throw new TypeError("Cannot write private member to an object whose class did not declare it");
                return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)),
                value;
            }
            ;
            __classPrivateFieldIn = function(state, receiver) {
                if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function"))
                    throw new TypeError("Cannot use 'in' operator on non-object");
                return typeof state === "function" ? receiver === state : state.has(receiver);
            }
            ;
            __addDisposableResource = function(env, value, async) {
                if (value !== null && value !== void 0) {
                    if (typeof value !== "object" && typeof value !== "function")
                        throw new TypeError("Object expected.");
                    var dispose;
                    if (async) {
                        if (!Symbol.asyncDispose)
                            throw new TypeError("Symbol.asyncDispose is not defined.");
                        dispose = value[Symbol.asyncDispose];
                    }
                    if (dispose === void 0) {
                        if (!Symbol.dispose)
                            throw new TypeError("Symbol.dispose is not defined.");
                        dispose = value[Symbol.dispose];
                    }
                    if (typeof dispose !== "function")
                        throw new TypeError("Object not disposable.");
                    env.stack.push({
                        value: value,
                        dispose: dispose,
                        async: async
                    });
                } else if (async) {
                    env.stack.push({
                        async: true
                    });
                }
                return value;
            }
            ;
            var _SuppressedError = typeof SuppressedError === "function" ? SuppressedError : function(error, suppressed, message) {
                var e = new Error(message);
                return e.name = "SuppressedError",
                e.error = error,
                e.suppressed = suppressed,
                e;
            }
            ;
            __disposeResources = function(env) {
                function fail(e) {
                    env.error = env.hasError ? new _SuppressedError(e,env.error,"An error was suppressed during disposal.") : e;
                    env.hasError = true;
                }
                function next() {
                    while (env.stack.length) {
                        var rec = env.stack.pop();
                        try {
                            var result = rec.dispose && rec.dispose.call(rec.value);
                            if (rec.async)
                                return Promise.resolve(result).then(next, function(e) {
                                    fail(e);
                                    return next();
                                });
                        } catch (e) {
                            fail(e);
                        }
                    }
                    if (env.hasError)
                        throw env.error;
                }
                return next();
            }
            ;
            exporter("__extends", __extends);
            exporter("__assign", __assign);
            exporter("__rest", __rest);
            exporter("__decorate", __decorate);
            exporter("__param", __param);
            exporter("__esDecorate", __esDecorate);
            exporter("__runInitializers", __runInitializers);
            exporter("__propKey", __propKey);
            exporter("__setFunctionName", __setFunctionName);
            exporter("__metadata", __metadata);
            exporter("__awaiter", __awaiter);
            exporter("__generator", __generator);
            exporter("__exportStar", __exportStar);
            exporter("__createBinding", __createBinding);
            exporter("__values", __values);
            exporter("__read", __read);
            exporter("__spread", __spread);
            exporter("__spreadArrays", __spreadArrays);
            exporter("__spreadArray", __spreadArray);
            exporter("__await", __await);
            exporter("__asyncGenerator", __asyncGenerator);
            exporter("__asyncDelegator", __asyncDelegator);
            exporter("__asyncValues", __asyncValues);
            exporter("__makeTemplateObject", __makeTemplateObject);
            exporter("__importStar", __importStar);
            exporter("__importDefault", __importDefault);
            exporter("__classPrivateFieldGet", __classPrivateFieldGet);
            exporter("__classPrivateFieldSet", __classPrivateFieldSet);
            exporter("__classPrivateFieldIn", __classPrivateFieldIn);
            exporter("__addDisposableResource", __addDisposableResource);
            exporter("__disposeResources", __disposeResources);
        });
    },
    fn: 'tslib.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetHint = void 0;
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const MethodesTableau_1 = require("MethodesTableau");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetSupport_1 = require("ObjetSupport");
        const tag_1 = require("tag");
        let uTimeoutFondu = null;
        const uIdConteneur = GUID_1.GUID.getId();
        const uIdScroll = uIdConteneur + '_scroll';
        let uHintsEnAttente = [];
        let uHintEnCoursChargement = null;
        let uHintAffiche = null;
        let uHintInitialise = false;
        class ConteneurEventInvocateur {
            constructor() {
                this.pileAbonnementInvocateur = {};
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
        }
        const uConteneurEventInvocateur = new ConteneurEventInvocateur();
        const ObjetHint = {
            optionsDefault: {
                sansDelai: false,
                maxHeight: 500,
                maxWidth: 550,
                delaiTimer: 400,
                delaiFermeture: 0,
                sansDelaiFermetureSuppression: false
            },
            getDisabled() {
                return !global.GNavigateur;
            },
            start(aContenu, aOptions) {
                if (ObjetHint.getDisabled()) {
                    IE.log.addLog('ObjetHint.start => disabled sur espaces mobiles');
                    return;
                }
                if (!uHintInitialise) {
                    uHintInitialise = true;
                    $(document).off('pointerdown.Hint keyup.Hint').on('pointerdown.Hint keyup.Hint', (aEvent) => {
                        _stopAll(aEvent);
                    }
                    );
                    $(window).off('resize.Hint').on('resize.Hint', (event) => {
                        if (uHintAffiche && uHintAffiche.hintTouch) {
                            return;
                        }
                        _stopAll(event);
                    }
                    );
                }
                const lHint = Object.assign({
                    position: null,
                    event: null,
                    elementDOM: null
                }, ObjetHint.optionsDefault, aOptions);
                lHint.actif = false;
                if (!aContenu || (aContenu === '')) {
                    return lHint;
                }
                if (lHint.elementDOM && lHint.elementDOM.setAttribute) {
                    lHint.elementDOM.setAttribute('title', '');
                }
                lHint.actif = true;
                uHintsEnAttente.push(lHint);
                if (lHint.sansDelai) {
                    _afficher(aContenu, lHint);
                } else {
                    lHint.promiseTimerDelai = new Promise( (aResolve) => {
                        lHint.timer = setTimeout( () => {
                            _afficher(aContenu, lHint);
                            if (lHint.pomiseAfficher) {
                                lHint.pomiseAfficher.then( () => {
                                    aResolve();
                                }
                                );
                            } else {
                                aResolve();
                            }
                        }
                        , lHint.delaiTimer);
                    }
                    );
                }
                return lHint;
            },
            stop(aHint) {
                if (aHint && aHint === uHintEnCoursChargement) {
                    return false;
                }
                if (aHint) {
                    const lARetirer = !aHint.estAffiche;
                    _stopHint(aHint);
                    if (lARetirer) {
                        setTimeout( () => {
                            _retirerHintPileAttente(aHint);
                        }
                        , 0);
                    }
                } else {
                    _stopAll();
                }
            },
            attach(aParam) {
                if (ObjetHint.getDisabled()) {
                    IE.log.addLog('ObjetHint.attach > disabled sur espaces mobiles');
                    return;
                }
                const lNamespace = aParam.namespace ? aParam.namespace = '.' + aParam.namespace : '.IEHint'
                  , lContenu = aParam.contenu
                  , lInterrupt = aParam.interrupt
                  , lMargeDeplacementTouch = 50
                  , lIdentEventsTouch = GNavigateur.getEventInvocateur('pointermove');
                let lHint;
                let lTimeoutTouch;
                const lStop = function() {
                    if (lTimeoutTouch) {
                        clearTimeout(lTimeoutTouch);
                        lTimeoutTouch = null;
                    }
                    Invocateur_1.Invocateur.desabonner(lIdentEventsTouch, uConteneurEventInvocateur);
                    if (ObjetHint.stop(lHint) !== false) {
                        lHint = null;
                    }
                };
                if (!aParam.$Element) {
                    return false;
                }
                if (aParam.off !== false) {
                    aParam.$Element.off(' pointerover' + lNamespace + ' pointerleave' + lNamespace + ' pointerout' + lNamespace + ' destroyed' + lNamespace + ' pointerdown' + lNamespace);
                }
                const lElementDOM = aParam.$Element.get(0);
                const lMap = {};
                lMap['pointerover' + lNamespace] = function(event) {
                    if (event.pointerType === 'touch') {
                        return;
                    }
                    if (uHintEnCoursChargement) {
                        return;
                    }
                    if (lInterrupt && lInterrupt.call(this, event)) {
                        return;
                    }
                    const lContenuAAfficher = lContenu;
                    lHint = ObjetHint.start(lContenuAAfficher, {
                        event: event,
                        elementDOM: lElementDOM
                    });
                }
                ;
                lMap['destroyed' + lNamespace] = function() {
                    lStop();
                }
                ;
                lMap['pointerleave' + lNamespace + ' pointerout' + lNamespace] = function(aEvent) {
                    if (aEvent.pointerType === 'touch') {
                        return;
                    }
                    if (lHint && lHint.hintTouch) {
                        return;
                    }
                    lStop();
                }
                ;
                lMap['pointerdown' + lNamespace] = function(event) {
                    if (event.pointerType !== 'touch') {
                        return;
                    }
                    if (lInterrupt && lInterrupt.call(this, event)) {
                        return;
                    }
                    if (event.originalEvent.__hintSurEventPointerDown__) {
                        return;
                    }
                    event.originalEvent.hintTouch = true;
                    const lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(event);
                    lHint = ObjetHint.start(lContenu, {
                        delaiTimer: 500,
                        event: event,
                        position: {
                            x: lPositionEvent.x + 5,
                            y: lPositionEvent.y + 5
                        },
                        elementDOM: lElementDOM,
                        avecTestDisplay: true
                    });
                    if (!lHint || !lHint.promiseTimerDelai) {
                        return;
                    }
                    const lTestDeplacement = function(aEvent) {
                        if (lHint && lHint.actif && lHint.position) {
                            const lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                            if (Math.abs(lPositionEvent.x - lHint.position.x) > lMargeDeplacementTouch || Math.abs(lPositionEvent.y - lHint.position.y) > lMargeDeplacementTouch) {
                                lStop();
                            }
                        }
                    };
                    Invocateur_1.Invocateur.desabonner(lIdentEventsTouch, uConteneurEventInvocateur);
                    Invocateur_1.Invocateur.abonner(lIdentEventsTouch, lTestDeplacement, uConteneurEventInvocateur);
                    lHint.promiseTimerDelai.then( () => {
                        if (!lHint.estAffiche) {
                            return;
                        }
                        event.originalEvent.__hintSurEventPointerDown__ = true;
                        lHint.hintTouch = true;
                        if (lHint.hintAvecScroll) {
                            lHint.stopSurFinScroll = lStop;
                            return;
                        }
                        if (lTimeoutTouch) {
                            clearTimeout(lTimeoutTouch);
                        }
                        lTimeoutTouch = setTimeout( () => {
                            lTimeoutTouch = null;
                            if (lHint && lHint.actif && lHint.estAffiche) {
                                lStop();
                            }
                        }
                        , 1500);
                    }
                    );
                }
                ;
                aParam.$Element.on(lMap);
                aParam.$Element = null;
            },
            nodeDansHint(aNode) {
                return $(aNode).parents('#' + uIdConteneur.escapeJQ()).length > 0;
            }
        };
        exports.ObjetHint = ObjetHint;
        function _stopHint(aHint) {
            if (!aHint || aHint === uHintEnCoursChargement) {
                return;
            }
            if (aHint.elementDOM && aHint.elementDOM.removeAttribute) {
                aHint.elementDOM.removeAttribute('title');
            }
            if (aHint.estAffiche) {
                uHintAffiche = null;
                $('#' + uIdConteneur.escapeJQ()).removeClass('visible');
                if (ObjetSupport_1.Support.avecSupportTransitions && !aHint.sansDelaiFermetureSuppression) {
                    clearTimeout(uTimeoutFondu);
                    uTimeoutFondu = setTimeout( () => {
                        ObjetHtml_1.GHtml.supprimerElementDOM(uIdConteneur);
                        uTimeoutFondu = null;
                    }
                    , 200);
                } else {
                    ObjetHtml_1.GHtml.supprimerElementDOM(uIdConteneur);
                }
            }
            if (aHint.timerFermeture) {
                clearTimeout(aHint.timerFermeture);
                aHint.timerFermeture = null;
            }
            if (aHint.timer) {
                clearTimeout(aHint.timer);
                aHint.timer = null;
            }
            aHint.estAffiche = false;
            aHint.actif = false;
        }
        function _stopEnAttente() {
            let lHintEnAttente;
            for (let i = 0, lNb = uHintsEnAttente.length; i < lNb; i++) {
                lHintEnAttente = uHintsEnAttente[i];
                if (lHintEnAttente) {
                    lHintEnAttente.actif = false;
                    if (lHintEnAttente.timer) {
                        clearTimeout(lHintEnAttente.timer);
                        lHintEnAttente.timer = null;
                    }
                }
            }
            uHintsEnAttente = [];
        }
        function _stopAll(event, aConserverHintEnCours) {
            if (event && event.originalEvent && event.originalEvent.hintTouch) {
                return;
            }
            if (uHintEnCoursChargement) {
                return;
            }
            if (uHintAffiche && !aConserverHintEnCours) {
                _stopHint(uHintAffiche);
            }
            _stopEnAttente();
        }
        function _getContenu(aContenu, aHint) {
            if (MethodesObjet_1.MethodesObjet.isFunction(aContenu)) {
                const lResult = aContenu(aHint);
                if (typeof lResult === 'string') {
                    return lResult;
                }
                uHintEnCoursChargement = aHint;
                return lResult.finally( () => {
                    setTimeout( () => {
                        if (aHint === uHintEnCoursChargement) {
                            uHintEnCoursChargement = null;
                        }
                    }
                    , 50);
                }
                );
            } else {
                return aContenu;
            }
        }
        function _retirerHintPileAttente(aHint) {
            const lIndice = uHintsEnAttente.indexOf(aHint);
            if (lIndice >= 0) {
                MethodesTableau_1.MethodesTableau.supprimerElement(uHintsEnAttente, lIndice);
            }
        }
        function _loopAnimateScroll(aHint, aId, aHauteurAScroller) {
            const lDuree = aHauteurAScroller * 1000 / 100;
            $(aId).delay(1000).animate({
                scrollTop: aHauteurAScroller
            }, {
                duration: lDuree,
                easing: 'linear',
                done() {
                    if (aHint.stopSurFinScroll) {
                        aHint.stopSurFinScroll();
                    }
                }
            }).delay(1000).animate({
                scrollTop: 0
            }, {
                duration: 300,
                done: function() {
                    _loopAnimateScroll(aHint, aId, aHauteurAScroller);
                }
            });
        }
        function _afficher(aContenu, aHint) {
            if (uHintEnCoursChargement) {
                return;
            }
            if (aHint.avecTestDisplay && aHint.elementDOM && !$(aHint.elementDOM).is(':visible')) {
                return;
            }
            if (_avecTitleDansEventHint(aHint)) {
                return;
            }
            aHint.pomiseAfficher = Promise.resolve().then( () => {
                return _getContenu(aContenu, aHint);
            }
            ).then( (aContenu) => {
                if (!aHint.actif || !aContenu || (aContenu === '')) {
                    aHint.timer = null;
                    aHint.actif = false;
                    return;
                }
                const lContenu = aContenu;
                _retirerHintPileAttente(aHint);
                _stopAll();
                uHintAffiche = aHint;
                uHintAffiche.contenu = lContenu;
                clearTimeout(uTimeoutFondu);
                aHint.estAffiche = true;
                aHint.timer = null;
                if (aHint.delaiFermeture > 0) {
                    aHint.timerFermeture = setTimeout( () => {
                        _stopHint(aHint);
                    }
                    , aHint.delaiFermeture);
                }
                let lConteneur = ObjetHtml_1.GHtml.getElement(uIdConteneur);
                if (!ObjetHtml_1.GHtml.elementExiste(lConteneur)) {
                    lConteneur = ObjetHtml_1.GHtml.htmlToDOM('<div id="' + uIdConteneur + '" class="ie-hint"></div>');
                    ObjetHtml_1.GHtml.insererElementDOM(ObjetHtml_1.GHtml.getElement(GApplication.getIdConteneur()), lConteneur);
                }
                ObjetHtml_1.GHtml.setHtml(lConteneur, compose(lContenu, aHint));
                let lPositionEvent = {};
                if (!aHint.position && aHint.event && IE.estMobile) {
                    lPositionEvent = ObjetPosition_1.GPosition.getPositionEventJQuery(aHint.event);
                }
                const lPosition = Object.assign({
                    y: GNavigateur.pointerY,
                    x: GNavigateur.pointerX
                }, lPositionEvent, aHint.position)
                  , lDecalage = aHint.position ? {
                    x: 0,
                    y: 0
                } : {
                    x: 0,
                    y: 20
                };
                const lJScroll = $('#' + uIdScroll.escapeJQ())
                  , lHeightScroll = lJScroll.height()
                  , lHeightContenu = lJScroll.children().height()
                  , lAvecScroll = lHeightScroll < lHeightContenu;
                lJScroll.css('width', lJScroll.outerWidth());
                ObjetPosition_1.GPosition.placerFicheSource(uIdConteneur, lPosition.x, lPosition.x, lPosition.y, lPosition.y, false, lDecalage);
                $(lConteneur).addClass('visible');
                if (lAvecScroll) {
                    aHint.hintAvecScroll = true;
                    _loopAnimateScroll(aHint, '#' + uIdScroll.escapeJQ(), lHeightContenu - lHeightScroll);
                }
            }
            );
        }
        function compose(aContenu, aHint) {
            return (0,
            tag_1.tag)('div', {
                id: uIdScroll,
                tabindex: '-1',
                class: 'ie-hint-cont',
                style: `max-height:${Math.min(aHint.maxHeight, GNavigateur.ecranL)}px; max-width:${Math.min(aHint.maxWidth, GNavigateur.ecranH)}px;`
            }, (0,
            tag_1.tag)('div', aContenu));
        }
        function _avecTitleDansEventHint(aHint) {
            if (!aHint || !aHint.event || !aHint.event.target || !aHint.elementDOM || aHint.event.target === aHint.elementDOM) {
                return false;
            }
            let lResult = false;
            const lDOMTarget = aHint.event.target;
            if ($(lDOMTarget).prop('title').length > 0) {
                lResult = true;
            }
            if (!lResult) {
                $(lDOMTarget).parentsUntil(aHint.elementDOM).each( (aIndex, aElement) => {
                    if (!lResult && $(aElement).prop('title').length > 0) {
                        lResult = true;
                    }
                }
                );
            }
            return lResult;
        }
    },
    fn: 'objethint.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHint_1 = require("ObjetHint");
        const ObjetStyle_1 = require("ObjetStyle");
        const c_PPP = '…';
        function _reductionTextMultiline(aNode, aNodeText, aChaine, aOptions) {
            let lAvecModif = false;
            try {
                const lConteneur = $(aNode).parent();
                let lHeight = 0;
                const lWidth = Math.round(lConteneur.width());
                let lLineHeight = 0;
                if (MethodesObjet_1.MethodesObjet.isNumber(aOptions.nbLignesMax) && aOptions.nbLignesMax > 0) {
                    try {
                        lLineHeight = ObjetStyle_1.GStyle.getComputedValue(aNode, 'line-height');
                        if (lLineHeight === 'normal') {
                            lLineHeight = Math.ceil(ObjetStyle_1.GStyle.getFloatComputedValue(aNode, 'font-size')) * 1.2;
                        } else {
                            lLineHeight = Math.ceil(parseFloat(lLineHeight));
                        }
                    } catch (e) {
                        return true;
                    }
                    lHeight = lLineHeight * (aOptions.nbLignesMax > 0 && MethodesObjet_1.MethodesObjet.isNumber(aOptions.nbLignesMax) ? aOptions.nbLignesMax : 1);
                    if (!MethodesObjet_1.MethodesObjet.isNumber(lHeight)) {
                        return true;
                    }
                } else {
                    lHeight = Math.floor(lConteneur.height());
                }
                const lEnOverflowHeight = function() {
                    return lHeight > 0 && aNode.clientHeight - 1 > lHeight;
                };
                const lEnOverflow = function() {
                    return lHeight > 0 && lWidth > 0 && (lEnOverflowHeight() || aNode.scrollWidth - 1 > lWidth);
                };
                if (lEnOverflow()) {
                    lAvecModif = true;
                    const cMinNbCar = 1;
                    const lMinIndex = cMinNbCar;
                    let lMaxIndex = aChaine.length;
                    while (lMaxIndex > lMinIndex && lEnOverflow()) {
                        const lMaxTemp = Math.floor((lMaxIndex + lMinIndex) / 2 || 0);
                        if (lMaxTemp > lMinIndex) {
                            if (lEnOverflowHeight()) {
                                aNodeText.nodeValue = aChaine.slice(0, lMaxTemp) + c_PPP;
                                if (lEnOverflowHeight()) {
                                    lMaxIndex = lMaxTemp;
                                }
                            } else {
                                const lClientHeight = aNode.clientHeight;
                                aNodeText.nodeValue = aChaine.slice(0, lMaxTemp) + c_PPP;
                                if (lEnOverflow() && aNode.clientHeight === lClientHeight) {
                                    lMaxIndex = lMaxTemp;
                                }
                            }
                        }
                        lMaxIndex = lMaxIndex - 1;
                        aNodeText.nodeValue = aChaine.slice(0, lMaxIndex) + c_PPP;
                    }
                }
            } catch (e) {}
            if (lAvecModif && aOptions.avecHint && !ObjetHint_1.ObjetHint.getDisabled() && !ObjetHint_1.ObjetHint.nodeDansHint(aNode)) {
                ObjetHint_1.ObjetHint.attach({
                    $Element: MethodesObjet_1.MethodesObjet.isFunction(aOptions.getJNodeHint) ? $(aOptions.getJNodeHint(aNode)) : $(aNode),
                    namespace: 'ieellipsismultiline',
                    contenu: aChaine,
                    off: false
                });
            }
            return true;
        }
        IEHtml.addAttribut('ie-ellipsis-multiline', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lOptions = {
                nbLignesMax: aAttributValue || '',
                avecHint: true,
                getJNodeHint: null
            };
            if (lOptions.nbLignesMax) {
                const lGetOptions = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
                if (lGetOptions.estFonction) {
                    Object.assign(lOptions, lGetOptions.callback());
                } else {
                    lOptions.nbLignesMax = parseInt(lOptions.nbLignesMax, 10);
                }
                if (!MethodesObjet_1.MethodesObjet.isNumber(lOptions.nbLignesMax)) {
                    lOptions.nbLignesMax = '';
                }
            }
            if (!aContexteCourant.node.childNodes || aContexteCourant.node.childNodes.length > 1) {
                return true;
            }
            if (aContexteCourant.node.childNodes.length === 0) {
                return true;
            }
            const lNodeText = aContexteCourant.node.childNodes[0];
            if (!lNodeText || lNodeText.nodeType !== 3) {
                return true;
            }
            const lValueText = lNodeText.nodeValue;
            if (!lValueText || !MethodesObjet_1.MethodesObjet.isString(lValueText) || lValueText.length < 3) {
                return true;
            }
            let lTraite = false;
            aOutils.surInjectionHtml(aContexteCourant, () => {
                if (!lTraite && aContexteCourant.node.clientHeight > 0 && aContexteCourant.node.clientWidth > 0) {
                    lTraite = _reductionTextMultiline(aContexteCourant.node, lNodeText, lValueText, lOptions);
                }
            }
            );
            aOutils.abonnerRefresh( () => {
                if (!lTraite && aContexteCourant.node.scrollHeight > 0 && aContexteCourant.node.clientWidth > 0) {
                    lTraite = _reductionTextMultiline(aContexteCourant.node, lNodeText, lValueText, lOptions);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ellipsis-multiline="' + lOptions.nbLignesMax + '"');
            return true;
        }
        );
    },
    fn: 'iehtml.ellipisismultiline.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireTraitementImage = void 0;
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const Invocateur_1 = require("Invocateur");
        const UtilitaireTraitementImage = {
            browserAutoRotate: false,
            fileToDataUrlPromise(aFile) {
                return new Promise( (aResolve, aReject) => {
                    if (!aFile) {
                        aReject();
                    }
                    const lReader = new FileReader();
                    lReader.onloadend = function(e) {
                        if (e.target.readyState === FileReader.DONE) {
                            aResolve(e.target.result);
                        }
                    }
                    ;
                    lReader.onerror = function() {
                        aReject();
                    }
                    ;
                    lReader.onabort = function() {
                        aReject();
                    }
                    ;
                    lReader.readAsDataURL(aFile);
                }
                );
            },
            loadImageDataUrlPromise(aDataUrl, aImage) {
                return new Promise( (aResolve, aReject) => {
                    const lImg = aImage || new Image();
                    lImg.onload = function() {
                        aResolve(lImg);
                    }
                    ;
                    lImg.onerror = function() {
                        aReject();
                    }
                    ;
                    lImg.src = aDataUrl;
                }
                );
            },
            fileToImgPromise(aFile, aImage) {
                return UtilitaireTraitementImage.fileToDataUrlPromise(aFile).then( (aDataUrl) => {
                    return UtilitaireTraitementImage.loadImageDataUrlPromise(aDataUrl, aImage);
                }
                ).then( (aImg) => {
                    let lOrientation = -2;
                    return Promise.resolve().then( () => {
                        if (UtilitaireTraitementImage.avecOrientationPossible(aFile)) {
                            return UtilitaireTraitementImage.getOrientationPromise(aFile).then( (aOrientation) => {
                                lOrientation = aOrientation;
                            }
                            , () => {}
                            );
                        }
                    }
                    ).then( () => {
                        return {
                            img: aImg,
                            orientation: lOrientation
                        };
                    }
                    );
                }
                );
            },
            getOrientationPromise(file) {
                return new Promise( (aResolve, aReject) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const view = new DataView(e.target.result);
                            if (view.getUint16(0, false) != 0xFFD8) {
                                return aResolve(-2);
                            }
                            const length = view.byteLength;
                            let offset = 2;
                            while (offset < length) {
                                if (view.getUint16(offset + 2, false) <= 8) {
                                    return aResolve(-1);
                                }
                                const marker = view.getUint16(offset, false);
                                offset += 2;
                                if (marker == 0xFFE1) {
                                    if (view.getUint32(offset += 2, false) != 0x45786966) {
                                        return aResolve(-1);
                                    }
                                    const little = view.getUint16(offset += 6, false) == 0x4949;
                                    offset += view.getUint32(offset + 4, little);
                                    const tags = view.getUint16(offset, little);
                                    offset += 2;
                                    for (let i = 0; i < tags; i++) {
                                        if (view.getUint16(offset + (i * 12), little) == 0x0112) {
                                            return aResolve(view.getUint16(offset + (i * 12) + 8, little));
                                        }
                                    }
                                } else if ((marker & 0xFF00) != 0xFF00) {
                                    break;
                                } else {
                                    offset += view.getUint16(offset, false);
                                }
                            }
                            return aResolve(-1);
                        } catch (e) {
                            aReject(e);
                        }
                    }
                    ;
                    reader.onerror = function(e) {
                        aReject(e);
                    }
                    ;
                    reader.readAsArrayBuffer(file);
                }
                );
            },
            avecOrientationPossible(aFile) {
                return !!(aFile && aFile.type === 'image/jpeg') && !this.browserAutoRotate;
            },
            resizeEtOrientationImgToCanvas(aParams) {
                const lParams = Object.assign({
                    img: null,
                    width: 0,
                    height: 0,
                    widthResize: 0,
                    heightResize: 0,
                    orientation: -1
                }, aParams);
                const lWidth = lParams.widthResize || lParams.width;
                const lHeight = lParams.heightResize || lParams.height;
                const lCanvasResult = document.createElement('canvas');
                const lCtxDest = lCanvasResult.getContext('2d');
                lCanvasResult.width = lWidth;
                lCanvasResult.height = lHeight;
                if (lParams.orientation > 0) {
                    const lCanvas = document.createElement('canvas');
                    const lCtx = lCanvas.getContext('2d');
                    lCanvas.width = lParams.width;
                    lCanvas.height = lParams.height;
                    lCtx.drawImage(lParams.img, 0, 0, lCanvas.width, lCanvas.height);
                    if (4 < lParams.orientation && lParams.orientation < 9) {
                        lCanvasResult.width = lHeight;
                        lCanvasResult.height = lWidth;
                    }
                    switch (lParams.orientation) {
                    case 2:
                        lCtxDest.transform(-1, 0, 0, 1, lWidth, 0);
                        break;
                    case 3:
                        lCtxDest.transform(-1, 0, 0, -1, lWidth, lHeight);
                        break;
                    case 4:
                        lCtxDest.transform(1, 0, 0, -1, 0, lHeight);
                        break;
                    case 5:
                        lCtxDest.transform(0, 1, 1, 0, 0, 0);
                        break;
                    case 6:
                        lCtxDest.transform(0, 1, -1, 0, lHeight, 0);
                        break;
                    case 7:
                        lCtxDest.transform(0, -1, -1, 0, lHeight, lWidth);
                        break;
                    case 8:
                        lCtxDest.transform(0, -1, 1, 0, 0, lWidth);
                        break;
                    default:
                        break;
                    }
                    lCtxDest.drawImage(lCanvas, 0, 0, lWidth, lHeight);
                } else {
                    lCtxDest.drawImage(lParams.img, 0, 0, lWidth, lHeight);
                }
                return lCanvasResult;
            },
            resizeImgToCanvas(aImg, aMaxWidth, aMaxHeight, aOrientation) {
                const lWidthOriginal = aImg.width;
                const lHeightOriginal = aImg.height;
                const lMAX_WIDTH = aMaxWidth || 1500;
                const lMAX_HEIGHT = aMaxHeight || 1500;
                let lWidth = lWidthOriginal;
                let lHeight = lHeightOriginal;
                if (lWidth > lHeight) {
                    if (lWidth > lMAX_WIDTH) {
                        lHeight *= lMAX_WIDTH / lWidth;
                        lWidth = lMAX_WIDTH;
                    }
                } else {
                    if (lHeight > lMAX_HEIGHT) {
                        lWidth *= lMAX_HEIGHT / lHeight;
                        lHeight = lMAX_HEIGHT;
                    }
                }
                let lCanvasResult = null;
                const lAvecResize = lHeightOriginal !== lHeight || lWidthOriginal !== lWidth;
                if (lAvecResize) {
                    lCanvasResult = UtilitaireTraitementImage.resizeEtOrientationImgToCanvas({
                        img: aImg,
                        width: lWidthOriginal,
                        height: lHeightOriginal,
                        widthResize: lWidth,
                        heightResize: lHeight,
                        orientation: aOrientation
                    });
                }
                return {
                    avecResize: lAvecResize,
                    canvas: lCanvasResult,
                    img: aImg,
                    width: lWidth,
                    height: lHeight,
                    widthOriginal: lWidthOriginal,
                    heightOriginal: lHeightOriginal
                };
            },
            canvasToBlobPromise(aCanvas, aType, aName, aCompression) {
                return new Promise( (aResolve) => {
                    aCanvas.toBlob( (aBlob) => {
                        aBlob.name = aName;
                        aResolve(aBlob);
                    }
                    , aType, aCompression);
                }
                );
            },
            resizeFilePromise(aFile, aMaxWidth, aMaxHeight, aCompression) {
                return UtilitaireTraitementImage.fileToImgPromise(aFile).then( (aParamsFileToPromise) => {
                    const lResult = UtilitaireTraitementImage.resizeImgToCanvas(aParamsFileToPromise.img, aMaxWidth, aMaxHeight, aParamsFileToPromise.orientation);
                    if (lResult.avecResize && lResult.canvas) {
                        return UtilitaireTraitementImage.canvasToBlobPromise(lResult.canvas, aFile.type, aFile.name, aCompression).then( (aBlob) => {
                            lResult.file = aBlob;
                            return lResult;
                        }
                        );
                    }
                    lResult.file = aFile;
                    return lResult;
                }
                ).catch( (e) => {
                    return null;
                }
                );
            },
            avecResizePossible(aFile) {
                return !!(aFile && aFile.type && ['image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/webp'].indexOf(aFile.type) >= 0);
            },
            async genererPdfAsync(aListeFichiers) {
                try {
                    await DeferLoadingScript_1.deferLoadingScript.loadAsync('jspdf');
                } catch (_a) {
                    throw {
                        erreurLib: true
                    };
                }
                const lJsPDF = await Promise.resolve().then( () => require('jspdf.min.js'));
                if (!lJsPDF) {
                    throw {
                        erreurLib: true
                    };
                }
                return Promise.resolve().then( () => {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                        delai: 100
                    });
                    const lPromises = [];
                    if (aListeFichiers) {
                        aListeFichiers.parcourir( (aFichier) => {
                            if (!aFichier.estResize && UtilitaireTraitementImage.avecOrientationPossible(aFichier.file)) {
                                lPromises.push(UtilitaireTraitementImage.fileToImgPromise(aFichier.file).then( (aParamsFileToPromise) => {
                                    if (aParamsFileToPromise.orientation >= 2) {
                                        const lCanvasResult = UtilitaireTraitementImage.resizeEtOrientationImgToCanvas({
                                            img: aParamsFileToPromise.img,
                                            width: aParamsFileToPromise.img.width,
                                            height: aParamsFileToPromise.img.height,
                                            orientation: aParamsFileToPromise.orientation
                                        });
                                        return UtilitaireTraitementImage.canvasToBlobPromise(lCanvasResult, aFichier.file.type, aFichier.file.name).then( (aBlob) => {
                                            aFichier.file = aBlob;
                                        }
                                        );
                                    }
                                }
                                ).catch( () => {
                                    return Promise.reject({
                                        nom: aFichier.Libelle
                                    });
                                }
                                ));
                            }
                        }
                        );
                    }
                    return Promise.all(lPromises);
                }
                ).then( () => {
                    return new Promise( (aResolve, aReject) => {
                        const lNbFichiers = aListeFichiers ? aListeFichiers.count() : 0;
                        if (aListeFichiers && lNbFichiers > 0) {
                            let lNb = 0;
                            const lFilesDataUrl = [];
                            aListeFichiers.parcourir( (aFichier, aIndex) => {
                                const lFichier = aFichier;
                                UtilitaireTraitementImage.fileToDataUrlPromise(lFichier.file).then(( (aIndex, aDataUrl) => {
                                    lNb += 1;
                                    lFilesDataUrl[aIndex] = {
                                        dataUrl: aDataUrl,
                                        fichier: aFichier,
                                        type: lFichier.file.type
                                    };
                                    if (lNb >= lNbFichiers) {
                                        aResolve(lFilesDataUrl);
                                    }
                                }
                                ).bind(null, aIndex), ( (aLibelle) => {
                                    aReject({
                                        nom: aLibelle
                                    });
                                }
                                ).bind(null, lFichier.Libelle));
                            }
                            );
                        } else {
                            aResolve(null);
                        }
                    }
                    );
                }
                ).then( (aFilesDataUrl) => {
                    if (aFilesDataUrl && aFilesDataUrl.length > 0) {
                        const lPDF = new lJsPDF();
                        const lPromisesErreursJsPDF = [];
                        aFilesDataUrl.forEach( (aFile) => {
                            try {
                                aFile.imageProp = lPDF.getImageProperties(aFile.dataUrl);
                            } catch (e) {
                                lPromisesErreursJsPDF.push(new Promise( (aResolve, aReject) => {
                                    let lTypePDF = '';
                                    switch (aFile.type) {
                                    case 'image/jpeg':
                                        lTypePDF = 'JPEG';
                                        break;
                                    case 'image/png':
                                        lTypePDF = 'PNG';
                                        break;
                                    default:
                                        aReject({
                                            nom: aFile.fichier.Libelle
                                        });
                                        return;
                                    }
                                    UtilitaireTraitementImage.loadImageDataUrlPromise(aFile.dataUrl).then(( (aFile, aTypePDF, aImage) => {
                                        aFile.imageProp = {
                                            width: aImage.width,
                                            height: aImage.height,
                                            fileType: aTypePDF
                                        };
                                        aResolve();
                                    }
                                    ).bind(null, aFile, lTypePDF), ( (aFile) => {
                                        return Promise.reject({
                                            nom: aFile.fichier.Libelle
                                        });
                                    }
                                    ).bind(null, aFile));
                                }
                                ));
                            }
                        }
                        );
                        return Promise.all(lPromisesErreursJsPDF).then( () => {
                            return aFilesDataUrl;
                        }
                        );
                    }
                }
                ).then( (aFilesDataUrl) => {
                    if (aFilesDataUrl && aFilesDataUrl.length > 0) {
                        return new Promise( (aResolve, aReject) => {
                            let lPDF = new lJsPDF();
                            aFilesDataUrl.every( (aFile, aIndex) => {
                                try {
                                    const lImageProp = aFile.imageProp;
                                    if (aIndex !== 0) {
                                        lPDF.addPage([lImageProp.width, lImageProp.height]);
                                    } else {
                                        lPDF = new lJsPDF({
                                            format: [lImageProp.width, lImageProp.height],
                                            unit: 'px',
                                            orientation: lImageProp.width >= lImageProp.height ? 'l' : 'p',
                                            compress: true
                                        });
                                    }
                                    lPDF.addImage(aFile.dataUrl, lImageProp.fileType, 0, 0, lImageProp.width / lPDF.internal.scaleFactor, lImageProp.height / lPDF.internal.scaleFactor, NaN, 'SLOW');
                                    return true;
                                } catch (e) {
                                    aReject({
                                        nom: aFile.fichier.Libelle
                                    });
                                    return false;
                                }
                            }
                            );
                            const lFile = lPDF.output('blob');
                            lFile.name = 'file.pdf';
                            aResolve({
                                file: lFile
                            });
                        }
                        );
                    }
                }
                ).finally( () => {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                }
                );
            },
            getTabMimePDFImage() {
                return ['image/jpeg', 'image/jpg', 'image/png', 'image/bmp', 'image/gif'];
            }
        };
        exports.UtilitaireTraitementImage = UtilitaireTraitementImage;
        function _browserAutoRotatesPromise() {
            return new Promise( (resolve, reject) => {
                const image = new Image();
                image.onload = function() {
                    resolve(image.naturalWidth === 1);
                }
                ;
                image.onerror = reject;
                image.src = 'data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z';
            }
            );
        }
        _browserAutoRotatesPromise().then( (aVal) => {
            UtilitaireTraitementImage.browserAutoRotate = !!aVal;
        }
        );
        if (!HTMLCanvasElement.prototype.toBlob) {
            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {
                value: function(callback, type, quality) {
                    const canvas = this;
                    setTimeout( () => {
                        const binStr = atob(canvas.toDataURL(type, quality).split(',')[1])
                          , len = binStr.length
                          , arr = new Uint8Array(len);
                        for (let i = 0; i < len; i++) {
                            arr[i] = binStr.charCodeAt(i);
                        }
                        callback(new Blob([arr],{
                            type: type || 'image/png'
                        }));
                    }
                    );
                }
            });
        }
    },
    fn: 'utilitairetraitementimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireLoaderImage = void 0;
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const GUID_1 = require("GUID");
        const c_pilesImages = {
            enCours: [],
            enAttente: [],
            nbMax: 2,
            timeoutEchec: 60 * 1000
        };
        let UtilitaireLoaderImage = {
            loadImage(aNodeImage, aUrl) {
                if (c_pilesImages.enCours.length >= c_pilesImages.nbMax) {
                    c_pilesImages.enAttente.push({
                        node: aNodeImage,
                        url: aUrl
                    });
                } else {
                    _loadImage(aNodeImage, aUrl);
                }
            }
        };
        exports.UtilitaireLoaderImage = UtilitaireLoaderImage;
        const uGenerateurGUID = new GUID_1.GUID.generateur();
        function _loadImage(aNodeImage, aUrl) {
            if (!aNodeImage || !document.body.contains(aNodeImage)) {
                _depiler();
                return;
            }
            const lId = uGenerateurGUID.get();
            c_pilesImages.enCours.push(lId);
            return Promise.race([UtilitaireTraitementImage_1.UtilitaireTraitementImage.loadImageDataUrlPromise(aUrl, aNodeImage).catch( () => {}
            ), new Promise( (aResolve) => {
                setTimeout( () => {
                    aResolve();
                }
                , c_pilesImages.timeoutEchec);
            }
            )]).then( () => {
                const lIndex = c_pilesImages.enCours.indexOf(lId);
                if (lIndex >= 0) {
                    c_pilesImages.enCours.splice(lIndex, 1);
                }
                _depiler();
            }
            );
        }
        function _depiler() {
            if (c_pilesImages.enAttente.length > 0 && c_pilesImages.enCours.length < c_pilesImages.nbMax) {
                const lAttente = c_pilesImages.enAttente.shift();
                _loadImage(lAttente.node, lAttente.url);
            }
        }
    },
    fn: 'utilitaireloaderimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const UtilitaireLoaderImage_1 = require("UtilitaireLoaderImage");
        let uObserverImgSrc = null;
        IEHtml.addAttribut('ie-load-src', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lUrl = aAttributValue || '';
            if (lUrl) {
                const lJNode = $(aContexteCourant.node);
                aContexteCourant.node.setAttribute('data-src', lUrl);
                lJNode.on('error', () => {
                    if (lJNode.hasClass('img-portrait')) {
                        aContexteCourant.node.removeAttribute('src');
                    }
                    aContexteCourant.node.classList.remove('ie-imgviewer');
                }
                );
                aOutils.surInjectionHtml(aContexteCourant, () => {
                    if (uObserverImgSrc) {
                        uObserverImgSrc.observe(aContexteCourant.node);
                    } else {
                        UtilitaireLoaderImage_1.UtilitaireLoaderImage.loadImage(aContexteCourant.node, lUrl);
                    }
                }
                );
            }
            aOutils.addCommentaireDebug(aContexteCourant.node, `ie-load-src="${lUrl}"`);
            return true;
        }
        );
        try {
            uObserverImgSrc = new IntersectionObserver( (aObservables) => {
                aObservables.forEach( (aObservable) => {
                    if (aObservable.intersectionRatio > 0 || aObservable.isIntersecting) {
                        const lNode = aObservable.target;
                        if (lNode) {
                            const lUrl = lNode.dataset.src;
                            UtilitaireLoaderImage_1.UtilitaireLoaderImage.loadImage(lNode, lUrl);
                            uObserverImgSrc.unobserve(lNode);
                        }
                    }
                }
                );
            }
            );
        } catch (e) {
            uObserverImgSrc = null;
        }
    },
    fn: 'iehtml.load.src.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireMenuContextuelNatif = void 0;
        const UtilitaireMenuContextuelNatif = {
            desactiverSurElement(aJElement) {
                if (IE.estMobile || !aJElement || !aJElement.length) {
                    return;
                }
                return aJElement.off('contextmenu.AvecMenuContextuel1 contextmenu.AvecMenuContextuel2').on('contextmenu.AvecMenuContextuel1', UtilitaireMenuContextuelNatif.accepter).on({
                    'contextmenu.AvecMenuContextuel2': function(event) {
                        event.originalEvent.__marqueurAutoriserMenuContextuel = true;
                        return true;
                    }
                }, '.AvecMenuContextuel');
            },
            accepter(aEvent) {
                if (aEvent.type !== 'contextmenu') {
                    return false;
                }
                const lName = aEvent.target && aEvent.target.tagName ? aEvent.target.tagName.toLowerCase() : '';
                let lType = aEvent.target.type || '';
                lType = lType.toLowerCase();
                const lInputConcerne = (lName === 'input' && lType !== 'checkbox' && lType !== 'radio' && lType !== 'button') || (lName === 'textarea');
                return (lInputConcerne && !$(aEvent.target).hasClass('SansMenuContextuel')) || (aEvent.originalEvent && '__marqueurAutoriserMenuContextuel'in aEvent.originalEvent && aEvent.originalEvent.__marqueurAutoriserMenuContextuel === true) || $(aEvent.target).hasClass('AvecMenuContextuel');
            }
        };
        exports.UtilitaireMenuContextuelNatif = UtilitaireMenuContextuelNatif;
    },
    fn: 'utilitairemenucontextuelnatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ZoneFenetre = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const Invocateur_1 = require("Invocateur");
        const UtilitaireMenuContextuelNatif_1 = require("UtilitaireMenuContextuelNatif");
        const ZoneFenetre = {
            idZoneFenetre: 'zone_fenetre',
            idConteneurApp: '',
            getElementZoneFenetre() {
                const lId = ZoneFenetre.idZoneFenetre;
                let lElement = ObjetHtml_1.GHtml.getElement(lId);
                if (!ObjetHtml_1.GHtml.estElement(lElement)) {
                    lElement = ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                        id: lId,
                        class: "NePasImprimer"
                    }));
                    const lDivFrere = ZoneFenetre.idConteneurApp ? ObjetHtml_1.GHtml.getElement(ZoneFenetre.idConteneurApp) : null;
                    if (lDivFrere && lDivFrere.parentNode) {
                        lDivFrere.parentNode.insertBefore(lElement, lDivFrere);
                    } else {
                        document.body.appendChild(lElement);
                    }
                    Invocateur_1.Invocateur.evenement('creationZoneFenetre', lElement);
                    UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.desactiverSurElement($(lElement));
                }
                return lElement;
            },
            ajouterFenetre(aId, aZIndex) {
                if (ObjetHtml_1.GHtml.elementExiste(aId)) {
                    ZoneFenetre.enleverFenetre(aId);
                    IE.log.addLog('ZoneFenetre.ajouterFenetre : la fenetre ' + aId + ' existe déjà!');
                }
                const lZIndex = aZIndex === 0 ? 0 : (aZIndex || 1100);
                ObjetHtml_1.GHtml.addHtml(ZoneFenetre.getElementZoneFenetre(), IE.jsx.str("div", {
                    class: "zone-fenetre",
                    id: aId,
                    style: `display:none;${lZIndex ? 'z-index:' + lZIndex : ''}`
                }));
            },
            enleverFenetre(aId) {
                const lElement = ObjetHtml_1.GHtml.getElement(aId);
                if (ObjetHtml_1.GHtml.estElement(lElement) && lElement.parentNode && 'id'in lElement.parentNode && lElement.parentNode.id === ZoneFenetre.idZoneFenetre) {
                    $(lElement).remove();
                } else {
                    IE.log.addLog('erreur enleverFenetre de ' + aId);
                }
            }
        };
        exports.ZoneFenetre = ZoneFenetre;
    },
    fn: 'iezonefenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.ImgViewer.css');
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ToucheClavier_1 = require("ToucheClavier");
        const GUID_1 = require("GUID");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const jsx_1 = require("jsx");
        const ObjetSupport_1 = require("ObjetSupport");
        const MethodesObjet_1 = require("MethodesObjet");
        const uSingleton_IdViewer = `id-imgviewer-${GUID_1.GUID.getId()}`;
        let uSingleton_ViewerIsVisible = false;
        const uViewerSurZoom = {
            estZoom: false,
            styleIdViewer: {},
            styleIdArticle: {},
            styleIdViewerImg: {},
            meta: IE.estMobile ? $('meta[name=viewport]').get(0).content : ''
        };
        const uIdBtnZoomIn = 'btnZoomIn' + GUID_1.GUID.getId();
        const uIdBtnZoomOut = 'btnZoomOut' + GUID_1.GUID.getId();
        const uIdBtnNext = 'btnNext' + GUID_1.GUID.getId();
        const uIdBtnPrev = 'btnPrev' + GUID_1.GUID.getId();
        const uIdTitre = 'zoneTitre' + GUID_1.GUID.getId();
        const uIdBtnFermer = 'btnFermer' + GUID_1.GUID.getId();
        let uIdNavGauche;
        let uIdNavDroite;
        let lWidthDefaut;
        let lHeightDefaut;
        let uState;
        let uFocusPrecedent = null;
        IEHtml.addAttribut('ie-imgviewer', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            $(aContexteCourant.node).addClass('ie-imgviewer');
            $(aContexteCourant.node).eventValidation( (aEvent) => {
                if (aNodeName !== 'img') {
                    return true;
                }
                if (!aContexteCourant.node.classList.contains('ie-imgviewer')) {
                    return;
                }
                uFocusPrecedent = document.activeElement;
                if (!IE.estMobile) {
                    _ouvrirViewer(aContexteCourant.node, aEvent, true);
                } else {
                    window.open(_getUrlImg(aContexteCourant.node));
                }
                if (ObjetSupport_1.Support.supportEventOnPopState) {
                    uState = MethodesObjet_1.MethodesObjet.dupliquer(window.history.state);
                    window.history.pushState({
                        popStateViewer: true
                    }, '');
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `ie-imgviewer`);
            return true;
        }
        );
        function _ouvrirViewer(aNode, aEvent, aAvecAnimationOuverture) {
            var _a;
            lWidthDefaut = 0;
            lHeightDefaut = 0;
            const lUrl = _getUrlImg(aNode);
            if (lUrl) {
                if (aEvent) {
                    aEvent.stopPropagation();
                }
                _fermer();
                let lIndicePrec = -1;
                let lIndiceSuiv = -1;
                let lJImgsNav;
                const lNodeDiapos = aNode.closest('.ie-imgviewer-container');
                if (lNodeDiapos) {
                    lJImgsNav = $(lNodeDiapos).find('img.ie-imgviewer');
                    if (lJImgsNav.length > 1) {
                        const lIndexImageCourante = lJImgsNav.index(aNode);
                        lIndicePrec = lIndexImageCourante === 0 ? lJImgsNav.length - 1 : lIndexImageCourante - 1;
                        lIndiceSuiv = lIndexImageCourante >= lJImgsNav.length - 1 ? 0 : lIndexImageCourante + 1;
                        if (!_getUrlImg(lJImgsNav.get(lIndicePrec))) {
                            lIndicePrec = -1;
                        }
                        if (!_getUrlImg(lJImgsNav.get(lIndiceSuiv))) {
                            lIndiceSuiv = -1;
                        }
                    }
                }
                uSingleton_ViewerIsVisible = true;
                const lControleur = {
                    nodeFocus(aNextTab) {
                        $(this.node).on('focus', () => {
                            const lJQBandeau = $('.BandeauViewer >');
                            ObjetHtml_1.GHtml.setFocus(aNextTab ? lJQBandeau.first().get(0) : lJQBandeau.last().get(0));
                        }
                        );
                    },
                    getNode() {
                        $(this.node).on({
                            'destroyed': () => {
                                if (uIdNavGauche) {
                                    Invocateur_1.Invocateur.desabonner([uIdNavGauche]);
                                }
                                if (uIdNavDroite) {
                                    Invocateur_1.Invocateur.desabonner([uIdNavDroite]);
                                }
                            }
                            ,
                            'ie-doubletap': () => {
                                if (IE.estMobile) {
                                    if (!uViewerSurZoom.estZoom) {
                                        _surEntreeDansModeZoom();
                                    } else {
                                        _surSortieDuModeZoom();
                                    }
                                    this.controleur.$refreshSelf();
                                }
                            }
                        });
                        if (!IE.estMobile) {
                            $(this.node).find('img').on({
                                'ie-doubletap': () => {
                                    if (!uViewerSurZoom.estZoom) {
                                        _surEntreeDansModeZoom();
                                    } else {
                                        _surSortieDuModeZoom();
                                    }
                                    this.controleur.$refreshSelf();
                                }
                            });
                        }
                        $(this.node).find('>.VoileDeFondViewer').on('click', (aEvent) => {
                            if (!IE.estMobile || (!uViewerSurZoom.estZoom && !(aEvent.pointerType !== 'touch' && (lIndicePrec >= 0 || lIndiceSuiv >= 0)))) {
                                _fermerTransition();
                            }
                        }
                        );
                        if (lIndicePrec >= 0) {
                            $(this.node).on('swiperight', () => {
                                const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                if (lScroll.scrollLeft === 0) {
                                    _ouvrirViewer(lJImgsNav.get(lIndicePrec));
                                }
                            }
                            );
                            if (uIdNavGauche) {
                                Invocateur_1.Invocateur.desabonner([uIdNavGauche]);
                            }
                            uIdNavGauche = Invocateur_1.Invocateur.abonner(GNavigateur.getEventInvocateur('keyup'), (aEvent) => {
                                if (!uViewerSurZoom.estZoom && [ToucheClavier_1.ToucheClavier.FlecheGauche].includes(aEvent.which)) {
                                    _ouvrirViewer(lJImgsNav.get(lIndicePrec));
                                    ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                                }
                            }
                            );
                        }
                        if (lIndiceSuiv >= 0) {
                            $(this.node).on('swipeleft', () => {
                                const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                const lJImage = $('#' + uSingleton_IdViewer + ' img');
                                const lWidth = lJImage.width();
                                if (lScroll.scrollLeft >= Math.round10(lWidth - GNavigateur.clientL, -1)) {
                                    _ouvrirViewer(lJImgsNav.get(lIndiceSuiv));
                                }
                            }
                            );
                            if (uIdNavDroite) {
                                Invocateur_1.Invocateur.desabonner([uIdNavDroite]);
                            }
                            uIdNavDroite = Invocateur_1.Invocateur.abonner(GNavigateur.getEventInvocateur('keyup'), (aEvent) => {
                                if (!uViewerSurZoom.estZoom && [ToucheClavier_1.ToucheClavier.FlecheDroite].includes(aEvent.which)) {
                                    _ouvrirViewer(lJImgsNav.get(lIndiceSuiv));
                                    ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                                }
                            }
                            );
                        }
                        $(this.node).on('swipedown', () => {
                            const lScroll = $('#' + uSingleton_IdViewer).get(0);
                            if (lScroll.scrollTop === 0) {
                                _fermerTransition();
                            }
                        }
                        );
                    },
                    nodeImg() {
                        $(this.node).on('load', function() {
                            this.classList.remove('loading');
                            const lNatHeight = this.naturalHeight;
                            const lNatWidth = this.naturalWidth;
                            const lPourcentEcran = 0.9;
                            let lRatio = 0;
                            const lClientL = GNavigateur.clientL - (lIndicePrec >= 0 || lIndiceSuiv >= 0 ? 35 * 2 : 0);
                            const lRatioImage = lNatHeight / lNatWidth;
                            const lRatioEcran = GNavigateur.clientH / lClientL;
                            if (lRatioEcran > lRatioImage) {
                                lRatio = lClientL * lPourcentEcran / lNatWidth;
                            } else {
                                lRatio = GNavigateur.clientH * lPourcentEcran / lNatHeight;
                            }
                            lRatio = Math.min(lRatio, 2);
                            lHeightDefaut = lNatHeight * lRatio;
                            lWidthDefaut = lNatWidth * lRatio;
                            $(this).css({
                                height: lHeightDefaut,
                                width: lWidthDefaut
                            });
                            if (IE.estMobile) {
                                _surEntreeDansModeZoom();
                            }
                        });
                    },
                    avecBandeauViewer() {
                        return !IE.estMobile;
                    },
                    btnFermer: {
                        event() {
                            _fermerTransition();
                        },
                        getTitle() {
                            return ObjetTraduction_1.GTraductions.getValeur('Fermer');
                        }
                    },
                    btnNav: {
                        event(aIndiceNode, aEvent) {
                            _ouvrirViewer(lJImgsNav.get(aIndiceNode), aEvent);
                            ObjetHtml_1.GHtml.setFocus(aEvent.target.id);
                        }
                    },
                    btnZoom: {
                        event(aEstZoomIn) {
                            _surActionZoom(aEstZoomIn);
                        },
                        getDisabled(aEstZoomIn) {
                            const lJImage = $('#' + uSingleton_IdViewer + ' img');
                            const lWidth = lJImage.width();
                            const lHeight = lJImage.height();
                            if (!lWidth || !lWidthDefaut) {
                                return !aEstZoomIn;
                            }
                            return aEstZoomIn ? Math.round10(lWidth, -1) >= Math.round10(lWidthDefaut * Math.pow(1.5, 4), -1) || Math.round10(lHeight, -1) >= Math.round10(lHeightDefaut * Math.pow(1.5, 4), -1) : !uViewerSurZoom.estZoom || Math.round10(lWidth, -1) <= Math.round10(lWidthDefaut, -1) || Math.round10(lHeight, -1) <= Math.round10(lHeightDefaut, -1);
                        }
                    },
                    dragImg() {
                        let lScrollLeftDepart = 0;
                        let lScrollTopDepart = 0;
                        return {
                            start() {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lJImage = $('#' + uSingleton_IdViewer + ' img');
                                    lJImage.css({
                                        cursor: 'grabbing'
                                    });
                                    const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                    lScrollLeftDepart = lScroll.scrollLeft;
                                    lScrollTopDepart = lScroll.scrollTop;
                                }
                            },
                            drag(aParamsDrag) {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lScroll = $('#' + uSingleton_IdViewer).get(0);
                                    lScroll.scrollLeft = lScrollLeftDepart - aParamsDrag.offset.x;
                                    lScroll.scrollTop = lScrollTopDepart - aParamsDrag.offset.y;
                                }
                            },
                            stop() {
                                if (!IE.estMobile && uViewerSurZoom.estZoom) {
                                    const lJImage = $('#' + uSingleton_IdViewer + ' img');
                                    lJImage.css({
                                        cursor: 'grab'
                                    });
                                }
                            }
                        };
                    }
                };
                const lLibelleImage = (_a = aNode.getAttribute('data-libelle')) !== null && _a !== void 0 ? _a : '';
                IEHtml.injectHTMLParams({
                    element: IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre(),
                    html: IE.jsx.str("div", {
                        id: uSingleton_IdViewer,
                        class: ['ie-imgviewer-popup', aAvecAnimationOuverture ? '' : 'active'],
                        "ie-node": "getNode",
                        role: "dialog",
                        "aria-modal": "true"
                    }, IE.jsx.str("div", {
                        class: "sr-only",
                        tabindex: "0",
                        "aria-hidden": "true",
                        "ie-node": "nodeFocus(false)"
                    }), IE.jsx.str("div", {
                        class: "VoileDeFondViewer",
                        "aria-hidden": "true"
                    }), IE.jsx.str("div", {
                        class: "BandeauViewer",
                        "ie-if": "avecBandeauViewer"
                    }, IE.jsx.str("ie-btnicon", {
                        id: uIdBtnZoomIn,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnZoom', [true]),
                        class: "icon_zoom_in btn-zoom-viewer zoom-in bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Agrandir')
                    }), IE.jsx.str("ie-btnicon", {
                        id: uIdBtnZoomOut,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnZoom', [false]),
                        class: "icon_zoom_out btn-zoom-viewer zoom-out bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Reduire')
                    }), lIndicePrec >= 0 ? IE.jsx.str("ie-btnicon", {
                        id: uIdBtnPrev,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnNav', [lIndicePrec]),
                        class: "icon_angle_left btn-carr-viewer prec bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Precedent'),
                        tabindex: "0"
                    }) : '', IE.jsx.str("div", {
                        id: uIdTitre,
                        class: "TitreImage",
                        "ie-ellipsis": true,
                        tabindex: "0"
                    }, lLibelleImage), lIndiceSuiv >= 0 ? IE.jsx.str("ie-btnicon", {
                        id: uIdBtnNext,
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnNav', [lIndiceSuiv]),
                        class: "icon_angle_right btn-carr-viewer suiv bt-activable bt-large",
                        title: ObjetTraduction_1.GTraductions.getValeur('Suivant'),
                        tabindex: "0"
                    }) : '', IE.jsx.str("ie-btnicon", {
                        id: uIdBtnFermer,
                        "ie-model": "btnFermer",
                        class: "icon_fermeture_widget btn-fermer bt-activable bt-large"
                    })), IE.jsx.str("div", {
                        class: "conteneur-img"
                    }, IE.jsx.str("img", {
                        src: lUrl,
                        class: ['AvecMenuContextuel', 'loading'],
                        alt: ObjetTraduction_1.GTraductions.getValeur('Visionneuse.altImage'),
                        "aria-labelledby": uIdTitre,
                        "ie-node": "nodeImg",
                        "ie-draggable": !IE.estMobile ? 'dragImg' : false
                    })), IE.jsx.str("div", {
                        class: "sr-only",
                        tabindex: "0",
                        "aria-hidden": "true",
                        "ie-node": "nodeFocus(true)"
                    })),
                    controleur: lControleur
                });
                if (aAvecAnimationOuverture) {
                    const lElement = ObjetHtml_1.GHtml.getElement(uSingleton_IdViewer);
                    lElement.offsetWidth;
                    lElement.classList.add('active');
                }
                if (!IE.estMobile) {
                    ObjetHtml_1.GHtml.setFocus(uIdTitre);
                } else {
                    _surEntreeDansModeZoom();
                }
            }
        }
        function _getUrlImg(aNode) {
            if (aNode && aNode.getAttribute) {
                let lStrUrl = aNode.getAttribute('src') || aNode.getAttribute('data-src');
                if (lStrUrl) {
                    try {
                        let lUrl = new URL(lStrUrl,location);
                        lUrl.searchParams.delete('miniature');
                        return lUrl.toString();
                    } catch (e) {
                        return lStrUrl;
                    }
                }
            }
        }
        function _surEntreeDansModeZoom() {
            let lStyle = $('#' + uSingleton_IdViewer).get(0).style;
            uViewerSurZoom.styleIdViewer = {
                overflow: lStyle.overflow,
                display: lStyle.display
            };
            lStyle = $('#' + uSingleton_IdViewer + ' .conteneur-img').get(0).style;
            uViewerSurZoom.styleIdArticle = {
                'min-height': lStyle.minHeight,
                'min-width': lStyle.minWidth
            };
            lStyle = $('#' + uSingleton_IdViewer + ' img').get(0).style;
            uViewerSurZoom.styleIdViewerImg = {
                width: lStyle.width,
                height: lStyle.height,
                'max-width': lStyle.maxWidth,
                position: lStyle.position,
                margin: lStyle.margin,
                cursor: lStyle.cursor
            };
            const lRatioZoom = IE.estMobile ? 1.25 : 1.5;
            const lWidthStart = lWidthDefaut * lRatioZoom;
            const lHeightStart = lHeightDefaut * lRatioZoom;
            $('#' + uSingleton_IdViewer).css({
                overflow: 'scroll',
                display: 'inline-block'
            });
            $('#' + uSingleton_IdViewer + ' .conteneur-img').css({
                'min-height': '100%',
                'min-width': '100%'
            });
            $('#' + uSingleton_IdViewer + ' img').css({
                width: lWidthStart + 'px',
                height: lHeightStart + 'px',
                'max-width': 'none',
                position: 'relative',
                margin: 'auto',
                cursor: 'grab'
            });
            $('#' + uSingleton_IdViewer).get(0).scrollLeft = (lWidthStart - GNavigateur.clientL) / 2;
            $('#' + uSingleton_IdViewer).get(0).scrollTop = (lHeightStart - GNavigateur.clientH) / 2;
            if (IE.estMobile) {
                $('meta[name=viewport]').get(0).content = 'width=device-width';
            }
            uViewerSurZoom.estZoom = true;
        }
        function _surSortieDuModeZoom() {
            if (IE.estMobile) {
                _fermerTransition();
            } else {
                $('#' + uSingleton_IdViewer).css(uViewerSurZoom.styleIdViewer);
                $('#' + uSingleton_IdViewer + ' .conteneur-img').css(uViewerSurZoom.styleIdArticle);
                $('#' + uSingleton_IdViewer + ' img').css(uViewerSurZoom.styleIdViewerImg);
                $('#' + uSingleton_IdViewer + ' > .VoileDeFondViewer').show();
                uViewerSurZoom.estZoom = false;
            }
        }
        function _fermer() {
            if (uSingleton_ViewerIsVisible) {
                uSingleton_ViewerIsVisible = false;
                uViewerSurZoom.estZoom = false;
                $(`#${uSingleton_IdViewer}`).remove();
            }
            if (IE.estMobile) {
                $('meta[name=viewport]').get(0).content = uViewerSurZoom.meta;
            }
            $(window).off('popstate.imgviewer');
            if (uState) {
                window.history.replaceState(uState, '');
            }
        }
        function _fermerTransition() {
            if (uSingleton_ViewerIsVisible) {
                $(`#${uSingleton_IdViewer}`).removeClass('active').on('transitionend', () => {
                    _fermer();
                    if ((uFocusPrecedent === null || uFocusPrecedent === void 0 ? void 0 : uFocusPrecedent.focus) && $(uFocusPrecedent).length === 1) {
                        uFocusPrecedent.focus();
                        uFocusPrecedent = null;
                    }
                }
                );
            }
        }
        function _surActionZoom(aEstZoomIn) {
            const lJImage = $('#' + uSingleton_IdViewer + ' img');
            const lWidth = lJImage.width();
            const lHeight = lJImage.height();
            const lScroll = $('#' + uSingleton_IdViewer).get(0);
            let lNewWidth = 0;
            let lNewHeight = 0;
            if (aEstZoomIn) {
                if (uViewerSurZoom.estZoom) {
                    lNewWidth = lWidth * 1.5;
                    lNewHeight = lHeight * 1.5;
                    lJImage.width(lNewWidth);
                    lJImage.height(lNewHeight);
                    lScroll.scrollLeft += (lNewWidth - lWidth) / 2;
                    lScroll.scrollTop += (lNewHeight - lHeight) / 2;
                } else {
                    _surEntreeDansModeZoom();
                }
            } else {
                lNewWidth = lWidth / 1.5;
                lNewHeight = lHeight / 1.5;
                if (Math.round10(lNewWidth, -1) === Math.round10(lWidthDefaut, -1) && Math.round10(lNewHeight, -1) === Math.round10(lHeightDefaut, -1)) {
                    _surSortieDuModeZoom();
                } else {
                    lJImage.width(lNewWidth);
                    lJImage.height(lNewHeight);
                    lScroll.scrollLeft += (lNewWidth - lWidth) / 2;
                    lScroll.scrollTop += (lNewHeight - lHeight) / 2;
                }
            }
        }
        $(document).ready( () => {
            $(document).on('keydown.imgviewer', (aEvent) => {
                if (uSingleton_ViewerIsVisible) {
                    if ([ToucheClavier_1.ToucheClavier.Espace, ToucheClavier_1.ToucheClavier.RetourChariot].includes(aEvent.which)) {
                        if (![uIdBtnZoomIn, uIdBtnZoomOut, uIdBtnNext, uIdBtnPrev].includes(aEvent.target.id)) {
                            _fermerTransition();
                        }
                    }
                    if ([ToucheClavier_1.ToucheClavier.Echap].includes(aEvent.which)) {
                        _fermerTransition();
                    }
                }
            }
            );
            $(window).on('scroll.imgviewer resize.imgviewer', () => {
                if (!IE.estMobile || !uViewerSurZoom.estZoom) {
                    _fermerTransition();
                }
            }
            );
        }
        );
        $(window).on('popstate.imgviewer', (event) => {
            event.preventDefault();
            _fermerTransition();
        }
        );
        Invocateur_1.Invocateur.abonner('surAffichageFenetre', () => {
            _fermerTransition();
        }
        );
        Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, () => {
            _fermerTransition();
        }
        );
    },
    fn: 'iehtml.imgviewer.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        IEHtml.addAttribut('ie-autoresize', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            if (aNodeName === 'ie-textareamax') {
                return true;
            }
            if (aNodeName !== 'textarea') {
                return true;
            }
            let lEstTextAreaMaxWrapper = false;
            let lJNode = $(aContexteCourant.node);
            let lInitBesoinObserveur = true;
            const lCalcul = function() {
                const lEstVisible = aContexteCourant.node.scrollHeight > 0;
                if (!lEstVisible) {
                    if (lInitBesoinObserveur) {
                        lInitBesoinObserveur = false;
                        let lObserver;
                        try {
                            lObserver = new IntersectionObserver( (aObservables) => {
                                if (aObservables[0] && (aObservables[0].intersectionRatio > 0 || aObservables[0].isIntersecting)) {
                                    lObserver.disconnect();
                                    lCalcul();
                                }
                            }
                            );
                            lObserver.observe(aContexteCourant.node);
                        } catch (e) {
                            lObserver = null;
                        }
                    }
                    return;
                }
                lInitBesoinObserveur = false;
                aContexteCourant.node.style.height = '5px';
                const lComputedStyle = global.getComputedStyle(aContexteCourant.node);
                const lTaille = aContexteCourant.node.scrollHeight + parseFloat(lComputedStyle.getPropertyValue('border-top-width')) + parseFloat(lComputedStyle.getPropertyValue('border-bottom-width'));
                aContexteCourant.node.style.height = lTaille + 'px';
                if (lEstTextAreaMaxWrapper) {
                    const lNodeWrapper = aContexteCourant.node.closest('.textareamax-wrapper');
                    if (!lNodeWrapper) {
                        return;
                    }
                    const lHeightParent = $(lNodeWrapper).height();
                    if (Math.ceil(lTaille) > lHeightParent) {
                        aContexteCourant.node.style.height = lHeightParent + 'px';
                    } else if (Math.ceil(lTaille) < lHeightParent) {
                        aContexteCourant.node.style.height = '100%';
                    }
                }
            };
            let lVal = lJNode.val();
            let lValPlaceHolder = lJNode.attr('placeholder');
            lJNode.on('input', () => {
                const lNewVal = lJNode.val();
                if (lVal !== lNewVal) {
                    lVal = lNewVal;
                    lCalcul();
                }
            }
            );
            aOutils.abonnerRefresh( () => {
                const lNewVal = lJNode.val();
                const lNewValPlaceHolder = lJNode.attr('placeholder');
                if (lVal !== lNewVal || lValPlaceHolder !== lNewValPlaceHolder) {
                    lVal = lNewVal;
                    lValPlaceHolder = lNewValPlaceHolder;
                    lCalcul();
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.surInjectionHtml(aContexteCourant, () => {
                lEstTextAreaMaxWrapper = lJNode.hasClass('textareamax') && !!aContexteCourant.node.closest('.textareamax-wrapper');
                lCalcul();
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-autoresize');
        }
        );
    },
    fn: 'iehtml.autoresize.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        const IEHtml = require('IEHtml.js');
        const {ToucheClavier} = require('ToucheClavier.js');
        IEHtml.addClass('collapsible', (aContexteCourant) => {
            _refresh(aContexteCourant);
            const lObserver = new MutationObserver( (aMutations) => {
                if (aMutations[0] && aMutations[0].type === 'childList') {
                    _refresh(aContexteCourant);
                }
            }
            );
            lObserver.observe(aContexteCourant.node, {
                childList: true
            });
            return true;
        }
        );
        function _refresh(aContexteCourant) {
            const lJNode = $(aContexteCourant.node);
            const lJHeaders = lJNode.children('li').children('.collapsible-header:not([data-iecollapsibleinit])');
            if (lJHeaders.length === 0) {
                return;
            }
            lJHeaders.attr({
                'tabindex': 0,
                'data-iecollapsibleinit': true
            });
            const lEstAccordeon = !aContexteCourant.node.classList.contains('collapsible-not-accordeon');
            const lJActiveBodies = lJNode.children('li.active').children('.collapsible-body');
            if (lEstAccordeon) {
                lJActiveBodies.first().css('display', 'block');
            } else {
                lJActiveBodies.css('display', 'block');
            }
            lJHeaders.each( (aIndex, aElement) => {
                $(aElement).attr('aria-expanded', $(aElement).parent().hasClass('active') ? 'true' : 'false');
            }
            );
            const lAction = (aEvent) => {
                const $header = $(aEvent.target).closest('.collapsible-header');
                if (aEvent.target && $header.length) {
                    const $collapsible = $header.closest('.collapsible');
                    if ($collapsible[0] === aContexteCourant.node) {
                        const $collapsibleLi = $header.closest('li');
                        const $collapsibleLis = $collapsible.children('li');
                        const isActive = $collapsibleLi[0].classList.contains('active');
                        const index = $collapsibleLis.index($collapsibleLi);
                        if (isActive) {
                            close(index);
                        } else {
                            open(index);
                        }
                    }
                }
            }
            ;
            lJHeaders.off('click.collapsible keydown.collapsible').on({
                'click.collapsible'(aEvent) {
                    lAction(aEvent);
                },
                'keydown.collapsible'(aEvent) {
                    if ([ToucheClavier.Espace, ToucheClavier.RetourChariot, ToucheClavier.Echap].includes(aEvent.which)) {
                        lAction(aEvent);
                    }
                }
            });
            function open(index) {
                const $collapsibleLi = lJNode.children('li').eq(index);
                if ($collapsibleLi.length && !$collapsibleLi[0].classList.contains('active')) {
                    if (lEstAccordeon) {
                        const $collapsibleLis = lJNode.children('li');
                        const $activeLis = lJNode.children('li.active');
                        $activeLis.each( (aIndex, aEl) => {
                            const index = $collapsibleLis.index($(aEl));
                            close(index);
                        }
                        );
                    }
                    $collapsibleLi[0].classList.add('active');
                    const lJBody = $collapsibleLi.children('.collapsible-body');
                    $collapsibleLi.children('.collapsible-header').attr('aria-expanded', 'true');
                    lJBody.css({
                        display: 'block',
                        height: 0,
                        overflow: 'hidden'
                    });
                    const lHeight = lJBody[0].scrollHeight;
                    const lPTop = lJBody.css('padding-top');
                    const lPBottom = lJBody.css('padding-bottom');
                    lJBody.css({
                        paddingTop: 0,
                        paddingBottom: 0
                    });
                    lJBody.css({
                        height: lHeight + 'px',
                        paddingTop: lPTop,
                        paddingBottom: lPBottom
                    }).off('transitionend.collapsible').one('transitionend.collapsible', () => {
                        lJBody.css({
                            height: '',
                            paddingTop: '',
                            paddingBottom: '',
                            overflow: ''
                        });
                    }
                    );
                }
            }
            function close(index) {
                const $collapsibleLi = lJNode.children('li').eq(index);
                if ($collapsibleLi.length && $collapsibleLi[0].classList.contains('active')) {
                    $collapsibleLi[0].classList.remove('active');
                    const lJBody = $collapsibleLi.eq(0).children('.collapsible-body');
                    $collapsibleLi.children('.collapsible-header').attr('aria-expanded', 'false');
                    const lHeight = lJBody[0].scrollHeight;
                    const lPTop = lJBody.css('padding-top');
                    const lPBottom = lJBody.css('padding-bottom');
                    lJBody.css({
                        display: 'block',
                        height: lHeight + 'px',
                        paddingTop: lPTop,
                        paddingBottom: lPBottom,
                        overflow: 'hidden'
                    });
                    lJBody.off('transitionend.collapsible');
                    lJBody.get(0).offsetWidth;
                    lJBody.css({
                        height: '0',
                        paddingTop: 0,
                        paddingBottom: 0
                    }).one('transitionend.collapsible', () => {
                        lJBody.css({
                            display: '',
                            overflow: '',
                            height: '',
                            paddingTop: '',
                            paddingBottom: ''
                        });
                    }
                    );
                }
            }
        }
    },
    fn: 'iehtml.collapsible.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const c_id_attribut_nodeVisibility = 'ie-visibility-observer';
        let uObserver_ie_node_visibility = null;
        try {
            uObserver_ie_node_visibility = new IntersectionObserver( (aObservables) => {
                for (const lObservable of aObservables) {
                    if (lObservable && lObservable.target) {
                        const lCallbackChange = $(lObservable.target).data(c_id_attribut_nodeVisibility);
                        if (lCallbackChange) {
                            const lVisible = lObservable.intersectionRatio > 0 || lObservable.isIntersecting;
                            lCallbackChange(lVisible);
                        }
                    }
                }
            }
            );
        } catch (e) {
            uObserver_ie_node_visibility = null;
        }
        IEHtml.addAttribut(c_id_attribut_nodeVisibility, (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                const lCallback = (aVisible) => {
                    if (lInfos.callback([aVisible, ...aParams]) === false) {
                        $(aContexteCourant.node).data(c_id_attribut_nodeVisibility, null);
                        uObserver_ie_node_visibility.unobserve(aContexteCourant.node);
                    }
                }
                ;
                if (uObserver_ie_node_visibility) {
                    $(aContexteCourant.node).data(c_id_attribut_nodeVisibility, lCallback);
                    uObserver_ie_node_visibility.observe(aContexteCourant.node);
                    $(aContexteCourant.node).on(`destroyed.${c_id_attribut_nodeVisibility}`, () => {
                        uObserver_ie_node_visibility.unobserve(aContexteCourant.node);
                    }
                    );
                } else {
                    lCallback(true);
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `${c_id_attribut_nodeVisibility}="${lValue}"`);
            return true;
        }
        );
    },
    fn: 'iehtml.visibilityobserver.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const c_id_attribut_resizeObserver = 'ie-resize-observer';
        IEHtml.addAttribut(c_id_attribut_resizeObserver, (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                try {
                    let lResizeObserver = new ResizeObserver( (aObservers) => {
                        const lObserver = aObservers[0];
                        if (lObserver && lObserver.contentRect) {
                            let lResult = false;
                            try {
                                lResult = lInfos.callback([{
                                    node: aContexteCourant.node,
                                    observer: lObserver,
                                    contentRect: lObserver.contentRect
                                }, ...aParams]);
                            } catch (e) {
                                lResult = false;
                            }
                            if (lResult === false && lResizeObserver) {
                                lResizeObserver.disconnect();
                                lResizeObserver = null;
                            }
                        }
                    }
                    );
                    lResizeObserver.observe(aContexteCourant.node);
                    $(aContexteCourant.node).on(`destroyed.${c_id_attribut_resizeObserver}`, () => {
                        if (lResizeObserver) {
                            lResizeObserver.disconnect();
                            lResizeObserver = null;
                        }
                    }
                    );
                } catch (e) {}
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, `${c_id_attribut_resizeObserver}="${lValue}"`);
            return true;
        }
        );
    },
    fn: 'iehtml.resizeobserver.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.Ripple.css');
        const IEHtml = require("IEHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetHtml_1 = require("ObjetHtml");
        const c_DureeActivate = 500;
        const c_DureeDeactivatee = 150;
        IEHtml.addClass('ie-ripple', (aContexteCourant, aNodeName, aOutils) => {
            if (!IE.estMobile) {
                return;
            }
            let lTimeoutActivate = null;
            let lTimeoutDeactivate = null;
            let lActivateEnd = {};
            const lEndDeactive = () => {
                aContexteCourant.node.classList.remove('ie-ripple-deactivation');
            }
            ;
            const lHide = () => {
                if (lActivateEnd && lActivateEnd.event && lActivateEnd.timeout) {
                    lActivateEnd = {};
                    aContexteCourant.node.classList.remove('ie-ripple-activation');
                    aContexteCourant.node.classList.add('ie-ripple-deactivation');
                    lTimeoutDeactivate = setTimeout(lEndDeactive, c_DureeDeactivatee);
                }
            }
            ;
            $(aContexteCourant.node).on({
                'pointerdown'(aEvent) {
                    if ($(this).is(':disabled') || $(this).hasClass('disabled') || $(this).hasClass('ie-ripple-disabled') || $(this).attr('aria-disabled') === 'true') {
                        return;
                    }
                    if (aEvent.target && aEvent.target !== aContexteCourant.node && aEvent.target.classList) {
                        if (aEvent.target.classList.contains('ie-ripple')) {
                            return;
                        }
                        const lNode = ObjetHtml_1.GHtml.getClosestFocusable(aEvent.target);
                        if (lNode && !lNode.classList.contains('ie-ripple') && !!lNode.closest('.ie-ripple')) {
                            return;
                        }
                    }
                    if (aContexteCourant.node.classList.contains('ie-ripple-activation')) {
                        aContexteCourant.node.classList.remove('ie-ripple-activation');
                        aContexteCourant.node.scrollTop;
                    }
                    clearTimeout(lTimeoutActivate);
                    clearTimeout(lTimeoutDeactivate);
                    lActivateEnd = {};
                    lEndDeactive();
                    aContexteCourant.node.classList.add('ie-ripple-activation');
                    const lRect = ObjetPosition_1.GPosition.getClientRect(aContexteCourant.node);
                    let lPosEventRelatif = {
                        x: aEvent.clientX - lRect.left,
                        y: aEvent.clientY - lRect.top
                    };
                    const lSizeMax = Math.max(lRect.width, lRect.height);
                    const lSizeAfter = lSizeMax / 3;
                    const lScale = lSizeMax / lSizeAfter * 2;
                    const lPosX = lPosEventRelatif.x - lSizeAfter / 2;
                    const lPosY = lPosEventRelatif.y - lSizeAfter / 2;
                    $(aContexteCourant.node).css({
                        '--ie-ripple-size': `${lSizeAfter}px`,
                        '--ie-ripple-scale': lScale,
                        '--ie-ripple-translate': `${lPosX}px, ${lPosY}px`
                    });
                    lTimeoutActivate = setTimeout( () => {
                        lActivateEnd.timeout = true;
                        lHide();
                    }
                    , c_DureeActivate);
                },
                'touchend touchcancel mouseup mouseleave dragend'() {
                    lActivateEnd.event = true;
                    lHide();
                },
                'destroyed'() {
                    clearTimeout(lTimeoutActivate);
                    clearTimeout(lTimeoutDeactivate);
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ripple');
            return true;
        }
        );
    },
    fn: 'iehtml.ripple.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const ObjetPosition_1 = require("ObjetPosition");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const tag_1 = require("tag");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const MethodesObjet_1 = require("MethodesObjet");
        require('IEHtml.DraggableDroppable.css');
        const u_invocateur_dragdrop = new Invocateur_1.ObjetInvocateur();
        IEHtml.addAttribut('ie-draggable', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
            if (!aAttributValue || !aContexteCourant.controleur || !lInfos.estFonction) {
                return true;
            }
            const lParams = Object.assign({
                start: null,
                drag: null,
                stop: null,
                distanceStart: 0,
                containment: document.body,
                avecDrop: false
            }, lInfos.callback());
            _drag(aContexteCourant, lParams);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-draggable="' + aAttributValue + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-draggable-fantome', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
            if (!aAttributValue || !aContexteCourant.controleur || !lInfos.estFonction) {
                return true;
            }
            const lParams = {
                start: null,
                drag: null,
                stop: null,
                containment: document.body,
                getIdZone: null,
                distanceStart: 5,
                avecDrop: true
            };
            const lParamsInfos = lInfos.callback();
            Object.assign(lParams, lParamsInfos, {
                start(aParamsDrag) {
                    const lData = {
                        libelle: ''
                    };
                    aParamsDrag.data = lData;
                    let lResult = lParamsInfos.start(aParamsDrag);
                    if (lResult === false) {
                        return lResult;
                    }
                    const lJConteneur = $(IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre());
                    lJConteneur.find('>.FantomeDraggable').remove();
                    lData.controleurDraggable = {
                        getHtmlFantome: function() {
                            const lHtml = lData.libelle || '';
                            let lSupp = '';
                            if (lData.getHtmlDetailsDraggable) {
                                lSupp = lData.getHtmlDetailsDraggable(lData);
                            } else if (lData.horsZoneSuppression) {
                                lSupp = '<i class="icon_remove" style="font-size:15px; color:red;"></i><label>' + ObjetTraduction_1.GTraductions.getValeur('Supprimer') + '</label>';
                            }
                            return `<div class="draggable-libelle">${lHtml}</div>` + (lSupp ? '<div class="draggable_details">' + lSupp + '</div>' : '');
                        }
                    };
                    IEHtml.injectHTMLParams({
                        element: lJConteneur.get(0),
                        html: (0,
                        tag_1.tag)('div', {
                            class: 'FantomeDraggable'
                        }, (0,
                        tag_1.tag)('div', {
                            class: 'draggable',
                            'ie-html': 'getHtmlFantome'
                        }), IE.jsx.str("div", {
                            class: "overlay"
                        })),
                        controleur: lData.controleurDraggable
                    });
                    aParamsDrag.data.jDraggable = lJConteneur.find('>.FantomeDraggable>.draggable');
                    return lResult;
                },
                drag: function(aParamsDrag, aEvent) {
                    const lIdZone = lParamsInfos.getIdZone ? lParamsInfos.getIdZone() : null;
                    aParamsDrag.horsZone = lIdZone ? !ObjetPosition_1.GPosition.positionDansZone(aParamsDrag.pos, lIdZone) : false;
                    if (lParamsInfos.drag) {
                        lParamsInfos.drag(aParamsDrag, aEvent);
                        aParamsDrag.data.controleurDraggable.$refreshSelf();
                    }
                    let lTop = Math.max(aParamsDrag.rectContrainte.top, aParamsDrag.pos.y - 10);
                    let lLeft = Math.max(aParamsDrag.rectContrainte.left, aParamsDrag.pos.x - 15);
                    let lRectDraggable = null;
                    aParamsDrag.data.jDraggable.find('.draggable-libelle, .draggable_details').each(function() {
                        const lRectChild = ObjetPosition_1.GPosition.getClientRect(this);
                        if (!lRectDraggable) {
                            lRectDraggable = lRectChild;
                        } else {
                            lRectDraggable.left = Math.min(lRectDraggable.left, lRectChild.left);
                            lRectDraggable.top = Math.min(lRectDraggable.top, lRectChild.top);
                            lRectDraggable.right = Math.max(lRectDraggable.right, lRectChild.right);
                            lRectDraggable.bottom = Math.max(lRectDraggable.bottom, lRectChild.bottom);
                        }
                    });
                    lLeft = Math.min(lLeft, aParamsDrag.rectContrainte.left + aParamsDrag.rectContrainte.width - (lRectDraggable.right - lRectDraggable.left));
                    lTop = Math.min(lTop, aParamsDrag.rectContrainte.top + aParamsDrag.rectContrainte.height - (lRectDraggable.bottom - lRectDraggable.top));
                    aParamsDrag.data.jDraggable.css({
                        left: lLeft,
                        top: lTop
                    });
                    const lElement = aParamsDrag.data.jDraggable.get(0);
                    aParamsDrag.scrollIntoViewSurNode(lElement);
                },
                stop: function(aParamsDrag, aEvent) {
                    try {
                        if (lParamsInfos.stop) {
                            const lIdZone = lParamsInfos.getIdZone ? lParamsInfos.getIdZone() : null;
                            aParamsDrag.horsZone = lIdZone ? !ObjetPosition_1.GPosition.positionDansZone(aParamsDrag.pos, lIdZone) : false;
                            lParamsInfos.stop(aParamsDrag, aEvent);
                            aParamsDrag.data.controleurDraggable.$refreshSelf();
                        }
                    } finally {
                        $(IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre()).find(`>.FantomeDraggable`).remove();
                    }
                }
            });
            _drag(aContexteCourant, lParams);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-draggable-fantome="' + aAttributValue + '"');
            return true;
        }
        );
        function _drag(aContexteCourant, aParams) {
            let lDrag = null;
            let lDetach;
            const lOnMove = (aEvent) => {
                const lEventTouch = aEvent;
                if (lDrag && lDrag.touch && lEventTouch && lEventTouch.originalEvent && lEventTouch.originalEvent.changedTouches && lEventTouch.originalEvent.changedTouches.length > 0) {
                    if (lDrag.identifierTouchMove < 0) {
                        lDrag.identifierTouchMove = lEventTouch.originalEvent.changedTouches[0].identifier;
                    } else if (lDrag.identifierTouchMove !== lEventTouch.originalEvent.changedTouches[0].identifier) {
                        return;
                    }
                }
                if (!lDrag || (!aEvent.which && !lDrag.touch)) {
                    lOnStop(aEvent);
                    return;
                }
                let lContainment;
                if (aParams.containment && MethodesObjet_1.MethodesObjet.isFunction(aParams.containment)) {
                    lContainment = aParams.containment(lDrag.node);
                } else {
                    lContainment = aParams.containment;
                }
                lDrag.rectContrainte = lContainment ? ObjetPosition_1.GPosition.getClientRect(lContainment) : null;
                lDrag.pos = ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent);
                if (lDrag.rectContrainte) {
                    lDrag.pos.x = Math.max(lDrag.rectContrainte.left, Math.min(lDrag.rectContrainte.left + lDrag.rectContrainte.width, lDrag.pos.x));
                    lDrag.pos.y = Math.max(lDrag.rectContrainte.top, Math.min(lDrag.rectContrainte.top + lDrag.rectContrainte.height, lDrag.pos.y));
                }
                lDrag.offset.x = lDrag.pos.x - lDrag.posStart.x;
                lDrag.offset.y = lDrag.pos.y - lDrag.posStart.y;
                let lResult = true;
                try {
                    if (!lDrag._started) {
                        if (aParams.distanceStart > 0 && aParams.distanceStart > Math.max(Math.abs(lDrag.offset.x), Math.abs(lDrag.offset.y))) {
                            return;
                        }
                        if (aParams.start) {
                            if (aParams.start(lDrag) === false) {
                                lDetach();
                                lDrag = null;
                                return;
                            }
                        }
                        lDrag._started = true;
                        if (aParams.avecDrop) {
                            u_invocateur_dragdrop.evenement('start-drag', lDrag);
                        }
                    }
                    if (aParams.drag) {
                        aParams.drag(lDrag, aEvent);
                    }
                    if (aParams.avecDrop) {
                        u_invocateur_dragdrop.evenement('move-drag', lDrag);
                    }
                    lResult = false;
                } catch (e) {
                    lDetach();
                    lDrag = null;
                }
                return lDrag && lDrag.touch ? true : lResult;
            }
            ;
            const lOnStop = (aEvent) => {
                if (lDrag && lDrag.touch && aEvent) {
                    const lEvent = aEvent;
                    if (lEvent.originalEvent && lEvent.originalEvent.changedTouches && lEvent.originalEvent.changedTouches.length > 0 && lDrag.identifierTouchMove >= 0 && lDrag.identifierTouchMove !== lEvent.originalEvent.changedTouches[0].identifier) {
                        return;
                    }
                }
                const lDragTemp = lDrag;
                lDrag = null;
                lDetach();
                if (lDragTemp && lDragTemp._started) {
                    if (aParams.avecDrop) {
                        u_invocateur_dragdrop.evenement('stop-drag', lDragTemp);
                    }
                    if (aParams.stop) {
                        try {
                            aParams.stop(lDragTemp, aEvent);
                        } catch (e) {}
                    }
                }
            }
            ;
            lDetach = () => {
                $(document).off('touchmove.iedrag mousemove.iedrag', lOnMove);
                if (lDrag) {
                    $(document).off('touchend.iedrag touchcancel.iedrag mouseup.iedrag', lOnStop);
                }
            }
            ;
            $(aContexteCourant.node).on({
                'pointerdown'(aEvent) {
                    const lEstTouch = aEvent.pointerType === 'touch';
                    if (lDrag) {
                        if (lDrag.pointerId !== aEvent.pointerId) {
                            return;
                        }
                        lOnStop(aEvent);
                    }
                    lDrag = {
                        node: this,
                        pointerId: aEvent.pointerId,
                        identifierTouchMove: -1,
                        rect: ObjetPosition_1.GPosition.getClientRect(this),
                        posStart: ObjetPosition_1.GPosition.getPositionEventJQuery(aEvent),
                        touch: lEstTouch,
                        offset: {
                            x: 0,
                            y: 0
                        },
                        rectContrainte: null,
                        scrollIntoViewSurNode(aNode) {
                            if (aNode && aNode.scrollIntoView) {
                                aNode.scrollIntoView({
                                    block: 'nearest',
                                    inline: 'nearest'
                                });
                            }
                        }
                    };
                    lDetach();
                    $(document).on({
                        [lEstTouch ? 'touchmove.iedrag' : 'mousemove.iedrag']: lOnMove,
                        [lEstTouch ? 'touchend.iedrag touchcancel.iedrag' : 'mouseup.iedrag']: lOnStop
                    });
                },
                dragstart() {
                    return false;
                },
                destroyed() {
                    lOnStop();
                }
            });
            if (!aParams.autoriserEventMove) {
                $(aContexteCourant.node).addClass('ie-draggable-handle');
            }
        }
        IEHtml.addAttribut('ie-droppable', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lInfos = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
            if (!aAttributValue || !aContexteCourant.controleur || !lInfos.estFonction) {
                return true;
            }
            const lParams = Object.assign({
                accept: null,
                activate: null,
                deactivate: null,
                drop: null,
                over: null,
                out: null
            }, lInfos.callback());
            let lFuncDetach = null;
            let lObjetDrop = null;
            const lFuncMove = function() {
                if (lObjetDrop && lObjetDrop.drag) {
                    const lEstDansZone = !!ObjetPosition_1.GPosition.positionDansZone(lObjetDrop.drag.pos, aContexteCourant.node);
                    if (lObjetDrop.hoverDrop !== lEstDansZone) {
                        lObjetDrop.hoverDrop = lEstDansZone;
                        if (lObjetDrop.hoverDrop) {
                            $(aContexteCourant.node).addClass('ie-droppable-hover');
                            if (lParams.over) {
                                lParams.over(lObjetDrop);
                            }
                        } else {
                            $(aContexteCourant.node).removeClass('ie-droppable-hover');
                            if (lParams.out) {
                                lParams.out(lObjetDrop);
                            }
                        }
                    }
                }
            };
            const lFuncEnd = () => {
                const lDropTemp = lObjetDrop;
                lObjetDrop = null;
                if (lDropTemp) {
                    lFuncDetach();
                    $(aContexteCourant.node).removeClass('ie-droppable-active ie-droppable-hover');
                    if (lDropTemp.hoverDrop) {
                        lDropTemp.drag.isDropped = true;
                        if (lParams.drop) {
                            lParams.drop(lDropTemp);
                        }
                    }
                    if (lParams.deactivate) {
                        lParams.deactivate(lDropTemp);
                    }
                }
            }
            ;
            lFuncDetach = () => {
                u_invocateur_dragdrop.desabonner(`stop-drag`, lFuncEnd);
                u_invocateur_dragdrop.desabonner(`move-drag`, lFuncMove);
            }
            ;
            const lFuncStart = (aParamsDrag) => {
                lObjetDrop = {
                    drag: aParamsDrag,
                    drop: {
                        node: aContexteCourant.node
                    },
                    hoverDrop: false
                };
                if (lParams.accept && !lParams.accept(lObjetDrop)) {
                    lObjetDrop = null;
                    return;
                }
                lFuncDetach();
                u_invocateur_dragdrop.abonner(`stop-drag`, lFuncEnd);
                u_invocateur_dragdrop.abonner(`move-drag`, lFuncMove);
                $(aContexteCourant.node).addClass('ie-droppable-active');
                if (lParams.activate) {
                    lParams.activate(lObjetDrop);
                }
                lFuncMove();
            }
            ;
            u_invocateur_dragdrop.abonner(`start-drag`, lFuncStart);
            $(aContexteCourant.node).on('destroyed', () => {
                lObjetDrop = null;
                u_invocateur_dragdrop.desabonner(`start-drag`, lFuncStart);
                lFuncDetach();
            }
            ).addClass('ie-droppable');
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-droppable="' + aAttributValue + '"');
            return true;
        }
        );
    },
    fn: 'iehtml.draggabledroppable.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAttribut = exports.EGenreRole = exports.EGenreObjet = exports.GObjetWAI = exports.ObjetWAI = void 0;
        const GUID_1 = require("GUID");
        const ObjetTraduction_1 = require("ObjetTraduction");
        var EGenreObjet;
        (function(EGenreObjet) {
            EGenreObjet[EGenreObjet["Aide"] = 1] = "Aide";
            EGenreObjet[EGenreObjet["Tableau"] = 2] = "Tableau";
            EGenreObjet[EGenreObjet["AvecValidation"] = 3] = "AvecValidation";
            EGenreObjet[EGenreObjet["BarreOnglets"] = 4] = "BarreOnglets";
            EGenreObjet[EGenreObjet["NavigationHorizontal"] = 5] = "NavigationHorizontal";
            EGenreObjet[EGenreObjet["NavigationVertical"] = 6] = "NavigationVertical";
            EGenreObjet[EGenreObjet["NavigationHorizontalAvecValidation"] = 7] = "NavigationHorizontalAvecValidation";
            EGenreObjet[EGenreObjet["NavigationVerticalAvecValidation"] = 8] = "NavigationVerticalAvecValidation";
            EGenreObjet[EGenreObjet["CalendrierNavigation"] = 9] = "CalendrierNavigation";
            EGenreObjet[EGenreObjet["CalendrierPrecedent"] = 10] = "CalendrierPrecedent";
            EGenreObjet[EGenreObjet["CalendrierSuivant"] = 11] = "CalendrierSuivant";
            EGenreObjet[EGenreObjet["DetailEvenement"] = 12] = "DetailEvenement";
            EGenreObjet[EGenreObjet["TitreDetailEvenement"] = 13] = "TitreDetailEvenement";
            EGenreObjet[EGenreObjet["AvecMenuContextuel"] = 16] = "AvecMenuContextuel";
            EGenreObjet[EGenreObjet["ItemDesactiver"] = 17] = "ItemDesactiver";
            EGenreObjet[EGenreObjet["AvecEdition"] = 18] = "AvecEdition";
            EGenreObjet[EGenreObjet["Tabulation"] = 19] = "Tabulation";
            EGenreObjet[EGenreObjet["Supprimer"] = 20] = "Supprimer";
            EGenreObjet[EGenreObjet["Fenetre"] = 21] = "Fenetre";
            EGenreObjet[EGenreObjet["NouvelElement"] = 22] = "NouvelElement";
            EGenreObjet[EGenreObjet["BarreOngletsPrincipal"] = 23] = "BarreOngletsPrincipal";
            EGenreObjet[EGenreObjet["SousOnglets"] = 24] = "SousOnglets";
            EGenreObjet[EGenreObjet["ValidezEvenement"] = 25] = "ValidezEvenement";
            EGenreObjet[EGenreObjet["RetourDebutFenetre"] = 26] = "RetourDebutFenetre";
            EGenreObjet[EGenreObjet["FenetreChoix"] = 27] = "FenetreChoix";
        }
        )(EGenreObjet || (exports.EGenreObjet = EGenreObjet = {}));
        var EGenreRole;
        (function(EGenreRole) {
            EGenreRole[EGenreRole["Application"] = 1] = "Application";
            EGenreRole[EGenreRole["Window"] = 2] = "Window";
            EGenreRole[EGenreRole["Textbox"] = 3] = "Textbox";
            EGenreRole[EGenreRole["Link"] = 5] = "Link";
            EGenreRole[EGenreRole["Combobox"] = 6] = "Combobox";
            EGenreRole[EGenreRole["Option"] = 7] = "Option";
            EGenreRole[EGenreRole["Checkbox"] = 8] = "Checkbox";
            EGenreRole[EGenreRole["Radio"] = 10] = "Radio";
            EGenreRole[EGenreRole["Radiogroup"] = 11] = "Radiogroup";
            EGenreRole[EGenreRole["Button"] = 12] = "Button";
            EGenreRole[EGenreRole["Progressbar"] = 13] = "Progressbar";
            EGenreRole[EGenreRole["Tree"] = 17] = "Tree";
            EGenreRole[EGenreRole["Treeitem"] = 19] = "Treeitem";
            EGenreRole[EGenreRole["Presentation"] = 20] = "Presentation";
            EGenreRole[EGenreRole["Group"] = 21] = "Group";
            EGenreRole[EGenreRole["Grid"] = 22] = "Grid";
            EGenreRole[EGenreRole["Tab"] = 24] = "Tab";
            EGenreRole[EGenreRole["Tabpanel"] = 25] = "Tabpanel";
            EGenreRole[EGenreRole["Tablist"] = 26] = "Tablist";
            EGenreRole[EGenreRole["Rowheader"] = 30] = "Rowheader";
            EGenreRole[EGenreRole["Columnheader"] = 31] = "Columnheader";
            EGenreRole[EGenreRole["List"] = 32] = "List";
            EGenreRole[EGenreRole["Listitem"] = 33] = "Listitem";
            EGenreRole[EGenreRole["Menu"] = 34] = "Menu";
            EGenreRole[EGenreRole["Menubar"] = 35] = "Menubar";
            EGenreRole[EGenreRole["Menuitem"] = 36] = "Menuitem";
            EGenreRole[EGenreRole["Alert"] = 37] = "Alert";
            EGenreRole[EGenreRole["Alertdialog"] = 38] = "Alertdialog";
            EGenreRole[EGenreRole["Dialog"] = 39] = "Dialog";
            EGenreRole[EGenreRole["Gridcell"] = 40] = "Gridcell";
            EGenreRole[EGenreRole["Log"] = 41] = "Log";
            EGenreRole[EGenreRole["Marquee"] = 42] = "Marquee";
            EGenreRole[EGenreRole["Menuitemcheckbox"] = 43] = "Menuitemcheckbox";
            EGenreRole[EGenreRole["Menuitemradio"] = 44] = "Menuitemradio";
            EGenreRole[EGenreRole["Scrollbar"] = 45] = "Scrollbar";
            EGenreRole[EGenreRole["Slider"] = 46] = "Slider";
            EGenreRole[EGenreRole["Spinbutton"] = 47] = "Spinbutton";
            EGenreRole[EGenreRole["Status"] = 48] = "Status";
            EGenreRole[EGenreRole["Timer"] = 49] = "Timer";
            EGenreRole[EGenreRole["Tooltip"] = 50] = "Tooltip";
            EGenreRole[EGenreRole["Listbox"] = 51] = "Listbox";
            EGenreRole[EGenreRole["Treegrid"] = 52] = "Treegrid";
            EGenreRole[EGenreRole["Article"] = 53] = "Article";
            EGenreRole[EGenreRole["Definition"] = 54] = "Definition";
            EGenreRole[EGenreRole["Directory"] = 55] = "Directory";
            EGenreRole[EGenreRole["Document"] = 56] = "Document";
            EGenreRole[EGenreRole["Heading"] = 57] = "Heading";
            EGenreRole[EGenreRole["Img"] = 58] = "Img";
            EGenreRole[EGenreRole["Math"] = 59] = "Math";
            EGenreRole[EGenreRole["Note"] = 60] = "Note";
            EGenreRole[EGenreRole["Region"] = 61] = "Region";
            EGenreRole[EGenreRole["Row"] = 62] = "Row";
            EGenreRole[EGenreRole["Separator"] = 63] = "Separator";
            EGenreRole[EGenreRole["Toolbar"] = 64] = "Toolbar";
            EGenreRole[EGenreRole["Banner"] = 65] = "Banner";
            EGenreRole[EGenreRole["Complementary"] = 66] = "Complementary";
            EGenreRole[EGenreRole["Contentinfo"] = 67] = "Contentinfo";
            EGenreRole[EGenreRole["Form"] = 68] = "Form";
            EGenreRole[EGenreRole["Main"] = 69] = "Main";
            EGenreRole[EGenreRole["Navigation"] = 70] = "Navigation";
            EGenreRole[EGenreRole["Search"] = 71] = "Search";
            EGenreRole[EGenreRole["Cell"] = 72] = "Cell";
        }
        )(EGenreRole || (exports.EGenreRole = EGenreRole = {}));
        var EGenreAttribut;
        (function(EGenreAttribut) {
            EGenreAttribut[EGenreAttribut["activedescendant"] = 0] = "activedescendant";
            EGenreAttribut[EGenreAttribut["atomic"] = 1] = "atomic";
            EGenreAttribut[EGenreAttribut["autocomplete"] = 2] = "autocomplete";
            EGenreAttribut[EGenreAttribut["busy"] = 3] = "busy";
            EGenreAttribut[EGenreAttribut["checked"] = 4] = "checked";
            EGenreAttribut[EGenreAttribut["controls"] = 5] = "controls";
            EGenreAttribut[EGenreAttribut["describedby"] = 6] = "describedby";
            EGenreAttribut[EGenreAttribut["disabled"] = 7] = "disabled";
            EGenreAttribut[EGenreAttribut["dropeffect"] = 8] = "dropeffect";
            EGenreAttribut[EGenreAttribut["expanded"] = 9] = "expanded";
            EGenreAttribut[EGenreAttribut["flowto"] = 10] = "flowto";
            EGenreAttribut[EGenreAttribut["grabbed"] = 11] = "grabbed";
            EGenreAttribut[EGenreAttribut["haspopup"] = 12] = "haspopup";
            EGenreAttribut[EGenreAttribut["hidden"] = 13] = "hidden";
            EGenreAttribut[EGenreAttribut["invalid"] = 14] = "invalid";
            EGenreAttribut[EGenreAttribut["label"] = 15] = "label";
            EGenreAttribut[EGenreAttribut["labelledby"] = 16] = "labelledby";
            EGenreAttribut[EGenreAttribut["level"] = 17] = "level";
            EGenreAttribut[EGenreAttribut["live"] = 18] = "live";
            EGenreAttribut[EGenreAttribut["multiline"] = 19] = "multiline";
            EGenreAttribut[EGenreAttribut["multiselectable"] = 20] = "multiselectable";
            EGenreAttribut[EGenreAttribut["orientation"] = 21] = "orientation";
            EGenreAttribut[EGenreAttribut["owns"] = 22] = "owns";
            EGenreAttribut[EGenreAttribut["posinset"] = 23] = "posinset";
            EGenreAttribut[EGenreAttribut["pressed"] = 24] = "pressed";
            EGenreAttribut[EGenreAttribut["readonly"] = 25] = "readonly";
            EGenreAttribut[EGenreAttribut["relevant"] = 26] = "relevant";
            EGenreAttribut[EGenreAttribut["required"] = 27] = "required";
            EGenreAttribut[EGenreAttribut["selected"] = 28] = "selected";
            EGenreAttribut[EGenreAttribut["setsize"] = 29] = "setsize";
            EGenreAttribut[EGenreAttribut["sort"] = 30] = "sort";
            EGenreAttribut[EGenreAttribut["valuemax"] = 31] = "valuemax";
            EGenreAttribut[EGenreAttribut["valuemin"] = 32] = "valuemin";
            EGenreAttribut[EGenreAttribut["valuenow"] = 33] = "valuenow";
            EGenreAttribut[EGenreAttribut["valuetext"] = 34] = "valuetext";
            EGenreAttribut[EGenreAttribut["colindex"] = 35] = "colindex";
            EGenreAttribut[EGenreAttribut["colspan"] = 36] = "colspan";
            EGenreAttribut[EGenreAttribut["rowindex"] = 37] = "rowindex";
            EGenreAttribut[EGenreAttribut["rowspan"] = 38] = "rowspan";
            EGenreAttribut[EGenreAttribut["description"] = 39] = "description";
        }
        )(EGenreAttribut || (exports.EGenreAttribut = EGenreAttribut = {}));
        class ObjetWAI {
            constructor() {
                this.idMessagesAide = GUID_1.GUID.getId();
                this.InfoWai = [];
                this.InfoWai[EGenreObjet.Aide] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Aide');
                this.InfoWai[EGenreObjet.Tableau] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Tableau');
                this.InfoWai[EGenreObjet.AvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.AvecValidation');
                this.InfoWai[EGenreObjet.BarreOnglets] = ObjetTraduction_1.GTraductions.getValeur('Navigation.BarreOnglets');
                this.InfoWai[EGenreObjet.NavigationHorizontal] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationHorizontal');
                this.InfoWai[EGenreObjet.NavigationVertical] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationVertical');
                this.InfoWai[EGenreObjet.NavigationHorizontalAvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationHorizontalAvecValidation');
                this.InfoWai[EGenreObjet.NavigationVerticalAvecValidation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NavigationVerticalAvecValidation');
                this.InfoWai[EGenreObjet.CalendrierNavigation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierNavigation');
                this.InfoWai[EGenreObjet.CalendrierPrecedent] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierPrecedent');
                this.InfoWai[EGenreObjet.CalendrierSuivant] = ObjetTraduction_1.GTraductions.getValeur('Navigation.CalendrierSuivant');
                this.InfoWai[EGenreObjet.ValidezEvenement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.ValidezEvenement');
                this.InfoWai[EGenreObjet.TitreDetailEvenement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.TitreDetailEvenement');
                this.InfoWai[EGenreObjet.ItemDesactiver] = ObjetTraduction_1.GTraductions.getValeur('Navigation.ItemDesactiver');
                this.InfoWai[EGenreObjet.AvecEdition] = ObjetTraduction_1.GTraductions.getValeur('Navigation.AvecEdition');
                this.InfoWai[EGenreObjet.Tabulation] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Tabulation');
                this.InfoWai[EGenreObjet.Supprimer] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Supprimer');
                this.InfoWai[EGenreObjet.Fenetre] = ObjetTraduction_1.GTraductions.getValeur('Navigation.Fenetre');
                this.InfoWai[EGenreObjet.NouvelElement] = ObjetTraduction_1.GTraductions.getValeur('Navigation.NouvelElement');
                this.InfoWai[EGenreObjet.BarreOngletsPrincipal] = ObjetTraduction_1.GTraductions.getValeur('Navigation.BarreOngletsPrincipal');
                this.InfoWai[EGenreObjet.SousOnglets] = ObjetTraduction_1.GTraductions.getValeur('Navigation.SousOnglets');
                this.InfoWai[EGenreObjet.RetourDebutFenetre] = ObjetTraduction_1.GTraductions.getValeur('Navigation.RetourDebutFenetre');
                this.InfoWai[EGenreObjet.FenetreChoix] = ObjetTraduction_1.GTraductions.getValeur('Navigation.FenetreChoix');
                this.WaiRole = [];
                this.WaiRole[EGenreRole.Window] = 'window';
                this.WaiRole[EGenreRole.Alert] = 'alert';
                this.WaiRole[EGenreRole.Alertdialog] = 'alertdialog';
                this.WaiRole[EGenreRole.Button] = 'button';
                this.WaiRole[EGenreRole.Checkbox] = 'checkbox';
                this.WaiRole[EGenreRole.Cell] = 'cell';
                this.WaiRole[EGenreRole.Dialog] = 'dialog';
                this.WaiRole[EGenreRole.Gridcell] = 'gridcell';
                this.WaiRole[EGenreRole.Link] = 'link';
                this.WaiRole[EGenreRole.Log] = 'log';
                this.WaiRole[EGenreRole.Marquee] = 'marquee';
                this.WaiRole[EGenreRole.Menuitem] = 'menuitem';
                this.WaiRole[EGenreRole.Menuitemcheckbox] = 'menuitemcheckbox';
                this.WaiRole[EGenreRole.Menuitemradio] = 'menuitemradio';
                this.WaiRole[EGenreRole.Option] = 'option';
                this.WaiRole[EGenreRole.Progressbar] = 'progressbar';
                this.WaiRole[EGenreRole.Radio] = 'radio';
                this.WaiRole[EGenreRole.Scrollbar] = 'scrollbar';
                this.WaiRole[EGenreRole.Slider] = 'slider';
                this.WaiRole[EGenreRole.Spinbutton] = 'spinbutton';
                this.WaiRole[EGenreRole.Status] = 'status';
                this.WaiRole[EGenreRole.Tab] = 'tab';
                this.WaiRole[EGenreRole.Tabpanel] = 'tabpanel';
                this.WaiRole[EGenreRole.Textbox] = 'textbox';
                this.WaiRole[EGenreRole.Timer] = 'timer';
                this.WaiRole[EGenreRole.Tooltip] = 'tooltip';
                this.WaiRole[EGenreRole.Treeitem] = 'treeitem';
                this.WaiRole[EGenreRole.Combobox] = 'combobox';
                this.WaiRole[EGenreRole.Grid] = 'grid';
                this.WaiRole[EGenreRole.Listbox] = 'listbox';
                this.WaiRole[EGenreRole.Menu] = 'menu';
                this.WaiRole[EGenreRole.Menubar] = 'menubar';
                this.WaiRole[EGenreRole.Radiogroup] = 'radiogroup';
                this.WaiRole[EGenreRole.Tablist] = 'tablist';
                this.WaiRole[EGenreRole.Tree] = 'tree';
                this.WaiRole[EGenreRole.Treegrid] = 'treegrid';
                this.WaiRole[EGenreRole.Article] = 'article';
                this.WaiRole[EGenreRole.Columnheader] = 'columnheader';
                this.WaiRole[EGenreRole.Definition] = 'definition';
                this.WaiRole[EGenreRole.Directory] = 'directory';
                this.WaiRole[EGenreRole.Document] = 'document';
                this.WaiRole[EGenreRole.Group] = 'group';
                this.WaiRole[EGenreRole.Heading] = 'heading';
                this.WaiRole[EGenreRole.Img] = 'img';
                this.WaiRole[EGenreRole.List] = 'list';
                this.WaiRole[EGenreRole.Listitem] = 'listitem';
                this.WaiRole[EGenreRole.Math] = 'math';
                this.WaiRole[EGenreRole.Note] = 'note';
                this.WaiRole[EGenreRole.Presentation] = 'presentation';
                this.WaiRole[EGenreRole.Region] = 'region';
                this.WaiRole[EGenreRole.Row] = 'row';
                this.WaiRole[EGenreRole.Rowheader] = 'rowheader';
                this.WaiRole[EGenreRole.Separator] = 'separator';
                this.WaiRole[EGenreRole.Toolbar] = 'toolbar';
                this.WaiRole[EGenreRole.Application] = 'application';
                this.WaiRole[EGenreRole.Banner] = 'banner';
                this.WaiRole[EGenreRole.Complementary] = 'complementary';
                this.WaiRole[EGenreRole.Contentinfo] = 'contentinfo';
                this.WaiRole[EGenreRole.Form] = 'form';
                this.WaiRole[EGenreRole.Main] = 'main';
                this.WaiRole[EGenreRole.Navigation] = 'navigation';
                this.WaiRole[EGenreRole.Search] = 'search';
                this.WaiAttribut = [];
                this.WaiAttribut[EGenreAttribut.activedescendant] = 'aria-activedescendant';
                this.WaiAttribut[EGenreAttribut.atomic] = 'aria-atomic';
                this.WaiAttribut[EGenreAttribut.autocomplete] = 'aria-autocomplete';
                this.WaiAttribut[EGenreAttribut.busy] = 'aria-busy';
                this.WaiAttribut[EGenreAttribut.checked] = 'aria-checked';
                this.WaiAttribut[EGenreAttribut.controls] = 'aria-controls';
                this.WaiAttribut[EGenreAttribut.describedby] = 'aria-describedby';
                this.WaiAttribut[EGenreAttribut.disabled] = 'aria-disabled';
                this.WaiAttribut[EGenreAttribut.dropeffect] = 'aria-dropeffect';
                this.WaiAttribut[EGenreAttribut.expanded] = 'aria-expanded';
                this.WaiAttribut[EGenreAttribut.flowto] = 'aria-flowto';
                this.WaiAttribut[EGenreAttribut.grabbed] = 'aria-grabbed';
                this.WaiAttribut[EGenreAttribut.haspopup] = 'aria-haspopup';
                this.WaiAttribut[EGenreAttribut.hidden] = 'aria-hidden';
                this.WaiAttribut[EGenreAttribut.invalid] = 'aria-invalid';
                this.WaiAttribut[EGenreAttribut.label] = 'aria-label';
                this.WaiAttribut[EGenreAttribut.labelledby] = 'aria-labelledby';
                this.WaiAttribut[EGenreAttribut.level] = '	aria-level';
                this.WaiAttribut[EGenreAttribut.live] = 'aria-live';
                this.WaiAttribut[EGenreAttribut.multiline] = 'aria-multiline';
                this.WaiAttribut[EGenreAttribut.multiselectable] = 'aria-multiselectable';
                this.WaiAttribut[EGenreAttribut.orientation] = 'aria-orientation';
                this.WaiAttribut[EGenreAttribut.owns] = 'aria-owns';
                this.WaiAttribut[EGenreAttribut.posinset] = 'aria-posinset';
                this.WaiAttribut[EGenreAttribut.pressed] = 'aria-pressed';
                this.WaiAttribut[EGenreAttribut.readonly] = 'aria-readonly';
                this.WaiAttribut[EGenreAttribut.relevant] = 'aria-relevant';
                this.WaiAttribut[EGenreAttribut.required] = 'aria-required';
                this.WaiAttribut[EGenreAttribut.selected] = 'aria-selected';
                this.WaiAttribut[EGenreAttribut.setsize] = 'aria-setsize';
                this.WaiAttribut[EGenreAttribut.sort] = 'aria-sort';
                this.WaiAttribut[EGenreAttribut.valuemax] = 'aria-valuemax';
                this.WaiAttribut[EGenreAttribut.valuemin] = 'aria-valuemin';
                this.WaiAttribut[EGenreAttribut.valuenow] = 'aria-valuenow';
                this.WaiAttribut[EGenreAttribut.valuetext] = 'aria-valuetext';
                this.WaiAttribut[EGenreAttribut.colindex] = 'aria-colindex';
                this.WaiAttribut[EGenreAttribut.colspan] = 'aria-colspan';
                this.WaiAttribut[EGenreAttribut.rowindex] = 'aria-rowindex';
                this.WaiAttribut[EGenreAttribut.rowspan] = 'aria-rowspan';
                this.WaiAttribut[EGenreAttribut.description] = 'aria-description';
            }
            getInfo(AEnum) {
                return this.InfoWai[AEnum];
            }
            strRole(AEnum) {
                return this.WaiRole[AEnum] || '';
            }
            getRole(AEnum) {
                return 'role="' + this.strRole(AEnum) + '"';
            }
            getAttribut(aEnum) {
                return this.WaiAttribut[aEnum];
            }
            composeSpan(AParametre, AId) {
                const lID = AId || false;
                const lTabIndex = AId ? '-1' : false;
                return typeof (AParametre) === 'string' ? IE.jsx.str("span", {
                    id: lID,
                    tabindex: lTabIndex,
                    class: "sr-only"
                }, AParametre) : IE.jsx.str("span", {
                    id: lID,
                    tabindex: lTabIndex,
                    class: "sr-only"
                }, this.getInfo(AParametre));
            }
            composeRole(AParametre) {
                return typeof (AParametre) === 'string' ? '' : this.getRole(AParametre);
            }
            composeAttribut(aParametre) {
                if (aParametre.valeur && typeof (aParametre.valeur) !== 'string') {
                    IE.log.addLog('ObjetWAI.composeAttribut: mauvais type de parametre ' + aParametre.genre + ' => ' + aParametre.valeur);
                }
                if (!aParametre.valeur || typeof (aParametre.valeur) !== 'string') {
                    return '';
                }
                const lAttribute = this.getAttribut(aParametre.genre);
                return typeof (aParametre.genre) === 'string' && lAttribute ? '' : ' ' + lAttribute + '="' + aParametre.valeur.toAttrValue() + '"';
            }
            getObjetAttributValeur(aGenreAttribut, aValeur) {
                const lObjetValeurAttribut = {};
                const lValeurStringAttribut = this.composeAttribut({
                    genre: aGenreAttribut,
                    valeur: aValeur
                });
                if (lValeurStringAttribut && lValeurStringAttribut.includes('=')) {
                    const lSplit = lValeurStringAttribut.split('=');
                    if (lSplit && lSplit.length === 2) {
                        lObjetValeurAttribut[lSplit[0]] = lSplit[1];
                    }
                }
                return lObjetValeurAttribut;
            }
            getNodeRechercheNavigation(aTabNodes, aNodeOrigine, aModeRecherche) {
                if (aTabNodes && aTabNodes.length > 0) {
                    let lIndexTrouve = aTabNodes.indexOf(aNodeOrigine);
                    if (lIndexTrouve < 0) {
                        aTabNodes.forEach( (aElement, aIndex) => {
                            if (lIndexTrouve < 0 && $(aElement).find(aNodeOrigine).length > 0) {
                                lIndexTrouve = aIndex;
                            }
                        }
                        );
                    }
                    if (lIndexTrouve < 0) {
                        return null;
                    }
                    switch (aModeRecherche) {
                    case ObjetWAI.ModeRechercheNavigation.current:
                        return aTabNodes[lIndexTrouve];
                    case ObjetWAI.ModeRechercheNavigation.prev:
                        return lIndexTrouve > 0 ? aTabNodes[lIndexTrouve - 1] : null;
                    case ObjetWAI.ModeRechercheNavigation.prevCycle:
                        return lIndexTrouve > 0 ? aTabNodes[lIndexTrouve - 1] : aTabNodes[aTabNodes.length - 1];
                    case ObjetWAI.ModeRechercheNavigation.next:
                        return lIndexTrouve < aTabNodes.length - 1 ? aTabNodes[lIndexTrouve + 1] : null;
                    case ObjetWAI.ModeRechercheNavigation.nextCycle:
                        return lIndexTrouve < aTabNodes.length - 1 ? aTabNodes[lIndexTrouve + 1] : aTabNodes[0];
                    case ObjetWAI.ModeRechercheNavigation.first:
                        return aTabNodes[0];
                    case ObjetWAI.ModeRechercheNavigation.last:
                        return aTabNodes[aTabNodes.length - 1];
                    default:
                        ;
                    }
                }
                return null;
            }
        }
        exports.ObjetWAI = ObjetWAI;
        (function(ObjetWAI) {
            let ModeRechercheNavigation;
            (function(ModeRechercheNavigation) {
                ModeRechercheNavigation[ModeRechercheNavigation["prev"] = 0] = "prev";
                ModeRechercheNavigation[ModeRechercheNavigation["prevCycle"] = 1] = "prevCycle";
                ModeRechercheNavigation[ModeRechercheNavigation["next"] = 2] = "next";
                ModeRechercheNavigation[ModeRechercheNavigation["nextCycle"] = 3] = "nextCycle";
                ModeRechercheNavigation[ModeRechercheNavigation["first"] = 4] = "first";
                ModeRechercheNavigation[ModeRechercheNavigation["last"] = 5] = "last";
                ModeRechercheNavigation[ModeRechercheNavigation["current"] = 6] = "current";
            }
            )(ModeRechercheNavigation = ObjetWAI.ModeRechercheNavigation || (ObjetWAI.ModeRechercheNavigation = {}));
        }
        )(ObjetWAI || (exports.ObjetWAI = ObjetWAI = {}));
        const GObjetWAI = new ObjetWAI();
        exports.GObjetWAI = GObjetWAI;
    },
    fn: 'objetwai.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetWAI_1 = require("ObjetWAI");
        IEHtml.addAttribut('ie-zonenavigation', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lParams = {
                returnNavNode(aNode) {
                    $(aNode).focus();
                },
                retourNavigationDefaut: null,
                nodeBackup: null
            };
            if (aAttributValue && aContexteCourant.controleur) {
                const lInfos = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
                if (!lInfos.estFonction) {
                    return true;
                }
                Object.assign(lParams, lInfos.callback());
            }
            if (!lParams) {
                return true;
            }
            $(aContexteCourant.node).data('ie-zonenavigation', lParams).addClass('ie-zonenavigation').on({
                'keyup'(aEvent) {
                    if (aEvent.which === ToucheClavier_1.ToucheClavierUtil.ToucheRetourNavigation) {
                        const lPreviousZone = ObjetWAI_1.GObjetWAI.getNodeRechercheNavigation($(document).find('.ie-zonenavigation').toArray(), aContexteCourant.node, ObjetWAI_1.ObjetWAI.ModeRechercheNavigation.prev);
                        if (lPreviousZone) {
                            const lParamsPrevious = $(lPreviousZone).data('ie-zonenavigation');
                            if (lParamsPrevious) {
                                if (lParamsPrevious.nodeBackup && lParamsPrevious.returnNavNode && $(lPreviousZone).find(lParamsPrevious.nodeBackup).length > 0) {
                                    lParamsPrevious.returnNavNode(lParamsPrevious.nodeBackup);
                                    return;
                                }
                                if (lParamsPrevious.retourNavigationDefaut) {
                                    lParamsPrevious.retourNavigationDefaut();
                                    return;
                                }
                                ;
                            } else {}
                        }
                    }
                },
                'focusout'(aEvent) {
                    lParams.nodeBackup = aEvent.target;
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, aAttributValue ? `ie-zonenavigation="${aAttributValue}"` : 'ie-zonenavigation');
            return true;
        }
        );
    },
    fn: 'iehtml.zonenavigation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.BtnImage.css');
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetHtml_1 = require("ObjetHtml");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        var TypeEtatBtnImage;
        (function(TypeEtatBtnImage) {
            TypeEtatBtnImage[TypeEtatBtnImage["NonSelectionne"] = 0] = "NonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["Inactif"] = 1] = "Inactif";
            TypeEtatBtnImage[TypeEtatBtnImage["ClicNonSelectionne"] = 2] = "ClicNonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["Selectionne"] = 3] = "Selectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["SurvolNonSelectionne"] = 4] = "SurvolNonSelectionne";
            TypeEtatBtnImage[TypeEtatBtnImage["SurvolSelectionne"] = 5] = "SurvolSelectionne";
        }
        )(TypeEtatBtnImage || (TypeEtatBtnImage = {}));
        IEHtml.addBalise('ie-btnimage', (aContexteCourant, aOutils) => {
            return _ieBtn(false, aContexteCourant, aOutils);
        }
        );
        IEHtml.addBalise('ie-btnicon', (aContexteCourant, aOutils) => {
            return _ieBtn(true, aContexteCourant, aOutils);
        }
        );
        function _ieBtn(aForcerIcone, aContexteCourant, aOutils) {
            let lEstIcone;
            let lEstSVG;
            let lInfosGetSelection;
            function _actualiser(aJBouton, aData, aEtat) {
                if (lEstIcone) {
                    if (aData.$selection) {
                        aJBouton.addClass('btnImageSelection');
                    } else {
                        aJBouton.removeClass('btnImageSelection');
                    }
                    if (lInfosGetSelection && lInfosGetSelection.valide) {
                        aJBouton.attr('aria-pressed', aData.$selection ? 'true' : 'false');
                    }
                }
                if (lEstIcone || lEstSVG) {
                    return;
                }
                if (!aData.$disabled) {
                    if (aData.$selection) {
                        aData.$genre = aEtat.survol ? TypeEtatBtnImage.SurvolSelectionne : TypeEtatBtnImage.Selectionne;
                    } else if (aEtat.clique) {
                        aData.$genre = TypeEtatBtnImage.ClicNonSelectionne;
                    } else {
                        aData.$genre = aEtat.survol ? TypeEtatBtnImage.SurvolNonSelectionne : TypeEtatBtnImage.NonSelectionne;
                    }
                } else {
                    aData.$genre = TypeEtatBtnImage.Inactif;
                }
                aJBouton.css('background-position', (-aData.$width * aData.$genre) + 'px 0');
            }
            const lEtat = {
                clique: false,
                survol: false
            };
            Object.assign(aContexteCourant.data, {
                $width: 20,
                $selection: false,
                $genre: TypeEtatBtnImage.NonSelectionne,
                $disabled: false
            });
            const lData = aContexteCourant.data;
            const lInnerHtml = aContexteCourant.node.innerHTML;
            lEstSVG = !!lInnerHtml && $(aContexteCourant.node).find('svg').length > 0;
            const lEstIconeStandard = aForcerIcone || $(aContexteCourant.node).hasClass('btnImageIcon');
            lEstIcone = lEstIconeStandard || $(aContexteCourant.node).hasClass('btn-bandeau') || $(aContexteCourant.node).hasClass('ObjetBoutonMenu_icone');
            const lBouton = lEstIcone ? ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("i", {
                role: "button",
                tabindex: "0"
            })) : ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                role: "button",
                tabindex: "0"
            }));
            const lJBouton = $(lBouton);
            lJBouton.ieData(aContexteCourant.data);
            let lInfosEvent, lInfosGetDisabled, lInfosGetTitle, lAvecControleSaisie, lDisabled = false, lModele = aOutils.getModel(aContexteCourant), lAvecLabelAccessible = aContexteCourant.node.hasAttribute('aria-label') || aContexteCourant.node.hasAttribute('aria-labelledby'), lLabelWAIManquant = !lAvecLabelAccessible, lSetTitle = function(aTitle) {
                lData.$oldTitle = aTitle;
                lJBouton.attr('title', aTitle);
                if (!lAvecLabelAccessible) {
                    lJBouton.attr('aria-label', aTitle);
                }
            };
            const lSetDisabled = function(aDisabled) {
                if (aDisabled) {
                    lJBouton.attr('aria-disabled', 'true');
                    lJBouton.addClass('btnImageDisable');
                } else {
                    lJBouton.get(0).removeAttribute('aria-disabled');
                    lJBouton.removeClass('btnImageDisable');
                }
            };
            if (lModele && aContexteCourant.data.$modeleParsed) {
                lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                lInfosGetSelection = aOutils.getAccesParametresModel('getSelection', aContexteCourant);
                lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                lInfosGetTitle = aOutils.getAccesParametresModel('getTitle', aContexteCourant);
                const lRefresh = aContexteCourant.contexte.refresh;
                lAvecControleSaisie = aOutils.getControleSaisieEvent(aContexteCourant);
                if (lInfosEvent.estFonction) {
                    lJBouton.eventValidation(function(event) {
                        if (lData.$disabled) {
                            return;
                        }
                        const lAction = () => {
                            const lResult = lInfosEvent.callback([event, this, aContexteCourant.data]);
                            lRefresh();
                            return lResult;
                        }
                        ;
                        if (lAvecControleSaisie) {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)(lAction);
                        } else {
                            return lAction();
                        }
                    });
                }
                let lGetSelection, lGetterDisabled, lGetterTitle;
                if (lInfosGetSelection.valide) {
                    lGetSelection = function() {
                        return !!lInfosGetSelection.callback([aContexteCourant.node, aContexteCourant.data]);
                    }
                    ;
                    lData.$selection = lGetSelection();
                }
                if (lInfosGetDisabled.valide) {
                    lGetterDisabled = function() {
                        return !!lInfosGetDisabled.callback([lBouton, aContexteCourant.data]);
                    }
                    ;
                    if (lInfosGetDisabled.estFonction || !lGetterDisabled() || lGetterDisabled() === true) {
                        lDisabled = !!lGetterDisabled();
                    } else {
                        lGetterDisabled = null;
                        IE.log.addLog('echec getDisabled de ie-bouton, propriété incorrecte du model "' + lModele + '"');
                    }
                }
                if (lInfosGetTitle.estFonction) {
                    lGetterTitle = function() {
                        return lInfosGetTitle.callback([lBouton, aContexteCourant.data]) || '';
                    }
                    ;
                    lSetTitle(lGetterTitle());
                    lLabelWAIManquant = false;
                }
                if (lGetSelection || lGetterDisabled || lGetterTitle) {
                    aOutils.abonnerRefresh( () => {
                        let lActualiser = false;
                        if (lGetSelection) {
                            const lSelection = lGetSelection();
                            if (lSelection !== lData.$selection) {
                                lData.$selection = lSelection;
                                lActualiser = true;
                            }
                        }
                        if (lGetterDisabled) {
                            const lDisabled = !!lGetterDisabled();
                            if (lDisabled !== lData.$disabled) {
                                lData.$disabled = lDisabled;
                                lSetDisabled(lDisabled);
                                lActualiser = true;
                            }
                        }
                        if (lActualiser) {
                            _actualiser(lJBouton, aContexteCourant.data, lEtat);
                        }
                        if (lGetterTitle) {
                            const lTitle = lGetterTitle();
                            if (lTitle !== lData.$oldTitle) {
                                lSetTitle(lTitle);
                            }
                        }
                    }
                    , lBouton, aContexteCourant);
                }
            }
            aOutils.copyAttributs(aContexteCourant.node, lBouton, (aName, aValue) => {
                if (aName === 'title' && aValue && (!lInfosGetTitle || !lInfosGetTitle.estFonction)) {
                    lJBouton.attr('aria-label', aValue);
                    lLabelWAIManquant = false;
                } else if (aName === 'disabled') {
                    lDisabled = true;
                    return false;
                }
            }
            );
            if (!lBouton.style.width) {
                if (!lEstSVG && !lEstIconeStandard) {
                    lBouton.style.width = lData.$width + 'px';
                }
            } else {
                lData.$width = parseInt(lBouton.style.width, 10) || lData.$width;
            }
            lData.$disabled = lDisabled;
            _actualiser(lJBouton, aContexteCourant.data, lEtat);
            if (lDisabled) {
                lSetDisabled(lDisabled);
            }
            lJBouton.addClass('btnImage').on('focusin mouseover', () => {
                lEtat.survol = true;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
            }
            ).on('focusout mouseout', () => {
                lEtat.survol = false;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
            }
            ).on('pointerdown', () => {
                lEtat.clique = true;
                _actualiser(lJBouton, aContexteCourant.data, lEtat);
                Invocateur_1.Invocateur.abonnerUnique(GNavigateur.getEventInvocateur('pointerup'), () => {
                    lEtat.clique = false;
                    _actualiser(lJBouton, aContexteCourant.data, lEtat);
                }
                );
            }
            );
            const lRacine = lJBouton.get(0);
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            if (lModele && aContexteCourant.data.$modeleParsed) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aOutils.addCommentaireDebug(lRacine, aForcerIcone ? 'ie-btnicon' : 'ie-btnimage');
            if (lInnerHtml) {
                aOutils.injectHTML({
                    element: lRacine,
                    html: lInnerHtml,
                    controleur: aContexteCourant.controleur,
                    ignorerScroll: true,
                    contexte: aContexteCourant.contexte
                });
            }
            return {
                node: lRacine,
                avecCompileFils: false
            };
        }
    },
    fn: 'iehtml.btnimage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IESwitch.css');
        require('IEHtml.CheckboxRadio.css');
        const IEHtml = require("IEHtml");
        const GUID_1 = require("GUID");
        var TypeCBRadio;
        (function(TypeCBRadio) {
            TypeCBRadio["checkbox"] = "checkbox";
            TypeCBRadio["radio"] = "radio";
            TypeCBRadio["switch"] = "switch";
        }
        )(TypeCBRadio || (TypeCBRadio = {}));
        const c_GenerateurGUID = new GUID_1.GenerateurGUID();
        function _creerCBEtRB(aContexteCourant, aType, aOutils) {
            const lInnerHTML = aContexteCourant.node.innerHTML;
            const lNomModele = aOutils.getModel(aContexteCourant);
            const lAvecIEHtml = aContexteCourant.node.hasAttribute('ie-html');
            const lAvecIETexte = aContexteCourant.node.hasAttribute('ie-texte');
            const lInfosGetLibelle = lNomModele ? aOutils.getAccesParametresModel('getLibelle', aContexteCourant) : null;
            const lAvecGetLibelle = lInfosGetLibelle && lInfosGetLibelle.estFonction;
            const lAvecLibelle = lInnerHTML.length > 0 || lAvecIEHtml || lAvecIETexte || lAvecGetLibelle;
            let lJModele;
            let lJInput;
            let lRacine;
            let llName;
            let lContexteCourant;
            const lMap = aOutils.getMapDeNode(aContexteCourant.node);
            let lEventMap;
            let lEtatIndetermine = false;
            let lSubstitution = true;
            let lEstGauche = !IE.estMobile;
            let lEstDroite = IE.estMobile;
            if (!lEstGauche && aContexteCourant.node.hasAttribute('ie-textright')) {
                lEstGauche = true;
                lEstDroite = false;
            }
            if (!lEstDroite && aContexteCourant.node.hasAttribute('ie-textleft')) {
                lEstGauche = false;
                lEstDroite = true;
            }
            aContexteCourant.data.estRadioBouton = aType === TypeCBRadio.radio;
            const lIdInput = lMap['id'] || `cb-${c_GenerateurGUID.get()}-gen-for`;
            let lClassCss;
            let lClassSpan = '';
            let lSpanGauche = '';
            let lSpanDroite = '';
            if (aType === TypeCBRadio.switch) {
                if (!lAvecIEHtml && !lAvecIETexte && !lAvecGetLibelle && lInnerHTML && aContexteCourant.node.childNodes.length === 2 && aContexteCourant.node.childNodes[0].nodeName.toLowerCase() === 'span' && aContexteCourant.node.childNodes[1].nodeName.toLowerCase() === 'span') {
                    lSpanGauche = aContexteCourant.node.childNodes[0][IE.estMobile ? 'innerHTML' : 'outerHTML'];
                    lSpanDroite = aContexteCourant.node.childNodes[1].outerHTML;
                    lEstGauche = true;
                    lEstDroite = false;
                }
                lClassCss = 'ieswitch ' + (lEstDroite ? 'iecbrbdroite' : 'iecbrbgauche');
                lClassSpan = 'lever';
            } else {
                lClassCss = 'iecb ' + (lEstDroite ? 'iecbrbdroite' : 'iecbrbgauche');
            }
            if ($(aContexteCourant.node).hasClass('as-chips')) {
                let lImageIconChips = aContexteCourant.node.getAttribute('ie-icon') || '';
                if (lImageIconChips) {
                    aContexteCourant.node.removeAttribute('ie-icon');
                }
                lClassCss += ' ' + lImageIconChips;
            }
            lJModele = $((aType === TypeCBRadio.switch ? '<div class="switch">' : '') + (IE.jsx.str("label", {
                class: lClassCss,
                for: lIdInput
            }, IE.jsx.str("input", {
                type: aType !== TypeCBRadio.radio ? 'checkbox' : 'radio',
                id: lIdInput,
                role: aType === TypeCBRadio.switch ? 'switch' : false
            }), IE.jsx.str("span", {
                class: lClassSpan || false,
                "aria-hidden": "true"
            }), !lInnerHTML && lAvecLibelle && !lSpanDroite ? IE.jsx.str("span", null) : '')) + (aType === TypeCBRadio.switch ? '</div>' : ''));
            lJInput = lJModele.find('input');
            lRacine = lJModele.get(0);
            const lElementInput = lJInput.get(0);
            lJModele.ieData(aContexteCourant.data);
            Object.assign(aContexteCourant.data, {
                $couleurActif: '',
                $couleurInactif: GCouleur.nonEditable.texte,
                $AvecMain: true
            });
            for (llName in lMap) {
                if (llName !== 'type' && llName !== 'ie-textright' && llName !== 'ie-textleft' && llName !== 'ie-icon') {
                    try {
                        if (llName === 'style' || llName === 'title' || aOutils.composantsAttributs[llName] || llName === 'aria-hidden') {
                            lJModele.attr(llName, lMap[llName]);
                            if (!lSubstitution && llName !== 'style') {
                                lJInput.removeAttr(llName);
                            }
                        } else if (llName === 'class') {
                            lJModele.addClass(lMap[llName]);
                        } else {
                            if (lSubstitution) {
                                lJInput.attr(llName, lMap[llName]);
                            }
                        }
                    } catch (e) {}
                }
            }
            if (aType === TypeCBRadio.radio && !lMap.name && lNomModele && aContexteCourant.data.$modeleParsed && aContexteCourant.controleur) {
                lJInput.attr('name', aContexteCourant.controleur.$GUID + '_' + aContexteCourant.data.$modeleParsed.nom);
            }
            if (aType === TypeCBRadio.checkbox) {
                lEtatIndetermine = lElementInput.indeterminate;
                if (lNomModele && aContexteCourant.data.$modeleParsed) {
                    const lInfosGetIndeterminate = aOutils.getAccesParametresModel('getIndeterminate', aContexteCourant);
                    if (lInfosGetIndeterminate.estFonction) {
                        lEtatIndetermine = !!lInfosGetIndeterminate.callback();
                        aOutils.abonnerRefresh( () => {
                            const lEtat = !!lInfosGetIndeterminate.callback();
                            if (lEtat !== lElementInput.indeterminate) {
                                lEtatIndetermine = lEtat;
                                lElementInput.indeterminate = lEtatIndetermine;
                            }
                        }
                        , lElementInput, aContexteCourant);
                    }
                }
            }
            lEventMap = {};
            lEventMap.focus = function() {
                $(this).parent().triggerHandler('focusin');
            }
            ;
            lEventMap.blur = function() {
                $(this).parent().triggerHandler('focusout');
            }
            ;
            lJInput.on(lEventMap);
            if (aContexteCourant.data.$modeleValue) {
                lContexteCourant = Object.assign({}, aContexteCourant);
                lContexteCourant.node = lElementInput;
                aOutils.gererInputCB(lContexteCourant, lMap.type);
            } else {
                lJInput.on(IEHtml.C_eventsModifyCheckbox, () => {
                    aContexteCourant.contexte.refresh();
                }
                );
            }
            if (lEtatIndetermine) {
                lElementInput.indeterminate = lEtatIndetermine;
            }
            const lJLabelParent = lJInput.closest('label');
            const lGetDisabled = function() {
                return lJInput.is(':disabled');
            };
            let lEstDisabled = lGetDisabled();
            if (lEstDisabled) {
                lJLabelParent.addClass('is-disabled');
            }
            const lGetChecked = function() {
                return lJInput.is(':checked');
            };
            let lEstChecked = lGetChecked();
            if (lEstChecked) {
                lJLabelParent.addClass('is-checked');
            }
            const lGetIndeterminate = function() {
                return lJInput.is(':indeterminate');
            };
            let lEstIndeterminate = lGetIndeterminate();
            if (lEstIndeterminate) {
                lJLabelParent.addClass('is-indeterminate');
            }
            aOutils.abonnerRefresh( () => {
                const lNewEstDisabled = lGetDisabled();
                if (lNewEstDisabled !== lEstDisabled) {
                    if (lNewEstDisabled) {
                        lJLabelParent.addClass('is-disabled');
                    } else {
                        lJLabelParent.removeClass('is-disabled');
                    }
                    lEstDisabled = lNewEstDisabled;
                }
                const lNewEstChecked = lGetChecked();
                if (lNewEstChecked !== lEstChecked) {
                    if (lNewEstChecked) {
                        lJLabelParent.addClass('is-checked');
                    } else {
                        lJLabelParent.removeClass('is-checked');
                    }
                    lEstChecked = lNewEstChecked;
                }
                const lNewEstIndeterminate = lGetIndeterminate();
                if (lNewEstIndeterminate !== lEstIndeterminate) {
                    if (lNewEstIndeterminate) {
                        lJLabelParent.addClass('is-indeterminate');
                    } else {
                        lJLabelParent.removeClass('is-indeterminate');
                    }
                    lEstIndeterminate = lNewEstIndeterminate;
                }
            }
            , lElementInput, aContexteCourant);
            if (lSubstitution) {
                aOutils.replaceNode(aContexteCourant.node, lRacine);
            }
            aOutils.addCommentaireDebug(lRacine, ('ie-' + aType));
            if (lAvecLibelle) {
                let lDest = lRacine;
                if (aType === TypeCBRadio.switch) {
                    lDest = lRacine.firstChild;
                }
                if (lSpanGauche) {
                    aOutils.injectHTML({
                        element: lDest,
                        insererAvantLeNode: lJModele.find('span.lever').get(0),
                        html: lSpanGauche,
                        controleur: aContexteCourant.controleur,
                        ignorerScroll: true,
                        contexte: aContexteCourant.contexte
                    });
                }
                if (lInnerHTML) {
                    aOutils.injectHTML({
                        element: lDest,
                        html: lSpanDroite || '<span>' + lInnerHTML + '</span>',
                        controleur: aContexteCourant.controleur,
                        ignorerScroll: true,
                        contexte: aContexteCourant.contexte
                    });
                }
                aContexteCourant.nodeTransfertContenuDynamique = lDest.lastChild;
                if (lAvecGetLibelle) {
                    aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle);
                }
            }
            aContexteCourant.node = lRacine;
            return {
                node: aContexteCourant.node,
                avecCompileFils: false
            };
        }
        IEHtml.addBalise('ie-checkbox', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.checkbox, aOutils);
        }
        );
        IEHtml.addBalise('ie-radio', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.radio, aOutils);
        }
        );
        IEHtml.addBalise('ie-switch', (aContexteCourant, aOutils) => {
            return _creerCBEtRB(aContexteCourant, TypeCBRadio.switch, aOutils);
        }
        );
    },
    fn: 'iehtml.checkboxradio.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreDirection = void 0;
        var EGenreDirection;
        (function(EGenreDirection) {
            EGenreDirection[EGenreDirection["SensInverse"] = -1] = "SensInverse";
            EGenreDirection[EGenreDirection["DeuxSenses"] = 0] = "DeuxSenses";
            EGenreDirection[EGenreDirection["SensNormal"] = 1] = "SensNormal";
        }
        )(EGenreDirection || (exports.EGenreDirection = EGenreDirection = {}));
    },
    fn: 'enumere_direction.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreOrientationAffichage = void 0;
        var EGenreOrientationAffichage;
        (function(EGenreOrientationAffichage) {
            EGenreOrientationAffichage[EGenreOrientationAffichage["Vertical"] = 0] = "Vertical";
            EGenreOrientationAffichage[EGenreOrientationAffichage["Horizontal"] = 1] = "Horizontal";
        }
        )(EGenreOrientationAffichage || (exports.EGenreOrientationAffichage = EGenreOrientationAffichage = {}));
    },
    fn: 'enumere_orientationaffichage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.Identite = void 0;
        require("Divers.js");
        require("NamespaceIE");
        require("DeclarationExtensionsObjetNatif");
        const IEHtml = require("IEHtml");
        const Callback_1 = require("Callback");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Direction_1 = require("Enumere_Direction");
        const Enumere_OrientationAffichage_1 = require("Enumere_OrientationAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const lGenerateurGUID = new GUID_1.GUID.generateur();
        class Identite {
            constructor(ANom, AIdent, APere, AEvenement) {
                this.pileAbonnementInvocateur = {};
                if (typeof ANom === 'string') {
                    this.Nom = this.construireNom(ANom, AIdent);
                    this.Pere = APere;
                    this.Evenement = AEvenement;
                } else {
                    const lParametres = {
                        nomComplet: '',
                        nomObjet: undefined,
                        pere: null,
                        evenement: undefined
                    };
                    $.extend(lParametres, ANom);
                    this.Pere = lParametres.pere;
                    this.Evenement = lParametres.evenement;
                    if (lParametres.nomObjet && lParametres.pere && lParametres.pere instanceof Identite) {
                        this.Nom = lParametres.pere.Nom + '.' + lParametres.nomObjet;
                    } else {
                        this.Nom = lParametres.nomComplet || '';
                    }
                }
                this.callback = new Callback_1.Callback(this.Pere,this.Evenement);
                this._callbacksSurDestruction = [];
                if (this.Pere && this.Pere instanceof Identite) {
                    this.Pere.ajouterInstanceADetruire(this);
                }
                this.options = {};
                this.Actif = true;
                this.Visible = true;
                this.TableauGauche = {};
                this.TableauDroite = {};
                this.TableauHaut = {};
                this.TableauBas = {};
                this.IdPremierElement = '';
                this.idMessageActionRequise = GUID_1.GUID.getId();
                this.tabIndex = 0;
                this.pileEvenementGlobaux = [];
                this.instancesADetruire = {};
                this.controleur = IEHtml.initControleur(this.getControleur(this) || {});
                if (this.controleur) {
                    this.controleur.instance = this;
                }
            }
            setOptions(aOptions) {
                Object.assign(this.options, aOptions);
                return this;
            }
            getOptions() {
                return this.options;
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
            setParametres(...aParams) {}
            setAvecTabulation(AAvecTabIndex) {
                this.tabIndex = (AAvecTabIndex === null || AAvecTabIndex === undefined || AAvecTabIndex) ? 0 : -1;
            }
            setDonnees(...aParams) {}
            recupererDonnees() {}
            construireAffichage(...aParams) {
                return '&nbsp;';
            }
            setGenre(AGenre) {
                this.Genre = AGenre;
            }
            setActif(AActif) {
                this.Actif = AActif;
            }
            getActif() {
                return this.Actif;
            }
            setVisible(AVisible) {
                ObjetStyle_1.GStyle.setDisplay(this.Nom, this.Visible = AVisible);
            }
            estUneInteractionUtilisateur() {
                return this.InteractionUtilisateur !== false;
            }
            setEtatSaisie(aEtatSaisie) {
                if (this.Pere && this.Pere instanceof Identite) {
                    this.Pere.setEtatSaisie(aEtatSaisie);
                } else {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.etatSaisie, aEtatSaisie);
                }
            }
            setControleNavigation(AControleNavigation) {
                this.ControleNavigation = AControleNavigation;
            }
            getEtatSaisie() {
                if (this.Pere && this.Pere instanceof Identite) {
                    return this.Pere.getEtatSaisie();
                }
            }
            $refresh() {
                return this.controleur.$refresh();
            }
            $refreshSelf() {
                return this.controleur.$refreshSelf();
            }
            getControleur(aInstance) {
                return {};
            }
            avecEventResizeNavigateur() {
                return this.Pere && this.Pere instanceof Identite ? this.Pere.avecEventResizeNavigateur() : true;
            }
            construireNom(ANom, AIdent) {
                return (AIdent === null || AIdent === undefined ? ANom : ANom + '[' + AIdent + ']');
            }
            getNom() {
                return this.Nom;
            }
            effacer(aMessage) {
                if (aMessage === null || aMessage === undefined) {
                    aMessage = '&nbsp;';
                }
                ObjetHtml_1.GHtml.setHtml(this.Nom, aMessage);
            }
            afficher(H, ...aParams) {
                let lHtml = '';
                if (H === null || H === undefined) {
                    lHtml = this.construireAffichage();
                } else if (aParams.length === 0 && typeof H === 'string') {
                    lHtml = H;
                } else {}
                if (lHtml) {
                    ObjetHtml_1.GHtml.setHtml(this.Nom, lHtml, {
                        instance: this
                    });
                }
            }
            initialiser() {
                const H = this.construireAffichage();
                if (H) {
                    ObjetHtml_1.GHtml.setHtml(this.Nom, H, {
                        instance: this
                    });
                }
                this.recupererDonnees();
            }
            composeMessage(aMessage) {
                return IE.jsx.str("div", {
                    role: "note",
                    tabindex: "0"
                }, IE.jsx.str("p", {
                    id: this.idMessageActionRequise,
                    class: "semi-bold taille-m text-center p-y-xl m-bottom-l"
                }, aMessage));
            }
            navigationClavier(AId) {
                if (GNavigateur.isToucheFleche()) {
                    this.focusSuivant(AId, (GNavigateur.isToucheFlecheGauche() || GNavigateur.isToucheFlecheDroite()) ? (Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Horizontal) : (Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Vertical), (GNavigateur.isToucheFlecheGauche() || GNavigateur.isToucheFlecheHaut()) ? Enumere_Direction_1.EGenreDirection.SensInverse : Enumere_Direction_1.EGenreDirection.SensNormal);
                }
            }
            focusSuivant(AId, AOrientation, ADirection) {
                const lIdSuivant = this.getIdNavigationSuivant(AId, AOrientation, ADirection);
                if (lIdSuivant) {
                    ObjetHtml_1.GHtml.setFocus(lIdSuivant);
                }
            }
            getIdNavigationSuivant(aId, aOrientation, aDirection) {
                return (aOrientation === Enumere_OrientationAffichage_1.EGenreOrientationAffichage.Horizontal) ? ((aDirection === Enumere_Direction_1.EGenreDirection.SensNormal) ? this.TableauDroite[aId] : this.TableauGauche[aId]) : ((aDirection === Enumere_Direction_1.EGenreDirection.SensNormal) ? this.TableauBas[aId] : this.TableauHaut[aId]);
            }
            ajouterAuTableaux(APremierId, ADeuxiemeId, AHorizontal, AVertical) {
                switch (AHorizontal) {
                case Enumere_Direction_1.EGenreDirection.DeuxSenses:
                    this.TableauDroite[APremierId] = ADeuxiemeId;
                    this.TableauGauche[ADeuxiemeId] = APremierId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensNormal:
                    this.TableauDroite[APremierId] = ADeuxiemeId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensInverse:
                    this.TableauGauche[ADeuxiemeId] = APremierId;
                    break;
                }
                switch (AVertical) {
                case Enumere_Direction_1.EGenreDirection.DeuxSenses:
                    this.TableauBas[APremierId] = ADeuxiemeId;
                    this.TableauHaut[ADeuxiemeId] = APremierId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensNormal:
                    this.TableauBas[APremierId] = ADeuxiemeId;
                    break;
                case Enumere_Direction_1.EGenreDirection.SensInverse:
                    this.TableauHaut[ADeuxiemeId] = APremierId;
                    break;
                }
            }
            resetTableauxNavigation() {
                this.TableauGauche = {};
                this.TableauDroite = {};
                this.TableauHaut = {};
                this.TableauBas = {};
            }
            estObjetGraphiqueFenetre() {
                return false;
            }
            getId(APositionId) {
                if (this.TabId && APositionId < this.TabId.length) {
                    return this.TabId[APositionId];
                }
            }
            focusSurPremierElement() {
                ObjetHtml_1.GHtml.setFocus(this.IdPremierElement);
            }
            setPremierElement(AElement) {
                this.IdPremierElement = AElement;
            }
            getPremierElement() {
                return this.IdPremierElement;
            }
            ajouterInstanceADetruire(aInstance) {
                if (aInstance && aInstance.Nom) {
                    this.instancesADetruire[aInstance.Nom] = aInstance;
                }
            }
            enleverInstanceADetruire(aInstance) {
                if (aInstance && aInstance.Nom) {
                    this.instancesADetruire[aInstance.Nom] = null;
                }
            }
            ajouterEvenementGlobal(aEvenement, aMethode) {
                if (!GNavigateur.addEvent) {
                    return;
                }
                if (!aMethode) {
                    return;
                }
                GNavigateur.addEvent(aEvenement, this, aMethode);
                this.pileEvenementGlobaux.push({
                    evenement: aEvenement,
                    methode: aMethode
                });
                return this.pileEvenementGlobaux.length - 1;
            }
            viderEvenementGlobaux() {
                for (let i = 0; i < this.pileEvenementGlobaux.length; i++) {
                    GNavigateur.delEvent(this.pileEvenementGlobaux[i].evenement, this);
                }
                this.pileEvenementGlobaux = [];
            }
            detruireInstances() {}
            free() {
                if (this.isDestroyed()) {
                    return;
                }
                this.__enCoursDeDestruction = true;
                try {
                    this._viderEvenements();
                    this.detruireInstancesFils();
                    if (this.detruireInstances) {
                        this.detruireInstances();
                    }
                    if (this.estObjetGraphiqueFenetre()) {
                        if (ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                            IEZoneFenetre_1.ZoneFenetre.enleverFenetre(this.Nom);
                        }
                    } else if (!this.Pere || !('__enCoursDeDestruction'in this.Pere && this.Pere.__enCoursDeDestruction)) {
                        ObjetHtml_1.GHtml.setHtml(this.Nom, '', true);
                    }
                    if (this.Pere && this.Pere instanceof Identite) {
                        this.Pere.enleverInstanceADetruire(this);
                    }
                    if (this._callbacksSurDestruction.length > 0) {
                        this._callbacksSurDestruction.forEach( (aCallback) => {
                            aCallback();
                        }
                        );
                    }
                } catch (e) {} finally {
                    delete this.__enCoursDeDestruction;
                    this._estDetruite = true;
                }
            }
            detruireInstancesFils() {
                for (const lNom in this.instancesADetruire) {
                    if (this.instancesADetruire.hasOwnProperty(lNom)) {
                        const lInstance = this.instancesADetruire[lNom];
                        if (lInstance && !lInstance._estDetruite && lInstance.free) {
                            lInstance.free();
                        }
                        this.instancesADetruire[lNom] = null;
                    }
                }
            }
            ajouterCallbackSurDestruction(aCallback) {
                this._callbacksSurDestruction.push(aCallback);
                return this;
            }
            isDestroyed() {
                return this._estDetruite || this.__enCoursDeDestruction;
            }
            static creerInstance(aConstructeur, aParametres) {
                if (!aConstructeur) {
                    return null;
                }
                const lNom = lGenerateurGUID.get()
                  , lNomComplet = 'IE.Identite.collection.' + lNom;
                $.extend(aParametres, {
                    nomComplet: lNomComplet
                });
                const lInstance = new aConstructeur(aParametres);
                if (aParametres.options) {
                    lInstance.setOptions(aParametres.options);
                }
                lInstance.ajouterCallbackSurDestruction( () => {
                    if (IE.Identite.collection[lNom]) {
                        delete IE.Identite.collection[lNom];
                    }
                }
                );
                IE.Identite.collection[lNom] = lInstance;
                return lInstance;
            }
            _viderEvenements() {
                Invocateur_1.Invocateur.desabonner(this);
                this.viderEvenementGlobaux();
            }
        }
        exports.Identite = Identite;
    },
    fn: 'objetidentite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetIdentite_1 = require("ObjetIdentite");
        IEHtml.addAttribut('ie-identite', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lNode = aContexteCourant.node;
            if (lNode.id) {
                return true;
            }
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lCallbackParams = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lCallbackParams.estFonction) {
                return true;
            }
            const lValueCallback = lCallbackParams.callback([]);
            if (!lValueCallback || !lValueCallback.class || !lValueCallback.pere) {
                return true;
            }
            let lInstance = ObjetIdentite_1.Identite.creerInstance(lValueCallback.class, {
                pere: lValueCallback.pere,
                evenement: lValueCallback.evenement
            });
            lNode.id = lInstance.getNom();
            $(lNode).on('destroyed', () => {
                if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.destroy)) {
                    lValueCallback.destroy(lInstance);
                }
                lInstance.free();
                lInstance = null;
            }
            );
            if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.init)) {
                lValueCallback.init(lInstance);
            }
            aOutils.surInjectionHtml(aContexteCourant, () => {
                if (MethodesObjet_1.MethodesObjet.isFunction(lInstance.initialiser)) {
                    lInstance.initialiser();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(lValueCallback.start)) {
                    lValueCallback.start(lInstance);
                }
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-identite="' + lValue + '"');
            return true;
        }
        );
    },
    fn: 'iehtml.identite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.Chips.css');
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        IEHtml.addBalise('ie-chips', (aContexteCourant, aOutils) => {
            const lModele = aOutils.getModel(aContexteCourant);
            const lInnerHtml = aContexteCourant.node.innerHTML;
            const lHref = aContexteCourant.node.getAttribute('href');
            const lOptions = {
                avecBtn: true,
                classIconeBtn: 'icon_fermeture_widget ',
                titleBtn: ObjetTraduction_1.GTraductions.getValeur('Supprimer'),
                disabled: false,
                selected: false
            };
            const lHtmlInterneChips = IE.jsx.str("div", {
                class: "text",
                "ie-ellipsis": true
            }, lInnerHtml);
            const lElementChips = ObjetHtml_1.GHtml.htmlToDOM(lHref ? IE.jsx.str("a", {
                href: lHref,
                target: "_blank"
            }, lHtmlInterneChips) : IE.jsx.str("div", {
                tabindex: "0"
            }, lHtmlInterneChips));
            const lJChips = $(lElementChips);
            let lJBtnSuppr = null;
            let lJRoleButton = $(lElementChips);
            const lJText = lJChips.find('.text');
            let lInfosEvent;
            let lInfosEventBtn;
            let lInfosGetDisabled;
            let lInfosGetOptions;
            let lInfosGetLibelle;
            let lAvecBtnSuppr = false;
            let lFuncGetLabelBtnSuppr = null;
            let lLabelBtnSuppr_bak = '';
            const lRefresh = aContexteCourant.contexte.refresh;
            if (lModele && aContexteCourant.data.$modeleParsed) {
                lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                lInfosEventBtn = aOutils.getAccesParametresModel('eventBtn', aContexteCourant);
                lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                const lInfosGetSelected = aOutils.getAccesParametresModel('getSelected', aContexteCourant);
                lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                if (lInfosGetOptions.estFonction) {
                    Object.assign(lOptions, lInfosGetOptions.callback([lElementChips]));
                }
                if (lOptions.avecBtn && lOptions.classIconeBtn && lInfosEventBtn && lInfosEventBtn.estFonction) {
                    lAvecBtnSuppr = true;
                    lJRoleButton = lJText;
                }
                let lGetterDisabled;
                if (lInfosGetDisabled.estFonction) {
                    lGetterDisabled = function() {
                        return !!lInfosGetDisabled.callback([]);
                    }
                    ;
                    lOptions.disabled = lGetterDisabled();
                }
                const lSetDisabled = function() {
                    var _a;
                    if (lOptions.disabled) {
                        lJRoleButton.attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.disabled), 'true');
                        lJBtnSuppr === null || lJBtnSuppr === void 0 ? void 0 : lJBtnSuppr.attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.disabled), 'true');
                        lJChips.addClass('disabled');
                    } else {
                        lJRoleButton.get(0).removeAttribute(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.disabled));
                        (_a = lJBtnSuppr === null || lJBtnSuppr === void 0 ? void 0 : lJBtnSuppr.get(0)) === null || _a === void 0 ? void 0 : _a.removeAttribute(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.disabled));
                        lJChips.removeClass('disabled');
                    }
                };
                if (lInfosGetSelected.estFonction) {
                    lOptions.selected = !!lInfosGetSelected.callback([]);
                    lOptions.selected ? lJChips.addClass('pressed') : lJChips.removeClass('pressed');
                    lJRoleButton.attr('aria-pressed', lOptions.selected + '');
                }
                if (lGetterDisabled || lInfosGetSelected.estFonction) {
                    aOutils.abonnerRefresh( () => {
                        if (lGetterDisabled) {
                            const lDisabled = !!lGetterDisabled();
                            if (lDisabled !== lOptions.disabled) {
                                lOptions.disabled = lDisabled;
                                lSetDisabled();
                            }
                        }
                        if (lInfosGetSelected.estFonction) {
                            const lEstSelected = !!lInfosGetSelected.callback([]);
                            if (lEstSelected !== lOptions.selected) {
                                lOptions.selected = lEstSelected;
                                lOptions.selected ? lJChips.addClass('pressed') : lJChips.removeClass('pressed');
                                lJRoleButton.attr('aria-pressed', lOptions.selected + '');
                            }
                        }
                    }
                    , lElementChips, aContexteCourant);
                }
                if (lAvecBtnSuppr) {
                    lFuncGetLabelBtnSuppr = () => {
                        return `${lOptions.titleBtn} ${lJText.text()}`;
                    }
                    ;
                    lLabelBtnSuppr_bak = lFuncGetLabelBtnSuppr();
                    lJChips.append(IE.jsx.str("i", {
                        class: ['btn', lOptions.classIconeBtn],
                        role: "button",
                        tabindex: "0",
                        "aria-label": lLabelBtnSuppr_bak
                    }));
                    lJBtnSuppr = lJChips.find('>i');
                }
                if (lOptions.disabled) {
                    lSetDisabled();
                }
            }
            aOutils.copyAttributs(aContexteCourant.node, lElementChips);
            if (!lHref && lInfosEvent && lInfosEvent.estFonction) {
                lJChips.get(0).removeAttribute('tabindex');
                lJRoleButton.get(0).setAttribute('role', 'button');
                lJRoleButton.get(0).setAttribute('tabindex', '0');
            }
            let lClass = 'ie-chips' + (lHref ? ' AvecMenuContextuel' : '');
            if ((lInfosEvent && lInfosEvent.estFonction) || lHref) {
                lJChips.eventValidation( (aEvent) => {
                    if (aEvent.originalEvent && '__eventBtn__'in aEvent.originalEvent) {
                        return;
                    }
                    if (lOptions.disabled) {
                        if (lHref) {
                            return false;
                        }
                        return;
                    }
                    if ((lInfosEvent && lInfosEvent.estFonction)) {
                        const lResult = lInfosEvent.callback([aEvent]);
                        lRefresh();
                        return lResult;
                    }
                }
                );
                lClass += ' avec-event ie-ripple ie-ripple-claire';
            }
            if (lJBtnSuppr) {
                lJBtnSuppr.eventValidation( (aEvent) => {
                    if (lOptions.disabled) {
                        return;
                    }
                    if (aEvent.originalEvent) {
                        aEvent.originalEvent.__eventBtn__ = true;
                    }
                    let lResult = lInfosEventBtn.callback([aEvent]);
                    lRefresh();
                    if (lHref) {
                        lResult = false;
                    }
                    return lResult;
                }
                );
                lJChips.on('keyup', (aEvent) => {
                    if (lOptions.disabled) {
                        return;
                    }
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSupprimer(aEvent) || aEvent.which === ToucheClavier_1.ToucheClavier.Backspace) {
                        const lResult = lInfosEventBtn.callback([aEvent]);
                        lRefresh();
                        return lResult;
                    }
                }
                );
            }
            lJChips.addClass(lClass);
            const lRacine = lElementChips;
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lRacine;
            if (lModele && aContexteCourant.data.$modeleParsed) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aContexteCourant.nodeTransfertContenuDynamique = lJText.get(0);
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                if (aContexteCourant.nodeTransfertContenuDynamique) {
                    aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle);
                    if (lFuncGetLabelBtnSuppr) {
                        aOutils.abonnerRefresh( () => {
                            if (lInfosGetLibelle) {
                                const lLabelBtnSuppr = lFuncGetLabelBtnSuppr();
                                if (lLabelBtnSuppr !== lLabelBtnSuppr_bak) {
                                    lLabelBtnSuppr_bak = lLabelBtnSuppr;
                                    lJBtnSuppr.get(0).setAttribute('aria-label', lLabelBtnSuppr);
                                }
                            }
                        }
                        , lElementChips, aContexteCourant);
                    }
                }
            }
            aOutils.addCommentaireDebug(lRacine, 'ie-chips');
            return {
                node: lRacine,
                avecCompileFils: true
            };
        }
        );
    },
    fn: 'iehtml.chips.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreEvenementObjetSaisie = void 0;
        var EGenreEvenementObjetSaisie;
        (function(EGenreEvenementObjetSaisie) {
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["selection"] = 0] = "selection";
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["deploiement"] = 1] = "deploiement";
            EGenreEvenementObjetSaisie[EGenreEvenementObjetSaisie["fermeture"] = 2] = "fermeture";
        }
        )(EGenreEvenementObjetSaisie || (exports.EGenreEvenementObjetSaisie = EGenreEvenementObjetSaisie = {}));
    },
    fn: 'enumere_evenementobjetsaisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreSaisie = void 0;
        var EGenreSaisie;
        (function(EGenreSaisie) {
            EGenreSaisie[EGenreSaisie["Combo"] = 2] = "Combo";
            EGenreSaisie[EGenreSaisie["SaisieRecherche"] = 3] = "SaisieRecherche";
        }
        )(EGenreSaisie || (exports.EGenreSaisie = EGenreSaisie = {}));
    },
    fn: 'enumere_saisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetCelluleBouton = exports.EGenreBoutonCellule = void 0;
        require('Form-components.css');
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_Event_1 = require("Enumere_Event");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetWAI_1 = require("ObjetWAI");
        const MethodesObjet_1 = require("MethodesObjet");
        var EGenreBoutonCellule;
        (function(EGenreBoutonCellule) {
            EGenreBoutonCellule[EGenreBoutonCellule["Aucun"] = 0] = "Aucun";
            EGenreBoutonCellule[EGenreBoutonCellule["Fleche"] = 1] = "Fleche";
            EGenreBoutonCellule[EGenreBoutonCellule["Loupe"] = 2] = "Loupe";
            EGenreBoutonCellule[EGenreBoutonCellule["Points"] = 3] = "Points";
            EGenreBoutonCellule[EGenreBoutonCellule["Image"] = 4] = "Image";
        }
        )(EGenreBoutonCellule || (exports.EGenreBoutonCellule = EGenreBoutonCellule = {}));
        class ObjetCelluleBouton extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.idZone = this.Nom + '_Zone';
                this.NomEdit = this.Nom + '_Edit';
                this.NomDescr = this.Nom + '_Descr';
                this.idTexte = this.NomEdit;
                this.idBouton = this.Nom + '_Bouton';
                this.libelle = '';
                this.options = {
                    hauteur: 18,
                    largeur: 80,
                    genreBouton: EGenreBoutonCellule.Aucun,
                    iconeGauche: '',
                    avecBordures: true,
                    avecCouleurFondBouton: true,
                    avecFocusVisibleTexte: true,
                    avecZoneSaisie: true,
                    estSaisissable: false,
                    selectionSaisieSurFocus: false,
                    taillePolice: 10,
                    classeZone: 'FondBlanc',
                    classTexte: '',
                    classBackground: '',
                    styleZoneTexte: '',
                    styleBouton: '',
                    placeHolder: '',
                    libelleHaut: '',
                    withTabulation: true,
                    roleWAI: ObjetWAI_1.EGenreRole.Button,
                    labelWAI: '',
                    popupWAI: '',
                    labelledById: '',
                    describedById: '',
                    desactiverAideSaisie: false,
                    ariaExpanded: false,
                    required: false,
                    titleForce: '',
                    setValue: null,
                    editAvecTrim: false,
                    ariaControls: '',
                    ariaDescription: ''
                };
                this.setOptionsObjetCelluleBouton({
                    estSaisissable: true,
                    genreBouton: EGenreBoutonCellule.Fleche
                });
                this.IdPremierElement = this.NomEdit;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    ifLibelleHaut: function() {
                        return !!aInstance.options.libelleHaut;
                    },
                    htmlLibelleHaut: function() {
                        return aInstance.options.libelleHaut;
                    },
                    getClassZone: function() {
                        return 'Texte' + aInstance.options.taillePolice + ' ' + aInstance.options.classeZone + ' CelluleBoutonZoneJQ' + (aInstance.Actif ? ' AvecMain' : '');
                    },
                    getStyleConteneur: function() {
                        return {
                            'width': (aInstance.options.largeur && aInstance.options.largeur === '100%' ? '100%' : '')
                        };
                    },
                    getClass_ocb_cont() {
                        return !aInstance.Actif ? 'ie-ripple-disabled' : '';
                    },
                    getStyleContenu: function() {
                        if (!IE.estMobile) {
                            return {
                                'width': (aInstance.options.largeur && aInstance.options.largeur !== '100%' ? aInstance.options.largeur + 'px' : '')
                            };
                        } else {
                            return {};
                        }
                    },
                    getAttrContenu() {
                        const lAttr = {
                            'aria-disabled': aInstance.Actif ? null : true,
                            'aria-label': aInstance.options.labelWAI || aInstance.options.titleForce || null,
                            'aria-labelledby': aInstance.options.labelledById || null,
                            'aria-describedby': aInstance.options.describedById || null,
                            'aria-controls': aInstance.options.ariaControls || null
                        };
                        if (aInstance.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox) {
                            lAttr['aria-expanded'] = !!aInstance.options.ariaExpanded;
                        }
                        return lAttr;
                    },
                    getTitleDescriptionEdit: function() {
                        return !aInstance.options.titleForce ? aInstance.estLibelleHTML ? '' : (aInstance.libelle && typeof aInstance.options.largeur === 'number' && ObjetChaine_1.GChaine.getLongueurChaineDansDiv(aInstance.libelle, aInstance.options.taillePolice, false) >= aInstance.options.largeur) ? ObjetChaine_1.GChaine.enleverEntites(aInstance.libelle) : '' : aInstance.options.titleForce;
                    },
                    edit: {
                        getValue: function() {
                            return aInstance.libelle;
                        },
                        setValue: function(aValue) {
                            aInstance.libelle = aValue;
                            if (aInstance.options.setValue) {
                                aInstance.options.setValue(aValue, aInstance);
                            }
                        },
                        getDisabled: function() {
                            return !aInstance.Actif;
                        },
                        node: function() {
                            if (!aInstance.options.estSaisissable) {
                                $(this.node).on('focus', function() {
                                    ObjetHtml_1.GHtml.setFocus(this, false);
                                });
                            }
                            $(this.node).on('keyup blur focusout', (aEvent) => {
                                aInstance._surEventEdit(aEvent);
                            }
                            );
                        },
                        getNodeSansSaisie: function() {
                            $(this.node).on('mousedown click keyup blur focusout', (aEvent) => {
                                aInstance._surEventEdit(aEvent);
                            }
                            );
                        },
                        getClassEdit: function() {
                            return 'CelluleBoutonNomEditJQ Texte' + aInstance.options.taillePolice + ' ' + (aInstance.options.classTexte || '') + (aInstance.Actif ? (aInstance.options.estSaisissable ? ' AvecTexte' : ' AvecMain') : '') + ' ' + (aInstance.options.classBackground || '');
                        },
                        getStylePourBoutonNonEditable: function() {
                            return {
                                'background-color': aInstance.Actif ? '' : GCouleur.nonEditable.fond
                            };
                        }
                    },
                    getHtmlConsult: function() {
                        if (aInstance.libelle || !aInstance.options.placeHolder) {
                            return ObjetChaine_1.GChaine.avecEspaceSiVide(aInstance.estLibelleHTML ? aInstance.libelle : ObjetChaine_1.GChaine.insecable(aInstance.libelle));
                        } else if (aInstance.options.placeHolder) {
                            if (typeof aInstance.options.placeHolder === 'string') {
                                return IE.jsx.str("span", {
                                    class: "as-placeholder",
                                    "aria-disabled": "true"
                                }, aInstance.options.placeHolder);
                            }
                            if (aInstance.options.placeHolder.libelleHtml) {
                                return ObjetChaine_1.GChaine.avecEspaceSiVide(aInstance.options.placeHolder.libelleHtml);
                            }
                        }
                    },
                    getNodeBouton: function() {
                        $(this.node).on('mousedown click keyup', (aEvent) => {
                            if (!aInstance.Actif) {
                                return;
                            }
                            let lEvent = null;
                            switch (aEvent.type) {
                            case 'mousedown':
                                lEvent = Enumere_Event_1.EEvent.SurMouseDown;
                                break;
                            case 'click':
                                lEvent = Enumere_Event_1.EEvent.SurClick;
                                break;
                            case 'keyup':
                                lEvent = Enumere_Event_1.EEvent.SurKeyUp;
                                break;
                            }
                            if (lEvent !== null) {
                                aInstance.callback.appel(lEvent, aEvent, false);
                                if (aInstance.Pere && aInstance.Pere instanceof ObjetIdentite_1.Identite && aInstance.Pere.$refreshSelf) {
                                    aInstance.Pere.$refreshSelf();
                                }
                            }
                        }
                        );
                    }
                });
            }
            setParametresPN(aAvecBouton, aLargeur, aHauteur, aClassTexte) {
                this.setOptionsObjetCelluleBouton({
                    genreBouton: aAvecBouton ? EGenreBoutonCellule.Fleche : EGenreBoutonCellule.Aucun,
                    largeur: aLargeur,
                    hauteur: aHauteur ? aHauteur : 15,
                    classTexte: aClassTexte ? aClassTexte : 'Gras',
                    estSaisissable: false,
                    avecZoneSaisie: false
                });
            }
            setOptionsObjetCelluleBouton(aOptions) {
                $.extend(this.options, aOptions);
                this.avecBouton = this.options.genreBouton !== EGenreBoutonCellule.Aucun;
                this.$refreshSelf();
            }
            construireAffichage() {
                const H = [];
                let lClasseBtn = '';
                switch (this.options.genreBouton) {
                case EGenreBoutonCellule.Fleche:
                    lClasseBtn = 'as-select ';
                    break;
                case EGenreBoutonCellule.Loupe:
                    lClasseBtn = 'as-search';
                    break;
                case EGenreBoutonCellule.Points:
                    lClasseBtn = 'as-multi-choix';
                    break;
                case EGenreBoutonCellule.Image:
                    lClasseBtn = 'as-date-picker';
                    break;
                }
                H.push('<div ie-if="ifLibelleHaut" ie-html="htmlLibelleHaut" class="LibelleHaut"></div>');
                H.push('<div class="input-wrapper" ie-style="getStyleConteneur">', '<div class="ocb_cont as-input ', lClasseBtn, (!this.options.avecZoneSaisie ? ' ie-ripple' : ''), '" ie-class="getClass_ocb_cont">');
                if (this.options.iconeGauche) {
                    H.push(IE.jsx.str("i", {
                        class: ['ocb_icone_gauche', this.options.iconeGauche],
                        "ie-node": "edit.getNodeSansSaisie",
                        "aria-hidden": "true"
                    }));
                }
                const lStrAttrsWAI = {
                    role: ObjetWAI_1.GObjetWAI.strRole(this.options.roleWAI),
                    'aria-haspopup': this.options.popupWAI || false,
                    'aria-required': this.options.required ? 'true' : false,
                    'aria-description': this.options.ariaDescription || false,
                    'aria-expanded': this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'false' : false
                };
                if (this.options.avecZoneSaisie) {
                    H.push(IE.jsx.str("input", Object.assign({
                        type: "text",
                        "ie-model": "edit",
                        "ie-trim": !!this.options.editAvecTrim,
                        id: this.NomEdit,
                        "ie-style": "getStyleContenu",
                        "ie-attr": "getAttrContenu",
                        autocomplete: this.options.desactiverAideSaisie ? 'off' : false,
                        autocorrect: this.options.desactiverAideSaisie ? 'off' : false,
                        autocapitalize: this.options.desactiverAideSaisie ? 'off' : false,
                        spellcheck: this.options.desactiverAideSaisie ? 'false' : false,
                        "ie-title": "getTitleDescriptionEdit",
                        "ie-selecttextfocus": !!this.options.selectionSaisieSurFocus,
                        readonly: !this.options.estSaisissable,
                        "aria-readonly": this.options.estSaisissable ? false : 'true',
                        "ie-ellipsis": !this.options.estSaisissable
                    }, lStrAttrsWAI, {
                        "aria-autocomplete": "list",
                        placeholder: this.options.placeHolder && MethodesObjet_1.MethodesObjet.isString(this.options.placeHolder) ? this.options.placeHolder : false
                    })));
                } else {
                    H.push(IE.jsx.str("div", Object.assign({
                        class: "ocb-libelle",
                        tabindex: this.options.withTabulation ? '0' : '',
                        id: this.idTexte,
                        "ie-html": "getHtmlConsult",
                        "ie-style": "getStyleContenu",
                        "ie-attr": "getAttrContenu",
                        "ie-node": "edit.getNodeSansSaisie",
                        "ie-ellipsis": !this.options.titleForce,
                        title: this.options.titleForce
                    }, lStrAttrsWAI, {
                        "aria-live": this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'polite' : false,
                        "aria-relevant": this.options.roleWAI === ObjetWAI_1.EGenreRole.Combobox ? 'text' : false
                    })));
                }
                if (this.avecBouton) {
                    H.push(IE.jsx.str("div", {
                        class: "ocb_bouton",
                        "ie-node": "getNodeBouton",
                        role: "presentation"
                    }));
                }
                H.push('</div>');
                H.push('</div>');
                return H.join('');
            }
            recupererDonnees() {
                if (!ObjetHtml_1.GHtml.elementExiste(this.idZone)) {
                    return;
                }
                let lEventMap = {};
                if (this.options.avecFocusVisibleTexte) {
                    lEventMap = {
                        'focusin': function() {
                            $(this).find('.CelluleBoutonNomEditJQ').css('outline', GCouleur.texte + ' dotted 1px');
                        },
                        'focusout': function() {
                            $(this).find('.CelluleBoutonNomEditJQ').css('outline', 'none');
                        }
                    };
                }
                $('#' + this.Nom.escapeJQ()).on(lEventMap, {
                    instance: this
                }).data('couleurFocus', GCouleur.texte);
            }
            setActif(AActif) {
                super.setActif(AActif);
                this.$refreshSelf();
            }
            setLibelle(aLibelle) {
                this.libelle = aLibelle;
                this.estLibelleHTML = false;
                this.$refreshSelf();
            }
            setLibelleHtml(aLibelleHtml) {
                if (this.options.avecZoneSaisie) {
                    return;
                }
                this.estLibelleHTML = true;
                this.libelle = aLibelleHtml;
                this.$refreshSelf();
            }
            getLibelle() {
                return this.libelle;
            }
            setLargeur(aLargeur) {
                this.setOptionsObjetCelluleBouton({
                    largeur: aLargeur ? aLargeur : undefined
                });
            }
            setTitle(aTitle) {
                this.setOptionsObjetCelluleBouton({
                    titleForce: aTitle
                });
            }
            setFocus() {
                ObjetHtml_1.GHtml.setFocus(this.NomEdit);
            }
            setAvecBouton(aAvecBouton) {
                if (this.avecBouton === aAvecBouton) {
                    return;
                }
                this.avecBouton = aAvecBouton;
                this.$refreshSelf();
            }
            _surEventEdit(aEvent) {
                if (!this.Actif) {
                    return;
                }
                let lEvent = null;
                switch (aEvent.type) {
                case 'keyup':
                    lEvent = Enumere_Event_1.EEvent.SurKeyUp;
                    break;
                case 'blur':
                    lEvent = Enumere_Event_1.EEvent.SurBlur;
                    break;
                case 'focusout':
                    lEvent = Enumere_Event_1.EEvent.SurFocusOut;
                    break;
                case 'mousedown':
                    lEvent = Enumere_Event_1.EEvent.SurMouseDown;
                    break;
                case 'click':
                    lEvent = Enumere_Event_1.EEvent.SurClick;
                    break;
                default:
                    ;
                }
                if (lEvent) {
                    this.callback.appel(lEvent, aEvent, true);
                    if (this.Pere && this.Pere instanceof ObjetIdentite_1.Identite && this.Pere.$refreshSelf) {
                        this.Pere.$refreshSelf();
                    }
                }
            }
        }
        exports.ObjetCelluleBouton = ObjetCelluleBouton;
    },
    fn: 'objetcellulebouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeThemeBouton = void 0;
        var TypeThemeBouton;
        (function(TypeThemeBouton) {
            TypeThemeBouton["primaire"] = "themeBoutonPrimaire";
            TypeThemeBouton["secondaire"] = "themeBoutonSecondaire";
            TypeThemeBouton["neutre"] = "themeBoutonNeutre";
        }
        )(TypeThemeBouton || (exports.TypeThemeBouton = TypeThemeBouton = {}));
    },
    fn: 'type_themebouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisie = void 0;
        const GUID_1 = require("GUID");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetStyle_1 = require("ObjetStyle");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const Enumere_Event_1 = require("Enumere_Event");
        const Enumere_Saisie_1 = require("Enumere_Saisie");
        const ObjetCelluleBouton_1 = require("ObjetCelluleBouton");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetWAI_1 = require("ObjetWAI");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const ToucheClavier_1 = require("ToucheClavier");
        const tag_1 = require("tag");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const jsx_1 = require("jsx");
        require('ObjetSaisie.css');
        class ObjetSaisie extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.Survolee = -1;
                this.Selection = -1;
                this.Timer = null;
                this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                this.modeTactile = false;
                this.NomListe = this.Nom + '_Liste';
                this.nomListeConteneur = this.Nom + '_Liste_cont';
                this.idContenu = this.Nom + '_Contenu';
                this.idContenuScroll = this.Nom + '_ContenuScroll';
                this.idWrapperBouton = this.Nom + '_wrapperbouton';
                this.NomLabel = this.Nom + '_Label';
                this.idBtnValidation = this.Nom + '_btnValidation';
                this.idBloc = this.Nom + '_bloc';
                this.idLibelleHaut = this.Nom + '_lib_haut';
                this.cache = {
                    editionEnCours: false
                };
                this.init();
                Invocateur_1.Invocateur.abonner(`surAffichageFenetre ${Invocateur_1.ObjetInvocateur.events.resizeNavigateur}`, () => {
                    if (this.listeDeroulee && this._estOuvertureModale()) {
                        this.fermerListe(false);
                    }
                }
                , this);
            }
            init() {
                this._initParseur();
                this.bouton = new ObjetCelluleBouton_1.ObjetCelluleBouton(this.Nom + '.bouton',null,this,this._surEvenementBouton.bind(this));
                this.IdPremierElement = this.bouton.NomEdit;
                this.initialiserOptionsObjetSaisie();
                this.decalageTopOuvertureInverse = 15;
            }
            detruireInstances() {
                $('#' + this.idContenu.escapeJQ()).stop(true, true);
                clearTimeout(this.cache.timerMAJ);
                clearTimeout(this._timerInitParseur);
                clearTimeout(this._timerEditionRecherche);
                $(`#${this.nomListeConteneur.escapeJQ()}`).remove();
            }
            static calculTailleMaxLibelle(aLibelle, aEstGras) {
                return Math.ceil(ObjetChaine_1.GChaine.getLongueurChaineDansDiv(aLibelle, '1.2rem', aEstGras)) + 4 + 1;
            }
            initialiserOptionsObjetSaisie() {
                this._options = {
                    mode: Enumere_Saisie_1.EGenreSaisie.Combo,
                    multiSelection: false,
                    avecElementObligatoire: false,
                    avecDesignMobile: false,
                    avecOuvertureDeroulantModale: null,
                    longueur: 125,
                    hauteur: null,
                    hauteurLigneDefault: 18,
                    hauteurLigneTactile: 36,
                    largeurListe: null,
                    estLargeurAuto: false,
                    getTailleElementlargeurAuto: function(aElement, aEstGras) {
                        return ObjetSaisie.calculTailleMaxLibelle(aElement.getLibelle(), aEstGras);
                    },
                    largeurAutoMin: 40,
                    largeurAutoMax: 500,
                    avecBouton: true,
                    iconeGauche: '',
                    deroulerListeSeulementSiPlusieursElements: true,
                    initAutoSelectionAvecUnElement: true,
                    controlerNbrElements: false,
                    avecTriListeElements: false,
                    nbrLignes: 15,
                    classTexte: '',
                    classBackground: null,
                    placeHolder: '',
                    desactiverAideSaisie: false,
                    couleurFondDeroulant: null,
                    celluleAvecTexteHtml: false,
                    getContenuCellule: null,
                    texteEdit: '',
                    couleurTexteEdit: null,
                    styleTexteEdit: null,
                    classTexteEdit: null,
                    largeurTexteEdit: null,
                    getClassElement: null,
                    getContenuElement: null,
                    getEstElementNonSelectionnable: null,
                    getElementSelectionnableParPrecSuiv: null,
                    getEnteteListe: null,
                    getPiedListe: null,
                    libelleHaut: '',
                    avecEventSurFermetureListe: false,
                    avecFondSelectionSurSurvol: true,
                    avecGrasSurSurvol: false,
                    modifierContenuCelluleSurSelection: true,
                    avecReservationPlaceBarreScroll: false,
                    desactiverScrollInfini: false,
                    nbBlocsScrollInfini: 2,
                    roleWAI: ObjetWAI_1.EGenreRole.Combobox,
                    labelWAICellule: '',
                    labelledById: '',
                    describedById: '',
                    required: false,
                    avecBoutonsPrecSuiv: false,
                    avecBoutonsPrecSuivVisiblesInactifs: true,
                    avecBoutonsPrecSuiv_boucle: false,
                    optionsBouton: {},
                    surValidation: null,
                    getInfosElementCB: null,
                    getLibelleCelluleMultiSelection: function(aListeSelections) {
                        return aListeSelections ? aListeSelections.getTableauLibelles().join(', ') : '';
                    },
                    getLibelleBoutonValider: function(aNombreSelectionnes, aNombre) {
                        return aNombre > 0 ? ObjetChaine_1.GChaine.format('%s (%d / %d)', [ObjetTraduction_1.GTraductions.getValeur('Valider'), aNombreSelectionnes, aNombre]) : ObjetTraduction_1.GTraductions.getValeur('Valider');
                    },
                    surEditionRecherche: null,
                    nbCarMinRecherche: 2,
                    delaiSurEditionRecherche: 500,
                    rechercheTout: ['', '*'],
                    avecSurlignageSuggestion: true,
                    couleurSurlignageSuggestion: GCouleur.surlignageTexte,
                    avecSurlignageElement: null,
                    callbackToutCalcule: null,
                    dureeAnimationDeploiement: 150
                };
            }
            setOptionsObjetSaisie(aOptions) {
                $.extend(this._options, aOptions);
                const lEstListeOuCombo = [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode);
                const lAvecSaisieRechercheDynamique = this._avecSaisieRechercheDynamique();
                const lLabelledBy = this._options.labelledById || (this._options.texteEdit ? this.NomLabel : undefined) || (this._options.libelleHaut ? this.idLibelleHaut : undefined);
                const lOptionsBouton = $.extend({
                    estSaisissable: !lEstListeOuCombo,
                    avecZoneSaisie: !lEstListeOuCombo,
                    genreBouton: this._options.avecBouton ? lEstListeOuCombo ? ObjetCelluleBouton_1.EGenreBoutonCellule.Fleche : ObjetCelluleBouton_1.EGenreBoutonCellule.Loupe : ObjetCelluleBouton_1.EGenreBoutonCellule.Aucun,
                    largeur: this._options.avecDesignMobile && IE.estMobile ? '100%' : this._options.longueur,
                    hauteur: this._options.hauteur || undefined,
                    iconeGauche: this._options.avecBoutonsPrecSuiv ? '' : this._options.iconeGauche,
                    classTexte: this._options.classTexte,
                    classBackground: this._options.classBackground,
                    placeHolder: this._options.placeHolder,
                    desactiverAideSaisie: this._options.desactiverAideSaisie || this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche,
                    roleWAI: this._options.roleWAI || undefined,
                    labelWAI: this._options.labelWAICellule || undefined,
                    popupWAI: 'listbox',
                    labelledById: lLabelledBy,
                    describedById: this._options.describedById || '',
                    required: this._options.required || undefined,
                    setValue: this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche ? this._modificationSaisieBoutonRecherche.bind(this) : null,
                    editAvecTrim: lAvecSaisieRechercheDynamique,
                    selectionSaisieSurFocus: lAvecSaisieRechercheDynamique
                }, aOptions.optionsBouton);
                this.bouton.setOptionsObjetCelluleBouton(lOptionsBouton);
                this.$refreshSelf();
                return this;
            }
            chercherIndiceSelectionSelonSens(aIndice, aPrecedent, aEnBoucle, aMethodeSelec) {
                if (!this.ListeElements || !this.ListeElements.count) {
                    return -1;
                }
                let lIndice = aIndice;
                const lNbr = this.ListeElements.count();
                if (lIndice !== null && lIndice !== undefined) {
                    while (lIndice < lNbr && lIndice >= 0 && (!this._estSelectionnable(this.ListeElements.get(lIndice)) || (aMethodeSelec && aMethodeSelec({
                        element: this.ListeElements.get(lIndice)
                    }) !== true))) {
                        lIndice += aPrecedent ? -1 : 1;
                    }
                } else {
                    lIndice = -1;
                }
                if (lIndice >= lNbr) {
                    lIndice = -1;
                }
                if (aEnBoucle && lIndice === -1) {
                    return this.chercherIndiceSelectionSelonSens(aPrecedent ? lNbr - 1 : 0, aPrecedent, false, aMethodeSelec);
                }
                return lIndice;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    ifLibelleHaut: function() {
                        return !!aInstance._options.libelleHaut;
                    },
                    htmlLibelleHaut: function() {
                        return aInstance._options.libelleHaut;
                    },
                    listeEventOut: function() {
                        return {
                            nodesExclus: [ObjetHtml_1.GHtml.getElement(aInstance.bouton.getNom())],
                            callback: function() {
                                if (aInstance.listeDeroulee && aInstance.activerEventOut) {
                                    aInstance._declencherFermetureListe();
                                }
                            }
                        };
                    },
                    nodeOverlay() {
                        $(this.node).on({
                            click() {
                                aInstance._declencherFermetureListe(true);
                            }
                        });
                    },
                    btnSuivPrec: {
                        event: function(aPrecedent) {
                            aInstance._surPrecedentSuivant(aPrecedent);
                        },
                        getDisabled: function(aPrecedent) {
                            return !aInstance._boutonPrecSuivOK(aPrecedent);
                        },
                        getStyle: function(aPrecedent) {
                            if (aInstance._options.avecBoutonsPrecSuivVisiblesInactifs) {
                                return;
                            }
                            return {
                                visibility: aInstance._boutonPrecSuivOK(aPrecedent) ? '' : 'hidden'
                            };
                        }
                    },
                    getNodeBouton() {
                        $(this.node).on({
                            'swipeleft': function() {
                                if (aInstance._options.avecBoutonsPrecSuiv && aInstance._boutonPrecSuivOK(false)) {
                                    aInstance._surPrecedentSuivant(false);
                                }
                            },
                            'swiperight': function() {
                                if (aInstance._options.avecBoutonsPrecSuiv && aInstance._boutonPrecSuivOK(true)) {
                                    aInstance._surPrecedentSuivant(true);
                                }
                            }
                        });
                    },
                    getClassesDynamiques: function() {
                        const lClasses = [];
                        if (!aInstance.getActif()) {
                            lClasses.push('input-wrapper-disabled');
                        }
                        return lClasses.join(' ');
                    },
                    getNodeContenu: function() {
                        $(this.node).on({
                            keydown(aEvent) {
                                if (!aEvent.altKey && (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut)) {
                                    aEvent.preventDefault();
                                }
                            },
                            wheel(aEvent) {
                                if (this.scrollHeight > this.clientHeight) {
                                    aEvent.originalEvent.__wheelSurCombo__ = true;
                                }
                            }
                        });
                        if (aInstance.cache.scrollInfiniActif) {
                            $(this.node).on('scroll', function() {
                                aInstance._majBlocsDeTop(this.scrollTop);
                            });
                        }
                    },
                    getAttrWAIOption: function(aLigne) {
                        const lResult = {};
                        if (aInstance._options.multiSelection) {
                            const lInfos = aInstance._infosElementsCbs[aLigne];
                            lResult[ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.selected)] = '' + !!((lInfos === null || lInfos === void 0 ? void 0 : lInfos.avecCB) && (lInfos === null || lInfos === void 0 ? void 0 : lInfos.selectionne));
                        } else {
                            lResult[ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.selected)] = '' + (aInstance.Selection === aLigne);
                        }
                        return lResult;
                    },
                    cbElement: {
                        getValue: function(aIndice) {
                            return aInstance.getValueElementCB(aIndice);
                        },
                        setValue: function(aIndice, aValue) {
                            aInstance._setValueElementCB(aIndice, aValue);
                        },
                        getIndeterminate: function(aIndice) {
                            const lInfos = aInstance._infosElementsCbs ? aInstance._infosElementsCbs[aIndice] : null;
                            if (lInfos) {
                                const lSelection = aInstance._getSelectionElement(lInfos, aIndice);
                                return lSelection.nbFilsSelectionne > 0 && lSelection.nbFilsSelectionne < lSelection.nbFils;
                            }
                            return false;
                        },
                        getDisabled: function(aIndice) {
                            const lInfos = aInstance._infosElementsCbs ? aInstance._infosElementsCbs[aIndice] : null;
                            if (lInfos) {
                                return lInfos.nonEditable;
                            }
                            return false;
                        }
                    },
                    getNodeCBMulti: function() {
                        $(this.node).on({
                            'mouseenter mouseleave': function(event) {
                                if (event.type === 'mouseenter') {
                                    aInstance._selectionLigne(aInstance.Survolee, false);
                                    aInstance.Survolee = -1;
                                }
                            }
                        });
                    },
                    btnValidationCB: {
                        event: function(aEvent) {
                            aEvent.stopPropagation();
                            aInstance.surValidation(true, -1, {
                                validationMultiSelection: true
                            });
                        },
                        getDisabled: function() {
                            let lDisabled = false;
                            if (aInstance._options.avecElementObligatoire) {
                                let lNbSelectionnes = 0;
                                aInstance.ListeElements.parcourir( (aElement, aIndex) => {
                                    const lInfosCBs = aInstance._infosElementsCbs ? aInstance._infosElementsCbs[aIndex] : null;
                                    if (lInfosCBs && !lInfosCBs.estCumul && aInstance._estSelectionnable(aElement)) {
                                        if (lInfosCBs.selectionne) {
                                            lNbSelectionnes += 1;
                                        }
                                    }
                                }
                                );
                                lDisabled = (lNbSelectionnes === 0);
                            }
                            return lDisabled;
                        },
                        getNode: function() {
                            $(this.node).on({
                                mouseover: function() {
                                    aInstance._survolBoutonMultiSelection();
                                }
                            });
                        },
                        getHtml: function() {
                            let lNb = 0;
                            let lNbSelectionnes = 0;
                            if (aInstance.ListeElements) {
                                aInstance.ListeElements.parcourir( (aElement, aIndex) => {
                                    const lInfosCBs = aInstance._infosElementsCbs ? aInstance._infosElementsCbs[aIndex] : null;
                                    if (lInfosCBs && !lInfosCBs.estCumul && aInstance._estSelectionnable(aElement)) {
                                        lNb += 1;
                                        if (lInfosCBs.selectionne) {
                                            lNbSelectionnes += 1;
                                        }
                                    }
                                }
                                );
                            }
                            return aInstance._options.getLibelleBoutonValider(lNbSelectionnes, lNb);
                        }
                    },
                    getNodeListeVide: function() {
                        $(this.node).eventValidation( () => {
                            aInstance.fermerListe();
                        }
                        );
                    }
                });
            }
            setParametres(AMode, ALongueur, AAvecBouton, aAvecStyleSite, aControlerNbrElements, aHauteur, aClassTexte) {
                this.setOptionsObjetSaisie({
                    mode: AMode,
                    longueur: ALongueur === null || ALongueur === undefined ? undefined : ALongueur,
                    hauteur: aHauteur,
                    avecBouton: AAvecBouton === null || AAvecBouton === undefined ? undefined : AAvecBouton,
                    controlerNbrElements: aControlerNbrElements,
                    classTexte: aClassTexte
                });
                IE.log.addLog('ObjetSaisie.setParametres deprecated!', null, IE.log.genre.Deprecated);
            }
            setLabel(aTexte, aClass, aStyle) {
                this._options.texteEdit = aTexte;
                $.extend(this._options, {
                    classTexteEdit: aClass ? aClass : undefined,
                    styleTexteEdit: aStyle ? aStyle : undefined
                });
                const lElementLabel = ObjetHtml_1.GHtml.getElement(this.NomLabel);
                if (ObjetHtml_1.GHtml.estElement(lElementLabel)) {
                    ObjetHtml_1.GHtml.setHtml(lElementLabel, ObjetChaine_1.GChaine.insecable(this._options.texteEdit) + '&nbsp;');
                    if (this._options.classTexteEdit) {
                        ObjetHtml_1.GHtml.setClass(lElementLabel, this._options.classTexteEdit);
                    }
                    if (this._options.styleTexteEdit) {
                        ObjetStyle_1.GStyle.setStyle(lElementLabel, this._options.styleTexteEdit);
                    }
                }
            }
            recupererDonnees() {
                this.setOptionsObjetSaisie({});
                this.bouton.initialiser();
            }
            construireAffichage() {
                $('#' + this.idContenu.escapeJQ()).stop(true, true);
                const lOuvertureModale = this._estOuvertureModale();
                let H = '';
                const LFor = (this._options.labelWAICellule || [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode)) ? '' : 'for="' + this.bouton.NomEdit + '"';
                const lDesignMobile = this._options.avecDesignMobile && IE.estMobile;
                H += `<label class="ie-titre-petit bloc-contain m-bottom" ie-if="ifLibelleHaut" ie-html="htmlLibelleHaut" id="${this.idLibelleHaut}"></label>`;
                H += '<div class="input-wrapper ObjetSaisie' + ((this._options.longueur === '100%' || lDesignMobile) ? ' ObjetSaisie_100P' : '') + (lDesignMobile ? ' design-mobile' : '') + (lOuvertureModale ? ' open-up' : '') + '" ie-class="getClassesDynamiques" ' + ObjetWAI_1.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Presentation) + ' id="' + this.idWrapperBouton + '">';
                if (this._options.texteEdit && this._options.texteEdit.trim()) {
                    if (this._options.largeurTexteEdit) {
                        H += '<div style="' + ObjetStyle_1.GStyle.composeWidth(this._options.largeurTexteEdit) + '">';
                    }
                    const lStyleTextEdit = this._options.couleurTexteEdit ? 'style="' + ObjetStyle_1.GStyle.composeCouleurTexte(this._options.couleurTexteEdit) + '"' : this._options.styleTexteEdit ? 'style="' + this._options.styleTexteEdit + '"' : '';
                    H += '<label id="' + this.NomLabel + '" class="' + ((this._options.classTexteEdit !== null && this._options.classTexteEdit !== undefined) ? this._options.classTexteEdit : ' label-default') + '" ' + LFor + ' ' + lStyleTextEdit + '>' + ObjetChaine_1.GChaine.insecable(this._options.texteEdit) + '&nbsp;</label>';
                    if (this._options.largeurTexteEdit) {
                        H += '</div>';
                    }
                }
                if (this._options.avecBoutonsPrecSuiv) {
                    H += IE.jsx.str("ie-btnicon", {
                        class: ['icon_angle_left', lDesignMobile ? '' : 'icon btnImageIcon'],
                        "ie-model": "btnSuivPrec(true)",
                        "ie-style": "getStyle",
                        title: ObjetTraduction_1.GTraductions.getValeur('Precedent'),
                        "aria-label": ObjetTraduction_1.GTraductions.getValeur('Precedent') + (this._options.labelWAICellule ? '  ' + this._options.labelWAICellule : '')
                    });
                }
                H += '<div class="ObjetSaisie_cont">';
                H += '<div id="' + this.bouton.getNom() + '" ie-node="getNodeBouton"' + (this._options.avecBoutonsPrecSuiv && IE.estMobile ? ' class="text-center" ' : '') + '></div>';
                const lHtmlList = (0,
                tag_1.tag)('div', {
                    id: this.NomListe,
                    'ie-eventout': lOuvertureModale ? false : 'listeEventOut',
                    class: ['deroulant-conteneur-show-hide', IE.estMobile || GNavigateur.isTactile ? ' is-tactile' : ''],
                    style: lOuvertureModale ? false : 'display: none;',
                    tabindex: -1
                });
                if (lOuvertureModale) {
                    let lZIndex = 2000;
                    $(`#${this.nomListeConteneur.escapeJQ()}`).remove();
                    IEHtml.injectHTMLParams({
                        element: IEZoneFenetre_1.ZoneFenetre.getElementZoneFenetre(),
                        html: (0,
                        tag_1.tag)('div', {
                            id: this.nomListeConteneur,
                            class: 'ObjetSaisie ObjetSaisie-modal',
                            style: `z-index:${lZIndex}`
                        }, lHtmlList + (0,
                        tag_1.tag)('div', {
                            class: 'overlay',
                            'ie-node': 'nodeOverlay'
                        })),
                        controleur: this.controleur
                    });
                } else {
                    H += lHtmlList;
                }
                H += '</div>';
                if (this._options.avecBoutonsPrecSuiv) {
                    H += IE.jsx.str("ie-btnicon", {
                        class: ['icon_angle_right', lOuvertureModale ? '' : 'icon btnImageIcon'],
                        "ie-model": "btnSuivPrec(false)",
                        "ie-style": "getStyle",
                        title: ObjetTraduction_1.GTraductions.getValeur('Suivant'),
                        "aria-label": ObjetTraduction_1.GTraductions.getValeur('Suivant') + (this._options.labelWAICellule ? '  ' + this._options.labelWAICellule : '')
                    });
                }
                H += '</div>';
                H += '</div>';
                return H;
            }
            setSelection(ASelection) {
                const lIndice = this.chercherIndiceSelectionSelonSens(ASelection, false);
                if (lIndice >= 0) {
                    if (this._options.multiSelection) {
                        this._selectionnerUnElementEnMultiSelection(lIndice);
                    }
                    this.surValidation(false, lIndice);
                }
            }
            surSelection(aParams) {
                if ((this.getNbElementsVisible() > 0 || !this._options.deroulerListeSeulementSiPlusieursElements) && !this.actualiserListe) {
                    this._deroulerListe();
                } else {
                    this.surValidation(false, undefined, aParams);
                }
            }
            deroulerListe() {
                this._deroulerListe();
            }
            surValidation(aInteractionUtilisateur, ASelection, aParams) {
                this.InteractionUtilisateur = aInteractionUtilisateur;
                this.cache.surDemandeSaisieRechercheTout = false;
                const lParams = Object.assign({
                    saisieRecherche: false,
                    validationMultiSelection: false,
                    surBoutonCellule: false
                }, aParams);
                const lEstMultiSelection = this._options.multiSelection;
                if (!this.ListeElements || !this.ListeElements.get(ASelection) || this._estSelectionnable(this.ListeElements.get(ASelection))) {
                    this.Selection = ASelection;
                    this.fermerListe(true);
                    this.$refreshSelf();
                    clearTimeout(this._timerEditionRecherche);
                    let LValeur;
                    const lEditionEnCours = this.cache.editionEnCours;
                    this.cache.editionEnCours = false;
                    if (lEstMultiSelection) {
                        if (!this._listeSelections) {
                            this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                        }
                        this._listeSelections.vider();
                        const lListeIndices = [];
                        if (this.ListeElements) {
                            this.ListeElements.parcourir( (D, aIndex) => {
                                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                                if (lInfos && ASelection === aIndex && lInfos.estCumul) {
                                    this.Selection = -1;
                                }
                                if (lInfos && !lInfos.estCumul && lInfos.selectionne) {
                                    this._listeSelections.addElement(D);
                                    lListeIndices.push(aIndex);
                                }
                            }
                            );
                        }
                        let lMAJContenu = lParams.validationMultiSelection || this.Selection >= 0 || this._listeSelections.count() > 0;
                        if (lParams.surBoutonCellule && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !lEditionEnCours) {
                            LValeur = '';
                            lMAJContenu = false;
                            this.cache.surDemandeSaisieRechercheTout = true;
                        } else if (lParams.saisieRecherche || lEditionEnCours || (this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && this._listeSelections.count() === 0 && !lParams.validationMultiSelection)) {
                            LValeur = this.getContenu();
                        } else {
                            LValeur = this._options.getLibelleCelluleMultiSelection(this._listeSelections);
                        }
                        if (this._options.modifierContenuCelluleSurSelection && lMAJContenu) {
                            this.setContenu(LValeur);
                        }
                        const lIdDescendant = this.Nom + '_' + lListeIndices.join(',' + this.Nom + '_');
                        $('#' + this.idContenuScroll.escapeJQ() + ', #' + this.bouton.NomEdit.escapeJQ()).attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.activedescendant), ObjetHtml_1.GHtml.getElement(lIdDescendant) ? lIdDescendant : null);
                    } else if (ASelection >= -1 && !lParams.validationMultiSelection && !lParams.saisieRecherche) {
                        const lElement = ASelection >= 0 ? this.ListeElements.get(this.Selection) : null;
                        LValeur = lElement ? lElement.getLibelle() : '';
                        if (this._options.modifierContenuCelluleSurSelection) {
                            if (this._options.getContenuCellule) {
                                this._appliquerGetContenuCellule(lElement);
                            } else if (this._options.celluleAvecTexteHtml && lElement && lElement.libelleHtml) {
                                this.bouton.setLibelleHtml(lElement.libelleHtml);
                            } else {
                                this.setContenu(LValeur);
                            }
                            const lIdDescendant = this.Nom + '_' + ASelection;
                            $('#' + this.idContenuScroll.escapeJQ() + ', #' + this.bouton.NomEdit.escapeJQ()).attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.activedescendant), ObjetHtml_1.GHtml.getElement(lIdDescendant) ? lIdDescendant : null);
                        }
                    } else {
                        if (lParams.surBoutonCellule && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !lEditionEnCours) {
                            LValeur = '';
                            this.cache.surDemandeSaisieRechercheTout = true;
                        } else {
                            LValeur = [Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode) ? '*' : this.getContenu();
                        }
                    }
                    if ((ASelection >= 0 || lEstMultiSelection) && this.ControleNavigation && ControleSaisieEvenement_1.ControleSaisieEvenement) {
                        (0,
                        ControleSaisieEvenement_1.ControleSaisieEvenement)(this._retourSurNavigation.bind(this, Object.assign({
                            valeur: LValeur,
                            retourSaisieAnnule: true
                        }, lParams)));
                    } else {
                        this._retourSurNavigation(Object.assign({
                            valeur: LValeur,
                            retourSaisieAnnule: false
                        }, lParams));
                    }
                }
            }
            _remplirListe() {
                const lHeightScroll = this.cache.heightScroll;
                this.cache = {
                    scrollInfiniActif: false,
                    blocs: [],
                    nbVisibles: 0,
                    toutCalcule: false,
                    heightScroll: lHeightScroll,
                    largeurCellule: this._options.avecDesignMobile && IE.estMobile ? '100%' : this._options.longueur,
                    editionEnCours: false,
                    surDemandeSaisieRechercheTout: this.cache.surDemandeSaisieRechercheTout
                };
                if (!this.ListeElements) {
                    if (this._options.multiSelection) {
                        this._infosElementsCbs = {};
                    }
                    return;
                }
                this._trierElements();
                let lBlocs = {
                    debut: 0,
                    fin: 0,
                    lignesVisibles: []
                };
                let lNb = 0;
                let lTailleMaxLibelle = 0;
                this.cache.blocs.push(lBlocs);
                this.ListeElements.parcourir( (aElement, aIndex) => {
                    if (lNb >= this._options.nbrLignes) {
                        lBlocs = {
                            debut: aIndex,
                            fin: aIndex,
                            lignesVisibles: []
                        };
                        this.cache.blocs.push(lBlocs);
                        lNb = 0;
                    }
                    lBlocs.debut = Math.min(lBlocs.debut, aIndex);
                    lBlocs.fin = Math.max(lBlocs.debut, aIndex);
                    if (aElement.existe() && aElement.Visible !== false) {
                        lNb += 1;
                        lBlocs.lignesVisibles.push(aIndex);
                        this.cache.nbVisibles += 1;
                        if (this._options.estLargeurAuto && MethodesObjet_1.MethodesObjet.isFunction(this._options.getTailleElementlargeurAuto)) {
                            lTailleMaxLibelle = Math.max(lTailleMaxLibelle, this._options.getTailleElementlargeurAuto(aElement, this._options.classTexte === 'Gras')) + (this._options.multiSelection ? 10 : 0);
                        }
                    }
                }
                );
                if (this._options.estLargeurAuto && lTailleMaxLibelle && MethodesObjet_1.MethodesObjet.isNumeric(this.cache.largeurCellule)) {
                    this.cache.largeurCellule = Math.min(Math.max(lTailleMaxLibelle, this._options.largeurAutoMin), this._options.largeurAutoMax);
                    this.bouton.setLargeur(this.cache.largeurCellule);
                }
                this.cache.scrollInfiniActif = !this._options.desactiverScrollInfini && this.cache.blocs.length > (2 * this._options.nbBlocsScrollInfini + 2) && this.cache.nbVisibles > 100;
                this.cache.avecCBMultiSelection = false;
                if (this._options.multiSelection) {
                    if (!this._infosElementsCbs) {
                        this._infosElementsCbs = {};
                    }
                    this.ListeElements.parcourir( (aElement, aIndex) => {
                        if (aElement.existe() && aElement.Visible !== false) {
                            this._initInfosElementsCBs(aIndex);
                            if (this._infosElementsCbs[aIndex].avecCB) {
                                this.cache.avecCBMultiSelection = this._infosElementsCbs[aIndex].avecCB;
                            }
                        }
                    }
                    );
                }
                if (this.cache.nbVisibles === 0 && this._options.deroulerListeSeulementSiPlusieursElements) {
                    return;
                }
                if ($('#' + this.Nom.escapeJQ()).length === 0) {
                    return;
                }
                let lLargeurListe = this._getLargeurListe()
                  , lCompteurLigne = 0
                  , lNumeroDerniereLigne = 0
                  , lNumeroLigneReference = -1
                  , lHeightBoutonTactile = 36
                  , lEstMultiSelection = this._options.multiSelection
                  , lAvecScroll = false;
                this.cache.recherchesSurlignage = null;
                this.cache.avecSurlignage = this._options.avecSurlignageSuggestion && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche;
                const lEstOuvertureModale = this._estOuvertureModale();
                if (!lEstOuvertureModale) {
                    $('#' + this.idWrapperBouton.escapeJQ()).css('position', 'relative');
                    $('#' + this.NomListe.escapeJQ()).css('width', lLargeurListe);
                }
                if (lEstMultiSelection && !this._infosElementsCbs) {
                    this._infosElementsCbs = {};
                }
                if (this.cache.avecSurlignage && !this.cache.surDemandeSaisieRechercheTout) {
                    const lRecherche = this.bouton.getLibelle().trim();
                    if (lRecherche && lRecherche.length > 0 && (!this._options.rechercheTout || !this._options.rechercheTout.includes(lRecherche))) {
                        this.cache.recherchesSurlignage = lRecherche.split(' ');
                    }
                }
                if (!this._avecDeroulerListe()) {
                    return;
                }
                const T = [];
                T.push('<div role="presentation" ', (this._options.couleurFondDeroulant) ? +'style="' + ObjetStyle_1.GStyle.composeCouleurFond(this._options.couleurFondDeroulant) + '">' : '>');
                if (lLargeurListe > 0) {
                    lLargeurListe = lLargeurListe - 1;
                }
                let lEnteteListe;
                if (MethodesObjet_1.MethodesObjet.isFunction(this._options.getEnteteListe)) {
                    lEnteteListe = this._options.getEnteteListe(this);
                    if (lEnteteListe && lEnteteListe.html) {
                        T.push('<div class="ObjetSaisie_entete_liste"></div>');
                    }
                }
                T.push('<div id="' + this.idContenu + '" tabindex="-1" ie-node="getNodeContenu" class="ie-draggable-handle-cancel"', ' style="height:0px; overflow-y: auto; overflow-x: hidden;', (lEstOuvertureModale ? '' : ObjetStyle_1.GStyle.composeWidth(lLargeurListe)), '"', ' ', ObjetWAI_1.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Presentation), '>');
                this.ListeElements.parcourir( (aElement, aIndex) => {
                    if (aElement.existe() && aElement.Visible !== false) {
                        lNumeroDerniereLigne = aIndex;
                        lCompteurLigne += 1;
                        if (lCompteurLigne === this._options.nbrLignes) {
                            lNumeroLigneReference = aIndex;
                        }
                        if (lCompteurLigne > this._options.nbrLignes) {
                            lAvecScroll = true;
                        }
                    }
                }
                );
                this.cache.largeurContenu = lLargeurListe - (GNavigateur.getLargeurBarreDeScroll && (lAvecScroll || this._options.avecReservationPlaceBarreScroll) ? GNavigateur.getLargeurBarreDeScroll() - 2 : 0);
                const lEstContenuVide = this.cache.nbVisibles === 0;
                T.push(IE.jsx.str("ul", {
                    class: ['liste-as-options', this.cache.avecCBMultiSelection ? ' multi-selections ' : ''],
                    id: this.idContenuScroll,
                    role: "listbox",
                    "aria-multiselectable": this.cache.avecCBMultiSelection ? 'true' : false
                }, (aTab) => {
                    if (lEstContenuVide) {
                        aTab.push(IE.jsx.str("li", {
                            "ie-node": "getNodeListeVide"
                        }, IE.jsx.str("div", {
                            class: "as-li ObjetSaisie_contenuvide"
                        }, ObjetTraduction_1.GTraductions.getValeur('Navigation.ObjetSaisieVide'))));
                    } else {
                        if (this.cache.scrollInfiniActif) {
                            for (let i = 0; i <= this._options.nbBlocsScrollInfini; i++) {
                                aTab.push(this._composeBloc(this.cache.blocs[i], i));
                            }
                        } else {
                            this.cache.blocs.forEach( (aBloc, aIndex) => {
                                aTab.push(this._composeBloc(aBloc, aIndex));
                            }
                            );
                        }
                    }
                }
                ));
                T.push('</div>');
                let lPiedListe;
                if (MethodesObjet_1.MethodesObjet.isFunction(this._options.getPiedListe)) {
                    lPiedListe = this._options.getPiedListe(this);
                    if (lPiedListe && lPiedListe.html) {
                        T.push('<div class="ObjetSaisie_pied_liste"></div>');
                    }
                }
                if (lEstMultiSelection) {
                    T.push(IE.jsx.str("div", {
                        class: "validate-conteneur"
                    }, IE.jsx.str("ie-bouton", {
                        "ie-model": "btnValidationCB",
                        "ie-node": "getNode",
                        "ie-html": "getHtml",
                        class: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                        id: this.idBtnValidation,
                        style: this.modeTactile ? ObjetStyle_1.GStyle.composeHeight(lHeightBoutonTactile) : false
                    })));
                }
                if (ObjetHtml_1.GHtml.elementExiste(this.NomListe)) {
                    ObjetHtml_1.GHtml.setDisplay(this.NomListe, true);
                    if (lEstOuvertureModale) {
                        const lConteneur = ObjetHtml_1.GHtml.getElement(this.nomListeConteneur);
                        lConteneur.classList.add('visible');
                    }
                    ObjetHtml_1.GHtml.setHtml(this.NomListe, T.join(''), {
                        controleur: this.controleur,
                        ignorerScroll: true
                    });
                    if (lEnteteListe && lEnteteListe.html) {
                        $('#' + this.NomListe.escapeJQ() + ' .ObjetSaisie_entete_liste').ieHtml(lEnteteListe.html, {
                            controleur: lEnteteListe.controleur,
                            instance: this
                        });
                    }
                    if (lPiedListe && lPiedListe.html) {
                        $('#' + this.NomListe.escapeJQ() + ' .ObjetSaisie_pied_liste').ieHtml(lPiedListe.html, {
                            controleur: lPiedListe.controleur,
                            instance: this
                        });
                    }
                    if (this.cache.scrollInfiniActif) {
                        let lTop = 0
                          , lNbLignesVisibles = 0
                          , lAvecBlocInvisible = false;
                        this.cache.blocs.forEach( (aBloc, aNumeroBloc) => {
                            if (aBloc.dessine) {
                                this._majBloc(aNumeroBloc);
                                lTop += aBloc.height;
                                lNbLignesVisibles += aBloc.lignesVisibles.length;
                            } else {
                                lAvecBlocInvisible = true;
                            }
                        }
                        );
                        if (!this.cache.heightScroll) {
                            this.cache.heightScroll = lTop;
                            if (lAvecBlocInvisible) {
                                this.cache.heightScroll = lTop / lNbLignesVisibles * this.cache.nbVisibles;
                            }
                        }
                        $('#' + this.idContenuScroll.escapeJQ()).height(this.cache.heightScroll);
                        this._majBlocsTacheFond();
                    }
                    const lEventMap = {
                        'focusin.saisie': this._surFocusLigne,
                        'pointerdown.saisie': function(event) {
                            const T = this.id.split('_');
                            const lIndice = parseInt(T[T.length - 1], 10);
                            event.data.instance.surLigne(lIndice);
                        },
                        'click.saisie': this._surClickListe,
                        'mousemove.saisie': this._surMouseMoveListe
                    };
                    $('#' + this.NomListe.escapeJQ()).off(lEventMap).on(lEventMap, '.' + lClasseJQ, {
                        instance: this
                    });
                    const lEventMap2 = {
                        focusin: this._surFocusLigne,
                        keydown: this._surKeyDownListe,
                        keyup: this._surKeyUpListe
                    };
                    $('#' + this.NomListe.escapeJQ()).off(lEventMap2).on(lEventMap2, {
                        instance: this
                    });
                }
                if (lNumeroLigneReference < 0) {
                    lNumeroLigneReference = lNumeroDerniereLigne;
                }
                this._ouvertureInverse = false;
                if (!lEstOuvertureModale) {
                    const lJLigne = lEstContenuVide ? $('#' + this.Nom.escapeJQ() + ' .ObjetSaisie_contenuvide') : $('#' + this.Nom.escapeJQ() + '_' + lNumeroLigneReference);
                    if (lJLigne.length > 0) {
                        this.hauteurContenu = lJLigne.position().top + lJLigne.outerHeight(true);
                    } else {
                        this.hauteurContenu = 0;
                    }
                    if (lEstMultiSelection) {
                        this.hauteurContenu += 1;
                    }
                    const lDecalageOmbre = 1;
                    const lJBouton = $('#' + this.bouton.getNom().escapeJQ());
                    let lPositionBouton = lJBouton.position();
                    if (!lPositionBouton) {
                        lPositionBouton = {
                            top: 0,
                            left: 0
                        };
                    }
                    const lRectOverflow = ObjetPosition_1.GPosition.getClientRect(ObjetHtml_1.GHtml.getParentOverflowNonVisible(lJBouton.get(0)));
                    const lRectBouton = ObjetPosition_1.GPosition.getClientRect(lJBouton.get(0))
                      , lJListe = $('#' + this.NomListe.escapeJQ());
                    const lCorrectionHauteur = lDecalageOmbre + 5 + ObjetPosition_1.GPosition.remToPixels(1.2) + (lEstMultiSelection ? $('#' + this.NomListe.escapeJQ() + ' .validate-conteneur').outerHeight() : 0) + (lEnteteListe && lEnteteListe.html ? $('#' + this.NomListe.escapeJQ() + ' .ObjetSaisie_entete_liste').outerHeight() + ObjetPosition_1.GPosition.remToPixels(0.4 * 2) : 0) + (lPiedListe && lPiedListe.html ? $('#' + this.NomListe.escapeJQ() + ' .ObjetSaisie_pied_liste').outerHeight() + ObjetPosition_1.GPosition.remToPixels(0.4 * 2) : 0);
                    const lHauteurVersBas = Math.min(lRectOverflow.bottom, GNavigateur.ecranH) - lRectBouton.bottom - lCorrectionHauteur;
                    const lHauteurVersHaut = lRectBouton.top - lCorrectionHauteur - lRectOverflow.top;
                    this.decalageTopOuvertureInverse = lCorrectionHauteur - 3;
                    if (this.hauteurContenu > lHauteurVersBas && lHauteurVersHaut > 20 && lHauteurVersHaut * 2 / 3 > lHauteurVersBas) {
                        this._ouvertureInverse = true;
                        this.hauteurContenu = Math.min(this.hauteurContenu, lHauteurVersHaut);
                        if (lJListe.length) {
                            lJListe.css({
                                top: -(lRectBouton.height + lDecalageOmbre) + 'px'
                            });
                        }
                    } else {
                        if (lJListe.length) {
                            lJListe.css({
                                top: (lRectBouton.height + lDecalageOmbre) + 'px'
                            });
                        }
                        this.hauteurContenu = Math.min(this.hauteurContenu, lHauteurVersBas);
                    }
                    let lLeft = lPositionBouton.left;
                    if (this._options.largeurListe) {
                        const lLeftAbs = ObjetPosition_1.GPosition.getLeft(this.Nom);
                        const lWidthListe = $('#' + this.NomListe.escapeJQ()).width();
                        if (lLeftAbs + lWidthListe > GNavigateur.clientL) {
                            lLeft = Math.max(-lLeftAbs + 2, ObjetPosition_1.GPosition.getWidth(this.Nom) - lWidthListe);
                        }
                    }
                    lJListe.css({
                        left: lLeft
                    });
                } else {
                    const lJContenu = $(`#${this.idContenu.escapeJQ()}`);
                    const lHeightContenu_bak = lJContenu.height();
                    lJContenu.height('auto');
                    const lHeightScroll = ObjetPosition_1.GPosition.getClientRect(this.idContenuScroll).height;
                    const lNodeListe = ObjetHtml_1.GHtml.getElement(this.NomListe);
                    this.hauteurContenu = Math.max(20, lHeightScroll - (lNodeListe.scrollHeight - lNodeListe.clientHeight));
                    this.hauteurContenu = Math.floor(this.hauteurContenu);
                    lJContenu.height(lHeightContenu_bak);
                }
                if (this.cache.largeurCellule === 0) {
                    this.cache.largeurCellule = ObjetHtml_1.GHtml.getElement(this.NomListe).scrollWidth;
                    this.bouton.setLargeur(this.cache.largeurCellule);
                    ObjetPosition_1.GPosition.setWidth(this.NomListe, this.cache.largeurCellule);
                }
                ObjetHtml_1.GHtml.setDisplay(this.NomListe, false);
                if (lEstOuvertureModale) {
                    ObjetHtml_1.GHtml.getElement(this.nomListeConteneur).classList.remove('visible');
                }
            }
            getNbElementsVisible() {
                let lResult = 0;
                if (this.ListeElements) {
                    for (let i = 0, lNb = this.ListeElements.count(); i < lNb; i++) {
                        const lElement = this.ListeElements.get(i);
                        if (lElement.existe() && lElement.Visible !== false) {
                            lResult++;
                        }
                    }
                }
                return lResult;
            }
            fermerListe(AAvecFocus) {
                if (this.Selection >= 0) {
                    this._majBlocsDeLigne(this.Selection, true);
                }
                if (this.listeDeroulee) {
                    this._arreterFermetureListe();
                    clearTimeout(this._timerEditionRecherche);
                    clearTimeout(this.cache.timerMAJ);
                    this._selectionLigne(this.Survolee, false);
                    this.Survolee = -1;
                    if (AAvecFocus) {
                        this.setFocus();
                    }
                    this.listeDeroulee = false;
                    this.activerEventOut = false;
                    this.bouton.setOptionsObjetCelluleBouton({
                        ariaExpanded: false,
                        ariaControls: ''
                    });
                    const lElementListe = ObjetHtml_1.GHtml.getElement(this.NomListe);
                    const lElementContenuListe = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    if (ObjetHtml_1.GHtml.estElement(lElementListe) && ObjetHtml_1.GHtml.estElement(lElementContenuListe)) {
                        lElementContenuListe.style.overflowY = 'hidden';
                        if (!this._estOuvertureModale()) {
                            ObjetStyle_1.GStyle.setZindex(lElementListe, 200);
                        }
                        const lObjet = this;
                        if (this._ouvertureInverse) {
                            $(lElementListe).css({
                                top: -lObjet.hauteurContenu - this.decalageTopOuvertureInverse
                            });
                        }
                        $(lElementContenuListe).css({
                            height: lObjet.hauteurContenu
                        }).animate({
                            height: 0
                        }, {
                            duration: this._options.dureeAnimationDeploiement,
                            step: this._ouvertureInverse ? this._etapeFermetureInverse.bind(this, $(lElementListe)) : null
                        }).queue(function() {
                            lObjet._eventAnimationFermetureFin();
                            $(this).dequeue();
                        });
                    }
                }
            }
            surLigne(ASurvolee, aSansFocusLigne) {
                if (!this.listeDeroulee) {
                    return;
                }
                const lAvecFocus = aSansFocusLigne !== true;
                if (this.Survolee !== ASurvolee && MethodesObjet_1.MethodesObjet.isNumber(ASurvolee)) {
                    this._majBlocsDeLigne(ASurvolee);
                    const N = this.ListeElements.count();
                    if (this._estSelectionnable(this.ListeElements.get(ASurvolee))) {
                        if ((this.Survolee > -1) && (this.Survolee < N)) {
                            this._selectionLigne(this.Survolee, false);
                        }
                        this.Survolee = ASurvolee;
                        this._selectionLigne(this.Survolee, true);
                    }
                    const lElementContenu = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    if (lElementContenu) {
                        const lJContenuElement = $('#' + this.Nom.escapeJQ() + '_' + this.Survolee);
                        if (lJContenuElement.length === 1) {
                            if (this.Survolee === 0) {
                                lElementContenu.scrollTop = 0;
                            } else {
                                ObjetPosition_1.GPosition.scrollToElement(lJContenuElement.get(0), lElementContenu);
                            }
                        }
                    }
                    if (lAvecFocus) {
                        ObjetHtml_1.GHtml.setFocus(this.Nom + '_' + this.Survolee);
                    }
                } else if (ASurvolee === -1) {
                    if (lAvecFocus) {
                        this._majBlocsDeLigne(ASurvolee);
                        ObjetHtml_1.GHtml.setFocus(this.NomListe);
                    }
                }
            }
            setDonneesObjetSaisie(aParams) {
                var _a, _b;
                const lParams = Object.assign({
                    liste: null,
                    selection: null,
                    deroulerListe: false,
                    actualiserListe: false,
                    ignorerSelectionAutomatiqueAvecUnElement: false,
                    options: null
                }, aParams);
                if (lParams.options) {
                    this.setOptionsObjetSaisie(lParams.options);
                }
                if (this.listeDeroulee) {
                    this.fermerListe(false);
                }
                clearTimeout(this.cache.timerMAJ);
                this.ListeElements = lParams.liste;
                this.actualiserListe = lParams.actualiserListe;
                this._trierElements();
                this.listeDeroulee = false;
                this.activerEventOut = false;
                this.cache.heightScroll = 0;
                let lAvecSelectionAutomatique = false;
                if (this._options.initAutoSelectionAvecUnElement && !this._options.multiSelection && !lParams.ignorerSelectionAutomatiqueAvecUnElement) {
                    lAvecSelectionAutomatique = this._gererCasUnSeulElement();
                }
                this._remplirListe();
                if (!lAvecSelectionAutomatique && typeof lParams.selection === 'number') {
                    this.setSelection(lParams.selection);
                }
                if (this._options.multiSelection && lParams.selection instanceof ObjetListeElements_1.ObjetListeElements) {
                    this._initListeSelections(lParams.selection);
                }
                if (lParams.deroulerListe && (this.getNbElementsVisible() > 1 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                    this._deroulerListe(lParams.selection ? null : 0);
                }
            }
            setDonnees(AListeElements, ASelection, ADeroulerListe, AActualiserListe) {
                this.setDonneesObjetSaisie({
                    liste: AListeElements,
                    selection: ASelection,
                    deroulerListe: ADeroulerListe,
                    actualiserListe: AActualiserListe
                });
            }
            setFocus() {
                this.bouton.setFocus();
                if (this._avecSaisieRechercheDynamique()) {
                    setTimeout( () => {
                        ObjetHtml_1.GHtml.setCursorAtEnd(this.bouton.NomEdit);
                    }
                    , 0);
                }
            }
            viderContenu() {
                this.setContenu('');
                $('#' + this.idContenuScroll.escapeJQ() + ', #' + this.bouton.NomEdit.escapeJQ()).attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.activedescendant), null);
            }
            setContenu(AContenu) {
                let lLibelle = '';
                if (AContenu instanceof ObjetListeElements_1.ObjetListeElements) {
                    lLibelle = this._options.getLibelleCelluleMultiSelection(AContenu);
                } else if (AContenu instanceof ObjetElement_1.ObjetElement) {
                    lLibelle = AContenu.getLibelle();
                } else {
                    lLibelle = AContenu || '';
                }
                this.bouton.setLibelle(lLibelle);
            }
            getContenu() {
                if ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode)) {
                    return this.Selection > -1 ? this.ListeElements.get(this.Selection).getLibelle() : '';
                } else {
                    return this.bouton.getLibelle();
                }
            }
            getListeElements() {
                return this.ListeElements;
            }
            estComboMultiSelection() {
                return this._options.multiSelection;
            }
            reset() {
                this.setDonnees(new ObjetListeElements_1.ObjetListeElements());
                this.viderContenu();
            }
            getSelection() {
                return this.Selection > -1 ? this.ListeElements.get(this.Selection) : null;
            }
            initSelectionParNumeroEtGenre(ANumero, AGenre, AIndiceSiNonTrouve) {
                if ((ANumero === null || ANumero === undefined) && (AGenre === null || AGenre === undefined)) {
                    ANumero = 0;
                }
                if (this.ListeElements) {
                    let LIndice = this.ListeElements.getIndiceParNumeroEtGenre(ANumero, AGenre);
                    if (LIndice === null || LIndice === undefined) {
                        LIndice = AIndiceSiNonTrouve;
                    }
                    this.initSelection(LIndice);
                }
            }
            initSelection(aSelection) {
                this.Selection = aSelection >= 0 ? aSelection : -1;
                if (this.Selection >= 0 && this._options.modifierContenuCelluleSurSelection) {
                    const lElement = this.ListeElements.get(this.Selection);
                    if (lElement) {
                        if (this._options.getContenuCellule) {
                            this._appliquerGetContenuCellule(lElement);
                        } else if (this._options.celluleAvecTexteHtml && lElement.libelleHtml) {
                            this.bouton.setLibelleHtml(lElement.libelleHtml);
                        } else {
                            this.setContenu(lElement.getLibelle());
                        }
                        const lIdDescendant = this.Nom + '_' + this.Selection;
                        $('#' + this.idContenuScroll.escapeJQ() + ', #' + this.bouton.NomEdit.escapeJQ()).attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.activedescendant), ObjetHtml_1.GHtml.getElement(lIdDescendant) ? lIdDescendant : null);
                    }
                }
                this.$refreshSelf();
            }
            setSelectionParNumeroEtGenre(ANumero, AGenre, AIndice) {
                let lResult = false;
                if ((ANumero === null || ANumero === undefined) && (AGenre === null || AGenre === undefined)) {
                    ANumero = 0;
                }
                if (this.ListeElements) {
                    let LIndice = this.ListeElements.getIndiceParNumeroEtGenre(ANumero, AGenre);
                    if (LIndice === null || LIndice === undefined) {
                        LIndice = AIndice;
                    }
                    lResult = LIndice >= 0;
                    this.setSelection(LIndice);
                }
                return lResult;
            }
            setSelectionParIndice(aIndice) {
                if (this.ListeElements.getNbrElementsExistes() <= 1) {
                    return;
                }
                this.setSelection(aIndice);
            }
            setSelectionParElement(aElement, aIndice) {
                if (aElement) {
                    this.setSelectionParNumeroEtGenre(aElement.getNumero(), aElement.getGenre(), aIndice);
                } else {
                    this.setSelectionParNumeroEtGenre(null, null, aIndice);
                }
            }
            setListeSelections(aListeSelections) {
                let lResult = false;
                if (this._infosElementsCbs) {
                    lResult = this._initListeSelections(aListeSelections);
                }
                this.surValidation(false, -1, {
                    validationMultiSelection: true
                });
                return lResult;
            }
            surPrecedentSuivant(aPrecedent) {
                this._surPrecedentSuivant(aPrecedent);
            }
            setActif(AActif) {
                super.setActif(AActif);
                this.bouton.setActif(AActif);
                this.$refreshSelf();
            }
            getDonneesPourHTMLCombo() {
                return {
                    options: this._options,
                    bouton: this.bouton
                };
            }
            _avecSaisieRechercheDynamique() {
                return this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche && !this._estOuvertureModale() && !!this._options.surEditionRecherche;
            }
            _trierElements() {
                if (this._options.avecTriListeElements && this.ListeElements) {
                    this.ListeElements.trier();
                }
            }
            _callbackRecherche(aParam) {
                const lParam = Object.assign({
                    liste: null
                }, aParam);
                if (lParam.liste && lParam.liste.count() > 0) {
                    this.ListeElements = lParam.liste;
                    this._trierElements();
                    this.fermerListe(false);
                    this._deroulerListe(0, false, true);
                } else {
                    this.fermerListe(false);
                }
            }
            _modificationSaisieBoutonRecherche(aValue) {
                this.ListeElements = new ObjetListeElements_1.ObjetListeElements();
                this.Selection = -1;
                const lValue = (aValue + '').trim();
                clearTimeout(this._timerEditionRecherche);
                if (lValue.length < this._options.nbCarMinRecherche) {
                    this.fermerListe(false);
                } else if (this._options.surEditionRecherche) {
                    this.cache.editionEnCours = true;
                    if (this._avecSaisieRechercheDynamique()) {
                        if (this._options.delaiSurEditionRecherche >= 0) {
                            this._timerEditionRecherche = setTimeout( () => {
                                this.cache.surDemandeSaisieRechercheTout = false;
                                this._options.surEditionRecherche(lValue, this._callbackRecherche.bind(this));
                            }
                            , this._options.delaiSurEditionRecherche);
                        } else {
                            this.cache.surDemandeSaisieRechercheTout = false;
                            this._options.surEditionRecherche(lValue, this._callbackRecherche.bind(this));
                        }
                    }
                }
            }
            _boutonPrecSuivOK(aPrecedent) {
                const lListe = this.ListeElements;
                if (!lListe || !lListe.count || lListe.count() < 2) {
                    return false;
                }
                if (!this.getActif()) {
                    return false;
                }
                let lIndice = this.Selection;
                const lEnBoucle = this._options.avecBoutonsPrecSuiv_boucle;
                if (lIndice === -1) {
                    if (aPrecedent) {
                        lIndice = lEnBoucle ? 0 : -1;
                    } else {
                        return lListe.count() > 0;
                    }
                }
                const lElement = lListe.get(lIndice);
                if (!lElement) {
                    return false;
                }
                if (aPrecedent && lListe.get(this.chercherIndiceSelectionSelonSens(lIndice - 1, true, lEnBoucle, this._options.getElementSelectionnableParPrecSuiv))) {
                    return true;
                }
                if (!aPrecedent && lListe.get(this.chercherIndiceSelectionSelonSens(lIndice + 1, false, lEnBoucle, this._options.getElementSelectionnableParPrecSuiv))) {
                    return true;
                }
                return false;
            }
            _parcourirFilsDeCumul(aIndice, aFunction) {
                const lInfos = this._infosElementsCbs[aIndice];
                this.ListeElements.parcourir( (D, aIndex) => {
                    if (aIndice !== aIndex && D.Visible !== false && (!lInfos.estFilsCumul || lInfos.estFilsCumul(D))) {
                        aFunction.call(this, D, aIndex);
                    }
                }
                , this);
            }
            _getSelectionElement(aInfos, aIndice) {
                const lResult = {
                    selectionne: false,
                    nbFils: 0,
                    nbFilsSelectionne: 0
                };
                if (!aInfos.estCumul) {
                    lResult.selectionne = aInfos.selectionne;
                } else {
                    this._parcourirFilsDeCumul(aIndice, (D, aIndex) => {
                        lResult.nbFils += 1;
                        const lInfosFils = this._infosElementsCbs[aIndex];
                        if (lInfosFils && lInfosFils.selectionne) {
                            lResult.nbFilsSelectionne += 1;
                        }
                    }
                    );
                    lResult.selectionne = lResult.nbFilsSelectionne > 0 && lResult.nbFilsSelectionne === lResult.nbFils;
                }
                return lResult;
            }
            getValueElementCB(aIndice) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    return this._getSelectionElement(lInfos, aIndice).selectionne;
                }
                return false;
            }
            _modifierSelectionElement(aIndice, aValue, aProfondeur) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    lInfos.selectionne = aValue;
                    const lElementSource = this.ListeElements.get(aIndice)
                      , lProfondeur = aProfondeur || 0;
                    if (lProfondeur > 1) {
                        return;
                    }
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lInfosElement = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (aIndice !== aIndex && D.Visible !== false && lInfosElement && !lInfosElement.estCumul && lInfosElement.setModifierSelection) {
                            const lResult = lInfosElement.setModifierSelection({
                                elementCourantSelectionne: lInfosElement.selectionne,
                                elementSource: lElementSource,
                                elementSourceSelectionne: aValue
                            });
                            if ((lResult === true && lInfosElement.selectionne !== true) || (lResult === false && lInfosElement.selectionne !== false)) {
                                this._modifierSelectionElement(aIndex, lResult, lProfondeur + 1);
                            }
                        }
                    }
                    , this);
                }
            }
            _setValueElementCB(aIndice, aValue) {
                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndice] : null;
                if (lInfos) {
                    if (lInfos.estCumul) {
                        this._parcourirFilsDeCumul(aIndice, (D, aIndex) => {
                            this._modifierSelectionElement(aIndex, aValue);
                        }
                        );
                    } else {
                        this._modifierSelectionElement(aIndice, aValue);
                    }
                }
            }
            _surPrecedentSuivant(aPrecedent) {
                let lIndice = this.Selection;
                const lListe = this.ListeElements;
                const lEnBoucle = this._options.avecBoutonsPrecSuiv_boucle;
                const lMethodeSelec = this._options.getElementSelectionnableParPrecSuiv;
                if (this._options.multiSelection && lListe) {
                    lListe.parcourir( (D, aIndex) => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (lInfos && !lInfos.estCumul && lInfos.selectionne) {
                            lIndice = aIndex;
                            if (aPrecedent) {
                                return false;
                            }
                        }
                    }
                    , this);
                }
                if (lIndice === -1 && aPrecedent) {
                    lIndice = lEnBoucle ? 0 : -1;
                }
                if (MethodesObjet_1.MethodesObjet.isNumber(lIndice) && lListe && lListe.get) {
                    if (aPrecedent && (lListe.get(lIndice - 1) || lEnBoucle)) {
                        lIndice = this.chercherIndiceSelectionSelonSens(lIndice - 1, true, lEnBoucle, lMethodeSelec);
                    } else if (!aPrecedent && (lListe.get(lIndice + 1) || lEnBoucle)) {
                        lIndice = this.chercherIndiceSelectionSelonSens(lIndice + 1, false, lEnBoucle, lMethodeSelec);
                    }
                    if (lIndice >= 0) {
                        if (this._options.multiSelection) {
                            lListe.parcourir( (D, aIndex) => {
                                const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                                if (lInfos && lInfos.selectionne) {
                                    lInfos.selectionne = false;
                                }
                            }
                            , this);
                            this._setValueElementCB(lIndice, true);
                            this.surValidation(true, lIndice);
                        } else {
                            this.surValidation(true, lIndice);
                        }
                    }
                }
            }
            _getLargeurListe() {
                return this.modeTactile ? (window.innerWidth || document.body.offsetWidth) / 2 : this._options.largeurListe ? this._options.largeurListe : $('#' + this.bouton.getNom().escapeJQ()).width();
            }
            _surEvenementBouton(aGenreEvent, aEvent, aEvenementSurEdit) {
                var _a;
                switch (aGenreEvent) {
                case Enumere_Event_1.EEvent.SurMouseDown:
                    if (aEvenementSurEdit) {
                        if ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode)) {
                            this.surSelection();
                        }
                    } else {
                        this.surSelection({
                            surBoutonCellule: true
                        });
                    }
                    break;
                case Enumere_Event_1.EEvent.SurKeyUp:
                    switch (this._options.mode) {
                    case Enumere_Saisie_1.EGenreSaisie.Combo:
                        {
                            if (!this.listeDeroulee) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                                    this._deroulerListe();
                                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Debut) {
                                    this._deroulerListe(0);
                                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                                    this._deroulerListe(this._getDerniereLingeSelectionnable());
                                }
                            }
                            if (!this.listeDeroulee && !aEvent.altKey && (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche || aEvent.which === ToucheClavier_1.ToucheClavier.FlecheDroite) && !this._options.multiSelection && !((_a = ObjetHtml_1.GHtml.getElement(this.getNom())) === null || _a === void 0 ? void 0 : _a.closest('[role="toolbar"]'))) {
                                this._surPrecedentSuivant(aEvent.which === ToucheClavier_1.ToucheClavier.FlecheGauche);
                            }
                            break;
                        }
                    case Enumere_Saisie_1.EGenreSaisie.SaisieRecherche:
                        {
                            const lNbVisibles = this.getNbElementsVisible();
                            if (!this.listeDeroulee && aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas && (lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                                this._deroulerListe(0, true);
                            } else {
                                this._defilerFleches(aEvent);
                            }
                            if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent)) {
                                if (this.listeDeroulee && (lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements)) {
                                    this.surValidation(true, this.Selection >= 0 ? this.Selection : 0);
                                } else if ((lNbVisibles > 0 || !this._options.deroulerListeSeulementSiPlusieursElements) && !this.actualiserListe) {
                                    if (lNbVisibles > 1 || !this._options.deroulerListeSeulementSiPlusieursElements) {
                                        this._deroulerListe(0, true);
                                    } else {
                                        this._gererCasUnSeulElement();
                                    }
                                } else {
                                    this.surValidation(false, -1, {
                                        saisieRecherche: true
                                    });
                                }
                            }
                            return;
                        }
                    }
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                        this.surSelection();
                    }
                    break;
                case Enumere_Event_1.EEvent.SurFocusOut:
                    switch (this._options.mode) {
                    case Enumere_Saisie_1.EGenreSaisie.SaisieRecherche:
                        if (this._avecSaisieRechercheDynamique()) {
                            this._declencherFermetureListe();
                        }
                        break;
                    }
                    break;
                }
            }
            _appliquerGetContenuCellule(aElement) {
                if (!aElement) {
                    this.setContenu('');
                    return;
                }
                const lContenuCellule = this._options.getContenuCellule(aElement, this);
                if (typeof lContenuCellule === 'string') {
                    if (lContenuCellule) {
                        this.setContenu(lContenuCellule);
                    }
                } else if (lContenuCellule) {
                    if (MethodesObjet_1.MethodesObjet.isString(lContenuCellule.libelleHtml)) {
                        this.bouton.setLibelleHtml(lContenuCellule.libelleHtml);
                    } else if (MethodesObjet_1.MethodesObjet.isString(lContenuCellule.libelle)) {
                        this.setContenu(lContenuCellule.libelle);
                    }
                }
            }
            _getParamsCallback(aParams) {
                return Object.assign({
                    combo: this,
                    genreEvenement: -1,
                    element: null,
                    indice: null,
                    genre: this.Genre,
                    surSetDonnees: null,
                    listeSelections: null,
                    estComboMultiSelection: this._options.multiSelection,
                    interactionUtilisateur: this.InteractionUtilisateur,
                    estSelectionManuelle: false,
                    editionEnCours: this.cache.editionEnCours,
                    valeur: null,
                    saisieRecherche: false,
                    validationMultiSelection: false,
                    surBoutonCellule: false
                }, aParams);
            }
            _callback(aParams) {
                return this.callback.appel(aParams);
            }
            _retourSurNavigation(aParams) {
                if (aParams.retourSaisieAnnule) {
                    this.setEtatSaisie(false);
                }
                const lSurSetDonnes = this._surSetDonnnes;
                const lParams = this._getParamsCallback(Object.assign({
                    genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection,
                    element: this.Selection >= 0 ? this.ListeElements.get(this.Selection) : null,
                    indice: this.Selection || 0,
                    genre: this.Genre,
                    surSetDonnees: lSurSetDonnes,
                    listeSelections: this._listeSelections,
                    estSelectionManuelle: this.InteractionUtilisateur
                }, aParams));
                delete this._surSetDonnnes;
                if (lParams.element && lParams.element.callbackSelection && MethodesObjet_1.MethodesObjet.isFunction(lParams.element.callbackSelection)) {
                    lParams.element.callbackSelection(lParams);
                }
                this._callback(lParams);
                if (this._options.surValidation) {
                    this._options.surValidation.call(this.Pere, lParams);
                }
                if (this.Pere && this.Pere instanceof ObjetIdentite_1.Identite && this.Pere.$refreshSelf) {
                    this.Pere.$refreshSelf();
                }
                if (this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche) {
                    this.ListeElements = new ObjetListeElements_1.ObjetListeElements();
                }
            }
            _survolBoutonMultiSelection() {
                this._selectionLigne(this.Survolee, false);
                this.Survolee += 1;
            }
            _defilerFleches(aEvent, aSurKeyDown) {
                if (this.listeDeroulee) {
                    if (this._estEventFermetureFleche(aEvent)) {
                        if (!aSurKeyDown) {
                            this.fermerListe(true);
                        }
                        return false;
                    }
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                        if (this._chercherSuivantSelectionnable(this.Survolee, true) < this.ListeElements.count()) {
                            this.surLigne(this._chercherSuivantSelectionnable(this.Survolee, true));
                            return true;
                        }
                        if (this._options.multiSelection && this.Survolee < this.ListeElements.count()) {
                            this._survolBoutonMultiSelection();
                            ObjetHtml_1.GHtml.setFocus(this.idBtnValidation, true);
                            return true;
                        }
                    }
                    if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut) {
                        if (this._chercherSuivantSelectionnable(this.Survolee, false) > -1) {
                            this.surLigne(this._chercherSuivantSelectionnable(this.Survolee, false));
                        }
                        return true;
                    }
                }
                return false;
            }
            _defiler(aEvent, aIgnorerFleches) {
                if (!this.listeDeroulee && ([Enumere_Saisie_1.EGenreSaisie.Combo].includes(this._options.mode))) {
                    if (ToucheClavier_1.ToucheClavierUtil.estEventRetourChariot(aEvent)) {
                        this._deroulerListe();
                    }
                }
                if (this.listeDeroulee) {
                    if (ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent) || this._estEventFermetureFleche(aEvent)) {
                        this._surValidationClavier();
                    } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Echap) {
                        this.fermerListe(true);
                    } else if (!(!aIgnorerFleches && this._defilerFleches(aEvent)) && ToucheClavier_1.ToucheClavierUtil.estEventCaractereAlphaNumerique(aEvent)) {
                        clearTimeout(this._timerInitParseur);
                        this._timerInitParseur = setTimeout(this._initParseur.bind(this), 500);
                        this._parseur = this._parseur + aEvent.key;
                        const lIndice = this.ListeElements.getIndiceParParsingLibelle(this._parseur);
                        if (lIndice >= 0) {
                            this.surLigne(lIndice);
                        }
                    }
                }
            }
            _surValidationClavier() {
                if (this._options.multiSelection) {
                    this._setValueElementCB(this.Survolee, !this.getValueElementCB(this.Survolee));
                    this.$refreshSelf();
                } else {
                    this.surValidation(true, this.Survolee);
                }
            }
            _estEventFermetureFleche(aEvent) {
                return aEvent && aEvent.altKey && aEvent.which === ToucheClavier_1.ToucheClavier.FlecheHaut;
            }
            _initParseur() {
                this._parseur = '';
            }
            _chercherSuivantSelectionnable(aIndice, aSensSuivant) {
                const lSens = aSensSuivant ? 1 : -1;
                aIndice = aIndice + lSens;
                const N = this.ListeElements.count();
                while ((aIndice > -1) && (aIndice < N) && this.ListeElements && this.ListeElements.get(aIndice) && !this._estSelectionnable(this.ListeElements.get(aIndice))) {
                    aIndice += lSens;
                }
                return aIndice;
            }
            _initInfosElementsCBs(aNumeroLigne) {
                const lElement = this.ListeElements.get(aNumeroLigne);
                const lSelectionnable = !!this._estSelectionnable(lElement);
                this._infosElementsCbs[aNumeroLigne] = {
                    selectionne: lSelectionnable && !!this._listeSelections.getElementParElement(lElement),
                    avecCB: lSelectionnable,
                    selectionnable: lSelectionnable,
                    nonEditable: false,
                    estCumul: false,
                    estFilsCumul: null,
                    setModifierSelection: null
                };
                if (this._options.getInfosElementCB && lElement) {
                    $.extend(this._infosElementsCbs[aNumeroLigne], this._options.getInfosElementCB(lElement));
                }
            }
            _composeLigne(aElement, I, aLignesVisibles) {
                const T = [];
                if (!aElement) {
                    return '';
                }
                let LLibelle = aElement.getLibelle();
                const lPaddingLeft = 3;
                const lParams = {
                    element: aElement,
                    indice: I,
                    largeur: this.cache.largeurContenu - lPaddingLeft
                };
                const lEstCumul = !!(this._options.getEstCumul && this._options.getEstCumul(aElement));
                const lClassElement = this._options.getClassElement ? this._options.getClassElement(lParams) : lEstCumul ? 'titre-liste' : '';
                let lAvecEllipsis = !aElement.libelleHtmlTitle && !this._options.getContenuElement && !this._estOuvertureModale();
                if (this.cache.avecSurlignage && this.cache.recherchesSurlignage && !aElement.libelleHtml && !this._options.getContenuElement && (!this._options.avecSurlignageElement || this._options.avecSurlignageElement(lParams))) {
                    LLibelle = ObjetChaine_1.GChaine.getLibelleSurligne(LLibelle, this.cache.recherchesSurlignage, {
                        couleur: this._options.couleurSurlignageSuggestion
                    });
                }
                LLibelle = ObjetChaine_1.GChaine.avecEspaceSiVide(LLibelle);
                const lAvecSelection = this._estSelectionnable(aElement);
                T.push('<li', (!!lClassElement ? ' class="' + lClassElement + '"' : ''), ' role="presentation">');
                if (aElement.ClassAffichage || aElement.StyleAffichage) {
                    LLibelle = '<div ' + (lAvecEllipsis ? ' ie-ellipsis ' : '') + (aElement.ClassAffichage ? 'class="' + aElement.ClassAffichage + '" ' : '') + (aElement.StyleAffichage ? 'style="' + aElement.StyleAffichage + '"' : '') + '>' + LLibelle + '</div>';
                    lAvecEllipsis = false;
                }
                if (this.cache.avecCBMultiSelection && this._infosElementsCbs && this._infosElementsCbs[lParams.indice] && this._infosElementsCbs[lParams.indice].avecCB) {
                    T.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                        class: "check-conteneur",
                        role: "presentation",
                        "ie-node": (0,
                        jsx_1.jsxFuncAttr)('getNodeCBMulti', [I])
                    }, IE.jsx.str("ie-checkbox", {
                        "aria-hidden": "true",
                        tabindex: "-1",
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('cbElement', [I])
                    }))));
                }
                const lGetIdLigne = (aLigne) => {
                    return `${this.Nom}_${aLigne}`;
                }
                ;
                const lLineHeight = (this.modeTactile ? this._options.hauteurLigneTactile : this._options.hauteur ? this._options.hauteur : this._options.hauteurLigneDefault);
                let lRole = 'option';
                let lAriaOwns = [];
                if (!lAvecSelection) {
                    if (lEstCumul) {
                        lRole = 'group';
                        aLignesVisibles.forEach( (aNumeroLigne) => {
                            const lLigne = this.ListeElements.get(aNumeroLigne);
                            if (lLigne !== aElement && this._options.getEstFilsDeCumul && this._options.getEstFilsDeCumul(lLigne, aElement)) {
                                lAriaOwns.push(lGetIdLigne(aNumeroLigne));
                            }
                        }
                        );
                    } else {
                        lRole = 'presentation';
                    }
                }
                T.push(IE.jsx.str("div", {
                    id: lGetIdLigne(I),
                    role: lRole,
                    "ie-attr": lAvecSelection ? (0,
                    jsx_1.jsxFuncAttr)('getAttrWAIOption', I) : false,
                    "ie-hint": aElement.libelleHtmlTitle ? aElement.libelleHtmlTitle : '',
                    "ie-ellipsis": lAvecEllipsis,
                    class: ['as-li', lClasseJQ],
                    style: 'line-height:' + (lLineHeight * 0.1) + 'rem; overflow: hidden;',
                    tabindex: lAvecSelection ? '-1' : false,
                    "aria-owns": lAriaOwns.length > 0 ? lAriaOwns.join(' ') : false,
                    "aria-label": lRole === 'group' ? LLibelle : false
                }, () => {
                    if (aElement.libelleHtml || this._options.getContenuElement) {
                        const lContenu = this._options.getContenuElement ? this._options.getContenuElement(lParams) : aElement.libelleHtml;
                        if (this.modeTactile) {
                            return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                                class: "InlineBlock",
                                style: "height:100%;width:0;"
                            }, "\u00A0"), IE.jsx.str("div", {
                                class: "InlineBlock",
                                style: "line-height:initial; width:100%;"
                            }, lContenu));
                        }
                        return lContenu;
                    } else {
                        return LLibelle;
                    }
                }
                ));
                T.push('</li>');
                return T.join('');
            }
            _composeBloc(aBloc, aNumeroBloc) {
                const T = [];
                if (aBloc && aBloc.lignesVisibles) {
                    aBloc.dessine = true;
                    aBloc.calcule = false;
                    aBloc.top = 0;
                    aBloc.height = 0;
                    if (this.cache.scrollInfiniActif) {
                        T.push('<li id="', this.idBloc + aNumeroBloc, '" style="position:absolute;top:-1000px" role="presentation">');
                        T.push('<ul class="liste-as-options', (this.cache.avecCBMultiSelection ? ' multi-selections ' : ''), '" role="presentation">');
                    }
                    aBloc.lignesVisibles.forEach( (aNumeroLigne) => {
                        T.push(this._composeLigne(this.ListeElements.get(aNumeroLigne), aNumeroLigne, aBloc.lignesVisibles));
                    }
                    );
                    if (this.cache.scrollInfiniActif) {
                        T.push('</ul>');
                        T.push('</li>');
                    }
                }
                return T.join('');
            }
            _majBlocsTacheFond() {
                clearTimeout(this.cache.timerMAJ);
                if (!this.listeDeroulee) {
                    return;
                }
                if (this.cache.toutCalcule) {
                    return;
                }
                let lNumeroACalculer = 0;
                const lToutCalcule = this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (!aBloc.calcule) {
                        lNumeroACalculer = aNumeroBloc;
                    }
                    return !!aBloc.calcule;
                }
                );
                if (lNumeroACalculer > 0) {
                    this.cache.timerMAJ = setTimeout(function(aNumeroBloc) {
                        const lBloc = this.cache.blocs[aNumeroBloc];
                        const lASupprimer = !lBloc.dessine;
                        this._majBloc(aNumeroBloc);
                        if (lASupprimer) {
                            $('#' + (this.idBloc + aNumeroBloc).escapeJQ()).remove();
                            lBloc.dessine = false;
                        }
                        this._majBlocsTacheFond();
                    }
                    .bind(this, lNumeroACalculer), 0);
                }
                if (!this.cache.toutCalcule && lToutCalcule) {
                    this.cache.toutCalcule = true;
                    if (this._options.callbackToutCalcule) {
                        this._options.callbackToutCalcule();
                    }
                    const lDernierBloc = this.cache.blocs[this.cache.blocs.length - 1];
                    const lHeightScroll = lDernierBloc.top + lDernierBloc.height;
                    if (lHeightScroll !== this.cache.heightScroll) {
                        this.cache.heightScroll = lHeightScroll;
                        $('#' + this.idContenuScroll.escapeJQ()).height(lHeightScroll);
                    }
                }
            }
            _majBloc(aNumeroBloc, aSurFermeture) {
                if (!aSurFermeture) {
                    const lBlocPrecedent = this.cache.blocs[aNumeroBloc - 1];
                    if (lBlocPrecedent && !lBlocPrecedent.calcule) {
                        this._majBloc(aNumeroBloc - 1);
                    }
                }
                const lBloc = this.cache.blocs[aNumeroBloc];
                if (!lBloc) {
                    return;
                }
                if (!lBloc.dessine) {
                    lBloc.dessine = true;
                    ObjetHtml_1.GHtml.addHtml(this.idContenuScroll, this._composeBloc(lBloc, aNumeroBloc), {
                        controleur: this.controleur,
                        ignorerScroll: true
                    });
                }
                if (!lBloc.calcule && !aSurFermeture) {
                    const lJBloc = $('#' + (this.idBloc + aNumeroBloc).escapeJQ());
                    lBloc.height = lJBloc.height();
                    lBloc.top = aNumeroBloc === 0 ? 0 : this.cache.blocs[aNumeroBloc - 1].top + this.cache.blocs[aNumeroBloc - 1].height;
                    lBloc.calcule = true;
                    lJBloc.css('top', lBloc.top);
                }
            }
            _visibiliteSurNumeroBloc(aNumeroBlocVisible, aSurFermeture) {
                this.cache.blocs.forEach( (aBloc, aNumeroBloc) => {
                    const lVisible = aSurFermeture ? aNumeroBloc === aNumeroBlocVisible : aNumeroBloc <= aNumeroBlocVisible + this._options.nbBlocsScrollInfini && aNumeroBloc >= aNumeroBlocVisible - this._options.nbBlocsScrollInfini;
                    const lSurvolSurBloc = aBloc.debut <= this.Survolee && aBloc.fin >= this.Survolee;
                    if (lVisible) {
                        const lEstDejaDessine = aBloc.dessine;
                        this._majBloc(aNumeroBloc, aSurFermeture);
                        if (!lEstDejaDessine && lSurvolSurBloc) {
                            this._selectionLigne(this.Survolee, true);
                            ObjetHtml_1.GHtml.setFocus(this.Nom + '_' + this.Survolee);
                        }
                    } else {
                        if (aBloc.dessine) {
                            $('#' + (this.idBloc + aNumeroBloc).escapeJQ()).remove();
                        }
                        aBloc.dessine = false;
                        if (lSurvolSurBloc) {
                            ObjetHtml_1.GHtml.setFocus(this.idContenu);
                        }
                    }
                }
                );
            }
            _majBlocsDeLigne(aLigne, aSurFermeture) {
                if (!this.cache.scrollInfiniActif) {
                    return;
                }
                let lNumeroBloc = 0;
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    lNumeroBloc = aNumeroBloc;
                    return aLigne >= 0 && (aLigne < aBloc.debut || aLigne > aBloc.fin);
                }
                );
                this._visibiliteSurNumeroBloc(lNumeroBloc, aSurFermeture);
                if (!aSurFermeture) {
                    this._majBlocsTacheFond();
                }
            }
            _majBlocsDeTop(aTop) {
                if (!this.cache.scrollInfiniActif) {
                    return;
                }
                let lNumeroBlocVisible = 0;
                let lTrouve = false;
                let lDernierBlocCalcule = 0;
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (aBloc.calcule) {
                        lDernierBlocCalcule = aNumeroBloc;
                    }
                    return !!aBloc.calcule;
                }
                );
                this.cache.blocs.every( (aBloc, aNumeroBloc) => {
                    if (aBloc.calcule && aBloc.top <= aTop && (aBloc.top + aBloc.height) > aTop) {
                        lNumeroBlocVisible = aNumeroBloc;
                        lTrouve = true;
                    }
                    return !lTrouve;
                }
                );
                if (!lTrouve) {
                    if (lDernierBlocCalcule >= 0) {
                        this._majBloc(lDernierBlocCalcule + 1);
                        this._majBlocsDeTop(aTop);
                    }
                    return;
                }
                this._visibiliteSurNumeroBloc(lNumeroBlocVisible);
                this._majBlocsTacheFond();
            }
            _surFocusLigne(event) {
                event.data.instance._arreterFermetureListe();
            }
            _surKeyDownListe(aEvent) {
                const lThis = aEvent.data.instance;
                if (lThis.listeDeroulee && aEvent.which === ToucheClavier_1.ToucheClavier.Tab) {
                    if (!lThis._options.multiSelection) {
                        lThis._surValidationClavier();
                    }
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Debut) {
                    lThis.surLigne(lThis.chercherIndiceSelectionSelonSens(0));
                } else if (aEvent.which === ToucheClavier_1.ToucheClavier.Fin) {
                    lThis.surLigne(lThis._getDerniereLingeSelectionnable());
                } else {
                    lThis._defilerFleches(aEvent, true);
                }
            }
            _surKeyUpListe(event) {
                event.data.instance._defiler(event, true);
                if (event.which === ToucheClavier_1.ToucheClavier.Echap) {
                    GNavigateur.stopperEvenement(event.originalEvent);
                }
            }
            _selectionnerUnElementEnMultiSelection(aIndice) {
                if (this._infosElementsCbs && this._infosElementsCbs[aIndice] && !this._infosElementsCbs[aIndice].selectionnable) {
                    return false;
                }
                if (this.ListeElements) {
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lInfos = this._infosElementsCbs ? this._infosElementsCbs[aIndex] : null;
                        if (lInfos && lInfos.selectionne) {
                            lInfos.selectionne = false;
                        }
                    }
                    , this);
                }
                this._setValueElementCB(aIndice, true);
                return true;
            }
            _surClickListe(event) {
                const T = this.id.split('_')
                  , lIndice = parseInt(T[T.length - 1], 10)
                  , lInstance = event.data.instance;
                if (lInstance._options.multiSelection) {
                    lInstance._selectionnerUnElementEnMultiSelection(lIndice);
                }
                lInstance.surValidation(true, lIndice);
            }
            _surMouseMoveListe(event) {
                const T = this.id.split('_');
                const lIndice = parseInt(T[T.length - 1], 10);
                const lInstance = event.data.instance;
                lInstance.surLigne(lIndice);
                lInstance._arreterFermetureListe();
            }
            _avecDeroulerListe() {
                const lNbVisibles = this.getNbElementsVisible();
                return lNbVisibles > 1 || (lNbVisibles > 0 && this._options.mode === Enumere_Saisie_1.EGenreSaisie.SaisieRecherche) || (lNbVisibles > 0 && this._options.multiSelection && this._options.mode === Enumere_Saisie_1.EGenreSaisie.Combo) || (!this._options.deroulerListeSeulementSiPlusieursElements && lNbVisibles <= 1);
            }
            _estOuvertureModale() {
                if (this._options.avecOuvertureDeroulantModale === true) {
                    return true;
                }
                if (this._options.avecOuvertureDeroulantModale === false) {
                    return false;
                }
                return IE.estMobile;
            }
            _deroulerListe(ASurvolee, aListeDejaRemplie, aSansFocusLigne) {
                if (this.listeDeroulee) {
                    this.fermerListe();
                    this.listeDeroulee = false;
                    return;
                }
                const lParams = this._getParamsCallback({
                    genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.deploiement
                });
                if (this._callback(lParams) === false) {
                    if (this.Pere && this.Pere.$refreshSelf) {
                        this.Pere.$refreshSelf();
                    }
                    return;
                }
                if (this._avecDeroulerListe()) {
                    this._arreterFermetureListe();
                    if (this._avecSaisieRechercheDynamique()) {
                        setTimeout(this._arreterFermetureListe.bind(this), 0);
                    }
                    if (!aListeDejaRemplie) {
                        this._remplirListe();
                    }
                    this.listeDeroulee = true;
                    this.bouton.setOptionsObjetCelluleBouton({
                        ariaExpanded: true,
                        ariaControls: this.idContenuScroll
                    });
                    const lElementListe = ObjetHtml_1.GHtml.getElement(this.NomListe);
                    const lElementContenuListe = ObjetHtml_1.GHtml.getElement(this.idContenu);
                    ObjetHtml_1.GHtml.setDisplay(lElementListe, true);
                    lElementContenuListe.style.overflowY = 'hidden';
                    if (this._estOuvertureModale()) {
                        const lCont = ObjetHtml_1.GHtml.getElement(this.nomListeConteneur);
                        lCont.classList.add('visible');
                        lCont.offsetWidth;
                        lCont.classList.add('active');
                        if (IE.estMobile && GNavigateur.getZIndexModalMobile) {
                            lCont.style.zIndex = GNavigateur.getZIndexModalMobile(true) + '';
                        }
                    } else {
                        ObjetStyle_1.GStyle.setZindex(lElementListe, 500);
                        this.activerEventOut = false;
                        setTimeout( () => {
                            this.activerEventOut = true;
                        }
                        , 50);
                    }
                    const lObjet = this;
                    $(lElementContenuListe).css({
                        height: 0
                    }).animate({
                        height: lObjet.hauteurContenu + 'px'
                    }, this._options.dureeAnimationDeploiement);
                    if (this._ouvertureInverse) {
                        $(lElementListe).css({
                            top: -this.decalageTopOuvertureInverse
                        }).animate({
                            top: -(lObjet.hauteurContenu + this.decalageTopOuvertureInverse) + 'px'
                        }, this._options.dureeAnimationDeploiement);
                    }
                    $(lElementContenuListe).queue(function() {
                        $('#' + lObjet.idContenu.escapeJQ()).css('overflowY', 'auto');
                        lObjet._eventAnimationOuvertureFin(ASurvolee, aSansFocusLigne);
                        $(this).dequeue();
                    });
                } else {
                    this._gererCasUnSeulElement();
                }
            }
            _eventAnimationOuvertureFin(ASurvolee, aSansFocusLigne) {
                let lNumeroLigne = ASurvolee === null || ASurvolee === undefined ? this.Selection === null || this.Selection === undefined ? 0 : this.Selection : ASurvolee;
                lNumeroLigne = this.chercherIndiceSelectionSelonSens(lNumeroLigne >= 0 ? lNumeroLigne : 0);
                this.surLigne(lNumeroLigne, aSansFocusLigne);
            }
            _declencherFermetureListe(AAvecFocus) {
                clearTimeout(this.Timer);
                this.Timer = setTimeout(this.fermerListe.bind(this, AAvecFocus), 100);
            }
            _arreterFermetureListe() {
                clearTimeout(this.Timer);
                this.Timer = null;
            }
            _etapeFermetureInverse(aJElement, aNow) {
                aJElement.css({
                    top: -aNow - this.decalageTopOuvertureInverse
                });
            }
            _eventAnimationFermetureFin() {
                if (this._estOuvertureModale()) {
                    ObjetHtml_1.GHtml.getElement(this.nomListeConteneur).classList.remove('visible');
                    if (IE.estMobile && GNavigateur.getZIndexModalMobile) {
                        GNavigateur.getZIndexModalMobile(false);
                    }
                }
                setTimeout(ObjetHtml_1.GHtml.setDisplay.bind(ObjetHtml_1.GHtml, this.NomListe, false), 5);
                if (this._options.avecEventSurFermetureListe) {
                    this._callback(this._getParamsCallback({
                        genreEvenement: Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.fermeture,
                        indice: 0
                    }));
                    if (this.Pere && this.Pere instanceof ObjetIdentite_1.Identite && this.Pere.$refreshSelf) {
                        this.Pere.$refreshSelf();
                    }
                }
            }
            _estSelectionnable(aElement) {
                return !!aElement && aElement.AvecSelection !== false && aElement.Visible !== false && (!this._options.getEstElementNonSelectionnable || this._options.getEstElementNonSelectionnable(aElement) !== true);
            }
            _selectionLigne(aLigne, aSelectionner) {
                if ((aLigne > -1) && (aLigne < this.ListeElements.count())) {
                    const lElement = this.ListeElements.get(aLigne);
                    if (aSelectionner && !this._estSelectionnable(lElement)) {
                        return;
                    }
                    const lJDOM = $(`#${this.Nom.escapeJQ() + '_' + aLigne}`);
                    if (lJDOM.length === 0) {
                        return;
                    }
                    if (aSelectionner) {
                        lJDOM.attr('tabindex', '0');
                    } else {
                        lJDOM.attr('tabindex', '-1');
                    }
                    if (this._options.avecFondSelectionSurSurvol) {
                        if (aSelectionner) {
                            lJDOM.addClass('selected');
                        } else {
                            lJDOM.removeClass('selected');
                        }
                    }
                    if (this._options.avecGrasSurSurvol) {
                        if (aSelectionner) {
                            lJDOM.addClass('Gras');
                        } else {
                            lJDOM.removeClass('Gras');
                        }
                    }
                }
            }
            _gererCasUnSeulElement() {
                let lResult = false;
                if (this.getNbElementsVisible() === 1) {
                    let LLibelle = '';
                    let lEstHtml = false;
                    let lElement;
                    const lIndex = this.ListeElements.getIndiceElementParFiltre( (aEl) => {
                        return aEl.Visible !== false;
                    }
                    );
                    lElement = this.ListeElements.get(lIndex);
                    if (lElement) {
                        LLibelle = lElement.getLibelle();
                        if (this._options.getContenuElement) {
                            LLibelle = this._options.getContenuElement({
                                element: lElement,
                                indice: lIndex
                            });
                        } else if (this._options.celluleAvecTexteHtml && lElement.libelleHtml) {
                            LLibelle = lElement.libelleHtml;
                            lEstHtml = true;
                        }
                    }
                    if (LLibelle) {
                        this.Selection = lIndex;
                        if (this._options.controlerNbrElements) {
                            ObjetHtml_1.GHtml.setHtml(this.Nom, '<span class="Gras Insecable">' + LLibelle + '</span>');
                        }
                        this.surValidation(false, this.Selection);
                        lResult = true;
                    } else {
                        this.Selection = -1;
                    }
                    if (this._options.modifierContenuCelluleSurSelection) {
                        if (this._options.getContenuCellule) {
                            this._appliquerGetContenuCellule(lElement);
                        } else if (lEstHtml) {
                            this.bouton.setLibelleHtml(LLibelle);
                        } else {
                            this.setContenu(LLibelle);
                        }
                        const lIdDescendant = this.Selection > -1 ? this.Nom + '_' + this.Selection : '';
                        $('#' + this.idContenuScroll.escapeJQ() + ', #' + this.bouton.NomEdit.escapeJQ()).attr(ObjetWAI_1.GObjetWAI.getAttribut(ObjetWAI_1.EGenreAttribut.activedescendant), ObjetHtml_1.GHtml.getElement(lIdDescendant) ? lIdDescendant : null);
                    }
                }
                this.$refreshSelf();
                return lResult;
            }
            _initListeSelections(aListeSelections) {
                const lListeSelections = MethodesObjet_1.MethodesObjet.dupliquer(aListeSelections);
                if (!this._listeSelections) {
                    this._listeSelections = new ObjetListeElements_1.ObjetListeElements();
                }
                this._listeSelections.vider();
                let lResult = false;
                if (this.ListeElements) {
                    this.ListeElements.parcourir( (D, aIndex) => {
                        const lElement = lListeSelections ? lListeSelections.getElementParNumero(D.getNumero()) : null;
                        if (lElement) {
                            lResult = true;
                            this._listeSelections.addElement(lElement);
                            if (this._infosElementsCbs && this._infosElementsCbs[aIndex]) {
                                this._infosElementsCbs[aIndex].selectionne = true;
                            }
                        } else if (this._infosElementsCbs && this._infosElementsCbs[aIndex]) {
                            this._infosElementsCbs[aIndex].selectionne = false;
                        }
                    }
                    );
                }
                return lResult;
            }
            _getDerniereLingeSelectionnable() {
                return this.ListeElements && this.ListeElements.count ? this.chercherIndiceSelectionSelonSens(this.ListeElements.count() - 1, true) : 0;
            }
        }
        exports.ObjetSaisie = ObjetSaisie;
        const lClasseJQ = GUID_1.GUID.getClassCss();
    },
    fn: 'objetsaisie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetSaisie_1 = require("ObjetSaisie");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetIdentite_1 = require("ObjetIdentite");
        IEHtml.addBalise('ie-combo', (aContexteCourant, aOutils) => {
            function _listesIdentiques(aListe1, aListe2) {
                return aListe1 && aListe1.listeIdentiqueParElementsOrdonnes ? aListe1.listeIdentiqueParElementsOrdonnes(aListe2) : false;
            }
            const lModele = aOutils.getModel(aContexteCourant)
              , const_forcerActualisation = 'forcer_Actualisation';
            if (!lModele) {
                return;
            }
            const lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant)
              , lInfosInit = aOutils.getAccesParametresModel('init', aContexteCourant)
              , lInfosGetDonnees = aOutils.getAccesParametresModel('getDonnees', aContexteCourant)
              , lInfosGetIndice = aOutils.getAccesParametresModel('getIndiceSelection', aContexteCourant)
              , lInfosSetIndice = aOutils.getAccesParametresModel('setIndiceSelection', aContexteCourant)
              , lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant)
              , lInfosDestroy = aOutils.getAccesParametresModel('destroy', aContexteCourant)
              , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant)
              , lAvecControleSaisie = aOutils.getControleSaisieEvent(aContexteCourant)
              , lRefresh = aContexteCourant.contexte.refresh;
            let lListeSelectionsBackup = null;
            const lStrAriaLabel = aContexteCourant.node.getAttribute('aria-label');
            if (lStrAriaLabel) {
                aContexteCourant.node.removeAttribute('aria-label');
            }
            const lStrAriaLabelledBy = aContexteCourant.node.getAttribute('aria-labelledby');
            if (lStrAriaLabelledBy) {
                aContexteCourant.node.removeAttribute('aria-labelledby');
            }
            const lStrAriaDescribedBy = aContexteCourant.node.getAttribute('aria-describedby');
            if (lStrAriaDescribedBy) {
                aContexteCourant.node.removeAttribute('aria-describedby');
            }
            let lInstanceCombo = ObjetIdentite_1.Identite.creerInstance(ObjetSaisie_1.ObjetSaisie, {
                pere: aContexteCourant.controleur,
                evenement: function(aParams) {
                    const lParametres = aParams;
                    const lCallback = function() {
                        if (lParametres.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection) {
                            if (((lParametres.estComboMultiSelection && !_listesIdentiques(lParametres.listeSelections, lListeSelectionsBackup)) || (MethodesObjet_1.MethodesObjet.isNumber(lParametres.indice) && lParametres.indice !== aContexteCourant.data.$indice)) || aContexteCourant.data.$indice === const_forcerActualisation) {
                                if (lInfosSetIndice.estFonction) {
                                    lInfosSetIndice.callback([lParametres.estComboMultiSelection ? lParametres.listeSelections : lParametres.indice, lInstanceCombo, aContexteCourant.data]);
                                }
                                aContexteCourant.data.$indice = lParametres.indice;
                            }
                        }
                        if (lInfosEvent.estFonction) {
                            lInfosEvent.callback([lParametres, lInstanceCombo, aContexteCourant.data]);
                        }
                        lRefresh();
                    };
                    lCallback();
                }
            });
            lInstanceCombo.ControleNavigation = !!lAvecControleSaisie;
            const lRacine = ObjetHtml_1.GHtml.htmlToDOM('<div id="' + lInstanceCombo.getNom() + '"></div>')
              , lJRacine = $(lRacine);
            if (IE.estMobile && !aContexteCourant.node.classList.contains('combo-classic')) {
                if (aContexteCourant.node.classList.contains('membre-combo')) {
                    lInstanceCombo.setOptionsObjetSaisie({
                        iconeGauche: '',
                        avecBouton: true
                    });
                } else if (aContexteCourant.node.classList.contains('search-contain')) {
                    lInstanceCombo.setOptionsObjetSaisie({
                        avecDesignMobile: true,
                        iconeGauche: '',
                        avecBouton: true
                    });
                } else {
                    lInstanceCombo.setOptionsObjetSaisie({
                        avecDesignMobile: true,
                        iconeGauche: 'icon_reorder',
                        avecBouton: false
                    });
                }
            }
            if (lStrAriaLabel || lStrAriaLabelledBy || lStrAriaDescribedBy) {
                lInstanceCombo.setOptionsObjetSaisie({
                    labelWAICellule: lStrAriaLabel || '',
                    labelledById: lStrAriaLabelledBy || '',
                    describedById: lStrAriaDescribedBy || ''
                });
            }
            const lParams = {
                liste: new ObjetListeElements_1.ObjetListeElements,
                indice: -1
            };
            if (lInfosInit.estFonction) {
                lInfosInit.callback([lInstanceCombo, aContexteCourant.data]);
            }
            const lRemplirListe = (aNode, aParams, aAEstFils) => {
                if (aNode && aNode.childNodes) {
                    for (let i = 0; i < aNode.childNodes.length; i++) {
                        const lNode = aNode.childNodes[i];
                        const lNodeName = lNode.nodeName.toLowerCase();
                        if (lNodeName && lNodeName === 'option') {
                            const lArticle = ObjetElement_1.ObjetElement.create({
                                Libelle: lNode.innerHTML,
                                Numero: lNode.value,
                                node: lNode,
                                avecIndentation: aAEstFils
                            });
                            aParams.liste.add(lArticle);
                            if (lNode.getAttribute('selected') === 'selected') {
                                aParams.indice = aParams.liste.count() - 1;
                            }
                        } else if (lNodeName && lNodeName === 'optgroup') {
                            const lLibelle = lNode.getAttribute('label') || '';
                            aParams.liste.add(ObjetElement_1.ObjetElement.create({
                                Libelle: lLibelle,
                                AvecSelection: false,
                                estCumul: true,
                                node: lNode
                            }));
                            lRemplirListe(lNode, aParams, true);
                        }
                    }
                }
            }
            ;
            lRemplirListe(aContexteCourant.node, lParams);
            if (lParams.liste.count() > 0) {
                lInstanceCombo.setDonneesObjetSaisie({
                    liste: lParams.liste,
                    selection: lParams.indice,
                    options: {
                        getClassElement(aParams) {
                            if (aParams.element.estCumul) {
                                return 'liste-fond-cumul';
                            } else if (aParams.element.avecIndentation) {
                                return 'element-indentation';
                            }
                            return '';
                        }
                    }
                });
                if (lParams.indice < 0) {
                    lInstanceCombo.initSelection(0);
                }
            }
            aOutils.injectHTML({
                element: lRacine,
                html: lInstanceCombo.construireAffichage(),
                controleur: lInstanceCombo.controleur,
                ignorerScroll: true,
                contexte: aContexteCourant.contexte
            });
            lJRacine.ieData(aContexteCourant.data);
            lJRacine.on('destroyed', () => {
                if (lInfosDestroy.estFonction) {
                    lInfosDestroy.callback([lInstanceCombo, aContexteCourant.data]);
                }
                lInstanceCombo.free();
                lInstanceCombo = null;
            }
            );
            aOutils.surInjectionHtml(aContexteCourant, () => {
                lInstanceCombo.recupererDonnees();
                let lActualiserSelection;
                const lDemarrerGetIndice = function() {
                    if (lInfosGetIndice.estFonction) {
                        let lGetterIndice;
                        lActualiserSelection = function() {
                            if (!lInstanceCombo) {
                                return;
                            }
                            let lIndice = lGetterIndice();
                            const lEstListe = lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection;
                            if (((lEstListe && (!lListeSelectionsBackup || !lListeSelectionsBackup.preventionBoucle) && !_listesIdentiques(lIndice, lListeSelectionsBackup)) || (!lEstListe && lIndice !== aContexteCourant.data.$indice)) || aContexteCourant.data.$indice === const_forcerActualisation) {
                                if (lEstListe) {
                                    if (lIndice && lIndice instanceof ObjetListeElements_1.ObjetListeElements) {
                                        lListeSelectionsBackup = lIndice;
                                    } else {
                                        lListeSelectionsBackup = new ObjetListeElements_1.ObjetListeElements();
                                    }
                                    lListeSelectionsBackup.preventionBoucle = true;
                                    lInstanceCombo.setListeSelections(lIndice);
                                } else {
                                    const lIndiceNumber = lIndice;
                                    aContexteCourant.data.$indice = lIndiceNumber;
                                    if (lInstanceCombo.getNbElementsVisible() === 0 && lIndiceNumber < 0) {
                                        lInstanceCombo.surValidation(false, lIndiceNumber);
                                    } else if (lIndiceNumber >= 0) {
                                        lInstanceCombo.setSelection(lIndiceNumber);
                                    }
                                }
                            } else if (lListeSelectionsBackup && lListeSelectionsBackup.preventionBoucle) {
                                lListeSelectionsBackup.preventionBoucle = false;
                            }
                        }
                        ;
                        lGetterIndice = function() {
                            let lIndice = lInfosGetIndice.callback([lInstanceCombo, aContexteCourant.data]) || 0;
                            if (!lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection) {
                                lIndice = lInstanceCombo.chercherIndiceSelectionSelonSens(lIndice, false);
                            }
                            return lIndice;
                        }
                        ;
                        const lIndice = lGetterIndice();
                        if (lInstanceCombo.getDonneesPourHTMLCombo().options.multiSelection) {
                            if (lIndice && lIndice instanceof ObjetListeElements_1.ObjetListeElements) {
                                lListeSelectionsBackup = lIndice;
                            } else {
                                lListeSelectionsBackup = new ObjetListeElements_1.ObjetListeElements();
                            }
                            lInstanceCombo.setListeSelections(lListeSelectionsBackup);
                        } else {
                            aContexteCourant.data.$indice = lIndice;
                            if (lIndice >= 0) {
                                lInstanceCombo.setSelection(lIndice);
                            }
                        }
                        aOutils.abonnerRefresh(lActualiserSelection, lRacine, aContexteCourant);
                    }
                };
                if (lInfosGetDonnees.estFonction) {
                    const lGetterDonnees = function() {
                        return lInfosGetDonnees.callback([lInstanceCombo.getListeElements(), lInstanceCombo, aContexteCourant.data]) || null;
                    };
                    const lDonnees = lGetterDonnees();
                    let lComboInitialise = false;
                    if (lDonnees && lDonnees.count) {
                        lInstanceCombo.setDonneesObjetSaisie({
                            liste: lDonnees
                        });
                        lDemarrerGetIndice();
                        lComboInitialise = true;
                    }
                    aOutils.abonnerRefresh( () => {
                        if (!lInstanceCombo) {
                            IE.log.addLog('lInstanceCombo n\'existe pas');
                            return null;
                        }
                        const lDonnees = lGetterDonnees();
                        const lListeCourante = lInstanceCombo.getListeElements();
                        if (lDonnees && lDonnees.count && lListeCourante !== lDonnees && !(lDonnees.count() === 0 && lListeCourante && lListeCourante.count && lListeCourante.count() === 0)) {
                            lInstanceCombo.setDonneesObjetSaisie({
                                liste: lDonnees
                            });
                            aContexteCourant.data.$indice = const_forcerActualisation;
                            if (!lComboInitialise) {
                                lDemarrerGetIndice();
                                lComboInitialise = true;
                            } else if (lActualiserSelection) {
                                lActualiserSelection();
                            }
                        }
                    }
                    , lRacine, aContexteCourant);
                } else {
                    lDemarrerGetIndice();
                }
                if (lInfosGetLibelle.estFonction) {
                    const lGetterLibelle = function() {
                        return lInfosGetLibelle.callback([lInstanceCombo, aContexteCourant.data]);
                    };
                    const lLibelle = lGetterLibelle();
                    if (lLibelle === '' || (lLibelle && lLibelle.length > 0)) {
                        lInstanceCombo.setContenu(lLibelle);
                    }
                    aOutils.abonnerRefresh( () => {
                        if (!lInstanceCombo) {
                            IE.log.addLog('lInstanceCombo n\'existe pas');
                            return null;
                        }
                        const lLibelle = lGetterLibelle();
                        if ((lLibelle === '' || (lLibelle && lLibelle.length > 0)) && lLibelle !== lInstanceCombo.getDonneesPourHTMLCombo().bouton.getLibelle()) {
                            lInstanceCombo.setContenu(lLibelle);
                        }
                    }
                    , lRacine, aContexteCourant);
                }
            }
            );
            if (lInfosGetDisabled.estFonction) {
                const lGetterDisabled = function() {
                    return !!lInfosGetDisabled.callback([lInstanceCombo, aContexteCourant.data]);
                };
                const lEstDisabled = lGetterDisabled();
                aContexteCourant.data.$disabled = lEstDisabled;
                if (lEstDisabled) {
                    lInstanceCombo.setActif(false);
                }
                aOutils.abonnerRefresh( () => {
                    if (!lInstanceCombo) {
                        IE.log.addLog('lInstanceCombo n\'existe pas');
                        return null;
                    }
                    const lEstDisabled = lGetterDisabled();
                    if (lEstDisabled !== aContexteCourant.data.$disabled) {
                        aContexteCourant.data.$disabled = lEstDisabled;
                        lInstanceCombo.setActif(!lEstDisabled);
                    }
                }
                , lRacine, aContexteCourant);
            }
            if (lModele && aContexteCourant.data.$modeleParsed) {
                aOutils.surNodeEtNodeAfter(aContexteCourant);
            }
            aOutils.copyAttributs(aContexteCourant.node, lRacine, (aName) => {
                if (aName === 'id') {
                    return false;
                }
            }
            );
            lJRacine.addClass('ObjetSaisie ie-combo');
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aOutils.addCommentaireDebug(lRacine, 'ie-combo ie-model="' + lModele + '"');
            if (lStrAriaLabel) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-label="${lStrAriaLabel}"`);
            }
            if (lStrAriaLabelledBy) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-labelledby="${lStrAriaLabelledBy}"`);
            }
            if (lStrAriaDescribedBy) {
                aOutils.addCommentaireDebug(lRacine, `transfert aria-describedby="${lStrAriaDescribedBy}"`);
            }
            return {
                node: lRacine,
                avecCompileFils: false
            };
        }
        );
    },
    fn: 'iehtml.combo.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.Bouton.css');
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ToucheClavier_1 = require("ToucheClavier");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const MethodesObjet_1 = require("MethodesObjet");
        const u_Dots = '...';
        IEHtml.addBalise('ie-bouton', (aContexteCourant, aOutils) => {
            let lOptions = {
                disabled: false,
                theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                tailleBordure: null,
                fontWeight: '',
                hasDots: false
            };
            function _getCss(aSurvol) {
                const lStyle = {};
                let lColor = (lOptions.disabled ? lOptions.couleurTexteInactif : aSurvol ? lOptions.couleurTexteSurvol : lOptions.couleurTexte) || '';
                if (lColor) {
                    lStyle.color = lColor;
                }
                lColor = (lOptions.disabled ? lOptions.couleurFondInactif : aSurvol ? lOptions.couleurFondSurvol : lOptions.couleurFond) || '';
                if (lColor) {
                    lStyle.backgroundColor = lColor;
                }
                if (lOptions.tailleBordure >= 0 && MethodesObjet_1.MethodesObjet.isNumber(lOptions.tailleBordure)) {
                    lStyle.borderWidth = lOptions.tailleBordure + 'px';
                }
                lColor = (lOptions.disabled ? lOptions.couleurBordureInactif : aSurvol ? lOptions.couleurBordureSurvol : lOptions.couleurBordure) || '';
                if (lColor) {
                    lStyle.borderColor = lColor;
                }
                return lStyle;
            }
            function _estToucheValider(aNumeroTouche) {
                return aNumeroTouche === ToucheClavier_1.ToucheClavier.Espace || aNumeroTouche === ToucheClavier_1.ToucheClavier.RetourChariot;
            }
            let lInnerHtml = aContexteCourant.node.innerHTML;
            const lInnerHtmlInitial = lInnerHtml;
            const lBouton = ObjetHtml_1.GHtml.htmlToDOM('<button>' + '</button>');
            const lJBouton = $(lBouton);
            if (lInnerHtml === u_Dots) {
                lOptions.hasDots = true;
            }
            if ($(aContexteCourant.node).hasClass(Type_ThemeBouton_1.TypeThemeBouton.primaire)) {
                lOptions.theme = Type_ThemeBouton_1.TypeThemeBouton.primaire;
            }
            const lImage = aContexteCourant.node.getAttribute('ie-image') || '';
            if (lImage) {
                aContexteCourant.node.removeAttribute('ie-image');
            }
            const lImageIcon = aContexteCourant.node.getAttribute('ie-icon') || '';
            if (lImageIcon) {
                aContexteCourant.node.removeAttribute('ie-icon');
            }
            const lIconSize = aContexteCourant.node.getAttribute('ie-iconsize') || '';
            if (lIconSize) {
                aContexteCourant.node.removeAttribute('ie-iconsize');
            }
            const lEstBoutonCarre = $(aContexteCourant.node).hasClass('bouton-carre');
            if (lEstBoutonCarre) {
                let lWidthDefaut = 0;
                if (aContexteCourant.node.style.width) {
                    const lWidth = Math.round($(aContexteCourant.node).innerWidth());
                    if (lWidth > 0) {
                        lWidthDefaut = Math.max(10, lWidth - 2 - 2);
                    }
                }
                lOptions = Object.assign(lOptions, {
                    theme: Type_ThemeBouton_1.TypeThemeBouton.neutre,
                    widthBoutonImage: lWidthDefaut,
                    heightTexteBoutonImage: 0,
                    heightImageBoutonImage: 0
                });
            }
            let lDisabled = false;
            const lModele = aOutils.getModel(aContexteCourant);
            let lInfosGetLibelle;
            if (lModele && aContexteCourant.data.$modeleParsed) {
                const lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant)
                  , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant)
                  , lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                const lAvecControleSaisie = aOutils.getControleSaisieEvent(aContexteCourant);
                let lKeyUpValiderAIgnorer = false;
                if (lInfosEvent.estFonction) {
                    const lRefresh = aContexteCourant.contexte.refresh;
                    lJBouton.eventValidation(function(aEvent) {
                        if (lOptions.disabled) {
                            return;
                        }
                        if (aEvent.type === 'keyup') {
                            if (lKeyUpValiderAIgnorer) {
                                lKeyUpValiderAIgnorer = false;
                                return;
                            }
                        }
                        const lAction = () => {
                            const lResult = lInfosEvent.callback([aEvent, this, aContexteCourant.data]);
                            lRefresh();
                            return lResult;
                        }
                        ;
                        if (lAvecControleSaisie) {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)(lAction);
                        } else {
                            return lAction();
                        }
                    }).on({
                        'focusin': function() {
                            if (window.GNavigateur && window.GNavigateur.ShiftTouche !== null) {
                                lKeyUpValiderAIgnorer = _estToucheValider(window.GNavigateur.CodeTouche);
                                if (lKeyUpValiderAIgnorer) {
                                    $(window).off('keydown.IEHTMLBoutonKeyupAIgnorer').one('keydown.IEHTMLBoutonKeyupAIgnorer', () => {
                                        lKeyUpValiderAIgnorer = false;
                                    }
                                    );
                                }
                            }
                        },
                        'focusout': function() {
                            lKeyUpValiderAIgnorer = false;
                        }
                    });
                }
                if (lInfosGetDisabled.valide) {
                    const lGetter = function() {
                        return !!lInfosGetDisabled.callback([lBouton, aContexteCourant.data]);
                    };
                    if (lInfosGetDisabled.estFonction || !lGetter() || lGetter() === true) {
                        lDisabled = !!lGetter();
                        aOutils.abonnerRefresh( () => {
                            const lDisabled = !!lGetter();
                            if (lDisabled !== lOptions.disabled) {
                                lOptions.disabled = lDisabled;
                                $(lBouton).inputDisabled(lDisabled);
                            }
                        }
                        , lBouton, aContexteCourant);
                    } else {
                        IE.log.addLog('echec getDisabled de ie-bouton, propriété incorrecte du model "' + lModele + '"');
                    }
                }
                if (lInfosGetOptions.estFonction) {
                    const lOptionsPerso = lInfosGetOptions.callback([lBouton, aContexteCourant.data]);
                    if (lOptionsPerso) {
                        Object.assign(lOptions, lOptionsPerso);
                    }
                }
                aOutils.surNodeEtNodeAfter(aContexteCourant);
                aContexteCourant.invocateurNode.abonner(aOutils.nomInvocRefresh, (aParams) => {
                    if (aParams.refreshHtml) {
                        const lHasDots = aParams.html === u_Dots;
                        if (lOptions.hasDots !== lHasDots) {
                            lOptions.hasDots = lHasDots;
                            if (lOptions.hasDots) {
                                lJBouton.addClass('has-dots');
                            } else {
                                lJBouton.removeClass('has-dots');
                            }
                        }
                    }
                }
                );
            }
            aOutils.copyAttributs(aContexteCourant.node, lBouton, (aName) => {
                switch (aName) {
                case 'disabled':
                    lDisabled = true;
                    break;
                }
            }
            );
            let lClassDefaut = '';
            if (!lBouton.style.height && !lImage && !lImageIcon) {
                lClassDefaut = ' ieBoutonDefautSansImage';
            }
            switch (lOptions.theme) {
            case Type_ThemeBouton_1.TypeThemeBouton.primaire:
                if (!lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.secondaire) && !lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.neutre)) {
                    lJBouton.addClass(Type_ThemeBouton_1.TypeThemeBouton.primaire);
                }
                break;
            case Type_ThemeBouton_1.TypeThemeBouton.neutre:
                if (!lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.secondaire) && !lJBouton.hasClass(Type_ThemeBouton_1.TypeThemeBouton.primaire)) {
                    lJBouton.addClass(Type_ThemeBouton_1.TypeThemeBouton.neutre);
                }
                break;
            }
            if (!lDisabled && lOptions.disabled) {
                lJBouton.attr('disabled', '');
            } else if (lDisabled) {
                $(lBouton).inputDisabled(true);
            }
            lOptions.disabled = lDisabled;
            const lCss = {
                'font-weight': lOptions.fontWeight
            };
            let lWrapperHtml;
            if (lImage || lImageIcon) {
                lWrapperHtml = function(aHtml) {
                    return IE.jsx.str("span", {
                        "ie-ellipsis-multiline": true
                    }, aHtml);
                }
                ;
                const lHtmlImage = lImage ? IE.jsx.str("span", {
                    class: lImage
                }) : IE.jsx.str("i", {
                    class: ['ieBoutonIcon', lImageIcon],
                    style: lIconSize ? `font-size:${lIconSize}` : false,
                    "aria-hidden": "true"
                });
                if (lEstBoutonCarre) {
                    lInnerHtml = [IE.jsx.str("span", {
                        class: "ieBtnContImg-img"
                    }, lHtmlImage), IE.jsx.str("span", {
                        class: "ieBtnContImg-texte"
                    }, lWrapperHtml(lInnerHtml))].join('');
                    lCss.padding = 1;
                } else {
                    lInnerHtml = IE.jsx.str("span", {
                        class: "ieBtnContImg-img"
                    }, IE.jsx.str(IE.jsx.fragment, null, lHtmlImage, IE.jsx.str("span", {
                        "ie-ellipsis": aContexteCourant.node.hasAttribute('ie-ellipsis')
                    }, lInnerHtml)));
                }
            }
            if (lOptions.minWidth > 0) {
                lCss['min-width'] = lOptions.minWidth + 'px';
            }
            let lClasse = 'ieBouton ';
            lClasse += 'ie-ripple ';
            lClasse = (lOptions.hasDots ? 'has-dots ' : '') + lClasse;
            lJBouton.css(Object.assign(lCss, _getCss())).addClass(lClasse + ' NoWrap' + lClassDefaut).on({
                mouseout: function() {
                    if (window.GNavigateur && window.GNavigateur.isTactile) {
                        return;
                    }
                    if (lOptions.disabled) {
                        return;
                    }
                    $(this).css(_getCss(false));
                },
                mouseover: function() {
                    if (window.GNavigateur && window.GNavigateur.isTactile) {
                        return;
                    }
                    if (lOptions.disabled) {
                        return;
                    }
                    $(this).css(_getCss(true));
                },
                IEDisabled: function() {
                    const lJThis = $(this);
                    lOptions.disabled = lJThis.is(':disabled');
                    if (lOptions.disabled) {
                        lJThis.removeClass('AvecMain');
                    } else {
                        lJThis.addClass('AvecMain');
                    }
                    lJThis.css(_getCss());
                }
            });
            const lRacine = lJBouton.get(0);
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lJBouton.get(0);
            if (lInnerHtml) {
                aOutils.injectHTML({
                    element: lRacine,
                    html: lInnerHtml,
                    controleur: aContexteCourant.controleur,
                    ignorerScroll: true,
                    contexte: aContexteCourant.contexte
                });
            }
            if (lImage || lImageIcon) {
                if (lEstBoutonCarre) {
                    aContexteCourant.nodeTransfertContenuDynamique = $(aContexteCourant.node).find('>.ieBtnContImg-texte').get(0);
                } else {
                    aContexteCourant.nodeTransfertContenuDynamique = $(aContexteCourant.node).find('>.ieBtnContImg-img>:not(:first-child)').get(0);
                }
            }
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                aOutils.addGetterHtml(aContexteCourant, lInfosGetLibelle, lWrapperHtml);
            }
            aOutils.addCommentaireDebug(lRacine, 'ie-bouton' + (lImage ? ' ie-image="' + lImage + '"' : '') + (lImageIcon ? ' ie-icon="' + lImageIcon + '"' : '') + (lIconSize ? ' ie-iconsize="' + lIconSize + '"' : ''));
            return {
                node: aContexteCourant.node,
                avecCompileFils: false
            };
        }
        );
    },
    fn: 'iehtml.bouton.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        require('IEHtml.BtnSelecteur.css');
        IEHtml.addBalise('ie-btnselecteur', (aContexteCourant, aOutils) => {
            const lEstMultilines = aContexteCourant.node.classList.contains('multilignes');
            const lInnerHtml = aContexteCourant.node.innerHTML;
            const lBtn = ObjetHtml_1.GHtml.htmlToDOM(IE.jsx.str("div", {
                class: ['ie-btnselecteur', 'ie-ripple'],
                tabindex: "0",
                "aria-haspopup": "dialog"
            }, IE.jsx.str("div", {
                class: "bs-icone",
                "aria-hidden": "true"
            }), IE.jsx.str("div", {
                class: "bs-libelle",
                "ie-ellipsis": !lEstMultilines
            }, lInnerHtml)));
            const lJBtn = $(lBtn);
            const lDOMIcone = lJBtn.find('>.bs-icone').get(0);
            const lDOMLibelle = lJBtn.find('>.bs-libelle').get(0);
            const lModele = aOutils.getModel(aContexteCourant);
            let lInfosGetLibelle = null;
            let lInfosEvent = null;
            let lInfosGetHtmIcone = null;
            let lDisabled = aContexteCourant.node.getAttribute('aria-disabled') === 'true';
            const lFuncActualiserDisabled = () => {
                if (lDisabled) {
                    aContexteCourant.node.setAttribute('aria-disabled', 'true');
                } else {
                    aContexteCourant.node.removeAttribute('aria-disabled');
                }
            }
            ;
            if (lModele) {
                lInfosEvent = aOutils.getAccesParametresModel('event', aContexteCourant);
                const lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                lInfosGetLibelle = aOutils.getAccesParametresModel('getLibelle', aContexteCourant);
                lInfosGetHtmIcone = aOutils.getAccesParametresModel('getIcone', aContexteCourant);
                if (lInfosGetDisabled.estFonction) {
                    lDisabled = !!lInfosGetDisabled.callback([]);
                    lFuncActualiserDisabled();
                    aOutils.abonnerRefresh( () => {
                        const lDisabledNew = !!lInfosGetDisabled.callback([]);
                        if (lDisabledNew !== lDisabled) {
                            lDisabled = lDisabledNew;
                            lFuncActualiserDisabled();
                        }
                    }
                    , lBtn, aContexteCourant);
                }
            }
            let lHtmlPlaceHolder = '';
            aOutils.copyAttributs(aContexteCourant.node, lBtn, (aName, aValue) => {
                if (aName === 'class' && aValue) {
                    lJBtn.addClass(aValue);
                    return false;
                }
                if (aName === 'placeholder' && aValue) {
                    lHtmlPlaceHolder = IE.jsx.str("span", {
                        class: "as-placeholder",
                        "aria-disabled": "true"
                    }, aValue);
                    return false;
                }
            }
            );
            let lRole = lBtn.getAttribute('role');
            if (!lRole) {
                lRole = 'combobox';
                lBtn.setAttribute('role', lRole);
            }
            const lEstComboBox = lRole === 'combobox';
            if (lEstComboBox && !lBtn.hasAttribute('aria-expanded')) {
                lBtn.setAttribute('aria-expanded', 'false');
            }
            const lTitle = lBtn.getAttribute('title');
            if (lTitle && !lBtn.getAttribute('aria-label') && !lBtn.getAttribute('aria-labelledby')) {
                lBtn.setAttribute('aria-label', lTitle);
            }
            if (lInfosEvent && lInfosEvent.estFonction) {
                lJBtn.eventValidation( (aEvent) => {
                    if (!lDisabled) {
                        lInfosEvent.callback([aEvent, lBtn]);
                    }
                }
                );
                if (lEstComboBox) {
                    lJBtn.on('keyup', function(aEvent) {
                        if (aEvent.which === ToucheClavier_1.ToucheClavier.FlecheBas) {
                            lInfosEvent.callback([aEvent, lBtn]);
                        }
                    });
                }
            }
            const lAvecGetHtmlIcone = lInfosGetHtmIcone && lInfosGetHtmIcone.estFonction;
            if (!lAvecGetHtmlIcone) {
                $(lDOMIcone).html(IE.jsx.str("i", {
                    class: IE.estMobile ? 'icon_ul' : 'icon_ellipsis_horizontal'
                }));
            }
            aOutils.surNodeEtNodeAfter(aContexteCourant);
            aOutils.replaceNode(aContexteCourant.node, lBtn);
            aContexteCourant.node = lBtn;
            if (lInfosGetLibelle && lInfosGetLibelle.estFonction) {
                aContexteCourant.nodeTransfertContenuDynamique = lDOMLibelle;
                const lGet = {
                    callback() {
                        let lResult = lInfosGetLibelle.callback([]) || '';
                        if (!lResult && lHtmlPlaceHolder) {
                            lResult = lHtmlPlaceHolder;
                        }
                        return lResult;
                    },
                    estFonction: true
                };
                aOutils.addGetterHtml(aContexteCourant, lGet);
            }
            if (lAvecGetHtmlIcone) {
                aContexteCourant.nodeTransfertContenuDynamique = lDOMIcone;
                aOutils.addGetterHtml(aContexteCourant, lInfosGetHtmIcone);
            }
            if (GApplication.estDebug() && lEstComboBox && !lBtn.getAttribute('aria-label') && !lBtn.getAttribute('aria-labelledby')) {}
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-btnselecteur');
            return {
                node: aContexteCourant.node,
                avecCompileFils: true
            };
        }
        );
    },
    fn: 'iehtml.btnselecteur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ZoneDessinEvenement = void 0;
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        require('signature_pad.umd.min.js');
        require('signature_pad.umd.js');
        require('IEHtml.ZoneDessin.css');
        var ZoneDessinEvenement;
        (function(ZoneDessinEvenement) {
            ZoneDessinEvenement["DebutDessin"] = "ZD_DebutDessin";
            ZoneDessinEvenement["FinDessin"] = "ZD_FinDessin";
            ZoneDessinEvenement["Effacement"] = "ZD_Effacement";
            ZoneDessinEvenement["AnnulerDernierTrait"] = "ZD_AnnulerDernierTrait";
        }
        )(ZoneDessinEvenement || (exports.ZoneDessinEvenement = ZoneDessinEvenement = {}));
        const cFacteurTraitTailleMin = 0.5;
        const cFacteurTraitTailleMax = 2.5;
        IEHtml.addBalise('ie-zonedessin', (aContexteCourant, aOutils) => {
            let lEstZoneDessinDisabled = false;
            let lSignaturePad;
            let lInfosDestroy;
            const lInnerDivGlobal = IE.jsx.str("div", {
                class: "ie-zonedessin"
            });
            const lElementDivGlobal = ObjetHtml_1.GHtml.htmlToDOM(lInnerDivGlobal);
            const lJDivGlobal = $(lElementDivGlobal);
            let lJDivCanvas = null;
            let lFaireInitTaille = true;
            const lControleurCanvas = {
                visibility(aVisible) {
                    if (aVisible && lFaireInitTaille) {
                        lFaireInitTaille = false;
                        const lWidthParent = lJDivGlobal.width();
                        const lHeightParent = lJDivGlobal.height();
                        lJDivCanvas.attr('width', lWidthParent).attr('height', lHeightParent);
                    }
                }
            };
            aOutils.injectHTML({
                element: lElementDivGlobal,
                html: IE.jsx.str("canvas", {
                    "ie-visibility-observer": "visibility"
                }),
                controleur: lControleurCanvas,
                ignorerScroll: true,
                contexte: aContexteCourant.contexte
            });
            lJDivCanvas = $(lElementDivGlobal).find('>canvas');
            const lElementCanvas = lJDivCanvas.get(0);
            const lOptionsZoneDessin = {
                couleurCrayon: '#000',
                tailleCrayon: 1
            };
            DeferLoadingScript_1.deferLoadingScript.loadAsync(['signature-pad']).then( () => {
                let lInfosInitialiseZoneDessin;
                let lInfosSurEvenementZoneDessin;
                const lModele = aOutils.getModel(aContexteCourant);
                if (lModele && aContexteCourant.data.$modeleParsed) {
                    lInfosInitialiseZoneDessin = aOutils.getAccesParametresModel('initialiseZoneDessin', aContexteCourant);
                    lInfosDestroy = aOutils.getAccesParametresModel('destroy', aContexteCourant);
                    const lInfosGetOptions = aOutils.getAccesParametresModel('getOptions', aContexteCourant);
                    if (lInfosGetOptions && lInfosGetOptions.estFonction) {
                        Object.assign(lOptionsZoneDessin, lInfosGetOptions.callback([]));
                    }
                    const lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
                    if (lInfosGetDisabled && lInfosGetDisabled.estFonction) {
                        const lGetter = function() {
                            return !!lInfosGetDisabled.callback([]);
                        };
                        lEstZoneDessinDisabled = !!lGetter();
                        aOutils.abonnerRefresh( () => {
                            const lDisabled = !!lGetter();
                            if (lDisabled !== lEstZoneDessinDisabled) {
                                lEstZoneDessinDisabled = lDisabled;
                                if (lEstZoneDessinDisabled) {
                                    $(aContexteCourant.node).find('canvas').attr('disabled', 'disabled');
                                    lSignaturePad.off();
                                } else {
                                    $(aContexteCourant.node).find('canvas').removeAttr('disabled');
                                    lSignaturePad.on();
                                }
                            }
                        }
                        , lElementDivGlobal, aContexteCourant);
                    }
                    lInfosSurEvenementZoneDessin = aOutils.getAccesParametresModel('surEvenementZoneDessin', aContexteCourant);
                }
                const lDefaultOptionsSignaturePad = {
                    dotSize: 1,
                    minWidth: 0.5,
                    maxWidth: 2.5,
                    throttle: 0,
                    minDistance: 5,
                    backgroundColor: '#FFF',
                    penColor: '#000',
                    velocityFilterWeight: 0.7
                };
                const lOptionsSignaturePad = Object.assign(lDefaultOptionsSignaturePad, {
                    minWidth: cFacteurTraitTailleMin * lOptionsZoneDessin.tailleCrayon,
                    maxWidth: cFacteurTraitTailleMax * lOptionsZoneDessin.tailleCrayon,
                    dotSize: lDefaultOptionsSignaturePad.maxWidth,
                    penColor: lOptionsZoneDessin.couleurCrayon
                });
                lSignaturePad = new global.SignaturePad(lElementCanvas,lOptionsSignaturePad);
                if (lInfosInitialiseZoneDessin && lInfosInitialiseZoneDessin.estFonction) {
                    lInfosInitialiseZoneDessin.callback([lSignaturePad]);
                }
                if (lEstZoneDessinDisabled) {
                    lSignaturePad.off();
                }
                if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                    lSignaturePad.addEventListener('beginStroke', () => {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.DebutDessin]);
                    }
                    );
                }
                lSignaturePad.addEventListener('endStroke', () => {
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.FinDessin]);
                    }
                    aContexteCourant.contexte.refresh();
                }
                );
                lSignaturePad.getImageBase64 = () => {
                    return lSignaturePad.toDataURL('image/png');
                }
                ;
                lSignaturePad.recupererBlob = (aCallback) => {
                    lElementCanvas.toBlob(aCallback);
                }
                ;
                lSignaturePad.enregistrerImage = (aNomFichier) => {
                    lElementCanvas.toBlob( (aBlobDeCanvas) => {
                        const url = window.URL.createObjectURL(aBlobDeCanvas);
                        const a = document.createElement('a');
                        a.style = 'display: none';
                        a.href = url;
                        a.download = aNomFichier;
                        document.body.appendChild(a);
                        a.click();
                        window.URL.revokeObjectURL(url);
                    }
                    );
                }
                ;
                lSignaturePad.estZoneDessinVide = () => {
                    return lSignaturePad.isEmpty();
                }
                ;
                lSignaturePad.annulerDernierTrait = () => {
                    const lDataActuelle = lSignaturePad.toData();
                    if (lDataActuelle) {
                        lDataActuelle.pop();
                        lSignaturePad.fromData(lDataActuelle);
                    }
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.AnnulerDernierTrait]);
                    }
                }
                ;
                lSignaturePad.effacerZoneDessin = () => {
                    lSignaturePad.clear();
                    if (lInfosSurEvenementZoneDessin && lInfosSurEvenementZoneDessin.estFonction) {
                        lInfosSurEvenementZoneDessin.callback([ZoneDessinEvenement.Effacement]);
                    }
                }
                ;
                lSignaturePad.getCouleurTrait = () => {
                    return lSignaturePad.penColor;
                }
                ;
                lSignaturePad.changerCouleurTrait = (aCouleur) => {
                    lOptionsZoneDessin.couleurCrayon = aCouleur;
                    lSignaturePad.penColor = lOptionsZoneDessin.couleurCrayon;
                }
                ;
            }
            );
            lJDivCanvas.on('destroyed', () => {
                lSignaturePad = null;
                if (lInfosDestroy && lInfosDestroy.estFonction) {
                    lInfosDestroy.callback([]);
                }
            }
            );
            aOutils.copyAttributs(aContexteCourant.node, lElementDivGlobal);
            const lRacine = lElementDivGlobal;
            aOutils.replaceNode(aContexteCourant.node, lRacine);
            aContexteCourant.node = lRacine;
            aOutils.surNodeEtNodeAfter(aContexteCourant);
            aOutils.addCommentaireDebug(lElementDivGlobal, 'ie-zonedessin');
            return {
                node: lElementDivGlobal
            };
        }
        );
    },
    fn: 'iehtml.zonedessin.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.GestionnaireModale = exports.OpaciteVoileBloquant = void 0;
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetStyle_1 = require("ObjetStyle");
        const Invocateur_1 = require("Invocateur");
        const GUID_1 = require("GUID");
        var TypePrioriteBlocageInterface;
        (function(TypePrioriteBlocageInterface) {
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["voile"] = 1] = "voile";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["standard"] = 10] = "standard";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["message"] = 20] = "message";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["messageInformatif"] = 30] = "messageInformatif";
            TypePrioriteBlocageInterface[TypePrioriteBlocageInterface["systeme"] = 99999] = "systeme";
        }
        )(TypePrioriteBlocageInterface || (TypePrioriteBlocageInterface = {}));
        var OpaciteVoileBloquant;
        (function(OpaciteVoileBloquant) {
            OpaciteVoileBloquant[OpaciteVoileBloquant["default"] = 1] = "default";
            OpaciteVoileBloquant[OpaciteVoileBloquant["opaqueComplet"] = 2] = "opaqueComplet";
        }
        )(OpaciteVoileBloquant || (exports.OpaciteVoileBloquant = OpaciteVoileBloquant = {}));
        exports.GestionnaireModale = (function() {
            const uBlocage = {
                pile: [],
                nb: 0,
                avecVoile: false,
                pourPatience: false
            };
            const CidBlocageGeneral = GUID_1.GUID.getId() + '_bloquer';
            const uPileZIndex = {};
            let uMaxZIndex = -1;
            const uZIndexBlocage = 1000;
            const uGenerateurGUID = new GUID_1.GUID.generateur();
            const uClassBloquageInterface = 'nav_zoneBloquageInterface';
            function _ajoutDansPile(aId, aPourPremierPlan, aPourBlocageInterface, aPrioriteBlocage) {
                const lPriorite = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                if (uPileZIndex[aId]) {
                    uPileZIndex[aId].pourPremierPlan = uPileZIndex[aId].pourPremierPlan || aPourPremierPlan;
                    uPileZIndex[aId].pourBlocageInterface = uPileZIndex[aId].pourBlocageInterface || aPourBlocageInterface;
                    uPileZIndex[aId].prioriteBlocage = Math.max(uPileZIndex[aId].prioriteBlocage, lPriorite);
                } else {
                    const lElement = ObjetHtml_1.GHtml.getElement(aId);
                    const lZindex = ObjetStyle_1.GStyle.getZindex(aId);
                    if (lZindex || aPourBlocageInterface) {
                        uPileZIndex[aId] = {
                            element: lElement,
                            zIndexOrigine: lZindex,
                            zIndex: lZindex,
                            pourPremierPlan: aPourPremierPlan,
                            pourBlocageInterface: aPourBlocageInterface,
                            prioriteBlocage: lPriorite,
                            estBloque: false,
                            pileBlocage: []
                        };
                        uMaxZIndex = Math.max(uMaxZIndex, lZindex);
                    }
                }
            }
            function _setZIndex(aId, zIndex) {
                if (!uPileZIndex[aId]) {
                    return;
                }
                uPileZIndex[aId].zIndex = zIndex;
                ObjetStyle_1.GStyle.setZindex(aId, zIndex);
            }
            function _getPrioriteBlocageCourant() {
                let lPriorite = 0;
                uBlocage.pile.forEach( (aElement) => {
                    lPriorite = Math.max(lPriorite, aElement.priorite);
                }
                );
                return lPriorite;
            }
            function _getPrioriteBlocageDePriorite(aPrioriteBlocage) {
                return aPrioriteBlocage || exports.GestionnaireModale.TypePrioriteBlocageInterface.standard;
            }
            function _notifierAbonneBlocageInterface(aId, aBloquer, aForcerDeblocage, aPrioriteBlocage, aEtatBloquerPrecedent) {
                const lElement = uPileZIndex[aId];
                if (lElement && lElement.pourBlocageInterface) {
                    const lPrioriteBlocage = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                    if (!aBloquer && aForcerDeblocage) {
                        lElement.estBloque = false;
                        if (lElement.methode) {
                            lElement.methode(aBloquer, uBlocage.avecVoile, uBlocage.pourPatience);
                        } else {
                            _setZIndex(aId, lElement.zIndexOrigine);
                        }
                    } else {
                        if ((aBloquer && (!lElement.estBloque || (!lElement.avecVoile && uBlocage.avecVoile !== false)) && (lElement.prioriteBlocage <= lPrioriteBlocage)) || (!aBloquer && lElement.estBloque && !aEtatBloquerPrecedent)) {
                            if (aBloquer) {
                                lElement.estBloque = true;
                            } else {
                                lElement.estBloque = !!aEtatBloquerPrecedent;
                            }
                            if (lElement.methode) {
                                if (lElement.estBloque) {
                                    lElement.avecVoile = uBlocage.avecVoile;
                                }
                                lElement.methode(lElement.estBloque, uBlocage.avecVoile, uBlocage.pourPatience);
                            } else {
                                if (lElement.estBloque) {
                                    if (lElement.zIndex > uZIndexBlocage - 10) {
                                        _setZIndex(aId, uZIndexBlocage - 10);
                                    }
                                } else {
                                    _setZIndex(aId, lElement.zIndexOrigine);
                                }
                            }
                        }
                    }
                    let lId = aId;
                    if (lElement.blocageGeneral && global.GApplication) {
                        lId = global.GApplication.getIdConteneur();
                    }
                    if (lElement.estBloque) {
                        $('#' + lId.escapeJQ()).addClass(uClassBloquageInterface);
                    } else {
                        $('#' + lId.escapeJQ()).removeClass(uClassBloquageInterface);
                    }
                }
            }
            function _notifierAbonnesBlocageInterface(aBloquer, aForcerDeblocage, aPrioriteBlocage) {
                for (let lId in uPileZIndex) {
                    const lElement = uPileZIndex[lId];
                    let lEtatPrecedent = null;
                    if (aBloquer) {
                        lElement.pileBlocage.push(lElement.estBloque);
                    } else {
                        lEtatPrecedent = lElement.pileBlocage.pop();
                    }
                    _notifierAbonneBlocageInterface(lId, aBloquer, aForcerDeblocage, aPrioriteBlocage, lEtatPrecedent);
                }
            }
            function _desabonnementBlocageInterface(aId) {
                if (uPileZIndex[aId] && uPileZIndex[aId].pourBlocageInterface) {
                    ObjetStyle_1.GStyle.setZindex(aId, uPileZIndex[aId].zIndex);
                    if (!uPileZIndex[aId].pourPremierPlan) {
                        delete uPileZIndex[aId];
                    } else {
                        uPileZIndex[aId].estBloque = false;
                        uPileZIndex[aId].pourBlocageInterface = false;
                    }
                }
            }
            function _desabonnementPremierPlan(aId) {
                if (uPileZIndex[aId]) {
                    if (uPileZIndex[aId].zIndex >= uMaxZIndex) {
                        uMaxZIndex = -1;
                        for (const lId in uPileZIndex) {
                            if (uPileZIndex[lId] && uPileZIndex[lId].pourPremierPlan && (lId !== aId)) {
                                uMaxZIndex = Math.max(uMaxZIndex, uPileZIndex[lId].zIndex);
                            }
                        }
                    }
                    _setZIndex(aId, uPileZIndex[aId].zIndexOrigine);
                    if (!uPileZIndex[aId].pourBlocageInterface) {
                        delete uPileZIndex[aId];
                    } else {
                        uPileZIndex[aId].pourPremierPlan = false;
                    }
                }
            }
            function _bloquerInterfaceGenerale(ABloquer, aAvecVoileOpaque, aPourPatience) {
                if (IE.estTestMocha) {
                    return;
                }
                let lElement = ObjetHtml_1.GHtml.getElement(CidBlocageGeneral);
                if (!lElement) {
                    $(document.body).find(':first').before('<div id="' + CidBlocageGeneral + '" class="BloquerInterface NePasImprimer SansSelectionTexte" style="display:none;"></div>');
                    lElement = ObjetHtml_1.GHtml.getElement(CidBlocageGeneral);
                }
                if (ABloquer) {
                    const lAvecVoileOpaque = aAvecVoileOpaque !== null && aAvecVoileOpaque !== void 0 ? aAvecVoileOpaque : true;
                    $(lElement).removeClass('VoileOpaque50 VoileOpaqueComplet');
                    if (lAvecVoileOpaque) {
                        let lOpaciteVoile = OpaciteVoileBloquant.default;
                        uBlocage.pile.forEach( (aElement) => {
                            if (aElement.opaciteVoile > lOpaciteVoile) {
                                lOpaciteVoile = aElement.opaciteVoile;
                                if (lOpaciteVoile === OpaciteVoileBloquant.opaqueComplet) {}
                            }
                        }
                        );
                        let lCss = lOpaciteVoile === OpaciteVoileBloquant.default ? 'VoileOpaque50' : 'VoileOpaqueComplet';
                        $(lElement).addClass(lCss);
                    }
                }
                if (!lElement.oncontextmenu) {
                    lElement.oncontextmenu = function() {
                        return false;
                    }
                    ;
                }
                ObjetStyle_1.GStyle.setDisplay(lElement, ABloquer);
                if (aPourPatience) {
                    $(lElement).addClass('blocage-patience');
                } else {
                    $(lElement).removeClass('blocage-patience');
                }
            }
            Invocateur_1.Invocateur.abonner('finSession', () => {
                _notifierAbonnesBlocageInterface(false, true, exports.GestionnaireModale.TypePrioriteBlocageInterface.systeme);
            }
            );
            return {
                TypePrioriteBlocageInterface: TypePrioriteBlocageInterface,
                enPremierPlan(AIdPremierPlan) {
                    if (!uPileZIndex[AIdPremierPlan]) {
                        return;
                    }
                    for (const lId in uPileZIndex) {
                        let lElement = uPileZIndex[lId];
                        if (lElement && lElement.pourPremierPlan) {
                            if (!ObjetHtml_1.GHtml.elementExiste(lId)) {
                                IE.log.addLog('Erreur GestionnaireModale.enPremierPlan : element supprimé sans etre desabonné', null, IE.log.genre.Erreur);
                                _desabonnementPremierPlan(lId);
                            } else if (!lElement.estBloque) {
                                if (lId === AIdPremierPlan) {
                                    _setZIndex(lId, uMaxZIndex + 1);
                                } else if (!uPileZIndex[lId].estBloque) {
                                    _setZIndex(lId, lElement.zIndexOrigine);
                                }
                            }
                        }
                    }
                },
                abonnementPremierPlan(aAbonner, aId) {
                    if (aAbonner) {
                        _ajoutDansPile(aId, true, false);
                    } else {
                        _desabonnementPremierPlan(aId);
                    }
                },
                abonnementBlocageInterfaceGenerale() {
                    uPileZIndex[CidBlocageGeneral] = {
                        blocageGeneral: true,
                        pourPremierPlan: false,
                        pourBlocageInterface: true,
                        estBloque: false,
                        pileBlocage: [],
                        prioriteBlocage: exports.GestionnaireModale.TypePrioriteBlocageInterface.voile,
                        methode: _bloquerInterfaceGenerale
                    };
                },
                abonnementBlocageInterface(aAbonner, aId, aPrioriteBlocage) {
                    if (aAbonner) {
                        _ajoutDansPile(aId, false, true, aPrioriteBlocage);
                        const lPriorite = _getPrioriteBlocageDePriorite(aPrioriteBlocage);
                        if (exports.GestionnaireModale.estInterfaceBloque() && _getPrioriteBlocageCourant() > lPriorite) {
                            _notifierAbonneBlocageInterface(aId, true, false, lPriorite);
                        }
                    } else {
                        _desabonnementBlocageInterface(aId);
                    }
                },
                estInterfaceBloque() {
                    return uBlocage.pile.length > 0;
                },
                estJElementBloque(aJElement) {
                    return aJElement && aJElement.parents ? aJElement.closest('.' + uClassBloquageInterface).length > 0 : false;
                },
                bloquerInterface(aParams) {
                    const lParams = Object.assign({
                        bloquer: false,
                        prioriteBlocage: exports.GestionnaireModale.TypePrioriteBlocageInterface.standard,
                        pourPatience: false,
                        avecVoile: null,
                        forcerDeblocage: false,
                        guidBlocage: null,
                        opaciteVoile: OpaciteVoileBloquant.default
                    }, aParams);
                    if (!lParams.bloquer && (uBlocage.pile.length === 0)) {
                        return;
                    }
                    let lId = null;
                    lParams.prioriteBlocage = _getPrioriteBlocageDePriorite(lParams.prioriteBlocage);
                    if (lParams.bloquer) {
                        const lElement = {
                            priorite: lParams.prioriteBlocage,
                            guid: uGenerateurGUID.get(),
                            opaciteVoile: lParams.opaciteVoile
                        };
                        uBlocage.pile.push(lElement);
                        lId = lElement.guid;
                        uBlocage.avecVoile = lParams.avecVoile;
                        uBlocage.pourPatience = !!lParams.pourPatience;
                    } else {
                        if (lParams.guidBlocage) {
                            let lTrouve = false;
                            uBlocage.pile = uBlocage.pile.filter( (aElement) => {
                                if (aElement.guid === lParams.guidBlocage) {
                                    lTrouve = true;
                                }
                                return aElement.guid !== lParams.guidBlocage;
                            }
                            );
                            if (!lTrouve) {
                                return;
                            }
                        } else {
                            uBlocage.pile.pop();
                        }
                    }
                    _notifierAbonnesBlocageInterface(lParams.bloquer, false, lParams.prioriteBlocage);
                    return lId;
                }
            };
        }());
        if (!IE.estMobile) {
            exports.GestionnaireModale.abonnementBlocageInterfaceGenerale();
        }
    },
    fn: 'gestionnairemodale.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireSelecFile = void 0;
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        let uIdFichier = 0;
        const UtilitaireSelecFile = {
            C_MaxSize: 500 * 1024 * 1024,
            addFileDansListe(aFile, aListeFichiers, aGenrePJ) {
                const lElement = new ObjetElement_1.ObjetElement('',null,aGenrePJ);
                lElement.setEtat(Enumere_Etat_1.EGenreEtat.Creation);
                let lLibelle = ObjetChaine_1.GChaine.enleverChemin(aFile.name);
                if (lLibelle && lLibelle.replace) {
                    lLibelle = lLibelle.replace(/[:/\\*?"<>|]/g, '_');
                }
                if (lLibelle === 'image.jpg') {
                    lLibelle = `image_${Date.now()}.jpg`;
                }
                lElement.Libelle = ObjetChaine_1.GChaine.ajouterEntites(lLibelle);
                lElement.nomOriginal = lLibelle;
                lElement.file = aFile;
                try {
                    if (aFile.lastModified) {
                        lElement.lastModified = aFile.lastModified;
                    }
                } catch (error) {}
                uIdFichier += 1;
                lElement.idFichier = 'selecfile_' + uIdFichier + '_' + Date.now();
                aListeFichiers.addElement(lElement);
            },
            controleTailleFichiers(aListeFichiers, aMessagesErreur, aMaxSize) {
                const lListe = new ObjetListeElements_1.ObjetListeElements();
                aListeFichiers.parcourir( (aFichier) => {
                    if (aMaxSize > 0 && !UtilitaireSelecFile.estFichierCloudPartage(aFichier) && aFichier.file && aFichier.file.size > aMaxSize) {
                        let lVal = Math.floor(aMaxSize / 1024);
                        let lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Ko');
                        if (lVal > 1024 * 10 || (lVal > 1024 && Math.floor(lVal / 1024) === lVal / 1024)) {
                            lVal = Math.floor(lVal / 1024);
                            lUnite = ObjetTraduction_1.GTraductions.getValeur('unite.Mo');
                        }
                        aMessagesErreur.push(ObjetChaine_1.GChaine.format('%s (%s)', [ObjetTraduction_1.GTraductions.getValeur('inputFile.msgEchecTailleFichier', [lVal, lUnite]), aFichier.getLibelle()]));
                    } else {
                        lListe.addElement(aFichier);
                    }
                }
                );
                return lListe;
            },
            estFichierCloudPartage(aFichier) {
                return aFichier && aFichier.idPartage && aFichier.getGenre && aFichier.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud;
            },
            extraireListeFichiersCloudsPartage(aListeFichiers) {
                const lListeFichiersClouds = new ObjetListeElements_1.ObjetListeElements();
                if (aListeFichiers && aListeFichiers.parcourir) {
                    const lTabFichiers = [...aListeFichiers.getTabListeElements()];
                    lTabFichiers.forEach( (aFichier, aIndex) => {
                        if (UtilitaireSelecFile.estFichierCloudPartage(aFichier)) {
                            lListeFichiersClouds.add(aFichier);
                            aListeFichiers.remove(aIndex);
                        }
                    }
                    );
                }
                return lListeFichiersClouds;
            },
            genererPdfAsync(aListeFichiers, aMessagesErreur, aNomPDFaGenerer, aGenrePDF) {
                return UtilitaireTraitementImage_1.UtilitaireTraitementImage.genererPdfAsync(aListeFichiers).then( (aParamPDF) => {
                    aListeFichiers.vider();
                    if (aParamPDF && aParamPDF.file) {
                        if (aNomPDFaGenerer) {
                            aParamPDF.file.name = aNomPDFaGenerer;
                        }
                        UtilitaireSelecFile.addFileDansListe(aParamPDF.file, aListeFichiers, aGenrePDF);
                    }
                }
                ).catch( (aParamsReject) => {
                    aListeFichiers.vider();
                    if (aMessagesErreur.length > 0) {
                        aMessagesErreur.push('');
                    }
                    aMessagesErreur.push(ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('inputFile.echecImagePDF_S'), [(aParamsReject ? aParamsReject.nom : '') || '']));
                }
                );
            }
        };
        exports.UtilitaireSelecFile = UtilitaireSelecFile;
    },
    fn: 'utilitaireselecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.SelecFile = void 0;
        const IEHtml = require("IEHtml");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireTraitementImage_1 = require("UtilitaireTraitementImage");
        const UtilitaireSelecFile_1 = require("UtilitaireSelecFile");
        class SelecFile {
            static async select(aOptions) {
                return await new ObjetSelecFile(aOptions).select();
            }
            static async addFiles(aOptions, aFiles) {
                return await new ObjetSelecFile(aOptions).addFiles(aFiles);
            }
            static getOptionsDefaut() {
                return {
                    accept: '',
                    extensions: null,
                    maxSize: null,
                    multiple: false,
                    maxFiles: 0,
                    genrePJ: Enumere_DocumentJoint_1.EGenreDocumentJoint.Fichier,
                    avecResizeImage: true,
                    hauteurMaxImageResize: 1500,
                    largeurMaxImageResize: 1500,
                    compressionImage: 0.88,
                    avecTransformationFlux: true,
                    avecTransformationFlux_versCloud: false,
                    genererPDFImages: false,
                    nomPDFaGenerer: '',
                    accept_genererPDFImages: UtilitaireTraitementImage_1.UtilitaireTraitementImage.getTabMimePDFImage().join(', '),
                    capture: ''
                };
            }
        }
        exports.SelecFile = SelecFile;
        const uIdConteneurInputFile = GUID_1.GUID.getId();
        class ObjetSelecFile {
            constructor(aOptions) {
                this.options = SelecFile.getOptionsDefaut();
                Object.assign(this.options, aOptions);
            }
            async select() {
                if (!MethodesObjet_1.MethodesObjet.isNumber(this.options.maxSize) || this.options.maxSize < 0) {
                    this.options.maxSize = 0;
                }
                if (this.options.maxSize <= 0) {
                    this.options.maxSize = 50 * 1024 * 1024;
                }
                return new Promise( (aResolve) => {
                    this.createInput(aResolve);
                    if (!this.jInput) {
                        return false;
                    }
                    if (this.options.surOuvertureSelecteur) {
                        this.options.surOuvertureSelecteur();
                    }
                    this.jInput.trigger('click');
                }
                );
            }
            async addFiles(aFiles) {
                const lParams = ({
                    files: aFiles,
                    listeFichiers: new ObjetListeElements_1.ObjetListeElements
                });
                const lMessagesErreur = [];
                this.construireListeFichiers(lParams, lMessagesErreur);
                let lAvecBlocageInterface = false;
                try {
                    if (lParams.listeFichiers.count() > 0) {
                        Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, true, {
                            delai: 500
                        });
                        lAvecBlocageInterface = true;
                    }
                    try {
                        for (const lFichier of lParams.listeFichiers) {
                            if (this.options.avecResizeImage && UtilitaireTraitementImage_1.UtilitaireTraitementImage.avecResizePossible(lFichier.file)) {
                                await this.scaleImage(lParams, lFichier, lMessagesErreur);
                            }
                        }
                        if (!this.avecTransformationFlux()) {
                            lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                        }
                        if (this.options.genererPDFImages && lParams.listeFichiers.count() > 0) {
                            await UtilitaireSelecFile_1.UtilitaireSelecFile.genererPdfAsync(lParams.listeFichiers, lMessagesErreur, this.options.nomPDFaGenerer, this.options.genrePJ);
                            if (!this.avecTransformationFlux()) {
                                lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                            }
                        }
                    } finally {
                        if (lAvecBlocageInterface) {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.patience, false);
                        }
                    }
                    if (this.avecTransformationFlux()) {
                        try {
                            await GApplication.getObject('transformationFlux').transformationFluxPromise(lParams.listeFichiers, this.options);
                        } catch (aError) {}
                        lParams.listeFichiers = UtilitaireSelecFile_1.UtilitaireSelecFile.controleTailleFichiers(lParams.listeFichiers, lMessagesErreur, this.options.maxSize);
                    }
                    if (lMessagesErreur.length > 0) {
                        await GApplication.getMessage().afficher({
                            message: lMessagesErreur.join('<br>')
                        });
                    }
                    if (lParams.listeFichiers.count() > 0) {
                        lParams.eltFichier = lParams.listeFichiers.get(0);
                        IEHtml.refresh(true);
                        return lParams;
                    }
                } catch (e) {
                    await GApplication.getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('inputFile.EchecAjoutFichier')
                    });
                    return null;
                }
            }
            createInput(aResolve) {
                this.removeInput();
                if (this.timeoutClean) {
                    clearTimeout(this.timeoutClean);
                }
                this.timeoutClean = null;
                if (!ObjetHtml_1.GHtml.getElement(uIdConteneurInputFile)) {
                    IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(uIdConteneurInputFile, -1);
                }
                const lAccept = (this.options.genererPDFImages ? this.options.accept_genererPDFImages : '') || this.options.accept;
                this.jInput = $(IEHtml.injectHTMLParams({
                    element: ObjetHtml_1.GHtml.getElement(uIdConteneurInputFile),
                    html: IE.jsx.str("input", {
                        type: "file",
                        style: "display:none",
                        multiple: !!this.options.multiple,
                        accept: lAccept || false,
                        capture: this.options.capture || false
                    }),
                    ignorerScroll: true
                }));
                this.jInput.on({
                    'change': async function(aEvent) {
                        const lInstance = aEvent.data.this;
                        try {
                            const lResult = await lInstance.addFiles(Array.from(this.files));
                            lInstance.removeInput();
                            aResolve(lResult);
                        } catch (e) {
                            lInstance.removeInput();
                            aResolve(null);
                        }
                    }
                }, {
                    this: this
                });
            }
            removeInput() {
                if (this.timeoutClean) {
                    clearTimeout(this.timeoutClean);
                }
                this.timeoutClean = null;
                $(`#${uIdConteneurInputFile}`).remove();
                this.jInput = null;
            }
            construireListeFichiers(aParams, aMessagesErreur) {
                let lNbMax = this.options.maxFiles;
                if (!this.options.multiple) {
                    lNbMax = 1;
                }
                Array.from(aParams.files).forEach( (aFile, aIndex) => {
                    const lFichierRefuse = lNbMax > 0 && MethodesObjet_1.MethodesObjet.isNumber(lNbMax) && aIndex >= lNbMax;
                    IE.log.addLog('Fichier ' + (lFichierRefuse ? 'refusé (max atteint)' : 'ajouté') + ' : ' + aFile.name + ' - Taille : ' + Math.ceil(aFile.size / 1024) + 'ko');
                    if (lFichierRefuse) {
                        return;
                    }
                    if (aFile.size === 0) {
                        aMessagesErreur.push(ObjetTraduction_1.GTraductions.getValeur('inputFile.msgDocJointVide', [aFile.name]));
                    } else if (this.options.extensions && this.options.extensions.length > 0 && !(this.options.extensions.includes(aFile.name.replace(/(.*)\.([^./]+)$/, '$2').toLowerCase()))) {
                        aMessagesErreur.push(ObjetTraduction_1.GTraductions.getValeur('inputFile.echecSelection', [this.options.extensions.join(', ')]));
                    } else {
                        UtilitaireSelecFile_1.UtilitaireSelecFile.addFileDansListe(aFile, aParams.listeFichiers, this.options.genrePJ);
                    }
                }
                );
                if (aParams.listeFichiers) {
                    aParams.listeFichiers.setTri([ObjetTri_1.ObjetTri.init('lastModified'), ObjetTri_1.ObjetTri.init('Libelle')]);
                    aParams.listeFichiers.trier();
                }
            }
            async scaleImage(aParams, aFichier, aMessagesErreur) {
                try {
                    const aParamsTraitement = await UtilitaireTraitementImage_1.UtilitaireTraitementImage.resizeFilePromise(aFichier.file, this.options.largeurMaxImageResize, this.options.hauteurMaxImageResize, this.options.compressionImage);
                    if (aParamsTraitement && aParamsTraitement.avecResize && aParamsTraitement.file && aParamsTraitement.file.size < aFichier.file.size) {
                        const lAncienFichier = aFichier.file;
                        aFichier.file = aParamsTraitement.file;
                        aFichier.estResize = true;
                        aMessagesErreur.push(ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('inputFile.reductionTailleImage_SDDDDDD'), [aFichier.Libelle, aParamsTraitement.widthOriginal, aParamsTraitement.heightOriginal, lAncienFichier.size / 1024, Math.round(aParamsTraitement.width), Math.round(aParamsTraitement.height), aFichier.file.size / 1024]));
                    }
                } catch (e) {
                    return null;
                }
            }
            avecTransformationFlux() {
                if (this.options.avecTransformationFlux && global.GApplication) {
                    const lTransformationFlux = GApplication.getObject('transformationFlux');
                    return (!!lTransformationFlux && lTransformationFlux.getActif()) && !['image/*', 'application/zip'].includes(this.options.accept);
                }
                return false;
            }
        }
    },
    fn: 'selecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require('IEHtml.SelecFile.css');
        const IEHtml = require("IEHtml");
        const Invocateur_1 = require("Invocateur");
        const ObjetHtml_1 = require("ObjetHtml");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ToucheClavier_1 = require("ToucheClavier");
        const SelecFile_1 = require("SelecFile");
        let uInvocateurSelecFile = new Invocateur_1.ObjetInvocateur();
        IEHtml.addAttribut('ie-selecfile', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lModele = aOutils.getModel(aContexteCourant);
            let lDisabled = false;
            let lDesactiverClick_openFileManuel = false;
            let lTimeoutDrag;
            let lTimeoutDragSurvol;
            const lDureeTimeoutDrag = 10;
            let lDragEnCours = false;
            let lDragHoverEnCours = false;
            let lIdsAbon = null;
            if (!lModele || !aContexteCourant.data.$modeleParsed) {
                return true;
            }
            const lJElement = $(aContexteCourant.node)
              , lInfosOptions = aOutils.getAccesParametresModel('getOptionsSelecFile', aContexteCourant)
              , lInfosAdd = aOutils.getAccesParametresModel('addFiles', aContexteCourant)
              , lInfosGetDisabled = aOutils.getAccesParametresModel('getDisabled', aContexteCourant);
            if (!lInfosAdd.estFonction) {
                return true;
            }
            if (!lInfosOptions.estFonction) {
                return true;
            }
            const lOptions = SelecFile_1.SelecFile.getOptionsDefaut();
            function _estDisabled() {
                return lDisabled;
            }
            const lOuvrirSelecteur = async function() {
                const lResult = await SelecFile_1.SelecFile.select(lOptions);
                if (lResult && lResult.files) {
                    lInfosAdd.callback([lResult]);
                    aContexteCourant.controleur.$refresh();
                }
            };
            function _surDrag(aParams) {
                if (_estDisabled()) {
                    return;
                }
                clearTimeout(lTimeoutDrag);
                if (aParams.start && lOptions.acceptDragDrop) {
                    if (!lDragEnCours && !GestionnaireModale_1.GestionnaireModale.estJElementBloque(lJElement)) {
                        lDragEnCours = true;
                        if (lOptions.classDrag) {
                            aContexteCourant.node.classList.add(lOptions.classDrag);
                        }
                        if (lOptions.eventSurDrag) {
                            lOptions.eventSurDrag({
                                surDrag: true
                            });
                        }
                    }
                } else if (lDragEnCours) {
                    lTimeoutDrag = setTimeout( () => {
                        lDragEnCours = false;
                        lDragHoverEnCours = false;
                        if (lOptions.classDrag) {
                            aContexteCourant.node.classList.remove(lOptions.classDrag);
                        }
                        if (lOptions.classDragHoverSelec) {
                            aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                        }
                        if (lOptions.eventSurDrag) {
                            lOptions.eventSurDrag({
                                surDrag: false
                            });
                        }
                    }
                    , lDureeTimeoutDrag);
                }
                if (lOptions.bloquerDropHorsZoneDrop) {
                    aParams.avecSelecAbonne = true;
                }
            }
            Object.assign(lOptions, {
                acceptDragDrop: true,
                eventClick: true,
                title: '',
                getClass: function(aDisabled) {
                    return aDisabled || !lOptions.eventClick ? '' : 'AvecMain';
                },
                interrompreClick: false,
                click_surEventCapture: true,
                dragEnCoursVisible: true,
                bloquerDropHorsZoneDrop: true,
                classDrag: 'SelecFile_DragEnCours',
                classDragHoverSelec: 'SelecFile_DragEnCours_survol',
                eventSurDrag: null
            });
            function _majOptions() {
                if (lInfosOptions.estFonction) {
                    const lFunc = () => {
                        lDesactiverClick_openFileManuel = true;
                        return lOuvrirSelecteur;
                    }
                    ;
                    const lResultOptions = lInfosOptions.callback([lFunc]);
                    if (lResultOptions) {
                        Object.assign(lOptions, lResultOptions);
                    }
                }
                if (lOptions.dragEnCoursVisible) {
                    if (lIdsAbon) {
                        uInvocateurSelecFile.desabonner(lIdsAbon);
                    }
                    lIdsAbon = uInvocateurSelecFile.abonner('drag', _surDrag);
                }
            }
            function _listenerClick(aEvent) {
                if (_estDisabled() || !lOptions.eventClick || lDesactiverClick_openFileManuel) {
                    return;
                }
                lOuvrirSelecteur();
                if (lOptions.interrompreClick) {
                    aEvent.stopImmediatePropagation();
                    aEvent.preventDefault();
                    return false;
                }
            }
            function _listenerClickCapture(aEvent) {
                if (lOptions.click_surEventCapture) {
                    _listenerClick(aEvent);
                }
            }
            function _listenerClickBubbling(aEvent) {
                if (!lOptions.click_surEventCapture) {
                    _listenerClick(aEvent);
                }
            }
            aContexteCourant.node.addEventListener('click', _listenerClickCapture, true);
            aContexteCourant.node.addEventListener('click', _listenerClickBubbling, false);
            if (!ObjetHtml_1.GHtml.getClosestInteractive(lJElement.get(0))) {
                if (!lJElement.attr('role')) {
                    lJElement.attr('role', 'button');
                }
                if (!lJElement.attr('tabindex')) {
                    lJElement.attr('tabindex', '0');
                }
            }
            lJElement.on({
                'destroyed': function() {
                    if (lIdsAbon) {
                        uInvocateurSelecFile.desabonner(lIdsAbon);
                        lIdsAbon = null;
                    }
                    clearTimeout(lTimeoutDrag);
                    clearTimeout(lTimeoutDragSurvol);
                    lDragEnCours = false;
                    lDragHoverEnCours = false;
                    if (lOptions.classDrag) {
                        aContexteCourant.node.classList.remove(lOptions.classDrag);
                    }
                    if (lOptions.classDragHoverSelec) {
                        aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                    }
                    if (lOptions.eventSurDrag) {
                        lOptions.eventSurDrag({
                            surDrag: false
                        });
                    }
                    aContexteCourant.node.removeEventListener('click', _listenerClickCapture, true);
                    aContexteCourant.node.removeEventListener('click', _listenerClickBubbling, false);
                },
                keyup(aEvent) {
                    if (!_estDisabled() && ToucheClavier_1.ToucheClavierUtil.estEventSelection(aEvent)) {
                        lOuvrirSelecteur();
                    }
                },
                'dragenter.selecfile dragover.selecfile': function(aEvent) {
                    if (!lOptions.acceptDragDrop || _estDisabled() || !_eventDragAvecFiles(aEvent)) {
                        return;
                    }
                    aEvent.originalEvent.__dropAccepted__ = true;
                    aEvent.preventDefault();
                    if (lOptions.dragEnCoursVisible) {
                        clearTimeout(lTimeoutDragSurvol);
                        if (lOptions.classDragHoverSelec && !lDragHoverEnCours) {
                            lDragHoverEnCours = true;
                            aContexteCourant.node.classList.add(lOptions.classDragHoverSelec);
                        }
                    }
                },
                'dragexit.selecfile dragleave.selecfile dragend.selecfile': function() {
                    clearTimeout(lTimeoutDrag);
                    clearTimeout(lTimeoutDragSurvol);
                    if (lOptions.classDragHoverSelec && lDragHoverEnCours) {
                        lTimeoutDragSurvol = setTimeout( () => {
                            lDragHoverEnCours = false;
                            aContexteCourant.node.classList.remove(lOptions.classDragHoverSelec);
                        }
                        , lDureeTimeoutDrag);
                    }
                },
                'drop.selecfile': async function(aEvent) {
                    uInvocateurSelecFile.evenement('drag', {
                        start: false
                    });
                    if (!lOptions.acceptDragDrop || _estDisabled()) {
                        return;
                    }
                    aEvent.stopPropagation();
                    aEvent.preventDefault();
                    const lDataTransfert = aEvent.originalEvent.dataTransfer;
                    if (lDataTransfert) {
                        const lFiles = Array.from(lDataTransfert.files);
                        if (lFiles.length > 0) {
                            const lResult = await SelecFile_1.SelecFile.addFiles(lOptions, lFiles);
                            if (lResult && lResult.files) {
                                lInfosAdd.callback([lResult]);
                                aContexteCourant.controleur.$refresh();
                            }
                        }
                    }
                }
            });
            const lTitleOrigine = aContexteCourant.node.title;
            const lMAJDisabled = (aDisabled) => {
                if (!aDisabled) {
                    _majOptions();
                }
                if (aDisabled && lTitleOrigine && lOptions.title) {
                    ObjetHtml_1.GHtml.setTitle(aContexteCourant.node, lTitleOrigine || '');
                } else if (!aDisabled && lOptions.title) {
                    ObjetHtml_1.GHtml.setTitle(aContexteCourant.node, lOptions.title);
                }
                if (lOptions.getClass) {
                    lJElement.removeClass(lOptions.getClass(!aDisabled)).addClass(lOptions.getClass(aDisabled));
                }
            }
            ;
            if (lInfosGetDisabled.valide) {
                const lGetter = function() {
                    return !!lInfosGetDisabled.callback([lJElement.get(0), aContexteCourant.data]);
                };
                if (lInfosGetDisabled.estFonction || !lGetter() || lGetter() === true) {
                    lDisabled = !!lGetter();
                    aOutils.abonnerRefresh( () => {
                        const lNewDisabled = !!lGetter();
                        if (lNewDisabled !== lDisabled) {
                            lDisabled = lNewDisabled;
                            lMAJDisabled(lDisabled);
                        }
                    }
                    , lJElement.get(0), aContexteCourant);
                } else {
                    IE.log.addLog('echec getDisabled de ie-selecfile, propriété incorrecte du model "' + lModele + '"');
                }
            }
            lMAJDisabled(lDisabled);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-selecfile');
            return true;
        }
        );
        function _eventDragAvecFiles(aEvent) {
            if (aEvent.originalEvent && aEvent.originalEvent.dataTransfer && aEvent.originalEvent.dataTransfer.items && aEvent.originalEvent.dataTransfer.items.length > 0) {
                let lAvecFile = false;
                try {
                    for (let i = 0; i < aEvent.originalEvent.dataTransfer.items.length; i++) {
                        const lData = aEvent.originalEvent.dataTransfer.items[i];
                        if (!lData || lData.kind !== 'string') {
                            lAvecFile = true;
                            break;
                        }
                    }
                } catch (e) {
                    lAvecFile = true;
                }
                return lAvecFile;
            }
            return true;
        }
        $(document).on({
            'dragenter.selecfile dragover.selecfile': function(aEvent) {
                const lParams = {
                    start: true,
                    avecSelecAbonne: false
                };
                if (_eventDragAvecFiles(aEvent)) {
                    uInvocateurSelecFile.evenement('drag', lParams);
                } else {
                    lParams.avecSelecAbonne = false;
                }
                if (lParams.avecSelecAbonne && !('__dropAccepted__'in aEvent.originalEvent) && 'dataTransfer'in aEvent.originalEvent) {
                    aEvent.originalEvent.dataTransfer.dropEffect = 'none';
                    return false;
                }
            },
            'dragexit.selecfile dragleave.selecfile dragend.selecfile drop.selecfile': function() {
                uInvocateurSelecFile.evenement('drag', {
                    start: false
                });
            }
        });
    },
    fn: 'iehtml.selecfile.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const tslib_1 = require("tslib");
        const IEHtml = require("IEHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetHint_1 = require("ObjetHint");
        require("IEHtml.EllipisisMultiline.js");
        require("IEHtml.Load.Src.js");
        require("IEHtml.ImgViewer.js");
        require("IEHtml.AutoResize.js");
        require("IEHtml.Collapsible.js");
        require("IEHtml.VisibilityObserver.js");
        require("IEHtml.ResizeObserver.js");
        require("IEHtml.Ripple.js");
        require("IEHtml.DraggableDroppable.js");
        require("IEHtml.ZoneNavigation.js");
        require("IEHtml.BtnImage.js");
        require("IEHtml.CheckboxRadio.js");
        require("IEHtml.Identite.js");
        require("IEHtml.Chips.js");
        require("IEHtml.Combo.js");
        require("IEHtml.Bouton.js");
        require("IEHtml.BtnSelecteur.js");
        require("IEHtml.ZoneDessin.js");
        require("IEHtml.SelecFile");
        IEHtml.addAttribut('ie-node', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                lInfos.callback(aParams);
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-node="' + lValue + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-nodeafter', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, (...aParams) => {
                lInfos.callback(aParams);
            }
            , true);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-nodeafter="' + lValue + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-event', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!aContexteCourant.controleur) {
                return;
            }
            let lTab = lValue.split('->');
            if (lTab.length < 2) {
                return;
            }
            let lMethode;
            const lEvents = lTab[0].trim().split('-');
            let lSelecteur = null;
            lTab.shift();
            lMethode = lTab.join('->');
            if (lMethode.length > 2 && lMethode.charAt(0) === '{') {
                lTab = lMethode.split('}');
                if (lTab.length < 2) {
                    return;
                }
                const lNomSelecteur = lTab[0].slice(1);
                lTab.shift();
                lMethode = lTab.join('}');
                if (aContexteCourant.data && aContexteCourant.data[lNomSelecteur]) {
                    lSelecteur = aContexteCourant.data[lNomSelecteur];
                } else {
                    lSelecteur = lNomSelecteur;
                }
            }
            const lInfos = aOutils.getAccesParametres(lMethode, aContexteCourant);
            if (!lInfos.valide || !lInfos.estFonction) {
                return;
            }
            if (lInfos) {
                const lCallbackEvent = function(aEvent) {
                    return lInfos.callback([aEvent, this, aContexteCourant.node, aContexteCourant.data]);
                };
                if (lSelecteur) {
                    $(aContexteCourant.node).on(lEvents.join(' '), lSelecteur, {
                        controleur: aContexteCourant.controleur
                    }, lCallbackEvent);
                } else {
                    $(aContexteCourant.node).on(lEvents.join(' '), {
                        controleur: aContexteCourant.controleur
                    }, lCallbackEvent);
                }
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-event="' + lValue + '"');
                return true;
            } else {
                aOutils.addCommentaireDebug(aContexteCourant.node, '[ECHEC] ie-event="' + lValue + '"');
            }
            return true;
        }
        );
        IEHtml.addAttribut('ie-eventout', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            aOutils.surInjectionHtml(aContexteCourant, () => {
                const lSelec = 'pointerdown.eventout keydown.eventout';
                function _event(aEvent, ...aParams) {
                    if (aContexteCourant.node !== aEvent.target && (aEvent.isTrigger || !ObjetHtml_1.GHtml.estDocument(aEvent.target)) && !$.contains(aContexteCourant.node, aEvent.target)) {
                        const lResult = lInfos.callback([aEvent, ...aParams]);
                        if (lResult && lResult.nodesExclus && lResult.callback) {
                            if (!lResult.nodesExclus.every || lResult.nodesExclus.every( (aNode) => {
                                return !aNode || (aNode !== aEvent.target && !$.contains(aNode, aEvent.target));
                            }
                            )) {
                                lResult.callback();
                            }
                        }
                    }
                }
                $(aContexteCourant.node).on('destroyed', () => {
                    $(document).off(lSelec, _event);
                }
                );
                $(document).on(lSelec, _event);
            }
            );
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-eventout="' + lValue + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-title', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lNom = aAttributValue || '';
            let lGetter;
            let lOldValue = lNom;
            if (lNom && aContexteCourant.controleur) {
                const lInfos = aOutils.getAccesParametres(lNom, aContexteCourant, true);
                if (lInfos.estFonction) {
                    lGetter = function() {
                        const lResult = (lInfos.callback([aContexteCourant.node, aContexteCourant.data]) || '') + '';
                        return lResult.replace && ObjetChaine_1.GChaine && ObjetChaine_1.GChaine.enleverEntites ? ObjetChaine_1.GChaine.enleverEntites(lResult) : '';
                    }
                    ;
                }
            }
            if (lGetter) {
                lOldValue = lGetter();
            } else if (lOldValue === 'undefined' || lOldValue === 'null') {
                return false;
            } else {}
            $(aContexteCourant.node).attr('title', lOldValue);
            if (lGetter) {
                aOutils.abonnerRefresh( () => {
                    const lValue = lGetter().toString();
                    if (lOldValue !== lValue) {
                        lOldValue = lValue;
                        $(aContexteCourant.node).attr('title', lOldValue);
                    }
                }
                , aContexteCourant.node, aContexteCourant);
            }
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-title' + (lNom ? '="' + lNom + '"' : ''));
            return true;
        }
        );
        IEHtml.addAttribut('ie-hint', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            if (ObjetHint_1.ObjetHint.getDisabled()) {
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-hint (désactivé sur mobile !)');
                return true;
            }
            const lNom = aAttributValue || '';
            let lValue = lNom;
            if (lValue && lValue.length > 2 && lValue.charAt(0) === '\'' && lValue.charAt(lValue.length - 1) === '\'') {
                lValue = lValue.slice(1, lValue.length - 1);
            } else if (lNom && aContexteCourant.controleur) {
                const lInfos = aOutils.getAccesParametres(lNom, aContexteCourant, true);
                if (lInfos.estFonction) {
                    lValue = function(aHint) {
                        const lResult = lInfos.callback([aHint, aContexteCourant.node, aContexteCourant.data]);
                        if (lResult && lResult.then) {
                            return lResult;
                        }
                        return (lResult || '') + '';
                    }
                    ;
                }
            }
            if (!lValue) {
                return true;
            }
            ObjetHint_1.ObjetHint.attach({
                $Element: $(aContexteCourant.node),
                namespace: 'iehint',
                contenu: lValue,
                off: false
            });
            aContexteCourant.node.dataset.avecIeHint = 'true';
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-hint' + (lNom ? '="' + lNom + '"' : ''));
            return true;
        }
        );
        IEHtml.addAttribut('ie-html', (aContexteCourant, aNodeName, aAttributValue, aOutils, aParametresCompile) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            if (!aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lNodeDestination = aOutils.addGetterHtml(aContexteCourant, lInfos);
            if (!lNodeDestination) {
                return;
            }
            aOutils.addCommentaireDebug(lNodeDestination, 'ie-html="' + lValue + '"');
            aParametresCompile.avecCompileFils = false;
            return true;
        }
        );
        IEHtml.addAttribut('ie-texte', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            if (!aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lNodeDestination = aContexteCourant.nodeTransfertContenuDynamique || aContexteCourant.node;
            const lGetter = function() {
                const lResult = lInfos.callback([lNodeDestination, aContexteCourant.data]);
                if (MethodesObjet_1.MethodesObjet.isNumber(lResult)) {
                    return lResult + '';
                }
                return (lResult || '') + '';
            };
            let lOldTexte = lGetter();
            $(lNodeDestination).ieHtml('');
            lNodeDestination.appendChild(document.createTextNode(lOldTexte));
            aOutils.abonnerRefresh( () => {
                const lTexte = lGetter();
                if (lTexte !== lOldTexte) {
                    lOldTexte = lTexte;
                    $(lNodeDestination).ieHtml('');
                    lNodeDestination.appendChild(document.createTextNode(lTexte));
                }
            }
            , lNodeDestination, aContexteCourant);
            aOutils.addCommentaireDebug(lNodeDestination, 'ie-texte="' + lValue + '"');
            return true;
        }
        );
        IEHtml.addAttribut('ie-style', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            let lValue = aAttributValue || '';
            if (!lValue) {
                return true;
            }
            if (!aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.valide) {
                return true;
            }
            const lGetter = function() {
                const lStyle = lInfos.callback([aContexteCourant.node, aContexteCourant.data]) || null;
                return lStyle || {};
            };
            let lObjetCss = lGetter();
            const lJNode = $(aContexteCourant.node);
            if (!lInfos.estFonction || !lObjetCss) {
                return;
            }
            lJNode.css(lObjetCss);
            aOutils.abonnerRefresh( () => {
                const lNewStyleCss = lGetter();
                if (!MethodesObjet_1.MethodesObjet.objetsIdentiques(lNewStyleCss, lObjetCss)) {
                    lObjetCss = lNewStyleCss;
                    $(aContexteCourant.node).css(lObjetCss);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-style="' + lValue + '"');
            return true;
        }
        );
        (function() {
            IEHtml.addAttribut('ie-class', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
                const lValue = aAttributValue || '';
                if (!lValue || !aContexteCourant.controleur) {
                    return true;
                }
                const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
                if (!lInfos.valide) {
                    return true;
                }
                let lClassCss = lInfos.callback() || '';
                if (lClassCss.length > 0) {
                    $(aContexteCourant.node).addClass(lClassCss);
                }
                aOutils.abonnerRefresh( () => {
                    const lNewClassCss = lInfos.callback() || '';
                    if (lNewClassCss !== lClassCss) {
                        $(aContexteCourant.node).removeClass(lClassCss).addClass(lNewClassCss);
                        lClassCss = lNewClassCss;
                    }
                }
                , aContexteCourant.node, aContexteCourant);
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-class="' + lValue + '"');
                return true;
            }
            );
        }());
        (function() {
            IEHtml.addAttribut('ie-display', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
                const lValue = aAttributValue || '';
                if (!lValue || !aContexteCourant.controleur) {
                    return true;
                }
                const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
                if (!lInfos.valide) {
                    return true;
                }
                const lGetter = function() {
                    return !!lInfos.callback([aContexteCourant.node, aContexteCourant.data]);
                };
                const lDisplay = lGetter();
                ObjetHtml_1.GHtml.setDisplay(aContexteCourant.node, lDisplay);
                let lOldDisplayValue = lDisplay;
                aOutils.abonnerRefresh( () => {
                    const lDisplay = lGetter();
                    if (lDisplay !== lOldDisplayValue) {
                        lOldDisplayValue = lDisplay;
                        ObjetHtml_1.GHtml.setDisplay(aContexteCourant.node, lDisplay);
                    }
                }
                , aContexteCourant.node, aContexteCourant);
                aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-display="' + lValue + '"');
                return true;
            }
            );
        }());
        IEHtml.addAttribut('ie-attr', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            const lValue = aAttributValue || '';
            if (!lValue || !aContexteCourant.controleur) {
                return true;
            }
            const lInfos = aOutils.getAccesParametres(lValue, aContexteCourant);
            if (!lInfos.estFonction) {
                return true;
            }
            const lGetter = function() {
                return lInfos.callback([]);
            };
            let lAttr = MethodesObjet_1.MethodesObjet.dupliquer(lGetter());
            if (lAttr) {
                $(aContexteCourant.node).attr(lAttr);
            }
            aOutils.abonnerRefresh( () => {
                const lNewAttr = lGetter();
                if (!MethodesObjet_1.MethodesObjet.objetsIdentiques(lNewAttr, lAttr)) {
                    lAttr = MethodesObjet_1.MethodesObjet.dupliquer(lNewAttr);
                    $(aContexteCourant.node).attr(lAttr);
                }
            }
            , aContexteCourant.node, aContexteCourant);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-attr="' + lValue + '"');
            return true;
        }
        );
        function _initEllipsis(aContexteCourant, aOutils, aAttributValue) {
            const lOptions = {
                getJNodeHint: null,
                avecHint: true
            };
            if (aAttributValue) {
                const lGetOptions = aOutils.getAccesParametres(aAttributValue, aContexteCourant);
                if (lGetOptions.estFonction) {
                    Object.assign(lOptions, lGetOptions.callback());
                } else {}
            }
            $(aContexteCourant.node).addClass('ie-ellipsis');
            if (lOptions.avecHint && !ObjetHint_1.ObjetHint.getDisabled()) {
                aOutils.surInjectionHtml(aContexteCourant, (aParams) => {
                    if (ObjetHint_1.ObjetHint.nodeDansHint(aContexteCourant.node)) {
                        return;
                    }
                    aParams.addMutate( () => {
                        if (aContexteCourant.node.dataset.avecIeHint) {
                            return;
                        }
                        ObjetHint_1.ObjetHint.attach({
                            $Element: MethodesObjet_1.MethodesObjet.isFunction(lOptions.getJNodeHint) ? lOptions.getJNodeHint(aContexteCourant.node) : $(aContexteCourant.node),
                            namespace: 'ellipsis',
                            contenu: function() {
                                return $(aContexteCourant.node).html();
                            },
                            interrupt: function() {
                                const lJThis = $(aContexteCourant.node);
                                if (aContexteCourant.node.dataset.avecIeHint) {
                                    return true;
                                }
                                if (lJThis.prop('title').length > 0) {
                                    return true;
                                }
                                if (Math.ceil(lJThis.outerWidth()) >= lJThis.prop('scrollWidth')) {
                                    return true;
                                }
                            }
                        });
                    }
                    );
                }
                , true);
            }
        }
        IEHtml.addAttribut('ie-ellipsis', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            _initEllipsis(aContexteCourant, aOutils, aAttributValue);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ellipsis');
            return true;
        }
        );
        IEHtml.addAttribut('ie-ellipsis-fixe', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            _initEllipsis(aContexteCourant, aOutils, aAttributValue);
            aOutils.surInjectionHtml(aContexteCourant, (aParams) => {
                let lWidth = null;
                aParams.addMeasure( () => {
                    if (!aContexteCourant.node.style.width) {
                        lWidth = $(aContexteCourant.node).width();
                    }
                }
                );
                aParams.addMutate( () => {
                    if (lWidth !== null) {
                        $(aContexteCourant.node).width(Math.ceil(lWidth));
                    }
                }
                );
            }
            , true);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-ellipsis-fixe');
            return true;
        }
        );
        IEHtml.addAttribut('ie-hintoverflow', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            aOutils.surInjectionHtml(aContexteCourant, (aParams) => {
                aParams.addMutate( () => {
                    if (aContexteCourant.node.dataset.avecIeHint) {
                        return;
                    }
                    ObjetHint_1.ObjetHint.attach({
                        $Element: $(aContexteCourant.node),
                        namespace: 'ie-hintoverflow',
                        contenu: function() {
                            return $(aContexteCourant.node).html();
                        },
                        interrupt: function() {
                            const lJThis = $(this);
                            if (aContexteCourant.node.dataset.avecIeHint) {
                                return true;
                            }
                            if (lJThis.prop('title').length > 0) {
                                return true;
                            }
                            const lScrollH = lJThis.prop('scrollHeight') - 1;
                            const lScrollW = lJThis.prop('scrollWidth') - 1;
                            if (lScrollH < 5 || lScrollW < 5) {
                                return true;
                            }
                            if (Math.ceil(lJThis.outerHeight()) >= lScrollH && Math.ceil(lJThis.outerWidth()) >= lScrollW) {
                                return true;
                            }
                        }
                    });
                }
                );
            }
            , true);
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-hintoverflow');
            return true;
        }
        );
        IEHtml.addAttribut('ie-selecttextfocus', (aContexteCourant, aNodeName, aAttributValue, aOutils) => {
            if (aNodeName !== 'input' && aNodeName !== 'textarea') {
                return true;
            }
            $(aContexteCourant.node).on({
                'focus': function() {
                    if (this.select) {
                        this.select();
                    }
                },
                'mouseup': function(e) {
                    e.preventDefault();
                }
            });
            aOutils.addCommentaireDebug(aContexteCourant.node, 'ie-selecttextfocus');
            return true;
        }
        );
        tslib_1.__exportStar(require("IEHtml"), exports);
    },
    fn: 'iehtmlcomposants.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;require('fonts.css');
    },
    fn: 'declarationindexfont.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("lottie-player.js");
    },
    fn: 'declarationlottie.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.LottiePatience = void 0;
        const GUID_1 = require("GUID");
        require("DeclarationLottie");
        class LottiePatience {
            static construire() {
                if (LottiePatience.url) {
                    return IE.jsx.str("lottie-player", {
                        src: LottiePatience.url,
                        class: "lottie-patience",
                        background: "transparent",
                        "aria-hidden": "true",
                        autoplay: true,
                        loop: true
                    });
                }
                ;return '';
            }
            static setUrl(aUrlLottie) {
                LottiePatience.url = aUrlLottie;
            }
        }
        exports.LottiePatience = LottiePatience;
        LottiePatience.url = '';
        $(window).on('load', () => {
            const lGuid = GUID_1.GUID.getId();
            setTimeout( () => {
                if (LottiePatience.url) {
                    $(document.body).append(IE.jsx.str("div", {
                        id: lGuid,
                        style: "display:none; position:absolute; left: -1000px; width: 0px;"
                    }, LottiePatience.construire()));
                    $(`#${lGuid}`).remove();
                }
            }
            , 5000);
        }
        );
    },
    fn: 'lottiepatience.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMessageInformatif = void 0;
        require('ObjetMessageInformatif.css');
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const LottiePatience_1 = require("LottiePatience");
        let u_windowOK = false;
        $(window).on('load', () => {
            u_windowOK = true;
        }
        );
        class ObjetMessageInformatif {
            constructor() {
                this.Nom = GUID_1.GUID.getId();
                this.locked = false;
                this.DetailMessageInformatif = '';
                this.IdBarre = this.Nom + '_BarreProgression';
                this.IdDetailMessageInformatif = this.Nom + '_DetailMessageInformatif';
                this.IdMessageInformatif = this.Nom + '_DetailMessage';
                this.compteurBlocage = 0;
                if (u_windowOK) {
                    this.init();
                } else {
                    $(window).on('load', () => {
                        this.init();
                    }
                    );
                }
            }
            init() {
                if (!IE || !Invocateur_1.Invocateur || !ObjetHtml_1.GHtml) {
                    return;
                }
                IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.Nom, 2000);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.eventIOAjax, this._surEventIOAjax.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.patience, this._surPatience.bind(this));
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, () => {
                    this.debloquer(true);
                    this.masquer();
                }
                );
                const lThis = this;
                $(window).on('resize', () => {
                    if (lThis.EnAffichage) {
                        lThis._positionner();
                    }
                }
                );
            }
            setDonnees(aMessage, aAvecBarreDeProgression, ANbElmtsTotal, ANbElmtsTraites, aParams) {
                this.AvecBarreDeProgression = aAvecBarreDeProgression;
                this.DetailMessageInformatif = aMessage;
                this.NbElmtsTotal = ANbElmtsTotal;
                this.NbElmtsTraites = (ANbElmtsTraites ? ANbElmtsTraites : 0) - 1;
                const lTraduction = ObjetTraduction_1.GTraductions ? ObjetTraduction_1.GTraductions.getValeur('connexion.MessageVeuillezPatienter') : '';
                this.afficher(lTraduction, null, true, null, aParams);
                if (this.AvecBarreDeProgression) {
                    this.locked = true;
                    this.progresser();
                }
            }
            afficher(aMessage, aDuree, aBloquer, aDetailMessageInformatif, aParams) {
                this.compteurBlocage += 1;
                this._arreterTimerAffichage();
                if (!this.locked) {
                    this.message = aMessage;
                    this.duree = aDuree;
                    this.bloquer = aBloquer;
                    if (this.bloquer && this.compteurBlocage === 1) {
                        this._bloquerInterface();
                    }
                    this._afficherContenu(aMessage, aDuree, aDetailMessageInformatif, aParams);
                }
            }
            bloquerAfficherAvecDelai(aMessage, aDelaiAffichage, aDetailMessageInformatif, aParams) {
                this.compteurBlocage += 1;
                this._arreterTimerAffichage();
                if (!this.locked) {
                    this.message = aMessage;
                    this.duree = null;
                    this.bloquer = true;
                    if (this.compteurBlocage === 1) {
                        this._bloquerInterface();
                    }
                    if (this.EnAffichage) {
                        this._afficherContenu(aMessage, null, aDetailMessageInformatif, aParams);
                    } else {
                        const lDelaiAffichage = !IE.estMobile && aDelaiAffichage ? aDelaiAffichage : 0;
                        this._timerAffichage = setTimeout(this._afficherContenu.bind(this, aMessage, null, aDetailMessageInformatif, aParams), lDelaiAffichage);
                    }
                }
            }
            masquer() {
                this.compteurBlocage = Math.max(0, this.compteurBlocage - 1);
                if (this.compteurBlocage > 0) {
                    return;
                }
                this._arreterTimerAffichage();
                if (!this.locked) {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    ObjetHtml_1.GHtml.setHtml(this.Nom, '');
                    this.DetailMessageInformatif = '';
                    if (this.bloquer && this.guidBlocage) {
                        try {
                            GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                                bloquer: false,
                                avecVoile: false,
                                guidBlocage: this.guidBlocage
                            });
                            this.guidBlocage = null;
                        } catch (E) {}
                    }
                    this.EnAffichage = false;
                }
            }
            masquerAvecLock() {
                this._arreterTimerAffichage();
                this.locked = false;
                this.masquer();
            }
            progresser(aParam) {
                this._arreterTimerAffichage();
                if (this.AvecBarreDeProgression && !aParam) {
                    this.NbElmtsTraites++;
                    if (this.NbElmtsTotal !== 0) {
                        const LPourcentage = (this.NbElmtsTraites * 100) / this.NbElmtsTotal;
                        ObjetHtml_1.GHtml.setHtml(this.IdBarre, this.construireBarre(LPourcentage));
                        ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, this.DetailMessageInformatif + ' ' + this.NbElmtsTraites + '/' + this.NbElmtsTotal);
                    }
                } else if (this.AvecBarreDeProgression && aParam && MethodesObjet_1.MethodesObjet.isObject(aParam)) {
                    this.NbElmtsTraites = aParam.progress.actualFile;
                    ObjetHtml_1.GHtml.setHtml(this.IdBarre, this.construireBarre(aParam.progress.percent));
                    ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, (aParam.message || this.DetailMessageInformatif) + ' ' + this.NbElmtsTraites + '/' + this.NbElmtsTotal);
                }
            }
            debloquer(aDebloquerForcer) {
                this._arreterTimerAffichage();
                const LPourcentage = (this.NbElmtsTraites * 100) / this.NbElmtsTotal;
                if (LPourcentage === 100 || aDebloquerForcer) {
                    this.AvecBarreDeProgression = false;
                    this.DetailMessageInformatif = '';
                    this.locked = false;
                }
            }
            construireBarre(APourcentage) {
                return '<div style="width:' + APourcentage + '%;"></div>';
            }
            setDetailMessageInformatif(AMessage) {
                this.DetailMessageInformatif = AMessage;
                ObjetHtml_1.GHtml.setHtml(this.IdDetailMessageInformatif, AMessage);
            }
            _arreterTimerAffichage() {
                if (this._timerAffichage) {
                    clearTimeout(this._timerAffichage);
                    delete this._timerAffichage;
                }
            }
            _afficherContenu(aMessage, aDuree, aDetailMessageInformatif, aParams) {
                this._arreterTimerAffichage();
                const lParams = Object.assign({
                    htmlPied: '',
                    controleur: null
                }, aParams);
                const lHtml = IE.jsx.str("div", {
                    class: "MessageInformatif",
                    role: "presentation"
                }, IE.jsx.str(IE.jsx.fragment, null, IE.estMobile ? IE.jsx.str("div", {
                    class: "overlay"
                }) : '', IE.jsx.str("div", {
                    class: "content"
                }, IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("div", {
                    class: "message",
                    id: this.IdMessageInformatif,
                    tabindex: "-1",
                    role: "alert"
                }, aMessage), LottiePatience_1.LottiePatience.construire(), IE.jsx.str("div", {
                    class: "detail-message",
                    id: this.IdDetailMessageInformatif
                }, aDetailMessageInformatif ? aDetailMessageInformatif : this.DetailMessageInformatif), this.AvecBarreDeProgression ? IE.jsx.str("div", {
                    id: this.IdBarre,
                    class: "progress",
                    "aria-hidden": "true"
                }, this.construireBarre(0)) : '', lParams.htmlPied ? IE.jsx.str("div", {
                    class: "pied"
                }, lParams.htmlPied) : ''))));
                if (this.EnAffichage) {
                    clearInterval(this.Timer);
                }
                ObjetHtml_1.GHtml.setHtml(this.Nom, lHtml, {
                    controleur: lParams.controleur
                });
                try {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                    $(`#${this.Nom.escapeJQ()} .content`).finish().css('opacity', 0).animate({
                        opacity: 1
                    }, {
                        duration: 500
                    });
                    this._positionner();
                } catch (E) {
                    try {
                        document.getElementById(this.IdMessageInformatif).style.outlineWidth = '0px';
                    } catch (e) {}
                }
                this.EnAffichage = true;
                if (aDuree) {
                    this.Timer = setTimeout(this.masquer.bind(this), aDuree * 1000);
                }
            }
            _positionner() {
                ObjetPosition_1.GPosition.centrer(this.Nom);
            }
            _bloquerInterface() {
                try {
                    this.guidBlocage = GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                        bloquer: true,
                        pourPatience: true,
                        avecVoile: false,
                        prioriteBlocage: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.messageInformatif
                    });
                } catch (E) {}
            }
            _surEventIOAjax(aParametres) {
                if (aParametres.actualisation) {
                    if (this.EnAffichage && !this.locked) {
                        this.setDetailMessageInformatif(aParametres.message || '');
                    }
                    return;
                }
                if (aParametres.blocageDeconnexion === true) {
                    this.blocageDeconnexion = true;
                    this.compteurBlocage = 0;
                    this.debloquer(true);
                    this.masquer();
                    this.bloquerAfficherAvecDelai(ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter'), 0, aParametres.message || '');
                    return;
                }
                if (aParametres.blocageDeconnexion === false) {
                    delete this.blocageDeconnexion;
                    this.masquer();
                    return;
                }
                if (this.blocageDeconnexion) {
                    return;
                }
                if (aParametres.emission) {
                    if (aParametres.upload) {
                        if (aParametres.nombreFichiers > 0 && aParametres.progress) {
                            if (aParametres.progress.personnalise) {
                                this.progresser(aParametres);
                            } else if (aParametres.progress.percent === 0) {
                                this.setDonnees(aParametres.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'), true, aParametres.nombreFichiers, aParametres.progress.actualFile, aParametres.params);
                            } else {
                                this.progresser(aParametres);
                            }
                        } else if (aParametres.nombreFichiers > 0) {
                            this.setDonnees(aParametres.message || ObjetTraduction_1.GTraductions.getValeur('requete.transfertPJ'), true, aParametres.nombreFichiers, null, aParametres.params);
                        } else {
                            this.progresser();
                        }
                    } else {
                        const lMessage = ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter');
                        const lDetail = aParametres.message || '';
                        if (aParametres.delai === 0) {
                            this.afficher(lMessage, null, true, lDetail, aParametres.params);
                        } else {
                            this.bloquerAfficherAvecDelai(lMessage, aParametres.delai || 500, lDetail, aParametres.params);
                        }
                    }
                } else {
                    if (aParametres.upload) {
                        this.debloquer(aParametres.debloquerForcer);
                    }
                    this.masquer();
                }
            }
            _surPatience(aAfficher, aParametres) {
                const lParametres = Object.assign({
                    delai: 0,
                    message: ''
                }, aParametres);
                if (aAfficher) {
                    this.bloquerAfficherAvecDelai(ObjetTraduction_1.GTraductions.getValeur('requete.VeuillezPatienter'), lParametres.delai || 0, lParametres.message || '');
                } else {
                    this.masquer();
                }
            }
        }
        exports.ObjetMessageInformatif = ObjetMessageInformatif;
    },
    fn: 'objetmessageinformatif.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreAction = void 0;
        var EGenreAction;
        (function(EGenreAction) {
            EGenreAction[EGenreAction["Valider"] = 0] = "Valider";
            EGenreAction[EGenreAction["NePasValider"] = 1] = "NePasValider";
            EGenreAction[EGenreAction["Annuler"] = 2] = "Annuler";
        }
        )(EGenreAction || (exports.EGenreAction = EGenreAction = {}));
    },
    fn: 'enumere_action.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EStructureAffichage = void 0;
        var EStructureAffichage;
        (function(EStructureAffichage) {
            EStructureAffichage[EStructureAffichage["Verticale"] = 1] = "Verticale";
            EStructureAffichage[EStructureAffichage["Autre"] = 3] = "Autre";
        }
        )(EStructureAffichage || (exports.EStructureAffichage = EStructureAffichage = {}));
    },
    fn: 'enumere_structureaffichage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetInterface = void 0;
        require('ObjetInterface.css');
        const ObjetIdentite_1 = require("ObjetIdentite");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const Enumere_Event_1 = require("Enumere_Event");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetWAI_1 = require("ObjetWAI");
        class ObjetInterface extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.Instances = [];
                this.GenreAffichage = [];
                this.NombreGenreAffichage = 0;
                this._pileInfosFenetres = [];
                this._pileFenetre = [];
                this.EtatIdCourant = true;
                this.reinitialiser();
                this.AvecCadre = true;
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Verticale;
                this.IdentZoneAlClient = -1;
                this.AddSurZone = [];
                this.idPremierObjet = '';
                if (this.Nom && this.avecEventResizeNavigateur()) {
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurResize, this._surResizeInterface);
                }
            }
            reinitialiser() {
                this.detruireInstancesFils();
                this.Instances = [];
                this.GenreAffichage = [];
                this.NombreGenreAffichage = 0;
                this._pileInfosFenetres = [];
            }
            focusSurPremierElement() {}
            focusSurPremierObjet() {
                if (this.idPremierObjet) {
                    ObjetHtml_1.GHtml.setFocus(this.idPremierObjet);
                } else {
                    IE.log.addLog('[' + MethodesObjet_1.MethodesObjet.getNomClassDeConstructeur(this.constructor) + '] Il est où mon premierobjet ?', '', IE.log.genre.Avertissement);
                }
            }
            addInstance(aParametres) {
                const lParametres = {
                    objet: null,
                    constructionFenetre: false,
                    evenement: null,
                    init: null,
                    ident: null,
                    traductions: null
                };
                $.extend(lParametres, aParametres);
                const lObjetGraphique = this.getObjetGraphique(lParametres.objet);
                if (!lObjetGraphique) {
                    IE.log.addLog('ObjetInterface.addInstance : "' + (lObjetGraphique ? lObjetGraphique.nom : lParametres.objet) + '" n"existe pas!', null, IE.log.genre.Avertissement);
                    return null;
                }
                if ((lParametres.ident !== null && lParametres.ident !== undefined)) {
                    this.NombreGenreAffichage = lParametres.ident;
                }
                this.GenreAffichage[this.NombreGenreAffichage] = lParametres.objet;
                if (lObjetGraphique) {
                    if (lParametres.constructionFenetre) {
                        this._pileInfosFenetres[this.NombreGenreAffichage] = ({
                            ident: this.NombreGenreAffichage,
                            genre: lParametres.objet,
                            evenement: lParametres.evenement,
                            init: lParametres.init,
                            traductions: lParametres.traductions,
                            coordonnees: {
                                left: 0,
                                top: 0
                            }
                        });
                    } else {
                        const lInstance = this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, this.NombreGenreAffichage, lParametres.evenement);
                        this.Instances[this.NombreGenreAffichage] = lInstance;
                        if (lParametres.init) {
                            lParametres.init.call(this, lInstance);
                        }
                    }
                }
                return this.NombreGenreAffichage++;
            }
            getObjetGraphique(aConstructor) {
                if (aConstructor && MethodesObjet_1.MethodesObjet.isFunction(aConstructor)) {
                    const lInfosObjet = {
                        nom: 'NON IDENTIFIE',
                        estFenetre: aConstructor.prototype && aConstructor.prototype.estObjetGraphiqueFenetre(),
                        constructeur: aConstructor
                    };
                    return lInfosObjet;
                }
                return null;
            }
            add(aClassIdentite, AEvenement, AInitialiser, aTraductions, I) {
                return this.addInstance({
                    objet: aClassIdentite,
                    evenement: AEvenement,
                    init: AInitialiser,
                    traductions: aTraductions,
                    ident: I
                });
            }
            addFenetre(aClassFenetre, AEvenement, AInitialiser, aTraductions, I) {
                return this.addInstance({
                    objet: aClassFenetre,
                    constructionFenetre: true,
                    evenement: AEvenement,
                    init: AInitialiser,
                    traductions: aTraductions,
                    ident: I
                });
            }
            del() {
                this.Instances[this.NombreGenreAffichage] = null;
                this.NombreGenreAffichage--;
            }
            getInstance(AIdent) {
                let lInstance = this.Instances[AIdent];
                if (!this.Instances[AIdent] && this.getObjetGraphique(this.GenreAffichage[AIdent]) && this.getObjetGraphique(this.GenreAffichage[AIdent]).estFenetre && this._pileInfosFenetres[AIdent] && !this.__enCoursDeDestruction) {
                    lInstance = this.creerFenetre(AIdent);
                }
                return lInstance;
            }
            existeInstance(aIdent) {
                return !!this.Instances[aIdent];
            }
            creerFenetre(AIdent) {
                let lInstance;
                if (this._pileInfosFenetres[AIdent]) {
                    const lInfosFenetre = this._pileInfosFenetres[AIdent];
                    const lObjetGraphique = this.getObjetGraphique(lInfosFenetre.genre);
                    lInstance = this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, AIdent, lInfosFenetre.evenement);
                    lInstance.destructionSurFermeture = true;
                    const lSelf = this;
                    lInstance.ajouterCallbackSurDestruction( () => {
                        if (AIdent !== undefined && lSelf.Instances[AIdent] && lSelf._pileInfosFenetres[AIdent]) {
                            lSelf.Instances[AIdent] = null;
                            const lIndice = lSelf._pileFenetre.indexOf(lSelf.getZoneId(AIdent));
                            if (lIndice >= 0) {
                                lSelf._pileFenetre[lIndice] = null;
                            }
                        }
                    }
                    );
                    if (!this._pileFenetre) {
                        this._pileFenetre = [];
                    }
                    this._pileFenetre.push(this.getZoneId(AIdent));
                    IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.getZoneId(AIdent), lInstance.getZIndex ? lInstance.getZIndex() : '');
                    if (lInfosFenetre.init) {
                        lInfosFenetre.init.call(this, lInstance);
                    }
                    lInstance.coordonnees = lInfosFenetre.coordonnees;
                    lInstance.initialiser();
                    this.Instances[AIdent] = lInstance;
                }
                return lInstance;
            }
            getNomInstance(AIdent) {
                return this.getInstance(AIdent) ? this.getInstance(AIdent).getNom() : '';
            }
            getInstanceParNom(aNom) {
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (this.getNomInstance(I) === aNom) {
                        return this.getInstance(I);
                    }
                }
            }
            getZoneId(AIdent) {
                return this.construireNom(this.Nom + '.Instances', AIdent);
            }
            initialiser(aReset) {
                if (aReset) {
                    this.reinitialiser();
                }
                this.EnConstruction = true;
                try {
                    this.construireInstances();
                    this.setParametresGeneraux();
                    ObjetHtml_1.GHtml.setHtml(this.Pere === null || this.Pere === undefined ? GApplication.getIdConteneur() : this.Nom, this._construireStructureAffichage(), {
                        instance: this
                    });
                    this.construireAffichage();
                } finally {
                    this.EnConstruction = false;
                }
                this.recupererDonnees();
                this.surResizeInterface();
                return this;
            }
            appartientAZone(AIdent) {
                for (let I = 0; I < this.AddSurZone.length; I++) {
                    const lElement = this.AddSurZone[I];
                    if ((lElement === AIdent && lElement !== '') || (lElement && lElement.ident === AIdent)) {
                        return true;
                    }
                }
                return false;
            }
            construireStructureAffichageVerticale(lFooter) {
                const H = [];
                let lInfo;
                H.push('<div class="interface_affV', (this.AvecCadre ? ' interface_affV_padding' : ''), (!!lFooter ? lFooter : ''), '" ', ObjetWAI_1.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Presentation), '>');
                const lTabAffichages = [];
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (!this.appartientAZone(I) && !this.getObjetGraphique(this.GenreAffichage[I]).estFenetre) {
                        lInfo = {
                            estZoneClient: this.IdentZoneAlClient === I,
                            indice: I
                        };
                        lTabAffichages.push(lInfo);
                    }
                }
                for (let I = 0; I < lTabAffichages.length; I++) {
                    lInfo = lTabAffichages[I];
                    H.push('<div id="' + this.getZoneId(lInfo.indice) + '"', (lInfo.estZoneClient ? ' class="interface_affV_client"' : ''), '></div>');
                }
                if (this.NombreGenreAffichage === 0) {
                    H.push('<div>' + this.composeMessage('') + '</div>');
                }
                H.push('</div>');
                return H.join('');
            }
            construireStructureAffichageAutre() {
                return '';
            }
            construireStructureFenetres() {
                this._effacerFenetres();
                const H = [];
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    const lInstance = this.Instances[I];
                    if (this.getObjetGraphique(this.GenreAffichage[I]).estFenetre && lInstance) {
                        if (!this._pileFenetre) {
                            this._pileFenetre = [];
                        }
                        this._pileFenetre.push(this.getZoneId(I));
                        IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(this.getZoneId(I), lInstance && 'getZIndex'in lInstance && MethodesObjet_1.MethodesObjet.isFunction(lInstance.getZIndex) ? lInstance.getZIndex() : '');
                    }
                }
                return H.join('');
            }
            construireInstances() {}
            setParametresGeneraux() {}
            construireStructureAffichage() {
                const lHtml = [];
                switch (this.GenreStructure) {
                case Enumere_StructureAffichage_1.EStructureAffichage.Verticale:
                    lHtml.push(this.construireStructureAffichageVerticale());
                    break;
                default:
                    lHtml.push(this.construireStructureAffichageAutre());
                    break;
                }
                if ((this.AddSurZone.length || this.avecBandeau)) {
                    this.construireStructureAffichageBandeau();
                }
                return lHtml.join('');
            }
            construireStructureAffichageBandeau() {}
            construireAffichage() {
                for (let I = 0; I < this.NombreGenreAffichage; I++) {
                    if (this.Instances[I]) {
                        if (!this.getObjetGraphique(this.GenreAffichage[I]).estFenetre) {
                            this.Instances[I].setVisible(this.Instances[I].Visible);
                        }
                        this.Instances[I].initialiser();
                    }
                }
                return '';
            }
            recupererDonnees(...aParams) {}
            construireObjetGraphique(ANomObjet, AIdent, AEvenement) {
                const lObjetGraphique = this.getObjetGraphique(ANomObjet);
                return lObjetGraphique ? this._construireObjetGraphique(lObjetGraphique.constructeur, lObjetGraphique.nom, AIdent, AEvenement) : null;
            }
            setCallbackNavigation(aCallbackNavigation) {
                this._callbackNavigation = aCallbackNavigation;
            }
            actionSurValidation(...aParams) {
                if (this._callbackNavigation) {
                    this._callbackNavigation();
                    delete this._callbackNavigation;
                } else if (this.afficherPage) {
                    this.afficherPage(...aParams);
                } else {
                    this.recupererDonnees(...aParams);
                }
            }
            setIdCourant(AId) {
                if (this.EtatIdCourant && window.GEtatUtilisateur) {
                    window.GEtatUtilisateur.IdCourant = AId;
                }
            }
            getIdCourant() {
                return window.GEtatUtilisateur ? window.GEtatUtilisateur.IdCourant : null;
            }
            setFocusIdCourant() {
                ObjetHtml_1.GHtml.setFocus(this.getIdCourant());
            }
            setEtatIdCourant(ABool) {
                this.EtatIdCourant = ((ABool !== null && ABool !== undefined)) ? ABool : true;
            }
            _surResizeInterface() {
                this.surResizeInterface();
            }
            surResizeInterface() {}
            detruireInstancesFils() {
                this._effacerFenetres();
                super.detruireInstancesFils();
                const lNbr = this.Instances ? this.Instances.length : 0;
                let lInstance;
                for (let I = 0; I < lNbr; I++) {
                    lInstance = this.Instances[I];
                    if (lInstance && (!lInstance.isDestroyed || !lInstance.isDestroyed()) && lInstance.free) {
                        IE.log.addLog('detruireInstancesFils instance non detruite : ' + lInstance.getNom());
                        lInstance.free();
                    }
                    this.Instances[I] = null;
                }
            }
            _construireObjetGraphique(aConstructeur, aNom, aIdent, aEvenement) {
                IE.log.addLog('Interface Construire ' + aNom + ' (' + aIdent + ')', 'OBJETINTERFACE_LOGNOM');
                if (aConstructeur) {
                    return new aConstructeur({
                        nomObjet: 'Instances[' + aIdent + ']',
                        pere: this,
                        evenement: aEvenement
                    });
                }
                ;return null;
            }
            getPageImpression(AFormat) {
                return;
            }
            _construireStructureAffichage() {
                const lHtml = [];
                lHtml.push(this.construireStructureFenetres());
                lHtml.push(this.construireStructureAffichage());
                return lHtml.join('');
            }
            _effacerFenetres() {
                if (this._pileFenetre) {
                    this._pileFenetre = [];
                }
            }
        }
        exports.ObjetInterface = ObjetInterface;
    },
    fn: 'objetinterface.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._ObjetFenetre = void 0;
        const ObjetInterface_1 = require("ObjetInterface");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const MethodesTableau_1 = require("MethodesTableau");
        const GestionnaireModale_1 = require("GestionnaireModale");
        class _ObjetFenetre extends ObjetInterface_1.ObjetInterface {
            constructor(...aParams) {
                super(...aParams);
                this._structureBoutons = [];
                this.__surDestructionApresFermeture_ = false;
                this.optionsFenetre = {
                    roleWAI: 'dialog',
                    listeBoutonsInvisibles: [],
                    opaciteVoileModale: GestionnaireModale_1.OpaciteVoileBloquant.default
                };
                this.EnAffichage = false;
                this.promise = null;
                this._promiseResolve = null;
                this.NomFenetre = this.Nom + '_Fenetre';
                this.idFenetreContenu = this.Nom + '_FenetreContenu';
                this.IdTitre = this.Nom + '_Titre';
                this.IdTitreImage = this.IdTitre + '_image';
                this.IdContenu = this.Nom + '_Contenu';
                this.IdPremierElement = this.NomFenetre;
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Autre;
                this.optionsInterne = {
                    closeStart: null,
                    closeEnd: null
                };
            }
            setOptionsFenetre(aOptions) {
                Object.assign(this.optionsFenetre, aOptions);
                this._structureBoutons = null;
                this.$refreshSelf();
                return this;
            }
            _getOptionsFenetre() {
                return this.optionsFenetre;
            }
            setBoutonActif(I, AActif) {
                if (this.optionsFenetre.listeBoutonsInactifs) {
                    this.optionsFenetre.listeBoutonsInactifs[I] = !AActif;
                    this.$refreshSelf();
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    $off: function() {
                        return !aInstance.EnAffichage;
                    },
                    listeBoutons() {
                        if (!aInstance._structureBoutons) {
                            aInstance._structureBoutons = [];
                            const T = aInstance._structureBoutons;
                            aInstance.optionsFenetre.listeBoutons.forEach( (aElement, aIndex) => {
                                const lElement = {
                                    index: null,
                                    libelle: null,
                                    theme: null,
                                    sansFermeture: null
                                };
                                if (typeof aElement === 'string') {
                                    lElement.libelle = aElement;
                                } else {
                                    Object.assign(lElement, aElement);
                                }
                                if (aElement) {
                                    lElement.index = aIndex;
                                    lElement.theme = lElement.theme ? lElement.theme : (lElement.libelle === ObjetTraduction_1.GTraductions.getValeur('Valider') ? Type_ThemeBouton_1.TypeThemeBouton.primaire : Type_ThemeBouton_1.TypeThemeBouton.secondaire);
                                    lElement.sansFermeture = lElement.sansFermeture ? lElement.sansFermeture : false;
                                    T.push(lElement);
                                }
                            }
                            );
                        }
                        return aInstance._structureBoutons || [];
                    },
                    fenetreBtn: {
                        event(aBoutonRepeat) {
                            aInstance.surValidation(aBoutonRepeat.element.index);
                        },
                        getLibelle(aBoutonRepeat) {
                            return aBoutonRepeat.element.libelle;
                        },
                        getDisabled(aBoutonRepeat) {
                            if (aBoutonRepeat.element.getDisabled) {
                                return aBoutonRepeat.element.getDisabled();
                            }
                            return aInstance.optionsFenetre.listeBoutonsInactifs && aInstance.optionsFenetre.listeBoutonsInactifs[aBoutonRepeat.element.index] === true;
                        },
                        getOptions(aBoutonRepeat) {
                            if (MethodesObjet_1.MethodesObjet.isObject(aBoutonRepeat.element.options)) {
                                return aBoutonRepeat.element.options;
                            }
                        }
                    }
                });
            }
            composeContenu() {
                return '';
            }
            getBoutonNumero(aNumeroBouton) {
                let lBouton = {};
                if (this.optionsFenetre.listeBoutons) {
                    const lBoutonFenetre = this.optionsFenetre.listeBoutons[aNumeroBouton];
                    if (typeof lBoutonFenetre === 'string') {
                        lBouton = {
                            libelle: lBoutonFenetre
                        };
                    } else {
                        lBouton = lBoutonFenetre;
                    }
                }
                return lBouton || {
                    annuler: true
                };
            }
            setBoutonVisible(I, aVisible) {
                this.optionsFenetre.listeBoutonsInvisibles[I] = !aVisible;
                this.$refreshSelf();
            }
            getParametresValidation(aNumeroBouton) {
                const lParametres = {
                    instance: this,
                    bouton: this.getBoutonNumero(aNumeroBouton),
                    numeroBouton: aNumeroBouton
                };
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.addParametresValidation)) {
                    Object.assign(lParametres, this.optionsFenetre.addParametresValidation.call(this.Pere, lParametres));
                }
                return lParametres;
            }
            promiseResolve(aParams) {
                if (this._promiseResolve) {
                    this._promiseResolve(aParams);
                    this._promiseResolve = null;
                }
            }
            surValidation(ANumeroBouton) {
                const lParams = this.getParametresValidation(ANumeroBouton);
                this.promiseResolve(lParams);
                if (this.optionsFenetre.surValiderAvantFermer) {
                    this.optionsFenetre.surValiderAvantFermer.call(this.Pere, lParams);
                }
                if (!lParams || !lParams.bouton || typeof lParams.bouton !== 'object' || !lParams.bouton.sansFermeture) {
                    this.fermer();
                }
                if (this.optionsFenetre.callback) {
                    this.optionsFenetre.callback.call(this.Pere, ANumeroBouton, lParams);
                }
                this.callback.appel(ANumeroBouton, lParams);
            }
            async fermer(aSurInteractionUtilisateur) {
                if (!this.estAffiche()) {
                    return Promise.resolve();
                }
                this.optionsInterne.closeStart();
                try {
                    if (this._focusPrecedent && $(this._focusPrecedent).length === 1) {
                        if (ObjetHtml_1.GHtml.focusEstDansElement(this.Nom)) {
                            $(this._focusPrecedent).focus();
                        }
                        this._focusPrecedent = null;
                    }
                } catch (e) {}
                this.EnAffichage = false;
                if (this.surFermer) {
                    this.surFermer();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.callbackFermer)) {
                    this.optionsFenetre.callbackFermer();
                }
                if (MethodesObjet_1.MethodesObjet.isFunction(this.optionsFenetre.callbackApresFermer)) {
                    this.optionsFenetre.callbackApresFermer();
                }
                this.promiseResolve({
                    surFermer: true
                });
                this.$refresh();
                const lResultPromise = this.optionsInterne.closeEnd();
                const lFunc = () => {
                    ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    if (this.destructionSurFermeture && !this.__enCoursDeDestruction) {
                        this.__surDestructionApresFermeture_ = true;
                        this.free();
                    }
                }
                ;
                if (lResultPromise && lResultPromise.then) {
                    return lResultPromise.then(lFunc);
                }
                lFunc();
                return Promise.resolve();
            }
            async afficher(...aParams) {
                return;
            }
            surAfficher() {}
            actualiser() {}
            surFermer() {}
            estAffiche() {
                return this.EnAffichage === true;
            }
            setBoutonFocus(aVal, avecDecalageFocus) {
                let lIndice = aVal;
                if (MethodesObjet_1.MethodesObjet.isObject(aVal)) {
                    lIndice = MethodesTableau_1.MethodesTableau.indexOfMask(this.optionsFenetre.listeBoutons, aVal);
                }
                if (lIndice >= 0) {
                    ObjetHtml_1.GHtml.setFocus(this._getIdBoutons(lIndice), true, avecDecalageFocus);
                }
                return this;
            }
            composeBas() {
                return this.optionsFenetre.htmlFooter || '';
            }
            positionnerFenetre(aParams) {
                return this;
            }
            existeCoordonnees() {
                return false;
            }
            setCoordonnees() {}
            positionnerSousId(aId) {}
            surFixerTaille() {}
            _getIdBoutons(aIndice) {
                return this.Nom + '_btns_' + aIndice;
            }
            setBoutonLibelle(I, aLibelle) {}
            debutRetaillage() {}
            finRetaillage() {}
            getHeightMaxIdSelonEcran(aId) {
                return 0;
            }
            estObjetGraphiqueFenetre() {
                return true;
            }
            static creerInstanceFenetre(aConstructeur, aParametres, aOptionsFenetre) {
                if (!aParametres || !aParametres.pere) {
                    return;
                }
                const lInstance = ObjetIdentite_1.Identite.creerInstance(aConstructeur, aParametres);
                const lParametres = $.extend({
                    initialiser: true,
                    destructionSurFermeture: true,
                    nomComplet: ''
                }, aParametres);
                lInstance.destructionSurFermeture = lParametres.destructionSurFermeture;
                if (aOptionsFenetre && aOptionsFenetre.zIndex) {
                    const lZIndex = aOptionsFenetre.zIndex;
                    lInstance.getZIndex = function() {
                        return lZIndex;
                    }
                    ;
                }
                IEZoneFenetre_1.ZoneFenetre.ajouterFenetre(lParametres.nomComplet, lInstance.getZIndex ? lInstance.getZIndex() : 1100);
                $('#' + lInstance.getNom().escapeJQ()).on('destroyed', () => {
                    if (lInstance.destructionSurFermeture) {
                        lInstance.free();
                    }
                }
                );
                if (aOptionsFenetre) {
                    lInstance.setOptionsFenetre(aOptionsFenetre);
                }
                if (lParametres.initialiser) {
                    if (MethodesObjet_1.MethodesObjet.isFunction(lParametres.initialiser)) {
                        lParametres.initialiser.call(lParametres.pere, lInstance);
                    }
                    lInstance.initialiser();
                }
                return lInstance;
            }
            static creerInstance() {
                throw new Error('creerInstance incorrect');
            }
        }
        exports._ObjetFenetre = _ObjetFenetre;
    },
    fn: '_objetfenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetreEspace = void 0;
        const _ObjetFenetre_1 = require("_ObjetFenetre");
        require('ObjetFenetre_Espace.css');
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const ObjetStyle_1 = require("ObjetStyle");
        const Enumere_Event_1 = require("Enumere_Event");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetWAI_1 = require("ObjetWAI");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const tag_1 = require("tag");
        const ObjetChaine_1 = require("ObjetChaine");
        const uCoordonneesBackup = {};
        class ObjetFenetreEspace extends _ObjetFenetre_1._ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.Titre = '';
                this._initialiserOptionsFenetre();
                this.resetCoordonnees();
                if (this.Nom) {
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPreResize, this._preResizePositionnement);
                    this.ajouterEvenementGlobal(Enumere_Event_1.EEvent.SurPostResize, this._postResizePositionnement);
                }
                Invocateur_1.Invocateur.abonner(`${GNavigateur.getEventInvocateur('pointerdown')}.capture ${GNavigateur.getEventInvocateur('keydown')}.capture`, (aEvent) => {
                    if (this.optionsFenetre.fermerFenetreSurClicHorsFenetre && this.EnAffichage && aEvent.target && !aEvent.target.closest(`#${this.Nom.escapeJQ()}`) && !GestionnaireModale_1.GestionnaireModale.estJElementBloque($('#' + this.Nom.escapeJQ()))) {
                        this.fermer();
                    }
                }
                );
                Object.assign(this.optionsInterne, {
                    closeStart: () => {
                        GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(false, this.Nom);
                        if (this._interfaceEstBloquee) {
                            GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                                bloquer: false,
                                guidBlocage: this._guidBlocage
                            });
                            delete this._interfaceEstBloquee;
                        }
                        GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(false, this.Nom);
                    }
                    ,
                    closeEnd: () => {
                        ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
                    }
                });
                this.getZIndex = function() {
                    return 1100;
                }
                ;
            }
            detruireInstances() {
                if (!this.__surDestructionApresFermeture_) {
                    this.fermer(false);
                }
            }
            setParametresGeneraux() {
                ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getNodeFenetre: function() {
                        aInstance._surCreationNodeFenetre(this.node);
                    },
                    getDragFenetre() {
                        return aInstance._getDragFenetre(aInstance);
                    },
                    getTitre: function() {
                        return aInstance.optionsFenetre.titre ? MethodesObjet_1.MethodesObjet.isFunction(aInstance.optionsFenetre.titre) ? aInstance.optionsFenetre.titre() || '' : aInstance.optionsFenetre.titre : aInstance.Titre || '';
                    },
                    btnCroixFermeture: {
                        event: function() {
                            aInstance.surValidation(aInstance.optionsFenetre.indiceCroixFermeture);
                        }
                    },
                    avecZoneBas: function() {
                        return !!aInstance.composeBas() || (aInstance.optionsFenetre.listeBoutons && aInstance.optionsFenetre.listeBoutons.length > 0);
                    },
                    avecBoutons: function() {
                        return aInstance.optionsFenetre.listeBoutons && aInstance.optionsFenetre.listeBoutons.length > 0;
                    },
                    htmlRepeatBoutons: function(aBoutonRepeat) {
                        let lMargin = 4;
                        if (aBoutonRepeat.element.theme === Type_ThemeBouton_1.TypeThemeBouton.primaire && aBoutonRepeat.indice > 0 && aBoutonRepeat.tableau[aBoutonRepeat.indice - 1] && aBoutonRepeat.tableau[aBoutonRepeat.indice - 1].theme !== Type_ThemeBouton_1.TypeThemeBouton.primaire) {
                            lMargin = 8;
                        }
                        return aInstance.construireBouton(aBoutonRepeat, lMargin);
                    },
                    getDragResize() {
                        return aInstance._getDragResize(aInstance, this.node);
                    }
                });
            }
            construireBouton(aBoutonRepeat, aMargin) {
                return ['<ie-bouton', ' id="', this._getIdBoutons(aBoutonRepeat.element.index), '"', ' ie-model="fenetreBtn(bouton)" class="', aBoutonRepeat.element.theme && MethodesObjet_1.MethodesObjet.isString(aBoutonRepeat.element.theme) ? aBoutonRepeat.element.theme : '', '"', ' style="', this.optionsFenetre.listeBoutonsInvisibles[aBoutonRepeat.element.index] === true ? 'display:none;' : '', 'margin-left:', aMargin, 'px;', '"', aBoutonRepeat.element.title ? ObjetHtml_1.GHtml.composeAttr('title', aBoutonRepeat.element.title) : '', '>', '</ie-bouton>'].join('');
            }
            focusSurPremierElement() {
                if (ObjetHtml_1.GHtml.elementExiste(this.IdTitre)) {
                    ObjetHtml_1.GHtml.setFocus(this.IdTitre);
                } else {}
            }
            construireStructureAffichageAutre() {
                const lHTML = [];
                if (this.optionsFenetre.identConservationCoordonnees && uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees]) {
                    this.coordonnees = uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees] || this.coordonnees || {};
                }
                if (this.optionsFenetre.avecRetaillage && this.existeCoordonnees()) {
                    if (this.coordonnees.width > 0) {
                        this.optionsFenetre.largeur = this.coordonnees.width;
                    }
                    if (this.coordonnees.height > 0) {
                        this.optionsFenetre.hauteur = this.coordonnees.height;
                    }
                }
                let LStyle = this.optionsFenetre.largeur > 0 ? 'width: ' + this.optionsFenetre.largeur + 'px;' : '';
                LStyle += this.optionsFenetre.hauteur > 0 ? 'min-height: ' + this.optionsFenetre.hauteur + 'px;' : this.optionsFenetre.hauteur === 'auto' ? '' : ObjetStyle_1.GStyle.composeHeight(100, '%');
                LStyle += ObjetStyle_1.GStyle.composeCouleurFond(this.optionsFenetre.couleurFond);
                lHTML.push('<span class="sr-only" tabindex="0" onfocus="' + this.Nom + '.focusSurPremierElement();"></span>', '<div id="', this.NomFenetre, '"', ' ie-node="getNodeFenetre"', this.optionsFenetre.avecTitre ? ObjetWAI_1.GObjetWAI.composeAttribut({
                    genre: ObjetWAI_1.EGenreAttribut.labelledby,
                    valeur: this.IdTitre
                }) : '', this.optionsFenetre.avecAriaDescribedByContenu ? ` aria-describedby="${this.IdContenu}"` : '', ' class="ObjetFenetre_Espace ', (this.optionsFenetre.cssFenetre || ''), '" tabindex="-1" role="', this.optionsFenetre.roleWAI || 'dialog', '"', this.optionsFenetre.modale ? ` aria-modal="true"` : '', '>', '<div id="', this.idFenetreContenu, '" class="Fenetre_Cadre ombre-cadre" style="box-sizing:border-box; ', LStyle, '">');
                const lHtmlBas = this.composeBas();
                const lHtmlBoutons = this.composeBoutons();
                if (this.optionsFenetre.avecTitre) {
                    lHTML.push('<div class="Fenetre_Titre NePasImprimer">', '<h1 id="', this.IdTitre, '" class="ZoneDeplacementFenetre" ie-html="getTitre" ie-draggable="getDragFenetre" tabindex="0">', '</h1>', '<div class="cta-conteneur" ie-display="optionsFenetre.avecCroixFermeture">', '<ie-btnimage class="btnImageIcon as-button icon_fermeture_widget " ie-model="btnCroixFermeture" title="', ObjetTraduction_1.GTraductions.getValeur('Fermer'), '"></ie-btnimage>', '</div>', '</div>');
                }
                const lStyleContenuFenetre = [];
                if (this.optionsFenetre.hauteurMaxContenu > 0) {
                    lStyleContenuFenetre.push('max-height: ' + this.optionsFenetre.hauteurMaxContenu + 'px;');
                }
                if (this.optionsFenetre.largeurMin > 0) {
                    lStyleContenuFenetre.push('min-width: ' + this.optionsFenetre.largeurMin + 'px;');
                }
                if (this.optionsFenetre.hauteurMin > 0) {
                    lStyleContenuFenetre.push('min-height: ' + this.optionsFenetre.hauteurMin + 'px;');
                }
                lHTML.push('<div id="', this.Nom + '_Res" class="Fenetre_Espace', (this.optionsFenetre.avecScroll ? ' Fenetre_Scroll' : ''), (this.optionsFenetre.sansPaddingLR ? ' SansPaddingLR' : ''), '">', '<div id="', this.IdContenu, '" class="Fenetre_Contenu', (this.optionsFenetre.avecScrollY_force ? ' overflow-y-scroll' : ''), '"', ' style="', lStyleContenuFenetre.join(''), '"', '>', ObjetChaine_1.GChaine.simpleHtmlToSafeHtml(this.composeContenu()), '</div>', '</div>');
                lHTML.push('<div ie-display="avecZoneBas" class="NePasImprimer">', '<div class="zone-bas">', (lHtmlBas !== '' ? '<div class="zone-bas-gauche Fenetre_Bas">' + lHtmlBas + '</div>' : ''), lHtmlBoutons, '</div>', '</div>');
                if (this.optionsFenetre.avecRetaillage) {
                    lHTML.push((0,
                    tag_1.tag)('div', {
                        class: 'fenetre-resize right',
                        'ie-draggable': 'getDragResize'
                    }), (0,
                    tag_1.tag)('div', {
                        class: 'fenetre-resize bottom',
                        'ie-draggable': 'getDragResize'
                    }), (0,
                    tag_1.tag)('div', {
                        class: 'fenetre-resize left',
                        'ie-draggable': 'getDragResize'
                    }), (0,
                    tag_1.tag)('div', {
                        class: 'fenetre-resize top',
                        'ie-draggable': 'getDragResize'
                    }), (0,
                    tag_1.tag)('div', {
                        class: 'fenetre-resize coin Image_Retailler',
                        'ie-draggable': 'getDragResize'
                    }));
                }
                lHTML.push('</div>');
                lHTML.push('</div>', '<span class="sr-only" tabindex="0" onfocus="' + this.Nom + '.focusSurPremierElement();"></span>');
                return lHTML.join('');
            }
            composeBoutons() {
                const lHTML = [];
                lHTML.push('<div ie-if="avecBoutons" class="btn-conteneur">', '<div ie-repeat="bouton in listeBoutons" ie-html="htmlRepeatBoutons(bouton)"></div>', '</div>');
                return lHTML.join('');
            }
            existeCoordonnees() {
                return this.optionsFenetre.conserverCoordonnees && ((this.coordonnees !== null && this.coordonnees !== undefined)) && !!(this.coordonnees.left && this.coordonnees.top);
            }
            resetCoordonnees() {
                this.coordonnees = Object.assign(this.coordonnees || {}, {
                    left: null,
                    top: null,
                    width: null,
                    height: null
                });
            }
            setCoordonnees() {
                if (!this.optionsFenetre.conserverCoordonnees) {
                    return;
                }
                Object.assign(this.coordonnees || {}, {
                    left: ObjetPosition_1.GPosition.getLeft(this.Nom),
                    top: ObjetPosition_1.GPosition.getTop(this.Nom),
                    width: this.optionsFenetre.avecRetaillage ? this.optionsFenetre.largeur : null,
                    height: this.optionsFenetre.avecRetaillage ? this.optionsFenetre.hauteur : null
                });
                if (this.optionsFenetre.identConservationCoordonnees) {
                    uCoordonneesBackup[this.optionsFenetre.identConservationCoordonnees] = this.coordonnees;
                }
                if (this.optionsFenetre.callbackDeplacer) {
                    this.optionsFenetre.callbackDeplacer(this.coordonnees);
                }
            }
            positionnerFenetre(aParams) {
                const lParams = Object.assign({
                    left: null,
                    top: null,
                    id: '',
                    positionSurSouris: false,
                    positionSurSourisSiAffiche: false,
                    enAffichage: null,
                    centrerParDefaut: true
                }, aParams);
                if (ObjetStyle_1.GStyle.styleSheetDisabled()) {
                    return;
                }
                let lEnAffichage = this.EnAffichage;
                if (lParams.enAffichage === false || lParams.enAffichage === true) {
                    lEnAffichage = lParams.enAffichage;
                }
                if (this.existeCoordonnees() && ObjetPosition_1.GPosition.placer) {
                    ObjetPosition_1.GPosition.placer(this.Nom, this.coordonnees.left, this.coordonnees.top);
                } else if (MethodesObjet_1.MethodesObjet.isNumber(lParams.top) && MethodesObjet_1.MethodesObjet.isNumber(lParams.left) && ObjetPosition_1.GPosition.placer) {
                    ObjetPosition_1.GPosition.placer(this.Nom, lParams.left, lParams.top);
                } else if (this.optionsFenetre.idPositionnement || lParams.id) {
                    ObjetPosition_1.GPosition.placerFiche(this.Nom, this.optionsFenetre.idPositionnement || lParams.id, lEnAffichage);
                } else if (this.optionsFenetre.positionSurSouris || lParams.positionSurSouris) {
                    if (!lEnAffichage || lParams.positionSurSourisSiAffiche) {
                        ObjetPosition_1.GPosition.placer(this.Nom, GNavigateur.pointerX, GNavigateur.pointerY);
                    }
                } else if (lParams.centrerParDefaut) {
                    ObjetPosition_1.GPosition.centrer(this.Nom);
                }
                return this;
            }
            async afficher(aHtml) {
                const lEnAffichage = this.EnAffichage;
                if (!lEnAffichage) {
                    this._focusPrecedent = null;
                    if (!ObjetHtml_1.GHtml.elementExiste(this.Nom)) {
                        return;
                    }
                    if (!this.optionsFenetre.bloquerFocus && this.optionsFenetre.restaurerFocusSurFermeture) {
                        this._focusPrecedent = document.activeElement;
                    }
                    if (this.optionsFenetre.modale) {
                        this._guidBlocage = GestionnaireModale_1.GestionnaireModale.bloquerInterface({
                            bloquer: true,
                            prioriteBlocage: this.optionsFenetre.prioriteBlocageAbonnement,
                            opaciteVoile: this.optionsFenetre.opaciteVoileModale
                        });
                        this._interfaceEstBloquee = true;
                    }
                    if (this.optionsFenetre.avecAbonnementPremierPlan || this.optionsFenetre.modale) {
                        GestionnaireModale_1.GestionnaireModale.abonnementPremierPlan(true, this.Nom);
                        GestionnaireModale_1.GestionnaireModale.enPremierPlan(this.Nom);
                    }
                    if (this.optionsFenetre.avecAbonnementBlocage) {
                        GestionnaireModale_1.GestionnaireModale.abonnementBlocageInterface(true, this.Nom, this.optionsFenetre.prioriteBlocageAbonnement);
                    }
                    ;ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                    Invocateur_1.Invocateur.evenement('surAffichageFenetre');
                    this.EnAffichage = true;
                    this.controleur.$refreshSelf(true);
                    this.EnAffichage = false;
                    if (aHtml) {
                        ObjetHtml_1.GHtml.setHtml(this.IdContenu, aHtml, {
                            controleur: this.controleur
                        });
                    }
                    if (this.optionsFenetre.positionnerFenetreSurAfficher) {
                        this._creerResizeObserver();
                        this.positionnerFenetre();
                    }
                    this.EnAffichage = true;
                    this.surFixerTaille();
                    if (this.surAfficher) {
                        this.surAfficher();
                    }
                    this.$refreshSelf();
                    this.promise = new Promise( (aResolve) => {
                        this._promiseResolve = aResolve;
                    }
                    );
                }
                try {
                    if (!this.optionsFenetre.bloquerFocus) {
                        this.focusSurPremierElement();
                    }
                } catch (e) {}
                return this.promise;
            }
            actualiser() {
                this.surFixerTaille();
                ObjetHtml_1.GHtml.setHtml(this.IdContenu, this.composeContenu(), {
                    controleur: this.controleur
                });
            }
            setBoutonLibelle(I, aLibelle) {
                if (MethodesObjet_1.MethodesObjet.isObject(this.optionsFenetre.listeBoutons[I])) {
                    this.optionsFenetre.listeBoutons[I].libelle = aLibelle;
                } else {
                    this.optionsFenetre.listeBoutons[I] = aLibelle;
                }
                this._structureBoutons = null;
                this.$refreshSelf();
            }
            positionnerSousId(aId) {
                if (ObjetHtml_1.GHtml.elementExiste(aId)) {
                    ObjetPosition_1.GPosition.placer(this.Nom, ObjetPosition_1.GPosition.getLeft(aId) + 5, ObjetPosition_1.GPosition.getTop(aId) + ObjetPosition_1.GPosition.getHeight(aId) + 7);
                    this.setCoordonnees();
                }
            }
            surFixerTaille() {
                if (!this.optionsFenetre.avecRetaillage && $('#' + this.NomFenetre.escapeJQ()).width() < $('#' + this.idFenetreContenu.escapeJQ()).outerWidth()) {
                    $('#' + this.NomFenetre.escapeJQ()).css('min-width', $('#' + this.idFenetreContenu.escapeJQ()).width() + 'px');
                }
            }
            debutRetaillage() {
                this.surFixerTaille();
                $('#' + this.idFenetreContenu.escapeJQ()).css({
                    'min-height': ObjetPosition_1.GPosition.getHeight(this.idFenetreContenu) + 'px',
                    'width': ObjetPosition_1.GPosition.getWidth(this.idFenetreContenu) + 'px'
                });
            }
            finRetaillage() {
                this.surFixerTaille();
                this.setCoordonnees();
            }
            getHeightMaxIdSelonEcran(aId) {
                return GNavigateur.ecranH - ($('#' + this.Nom.escapeJQ()).outerHeight() - $('#' + aId.escapeJQ()).height()) - 10;
            }
            avecEventResizeNavigateur() {
                return false;
            }
            _initialiserOptionsFenetre() {
                this.setOptionsFenetre({
                    modale: true,
                    avecTitre: true,
                    titre: '',
                    largeur: 100,
                    hauteur: 100,
                    hauteurMaxContenu: 0,
                    avecScroll: false,
                    avecScrollY_force: false,
                    marge: 12,
                    avecTailleSelonContenu: false,
                    avecPaddingContenu: true,
                    avecCroixFermeture: true,
                    indiceCroixFermeture: -1,
                    cssFenetre: MethodesObjet_1.MethodesObjet.getObjectClass(this) + '_racine',
                    avecRetaillage: false,
                    largeurMin: 0,
                    hauteurMin: 0,
                    tailleBandeRetaillage: 3,
                    callbackDeplacer: null,
                    addParametresValidation: null,
                    surValiderAvantFermer: null,
                    callback: null,
                    callbackFermer: null,
                    callbackApresFermer: null,
                    listeBoutons: [],
                    listeBoutonsInvisibles: [],
                    listeBoutonsInactifs: [],
                    avecAbonnementBlocage: true,
                    prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.standard,
                    avecAbonnementPremierPlan: true,
                    avecPositionnementResize: true,
                    positionnerFenetreSurAfficher: true,
                    idPositionnement: '',
                    positionSurSouris: false,
                    conserverCoordonnees: true,
                    identConservationCoordonnees: '',
                    avecAbonnementFermetureFenetreGenerale: true,
                    bloquerFocus: false,
                    restaurerFocusSurFermeture: true,
                    fermerFenetreSurClicHorsFenetre: false,
                    couleurFond: GCouleur.blanc,
                    hauteurBandeau: GApplication.hauteurBandeau,
                    couleurFondBandeau: GCouleur.fenetre.bandeau.fond,
                    couleurTexteBandeau: GCouleur.fenetre.bandeau.texte,
                    avecAriaDescribedByContenu: false
                });
            }
            _surCreationNodeFenetre(aNode) {
                const lInstance = this;
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, this);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.fermerFenetres, (aForcer) => {
                    if (aForcer || this.optionsFenetre.avecAbonnementFermetureFenetreGenerale) {
                        this.fermer();
                    }
                }
                );
                $(aNode).on({
                    'keyup'() {
                        if (GNavigateur.isToucheEchap && GNavigateur.isToucheEchap()) {
                            lInstance.surValidation(lInstance.optionsFenetre.indiceCroixFermeture);
                        }
                    },
                    'pointerdown'() {
                        GestionnaireModale_1.GestionnaireModale.enPremierPlan(lInstance.getNom());
                    }
                });
            }
            _creerResizeObserver() {
                const lElement = ObjetHtml_1.GHtml.getElement(this.Nom);
                if (!lElement) {
                    return;
                }
                let lPositionnerEnCours = false;
                let lObserver = new ResizeObserver( (aObserveds) => {
                    if (this.EnAffichage && !lPositionnerEnCours && aObserveds && aObserveds[0] && aObserveds[0].contentRect && aObserveds[0].contentRect.height > 0) {
                        lPositionnerEnCours = true;
                        try {
                            this.positionnerFenetre();
                        } finally {
                            lPositionnerEnCours = false;
                        }
                    }
                }
                );
                lObserver.observe(lElement);
                const lDisconnect = function(aEvent) {
                    if (lObserver) {
                        lObserver.disconnect();
                        lObserver = null;
                    }
                    lElement.removeEventListener(aEvent.type, lDisconnect, true);
                };
                lElement.addEventListener('pointerdown', lDisconnect, true);
            }
            _preResizePositionnement() {
                if (!this.optionsFenetre.avecPositionnementResize || !this.estAffiche()) {
                    return;
                }
                this._tempResize = {
                    left: ObjetPosition_1.GPosition.getLeft(this.Nom),
                    top: ObjetPosition_1.GPosition.getTop(this.Nom)
                };
                ObjetHtml_1.GHtml.setDisplay(this.Nom, false);
            }
            _postResizePositionnement() {
                if (!this.optionsFenetre.avecPositionnementResize || !this.estAffiche() || !this._tempResize) {
                    return;
                }
                ObjetPosition_1.GPosition.placer(this.Nom, 0, 0);
                ObjetHtml_1.GHtml.setDisplay(this.Nom, true);
                ObjetPosition_1.GPosition.placer(this.Nom, this._tempResize.left, this._tempResize.top);
                this.setCoordonnees();
                delete this._tempResize;
            }
            _getDragFenetre(aInstance) {
                return {
                    start(aParamsDrag) {
                        const lJFenetre = $(`#${aInstance.Nom.escapeJQ()}`);
                        aParamsDrag.rectFenetreStart = ObjetPosition_1.GPosition.getClientRect(lJFenetre.get(0));
                        lJFenetre.addClass('on-drag');
                        aInstance._fenetreEnDeplacement = true;
                    },
                    drag(aParamsDrag) {
                        const lJFenetre = $(`#${aInstance.Nom.escapeJQ()}`);
                        const lRect = ObjetPosition_1.GPosition.getClientRect(lJFenetre.get(0));
                        let lTop = Math.max(aParamsDrag.rectContrainte.top, aParamsDrag.rectFenetreStart.top + aParamsDrag.offset.y);
                        let lLeft = Math.max(aParamsDrag.rectContrainte.left, aParamsDrag.rectFenetreStart.left + aParamsDrag.offset.x);
                        lLeft = Math.min(lLeft, aParamsDrag.rectContrainte.left + aParamsDrag.rectContrainte.width - lRect.width);
                        lTop = Math.min(lTop, aParamsDrag.rectContrainte.top + aParamsDrag.rectContrainte.height - lRect.height);
                        lJFenetre.css({
                            left: lLeft,
                            top: lTop
                        });
                    },
                    stop() {
                        $(`#${aInstance.Nom.escapeJQ()}`).removeClass('on-drag');
                        aInstance.setCoordonnees();
                        aInstance.focusSurPremierElement();
                        setTimeout( () => {
                            delete aInstance._fenetreEnDeplacement;
                        }
                        , 0);
                    }
                };
            }
            _getDragResize(aInstance, aNode) {
                let lCoin = {
                    gauche: aNode.classList.contains('left'),
                    droit: aNode.classList.contains('right') || aNode.classList.contains('coin'),
                    haut: aNode.classList.contains('top'),
                    bas: aNode.classList.contains('bottom') || aNode.classList.contains('coin')
                };
                return {
                    start(aParamsDrag) {
                        const lClassCurseur = lCoin.bas && lCoin.droit ? 'AvecResize' : lCoin.droit || lCoin.gauche ? 'AvecResizeHorizontal' : 'AvecResizeVertical';
                        aParamsDrag.divBloquant = ObjetHtml_1.GHtml.htmlToDOM(`<div class="overlay-resize ${lClassCurseur}"></div>`);
                        ObjetHtml_1.GHtml.insererElementDOM(ObjetHtml_1.GHtml.getElement(aInstance.NomFenetre), aParamsDrag.divBloquant);
                        Object.assign(aParamsDrag, {
                            OriginX: aParamsDrag.posStart.x,
                            OriginY: aParamsDrag.posStart.y,
                            OriginLargeur: ObjetPosition_1.GPosition.getWidth(aInstance.idFenetreContenu),
                            OriginHauteur: ObjetPosition_1.GPosition.getHeight(aInstance.idFenetreContenu),
                            Originleft: ObjetPosition_1.GPosition.getLeft(aInstance.Nom),
                            OriginTop: ObjetPosition_1.GPosition.getTop(aInstance.Nom)
                        });
                        $(`#${aInstance.Nom.escapeJQ()}`).addClass('on-drag');
                        aInstance.debutRetaillage();
                    },
                    drag(aParamsDrag) {
                        const lJContenu = $('#' + aInstance.idFenetreContenu.escapeJQ());
                        let lDeplacementX;
                        let lDeplacementY;
                        if (lCoin.droit) {
                            lDeplacementX = Math.borner(aParamsDrag.pos.x - aParamsDrag.OriginX, aInstance.optionsFenetre.largeurMin - aParamsDrag.OriginLargeur, GNavigateur.ecranL - 13 - aParamsDrag.OriginLargeur - ObjetPosition_1.GPosition.getLeft(aInstance.idFenetreContenu));
                            aInstance.optionsFenetre.largeur = aParamsDrag.OriginLargeur + lDeplacementX;
                            lJContenu.css({
                                'width': aParamsDrag.OriginLargeur + lDeplacementX + 'px'
                            });
                        }
                        if (lCoin.gauche) {
                            lDeplacementX = Math.borner(aParamsDrag.pos.x - aParamsDrag.OriginX, -aParamsDrag.Originleft, aParamsDrag.OriginLargeur - aInstance.optionsFenetre.largeurMin);
                            aInstance.optionsFenetre.largeur = aParamsDrag.OriginLargeur - lDeplacementX;
                            lJContenu.css({
                                'width': aParamsDrag.OriginLargeur - lDeplacementX + 'px'
                            });
                            aInstance.coordonnees.left = aParamsDrag.Originleft + lDeplacementX;
                            ObjetPosition_1.GPosition.setLeft(aInstance.Nom, aInstance.coordonnees.left);
                        }
                        if (lCoin.bas) {
                            lDeplacementY = Math.borner(aParamsDrag.pos.y - aParamsDrag.OriginY, aInstance.optionsFenetre.hauteurMin - aParamsDrag.OriginHauteur, GNavigateur.ecranH - 13 - aParamsDrag.OriginHauteur - ObjetPosition_1.GPosition.getTop(aInstance.idFenetreContenu));
                            aInstance.optionsFenetre.hauteur = aParamsDrag.OriginHauteur + lDeplacementY;
                            lJContenu.css({
                                'min-height': aParamsDrag.OriginHauteur + lDeplacementY + 'px'
                            });
                        }
                        if (lCoin.haut) {
                            lDeplacementY = Math.borner(aParamsDrag.pos.y - aParamsDrag.OriginY, -aParamsDrag.OriginTop, aParamsDrag.OriginHauteur - aInstance.optionsFenetre.hauteurMin);
                            aInstance.optionsFenetre.hauteur = aParamsDrag.OriginHauteur - lDeplacementY;
                            lJContenu.css({
                                'min-height': aParamsDrag.OriginHauteur - lDeplacementY + 'px'
                            });
                            aInstance.coordonnees.top = aParamsDrag.OriginTop + lDeplacementY;
                            ObjetPosition_1.GPosition.setTop(aInstance.Nom, aInstance.coordonnees.top);
                        }
                    },
                    stop(aParamsDrag) {
                        if (aParamsDrag.divBloquant) {
                            ObjetHtml_1.GHtml.supprimerElementDOM(aParamsDrag.divBloquant);
                        }
                        $(`#${aInstance.Nom.escapeJQ()}`).removeClass('on-drag');
                        aInstance.finRetaillage();
                    }
                };
            }
        }
        exports.ObjetFenetreEspace = ObjetFenetreEspace;
    },
    fn: 'objetfenetre_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre = void 0;
        const _ObjetFenetre_1 = require("_ObjetFenetre");
        class ObjetFenetre extends _ObjetFenetre_1._ObjetFenetre {
        }
        exports.ObjetFenetre = ObjetFenetre;
        if (IE.estMobile) {
            const {ObjetFenetreMobile} = require('ObjetFenetre_Mobile.js');
            exports.ObjetFenetre = ObjetFenetre = ObjetFenetreMobile;
        } else {
            const {ObjetFenetreEspace} = require('ObjetFenetre_Espace.js');
            exports.ObjetFenetre = ObjetFenetre = ObjetFenetreEspace;
        }
    },
    fn: 'objetfenetre.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetMessage = void 0;
        require('ObjetMessage.css');
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        const MethodesObjet_1 = require("MethodesObjet");
        const Invocateur_1 = require("Invocateur");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ObjetJSON_1 = require("ObjetJSON");
        class ObjetMessage {
            constructor() {
                this.EnAffichage = false;
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, () => {
                    this.fermer(Enumere_Action_1.EGenreAction.Annuler);
                }
                );
            }
            async afficher(aParametres) {
                if (this.EnAffichage) {
                    if (!this._pileMessage) {
                        this._pileMessage = [];
                    }
                    this._pileMessage.push(aParametres);
                    IE.log.addLog('ObjetMessage.afficher : un message est deja visible, le nouveau message est empilé : ' + aParametres.message, null, IE.log.genre.Avertissement);
                    return new Promise( (aResolve) => {
                        aParametres.resolvePromise = aResolve;
                    }
                    );
                }
                this.Accepte = Enumere_Action_1.EGenreAction.Valider;
                this.EnAffichage = true;
                return new Promise( (aResolve) => {
                    const lParametres = $.extend({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        titre: '',
                        message: '',
                        callback: null,
                        controleur: null,
                        delaiFermeture: null,
                        avecDecalageFocusBouton: false,
                        idRessource: null,
                        width: 360,
                        getDisabledBouton: null,
                        demanderConfirmation: true,
                        restaurerFocusSurFermeture: true,
                        listeBoutons: null,
                        resolvePromise: aResolve
                    }, aParametres);
                    if (lParametres.type === Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation && lParametres.demanderConfirmation === false) {
                        this.Accepte = Enumere_Action_1.EGenreAction.Valider;
                        this.EnAffichage = false;
                        this._fermer(lParametres);
                        return;
                    }
                    if (lParametres.idRessource) {
                        const lChaine = ObjetTraduction_1.GTraductions.getValeur(lParametres.idRessource);
                        if (lChaine !== '') {
                            const lJson = ObjetJSON_1.ObjetJSON.parse(lChaine);
                            if (lJson && lJson.titre && lJson.html && lJson.type >= 0 && lJson.boutons) {
                                lParametres.type = this._typeEditeurToBoiteMessage(lJson.type);
                                lParametres.titre = lJson.titre;
                                lParametres.message = IE.jsx.str("div", {
                                    class: "mr-fiche",
                                    style: 'width:' + lJson.width + 'px;min-height:' + lJson.height + 'px;'
                                }, lJson.html);
                            } else {}
                        } else {}
                    }
                    const lDetailsMessage = this._construireMessage(lParametres);
                    this.fenetre = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetreInterneMessage, {
                        pere: this,
                        initialiser: (aInstance) => {
                            if (lParametres.controleur) {
                                $.extend(true, aInstance.controleur, lParametres.controleur);
                            }
                            aInstance.genreActionFenetre = Enumere_Action_1.EGenreAction.Annuler;
                            aInstance.setOptionsFenetre({
                                modale: true,
                                roleWAI: 'alertdialog',
                                prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.message,
                                cssFenetre: 'ObjetMessage ObjetMessage_' + lParametres.type,
                                avecPositionnementResize: false,
                                avecCroixFermeture: false,
                                titre: lDetailsMessage.titre,
                                listeBoutons: lDetailsMessage.listeBoutons,
                                avecTailleSelonContenu: true,
                                restaurerFocusSurFermeture: lParametres.restaurerFocusSurFermeture,
                                empilerFenetre: false,
                                avecAriaDescribedByContenu: true,
                                surValiderAvantFermer: (aParams) => {
                                    if (aParams.bouton && aParams.bouton.genreAction !== undefined) {
                                        aInstance.genreActionFenetre = aParams.bouton.genreAction;
                                    }
                                }
                                ,
                                callbackApresFermer: () => {
                                    clearTimeout(this._timeoutFermeture);
                                    this.EnAffichage = false;
                                    delete this.fenetre;
                                    this.Accepte = aInstance.genreActionFenetre;
                                    this._fermer(lParametres);
                                }
                            });
                        }
                    });
                    if (MethodesObjet_1.MethodesObjet.isFunction(lParametres.getDisabledBouton)) {
                        this.fenetre.controleur.fenetreBtn.getDisabled = function(aBoutonRepeat) {
                            return lParametres.getDisabledBouton(aBoutonRepeat.element);
                        }
                        ;
                    }
                    this.fenetre.controleur._getClassContenuMessage = function() {
                        if (this.node.scrollHeight > this.node.clientHeight) {
                            return 'contenu-scroll';
                        }
                        return '';
                    }
                    ;
                    this.fenetre.afficher(lDetailsMessage.html.join(''));
                    this.fenetre.setBoutonFocus(0, lParametres.avecDecalageFocusBouton);
                    if (lParametres.delaiFermeture) {
                        const lDelai = lParametres.delaiFermeture === true ? 30 * 1000 : lParametres.delaiFermeture;
                        this._timeoutFermeture = setTimeout( () => {
                            if (this.fenetre) {
                                this.fermer(Enumere_Action_1.EGenreAction.Valider);
                            }
                        }
                        , lDelai);
                    }
                }
                ).catch( (aArg) => {
                    throw aArg;
                }
                );
            }
            fermer(aGenreAction) {
                if (this.fenetre) {
                    if (aGenreAction !== null && aGenreAction !== undefined) {
                        this.fenetre.genreActionFenetre = aGenreAction;
                    }
                    this.fenetre.fermer();
                }
            }
            _construireMessage(aParametres) {
                const lResult = {
                    titre: '',
                    listeBoutons: [],
                    html: []
                };
                if (aParametres.titre && !aParametres.message) {
                    aParametres.message = aParametres.titre;
                    aParametres.titre = '';
                }
                if (aParametres.titre) {
                    lResult.titre = aParametres.titre + '';
                } else {
                    switch (aParametres.type) {
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Information:
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche:
                        lResult.titre = ObjetTraduction_1.GTraductions.getValeur('genreBoiteMessage.Information');
                        break;
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation:
                        lResult.titre = ObjetTraduction_1.GTraductions.getValeur('genreBoiteMessage.Confirmation');
                        break;
                    default:
                        ;
                    }
                }
                lResult.titre = IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("i", {
                    class: "om_iconeTitre",
                    "aria-hidden": "true"
                }), lResult.titre);
                const lWidth = aParametres.width || 360;
                lResult.html.push(aParametres.idRessource ? aParametres.message : IE.estMobile ? ObjetChaine_1.GChaine.replaceRCToHTML(aParametres.message + '') : IE.jsx.str("p", {
                    style: 'width:' + lWidth + 'px;',
                    class: "contenu",
                    "ie-class": "_getClassContenuMessage"
                }, ObjetChaine_1.GChaine.replaceRCToHTML(aParametres.message + '')));
                if (aParametres.listeBoutons) {
                    lResult.listeBoutons = aParametres.listeBoutons;
                    lResult.listeBoutons.forEach( (aBouton) => {
                        switch (aBouton.theme) {
                        case Type_ThemeBouton_1.TypeThemeBouton.neutre:
                            break;
                        case Type_ThemeBouton_1.TypeThemeBouton.primaire:
                            aBouton.theme = Type_ThemeBouton_1.TypeThemeBouton.primaire;
                            break;
                        default:
                            aBouton.theme = Type_ThemeBouton_1.TypeThemeBouton.secondaire;
                            break;
                        }
                    }
                    );
                } else {
                    switch (aParametres.type) {
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Information:
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche:
                        lResult.listeBoutons.push({
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.fermer'),
                            genreAction: Enumere_Action_1.EGenreAction.Valider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                            typeMessage: aParametres.type
                        });
                        break;
                    case Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation:
                        lResult.listeBoutons.push({
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.oui'),
                            genreAction: Enumere_Action_1.EGenreAction.Valider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                            typeMessage: aParametres.type
                        }, {
                            libelle: ObjetTraduction_1.GTraductions.getValeur('principal.non'),
                            genreAction: Enumere_Action_1.EGenreAction.NePasValider,
                            theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire,
                            typeMessage: aParametres.type
                        });
                        break;
                    default:
                        ;
                    }
                }
                return lResult;
            }
            _fermer(aParametres) {
                if (aParametres.callback) {
                    if ('appel'in aParametres.callback && MethodesObjet_1.MethodesObjet.isFunction(aParametres.callback.appel)) {
                        aParametres.callback.appel(this.Accepte);
                    } else {
                        aParametres.callback(this.Accepte);
                    }
                }
                aParametres.resolvePromise(this.Accepte);
                if (this._pileMessage && this._pileMessage.length > 0) {
                    if (window.GApplication && GApplication.SESSION_FINI) {
                        return;
                    }
                    const lParametres = this._pileMessage.pop();
                    if (this._pileMessage.length === 0) {
                        delete this._pileMessage;
                    }
                    setTimeout( () => {
                        this.afficher(lParametres);
                    }
                    , 200);
                }
            }
            _typeEditeurToBoiteMessage(aGenreEditeur) {
                switch (aGenreEditeur) {
                case 2:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.Information;
                case 4:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.MrFiche;
                case 3:
                    return Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation;
                default:
                    ;return Enumere_BoiteMessage_1.EGenreBoiteMessage.Information;
                }
            }
        }
        exports.ObjetMessage = ObjetMessage;
        class ObjetFenetreInterneMessage extends ObjetFenetre_1.ObjetFenetre {
        }
    },
    fn: 'objetmessage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplication = void 0;
        require("NamespaceIE.js");
        require("DeclarationExtensionsObjetNatif.js");
        require("Divers.js");
        require("IELog");
        require("jsx");
        require("IEHtmlComposants.js");
        require("DeclarationIndexFont.js");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const ObjetMessageInformatif_1 = require("ObjetMessageInformatif");
        const IEZoneFenetre_1 = require("IEZoneFenetre");
        const ObjetMessage_1 = require("ObjetMessage");
        Promise.resolve().then( () => require('pep.min.js'));
        global.GApplication = null;
        let uEstDebug = false;
        class ObjetApplication {
            constructor() {
                this.nomProduit = 'INDEX';
                this.hauteurBandeau = 22;
                this.estAppliMobile = false;
                this._objetMessage = null;
                this.mapObject = new Map;
                this.init();
                IEZoneFenetre_1.ZoneFenetre.idConteneurApp = this.getIdConteneur();
                this.messageInformatif = new ObjetMessageInformatif_1.ObjetMessageInformatif();
                if (!window.PointerEvent) {
                    DeferLoadingScript_1.deferLoadingScript.loadAsync('pep_poly');
                }
            }
            init() {}
            getObject(aKey) {
                return this.mapObject.get(aKey);
            }
            setObject(aKey, aObject) {
                if (aObject === null) {
                    return this.mapObject.delete(aKey);
                }
                const lResult = this.mapObject.has(aKey);
                this.mapObject.set(aKey, aObject);
                return lResult;
            }
            getNom() {
                return 'GApplication';
            }
            getIdConteneur() {
                return 'div';
            }
            getDemo() {
                return false;
            }
            getDateDemo() {
                return new Date();
            }
            getMessage() {
                if (!this._objetMessage) {
                    this._objetMessage = new ObjetMessage_1.ObjetMessage();
                }
                return this._objetMessage;
            }
            estDebug() {
                return uEstDebug;
            }
            getModeExclusif() {
                return false;
            }
        }
        exports.ObjetApplication = ObjetApplication;
    },
    fn: 'objetapplication.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_MessageDynamiqueDemarrage = void 0;
        require('ObjetFenetre_MessageDynamiqueDemarrage.css');
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteInfosDynamiquesMarquerLu extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        CollectionRequetes_1.Requetes.inscrire('InfosDynamiquesMarquerLu', ObjetRequeteInfosDynamiquesMarquerLu);
        class ObjetFenetre_MessageDynamiqueDemarrage extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')],
                    avecComposeBasInFooter: true,
                    callbackFermer: () => {
                        if (this.marquerLu && this.optionsFenetre.messages && this.optionsFenetre.messages.length > 0) {
                            const lIds = [];
                            this.optionsFenetre.messages.forEach( (aMessage) => {
                                lIds.push(aMessage.id);
                            }
                            );
                            new ObjetRequeteInfosDynamiquesMarquerLu(this).lancerRequete({
                                tab: lIds
                            });
                        }
                    }
                });
                this.marquerLu = false;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    cbLu: {
                        getValue: function() {
                            return !!aInstance.marquerLu;
                        },
                        setValue: function(aValue) {
                            aInstance.marquerLu = aValue;
                        }
                    }
                });
            }
            composeContenu() {
                if (this.optionsFenetre.messages && this.optionsFenetre.messages.length > 0) {
                    let H = [];
                    this.optionsFenetre.messages.forEach( (aMessage) => {
                        if (aMessage && aMessage.contenu) {
                            if (H.length > 0) {
                                H.push('<hr class="ob_mdd_hr">');
                            }
                            H.push('<div class="comm_contenuMessageDynamique">', aMessage.contenu, '</div>');
                        }
                    }
                    );
                    if (!IE.estMobile) {
                        H = ['<div class="ob_mdd_conteneur">', H.join(''), '</div>'];
                    }
                    return H.join('');
                }
            }
            composeBas() {
                return ['<ie-checkbox ie-model="cbLu" ie-textright class="ob_mdd_cb">', ObjetTraduction_1.GTraductions.getValeur('messagesDyn.marquerLu'), '</ie-checkbox>'].join('');
            }
        }
        exports.ObjetFenetre_MessageDynamiqueDemarrage = ObjetFenetre_MessageDynamiqueDemarrage;
    },
    fn: 'objetfenetre_messagedynamiquedemarrage.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesCentraleNotifications = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const Invocateur_1 = require("Invocateur");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_MessageDynamiqueDemarrage_1 = require("ObjetFenetre_MessageDynamiqueDemarrage");
        var TypeNotif;
        (function(TypeNotif) {
            TypeNotif["surModification"] = "odcn_surModification";
            TypeNotif["masquerNbNotifs"] = "odcn_masquerNbNotifs";
        }
        )(TypeNotif || (TypeNotif = {}));
        class ObjetDonneesCentraleNotifications {
            constructor() {
                this.nbNotifs = 0;
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('compteurCentraleNotif'), (aCompteur) => {
                    this.nbNotifs = aCompteur;
                    this._notifSurModification({
                        compteurCentraleNotif: true
                    });
                }
                );
                Invocateur_1.Invocateur.abonner(TypeNotif.masquerNbNotifs, (aNbNotifs) => {
                    this.nbNotifs = Math.max(0, this.nbNotifs - aNbNotifs);
                    this._notifSurModification({
                        masquerNbNotifs: true
                    });
                }
                );
            }
            _notifSurModification(aParams) {
                Invocateur_1.Invocateur.evenement(TypeNotif.surModification, Object.assign(aParams || {}, this.getDonnees()));
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.refreshIEHtml);
            }
            getDonnees(aParam) {
                return {
                    nbNotifs: this.nbNotifs
                };
            }
            addMessagesDynamiques(aTabMessages) {
                this.listeMessagesDynamiques = [];
                if (aTabMessages && aTabMessages.length > 0 && aTabMessages.forEach) {
                    aTabMessages.forEach( (aMessage) => {
                        if (aMessage && aMessage.id && aMessage.contenu) {
                            this.listeMessagesDynamiques.push(aMessage);
                        } else {}
                    }
                    );
                }
            }
            initSurInterfaceDisponible() {
                if (this.listeMessagesDynamiques && this.listeMessagesDynamiques.length > 0) {
                    ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_MessageDynamiqueDemarrage_1.ObjetFenetre_MessageDynamiqueDemarrage, {
                        pere: {}
                    }, {
                        messages: this.listeMessagesDynamiques
                    }).afficher();
                    this.listeMessagesDynamiques = [];
                }
                this._notifSurModification();
            }
        }
        exports.ObjetDonneesCentraleNotifications = ObjetDonneesCentraleNotifications;
        ObjetDonneesCentraleNotifications.typeNotif = TypeNotif;
    },
    fn: 'objetdonneescentralenotifications.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationjournauxcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;require('montserrat_font.css');
    },
    fn: 'declarationfontmontserrat.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationProduit = exports.EtatApplication = void 0;
        const ObjetApplication_1 = require("ObjetApplication");
        const GUID_1 = require("GUID");
        const Invocateur_1 = require("Invocateur");
        const ObjetDonneesCentraleNotifications_1 = require("ObjetDonneesCentraleNotifications");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetHtml_1 = require("ObjetHtml");
        require("DeclarationJournauxCP.js");
        require("DeclarationFontMontserrat.js");
        require("DeclarationLottie");
        var EtatApplication;
        (function(EtatApplication) {
            EtatApplication[EtatApplication["normal"] = 1] = "normal";
            EtatApplication[EtatApplication["modeExclusif"] = 2] = "modeExclusif";
        }
        )(EtatApplication || (exports.EtatApplication = EtatApplication = {}));
        global.GEtatUtilisateur = undefined;
        global.GParametres = undefined;
        global.GCouleur = undefined;
        global.GInterface = undefined;
        class ObjetApplicationProduit extends ObjetApplication_1.ObjetApplication {
            constructor() {
                super();
                this.donneesCentraleNotifications = new ObjetDonneesCentraleNotifications_1.ObjetDonneesCentraleNotifications();
                this.estPrimaire = false;
                this.etatApplication = EtatApplication.normal;
                this.communication = null;
                this.estDemo = false;
                this.pileAbonnementInvocateur = {};
                this.idLigneSeparateur = GUID_1.GUID.getId();
                this.idLigneBandeau = 'ligne_bandeau';
                this.idBandeau = GUID_1.GUID.getId();
                this.idBreadcrumbCombo = 'breadcrumbBandeauCombo';
                this.idBreadcrumb = 'breadcrumbBandeau';
                this.idBreadcrumbPerso = 'breadcrumbBandeauPerso';
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, this.finSession, this);
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, this._setModeExclusif, this);
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getObjetParametres() {
                return GParametres;
            }
            getCouleur() {
                return GCouleur;
            }
            getCommunication() {
                return this.communication;
            }
            setCommunication(aInstanceCommunication) {
                this.communication = aInstanceCommunication;
                if (this.communication) {
                    this.communication.setNom(this.getNom() + '.getCommunication ()');
                }
            }
            getDemo() {
                return this.estDemo;
            }
            setDemo(aValeur) {
                this.estDemo = aValeur;
            }
            getDateDemo() {
                return this.dateDemo;
            }
            setDateDemo(aDateDemo) {
                this.dateDemo = aDateDemo;
            }
            initDateServeur(aDate) {
                this.dateServeurReferant = aDate;
                this.dateClientReferant = new Date();
            }
            getDateServeur() {
                if (!this.dateServeurReferant || !this.dateClientReferant) {
                    return new Date();
                }
                return new Date(this.dateServeurReferant.getTime() + new Date().getTime() - this.dateClientReferant.getTime());
            }
            getEtatApplication() {
                return this.etatApplication;
            }
            getModeExclusif() {
                return this.getEtatApplication() === EtatApplication.modeExclusif;
            }
            entreeModeExclusif() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modeExclusif, true);
            }
            sortieModeExclusif() {
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modeExclusif, false);
            }
            changerEtatApplication(aEtat) {
                switch (this.etatApplication) {
                case EtatApplication.normal:
                    switch (aEtat) {
                    case EtatApplication.normal:
                        break;
                    case EtatApplication.modeExclusif:
                        this.etatApplication = aEtat;
                        this.entreeModeExclusif();
                        break;
                    default:
                        ;
                    }
                    break;
                case EtatApplication.modeExclusif:
                    switch (aEtat) {
                    case EtatApplication.normal:
                        this.etatApplication = aEtat;
                        this.sortieModeExclusif();
                        break;
                    case EtatApplication.modeExclusif:
                        break;
                    default:
                        ;
                    }
                    break;
                default:
                    ;
                }
            }
            async creerFenetreDebug(aFuncGetTraitement) {}
            getOptionsDebug() {
                return this.optionsDebug;
            }
            getOptionsEspaceLocal() {
                return this.optionsEspaceLocal;
            }
            finSession(aParametres) {
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.erreurCommunication, this);
                const lParametresFin = {
                    constructionPage: false
                };
                Object.assign(lParametresFin, aParametres);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.fermerFenetres, true);
                Invocateur_1.Invocateur.evenement('finSession');
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, this);
                $(document).off();
                $(window).off();
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                if (window.GNavigateur) {
                    GNavigateur.viderCache();
                }
                if (lParametresFin.constructionPage) {
                    try {
                        this.construirePageFinSession(lParametresFin);
                    } catch (e) {
                        IE.log.addLog('Exception construirePageFinSession : ' + e);
                    }
                }
                this.SESSION_FINI = true;
                if (this.communication) {
                    this.communication.arreter();
                }
                this.communication = null;
            }
            construirePageFinSession(aParametres) {
                if (this._unloadEnCours) {
                    return;
                }
                const lCouleur = {
                    texte: 'black',
                    fond: 'white',
                    bordure: 'black'
                };
                if (global.GCouleur) {
                    Object.assign(lCouleur, GCouleur);
                }
                const lParametresFin = {
                    jsonErreur: null,
                    statut: '',
                    couleur: lCouleur,
                    sansBoutonSeConnecter: false
                };
                Object.assign(lParametresFin, aParametres);
                let lTitre = null;
                let lMessage = null, lGenreErreur;
                if (lParametresFin.jsonErreur) {
                    lGenreErreur = lParametresFin.jsonErreur.G;
                    lTitre = lParametresFin.jsonErreur.Titre;
                    lMessage = lParametresFin.jsonErreur.Message;
                }
                lTitre = lTitre === null || lTitre === undefined ? ObjetTraduction_1.GTraductions.getValeur('connexion.PageIndisponible') : lTitre;
                lMessage = lMessage === null || lMessage === undefined ? ObjetTraduction_1.GTraductions.getValeur('connexion.AffichagePageImpossible') : lMessage;
                const lEstPrimaire = !!this.estPrimaire;
                const T = [];
                T.push(`<div class="page-deconnexion ImageFond bg-espace-${!lEstPrimaire ? (this.nomProduit).toLowerCase() : `primaire`}">`);
                try {
                    T.push(this.construireEnTetePageFinSession(lParametresFin));
                } catch (e) {}
                T.push(`<div class="deco-content" role="main">`);
                T.push(IE.jsx.str("h1", {
                    class: `deco-titre-${!lEstPrimaire ? (this.nomProduit).toLowerCase() : `primaire`}`,
                    "aria-label": this.nomProduit
                }));
                T.push(`<p id="waispan_id">${ObjetTraduction_1.GTraductions.getValeur('connexion.Deconnecter')}</p>`);
                if (lTitre) {
                    T.push('<p class="pageDeconnexion_titre">' + lTitre + (lParametresFin.statut ? ' (' + ObjetTraduction_1.GTraductions.getValeur('connexion.Erreur') + ' ' + lParametresFin.statut + ')' : '') + '</p>');
                }
                if (lMessage) {
                    T.push(IE.jsx.str("p", {
                        class: "message"
                    }, lMessage));
                }
                if (lGenreErreur !== 7 && !lParametresFin.sansBoutonSeConnecter) {
                    T.push(`<ie-bouton tabindex="0" class="themeBoutonPrimaire m-top"\n      ${ObjetWAI_1.GObjetWAI ? ObjetWAI_1.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Button) : ''}
      ${ObjetWAI_1.GObjetWAI ? ObjetWAI_1.GObjetWAI.composeAttribut({
                        genre: ObjetWAI_1.EGenreAttribut.describedby,
                        valeur: 'waispan_id'
                    }) : ''}\n      onkeyup="if (GNavigateur.isToucheSelection()) window.location.reload()" onclick="window.location.reload ()">\n      ${ObjetTraduction_1.GTraductions.getValeur('connexion.SeConnecter')}</ie-bouton>`);
                }
                T.push(`</div>`);
                ObjetHtml_1.GHtml.setHtml(this.getIdConteneur(), T.join(''));
            }
            construireEnTetePageFinSession(aParametres) {
                return '';
            }
            _setModeExclusif(aEstModeExclusif) {
                this.changerEtatApplication(aEstModeExclusif ? EtatApplication.modeExclusif : EtatApplication.normal);
            }
            getPileAbonnement() {
                return this.pileAbonnementInvocateur;
            }
        }
        exports.ObjetApplicationProduit = ObjetApplicationProduit;
    },
    fn: 'objetapplicationproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteSaisieDeconnexion = void 0;
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteSaisieDeconnexion extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('connexion.DeconnexionEnCours'),
                    avecControleModeExclusif: false,
                    estRequeteDeconnexion: true
                });
            }
        }
        exports.ObjetRequeteSaisieDeconnexion = ObjetRequeteSaisieDeconnexion;
        CollectionRequetes_1.Requetes.inscrire('SaisieDeconnexion', ObjetRequeteSaisieDeconnexion);
    },
    fn: 'objetrequetesaisiedeconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreMessageHtmlUtil = exports.EGenreMessageHtml = void 0;
        var EGenreMessageHtml;
        (function(EGenreMessageHtml) {
            EGenreMessageHtml["patiencePDF"] = "patiencePDF";
            EGenreMessageHtml["patiencePDF_Mobile"] = "patiencePDF_mobile";
            EGenreMessageHtml["deconnexionENT"] = "deconnexionENT";
            EGenreMessageHtml["deconnexionENT_Mobile"] = "deconnexionENT_Mobile";
        }
        )(EGenreMessageHtml || (exports.EGenreMessageHtml = EGenreMessageHtml = {}));
        const EGenreMessageHtmlUtil = {
            construireUrl(aGenreMessageHtml) {
                let lUrl = 'message.html';
                if (aGenreMessageHtml) {
                    lUrl += '?G=' + aGenreMessageHtml;
                }
                return lUrl;
            }
        };
        exports.EGenreMessageHtmlUtil = EGenreMessageHtmlUtil;
    },
    fn: 'enumere_messagehtml.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireDeconnexion = void 0;
        const Invocateur_1 = require("Invocateur");
        const ObjetRequeteSaisieDeconnexion_1 = require("ObjetRequeteSaisieDeconnexion");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Action_1 = require("Enumere_Action");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_MessageHtml_1 = require("Enumere_MessageHtml");
        const Enumere_MessageHtml_2 = require("Enumere_MessageHtml");
        exports.UtilitaireDeconnexion = {
            async confirmationDeconnexion(aSansPageDeconnexion) {
                return GApplication.getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                    message: ObjetTraduction_1.GTraductions.getValeur('connexion.ConfirmezDeconnexion')
                }).then( (aGenreBouton) => {
                    if (aGenreBouton === Enumere_Action_1.EGenreAction.Valider) {
                        return new Promise( (aResolve) => {
                            (0,
                            ControleSaisieEvenement_1.ControleSaisieEvenement)( () => {
                                exports.UtilitaireDeconnexion.deconnexion(aSansPageDeconnexion);
                                aResolve(true);
                            }
                            );
                        }
                        );
                    } else {
                        return false;
                    }
                }
                );
            },
            async deconnexion(aSansPageDeconnexion) {
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                if (GEtatUtilisateur.reset) {
                    GEtatUtilisateur.reset();
                }
                return exports.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    const lApplicationProduit = GApplication;
                    if (aSansPageDeconnexion) {
                        window.location.reload();
                    } else if (lApplicationProduit.urlLogout) {
                        window.location.href = lApplicationProduit.urlLogout;
                    } else if (lApplicationProduit.acces.estConnexionCAS()) {
                        window.location.href = Enumere_MessageHtml_2.EGenreMessageHtmlUtil.construireUrl(IE.estMobile ? Enumere_MessageHtml_1.EGenreMessageHtml.deconnexionENT_Mobile : Enumere_MessageHtml_1.EGenreMessageHtml.deconnexionENT);
                    } else {
                        lApplicationProduit.finSession({
                            constructionPage: true,
                            statut: 0,
                            jsonErreur: {
                                Titre: '',
                                Message: ''
                            }
                        });
                    }
                }
                );
            },
            async deconnexionEchecChargement() {
                return exports.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    GApplication.finSession({
                        constructionPage: true,
                        statut: 0,
                        jsonErreur: {
                            Titre: '',
                            Message: ObjetTraduction_1.GTraductions.getValeur('connexion.EchecChargement')
                        }
                    });
                }
                );
            },
            async requeteDeconnexion() {
                return new ObjetRequeteSaisieDeconnexion_1.ObjetRequeteSaisieDeconnexion({}).lancerRequete();
            }
        };
    },
    fn: 'utilitairedeconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireMAJServeur = void 0;
        require('UtilitaireMAJPatience.css');
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetWAI_2 = require("ObjetWAI");
        const UtilitaireDuree_1 = require("UtilitaireDuree");
        const GestionnaireModale_1 = require("GestionnaireModale");
        const ObjetChaine_1 = require("ObjetChaine");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const LottiePatience_1 = require("LottiePatience");
        exports.UtilitaireMAJServeur = {
            initialiser(aOptions) {
                const lUtil = {
                    fenetre: null,
                    idMessage: 'idMessageMAJ',
                    options: {
                        afficherMessageDelaiLong: true,
                        afficherMessageImminentEleve: false,
                        messageTitreFenetre: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Titre'),
                        messageFenetreMAJPrevue: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Prevue_S'),
                        messageFenetreMAJImminentEleve: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Imminente_Eleve_S'),
                        messageFenetreMAJImminent: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Imminente_S'),
                        messageAnnule: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Annulee'),
                        messageAttenteMAJ: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Attente'),
                        messageMAJEffectue: ObjetTraduction_1.GTraductions.getValeur('MAJServeur.MAJ_Effectue'),
                        cssImage: ''
                    }
                };
                Object.assign(lUtil.options, aOptions);
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('dureeMAJServeur'), (aDuree) => {
                    _notificationMAJ(lUtil, aDuree);
                }
                );
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('MAJAnnulation'), () => {
                    clearTimeout(lUtil.timeoutDetectionMAJImminente);
                    clearTimeout(lUtil.timeoutRechargment);
                    if (GApplication.SESSION_FINI) {
                        return;
                    }
                    GApplication.getCommunication().setMAJServeurEnCours(false);
                    _ouvrirFenetreSplash({
                        util: lUtil,
                        init: function(aFenetre) {
                            aFenetre.estAnnulation = true;
                        }
                    });
                }
                );
            }
        };
        const lDelaiRepeatRequeteFinMAJ = 10 * 1000;
        const lDureeAttenteMAJPourRequete = 10 * 60 * 1000;
        const lDelaiMAJAvertissement = 4 * 60 * 1000;
        const lDelaiDeconnexion = 1 * 60 * 1000;
        const lDelaiPresencePreparationAvertissement = lDelaiMAJAvertissement + lDelaiDeconnexion;
        function _ouvrirFenetreSplash(aParams) {
            if (aParams.util.fenetre) {
                aParams.util.fenetre.fermer();
            }
            aParams.util.fenetre = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SplashMAJServeur, {
                pere: {},
                initialiser: function(aFenetre) {
                    aParams.init(aFenetre);
                    aFenetre.setOptionsFenetre(Object.assign({
                        titre: aParams.util.options.messageTitreFenetre,
                        callbackFermer: function() {
                            delete aParams.util.fenetre;
                            if (aParams.fermer) {
                                aParams.fermer(aFenetre);
                            }
                        }
                    }, aParams.util.options));
                }
            });
            aParams.util.fenetre.afficher();
        }
        function _notificationMAJ(aUtil, aDuree) {
            if (!MethodesObjet_1.MethodesObjet.isNumber(aDuree)) {
                return;
            }
            if (aUtil.timeoutDetectionMAJImminente) {
                clearTimeout(aUtil.timeoutDetectionMAJImminente);
            }
            let lTimeoutRechargementEcoule = false;
            let lDureeMs = UtilitaireDuree_1.TUtilitaireDuree.dureeEnMs(aDuree);
            const lDateMAJReelle = new Date(Date.now() + lDureeMs + lDelaiDeconnexion);
            if (lDateMAJReelle.getSeconds() === 59) {
                lDateMAJReelle.setSeconds(lDateMAJReelle.getSeconds() + 1);
            }
            const lEstDelaiLong = lDureeMs > lDelaiMAJAvertissement;
            if (!lEstDelaiLong) {
                lDureeMs = Math.floor(UtilitaireDuree_1.TUtilitaireDuree.dureeEnMin(aDuree, true)) * 60 * 1000;
            }
            if (aUtil.timeoutRechargment) {
                clearTimeout(aUtil.timeoutRechargment);
            }
            aUtil.timeoutRechargment = setTimeout( () => {
                lTimeoutRechargementEcoule = true;
                _deconnexion(aUtil);
            }
            , lDureeMs);
            if (lDureeMs < 1000) {
                return;
            }
            if (lEstDelaiLong) {
                aUtil.timeoutDetectionMAJImminente = setTimeout( () => {
                    GApplication.getCommunication().setMAJServeurEnCours(true);
                }
                , Math.max(0, lDureeMs - lDelaiPresencePreparationAvertissement));
            }
            if (!lEstDelaiLong || aUtil.options.afficherMessageDelaiLong) {
                aUtil.deconnexionAvecFenetreOuverte = true;
                _ouvrirFenetreSplash({
                    util: aUtil,
                    init: function(aFenetre) {
                        aFenetre.estDelaiLong = lEstDelaiLong;
                        aFenetre.dateReelle = lDateMAJReelle;
                        aFenetre.dureeMs = lDureeMs;
                    },
                    fermer: function() {
                        if (!lTimeoutRechargementEcoule) {
                            aUtil.deconnexionAvecFenetreOuverte = false;
                        }
                    }
                });
            }
        }
        function _deconnexion(aUtil) {
            const lCallback = function() {
                UtilitaireDeconnexion_1.UtilitaireDeconnexion.requeteDeconnexion().then( () => {
                    GApplication.finSession({
                        constructionPage: true,
                        statut: 0,
                        sansBoutonSeConnecter: true,
                        jsonErreur: {
                            Titre: ObjetTraduction_1.GTraductions.getValeur('connexion.MessageVeuillezPatienter'),
                            Message: !GApplication.estAppliMobile ? IE.jsx.str("div", {
                                id: aUtil.idMessage
                            }, aUtil.options.messageAttenteMAJ, IE.jsx.str("div", {
                                class: "UtilitaireMAJPatience"
                            }, LottiePatience_1.LottiePatience.construire())) : aUtil.options.messageAttenteMAJ
                        }
                    });
                    if (!GApplication.estAppliMobile) {
                        aUtil.dateMSDemarrageAttente = Date.now();
                        setTimeout( () => {
                            _gererRechargementPage(aUtil);
                        }
                        , lDelaiRepeatRequeteFinMAJ);
                    }
                }
                );
            };
            (0,
            ControleSaisieEvenement_1.ControleSaisieEvenement)(lCallback);
        }
        function _messageFinMAJ(aUtil) {
            $(document).find('.pageDeconnexion_titre').remove();
            ObjetHtml_1.GHtml.setHtml(aUtil.idMessage, ['<div style="padding-bottom:3px; padding-top: 10px;">', aUtil.options.messageMAJEffectue, '</div>', '<div tabindex="0" ', ObjetWAI_2.GObjetWAI ? ObjetWAI_2.GObjetWAI.composeRole(ObjetWAI_1.EGenreRole.Button) : '', ObjetWAI_2.GObjetWAI ? ObjetWAI_2.GObjetWAI.composeAttribut({
                genre: ObjetWAI_2.EGenreAttribut.describedby,
                valeur: 'waispan_id'
            }) : '', 'class="AvecMain Souligne"', 'onkeyup="if (GNavigateur.isToucheSelection()) window.location.reload()" onclick="window.location.reload ()">', ObjetTraduction_1.GTraductions.getValeur('connexion.SeConnecter'), '</div>'].join(''));
        }
        function _gererRechargementPage(aUtil) {
            const lEnvoyerRequeteDelai = function() {
                setTimeout( () => {
                    if (Date.now() - aUtil.dateMSDemarrageAttente < lDureeAttenteMAJPourRequete) {
                        _gererRechargementPage(aUtil);
                    } else {
                        _messageFinMAJ(aUtil);
                    }
                }
                , lDelaiRepeatRequeteFinMAJ);
            };
            fetch('MAJServeurFin.html').then( (aReponse) => {
                if (aReponse.ok) {
                    if (!aUtil.deconnexionAvecFenetreOuverte) {
                        window.location.reload();
                    } else {
                        _messageFinMAJ(aUtil);
                    }
                } else {
                    return Promise.reject();
                }
            }
            ).catch( () => {
                lEnvoyerRequeteDelai();
            }
            );
        }
        class ObjetFenetre_SplashMAJServeur extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    modale: true,
                    largeur: 500,
                    hauteurBandeau: 25,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')],
                    avecAbonnementFermetureFenetreGenerale: false,
                    couleurFondBandeau: '#ed9e2b',
                    prioriteBlocageAbonnement: GestionnaireModale_1.GestionnaireModale.TypePrioriteBlocageInterface.messageInformatif
                });
            }
            composeContenu() {
                const T = [];
                let lMessage = '';
                if (this.estAnnulation) {
                    lMessage = this.optionsFenetre.messageAnnule;
                } else if (this.estDelaiLong) {
                    lMessage = ObjetChaine_1.GChaine.format(this.optionsFenetre.messageFenetreMAJPrevue, [ObjetDate_1.GDate.formatDate(this.dateReelle, '%hh%sh%mm')]);
                } else {
                    lMessage = ObjetChaine_1.GChaine.format(this.optionsFenetre.afficherMessageImminentEleve ? this.optionsFenetre.messageFenetreMAJImminentEleve : this.optionsFenetre.messageFenetreMAJImminent, [ObjetDate_1.GDate.formatDureeEnMillisecondes(this.dureeMs, '%xm')]);
                }
                T.push('<div class="ofsm_image_MAJ ', this.optionsFenetre.cssImage, '" role="presentation"></div>', '<p class="ofsm_texte">', lMessage, '</p>');
                return T.join('');
            }
        }
    },
    fn: 'utilitairemajserveur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreStatutConnexionUtil = exports.TypeGenreStatutConnexionBase = exports.TypeGenreStatutConnexion = void 0;
        var TypeGenreStatutConnexion;
        (function(TypeGenreStatutConnexion) {
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_Disponible"] = 0] = "GSC_Disponible";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_EnCours"] = 1] = "GSC_EnCours";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_NePasDeranger"] = 2] = "GSC_NePasDeranger";
            TypeGenreStatutConnexion[TypeGenreStatutConnexion["GSC_Deconnecte"] = 3] = "GSC_Deconnecte";
        }
        )(TypeGenreStatutConnexion || (exports.TypeGenreStatutConnexion = TypeGenreStatutConnexion = {}));
        var TypeGenreStatutConnexionBase;
        (function(TypeGenreStatutConnexionBase) {
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_Connecte"] = 0] = "SCB_Connecte";
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_NePasDeranger"] = 1] = "SCB_NePasDeranger";
            TypeGenreStatutConnexionBase[TypeGenreStatutConnexionBase["SCB_Invisible"] = 2] = "SCB_Invisible";
        }
        )(TypeGenreStatutConnexionBase || (exports.TypeGenreStatutConnexionBase = TypeGenreStatutConnexionBase = {}));
        const ObjetTraduction_1 = require("ObjetTraduction");
        require('TypeStatutConnexion.css');
        const TypeGenreStatutConnexionUtil = {
            getClassIcon(aGenre) {
                switch (aGenre) {
                case TypeGenreStatutConnexion.GSC_Disponible:
                    return 'TypeGenreStatutConnexion-GSC_Disponible';
                case TypeGenreStatutConnexion.GSC_EnCours:
                    return 'TypeGenreStatutConnexion-GSC_EnCours';
                case TypeGenreStatutConnexion.GSC_NePasDeranger:
                    return 'TypeGenreStatutConnexion-GSC_NePasDeranger';
                default:
                    return 'TypeGenreStatutConnexion-GSC_Deconnecte';
                }
            },
            toLibelle(aGenre, aAvecLibelleInvisible) {
                switch (aGenre) {
                case TypeGenreStatutConnexion.GSC_Disponible:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.Connectee');
                case TypeGenreStatutConnexion.GSC_EnCours:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.EnClasse');
                case TypeGenreStatutConnexion.GSC_NePasDeranger:
                    return ObjetTraduction_1.GTraductions.getValeur('Messagerie.NePasDeranger');
                default:
                    return aAvecLibelleInvisible ? ObjetTraduction_1.GTraductions.getValeur('Messagerie.Invisible') : ObjetTraduction_1.GTraductions.getValeur('Messagerie.NonConnectee');
                }
            }
        };
        exports.TypeGenreStatutConnexionUtil = TypeGenreStatutConnexionUtil;
    },
    fn: 'typestatutconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetDonneesCentraleNotificationsSco = void 0;
        const Invocateur_1 = require("Invocateur");
        const ObjetDonneesCentraleNotifications_1 = require("ObjetDonneesCentraleNotifications");
        const TypeStatutConnexion_1 = require("TypeStatutConnexion");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        class ObjetDonneesCentraleNotificationsSco extends ObjetDonneesCentraleNotifications_1.ObjetDonneesCentraleNotifications {
            constructor(...aParams) {
                super(...aParams);
                this.compteurNotifsParOnglet = {};
                Invocateur_1.Invocateur.abonner('notification_communication', (aNotifs) => {
                    for (let i = 0; i < aNotifs.length; i++) {
                        this.compteurNotifsParOnglet[aNotifs[i].onglet] = aNotifs[i];
                    }
                    this._notifSurModification({
                        notification_communication: true
                    });
                }
                , this);
                Invocateur_1.Invocateur.abonner('modifier_notification_communication', (aGenreOnglet, aModificateur) => {
                    if (aModificateur === 0) {
                        return;
                    }
                    if (!this.compteurNotifsParOnglet[aGenreOnglet]) {
                        this.compteurNotifsParOnglet[aGenreOnglet] = {
                            nb: 0,
                            onglet: aGenreOnglet
                        };
                    }
                    this.compteurNotifsParOnglet[aGenreOnglet].nb = (this.compteurNotifsParOnglet[aGenreOnglet].nb || 0) + aModificateur;
                    this.nbNotifs += aModificateur;
                    this._notifSurModification({
                        modifier_notification_communication: true
                    });
                }
                , this);
                Invocateur_1.Invocateur.abonnerUnique('notification_chatVS', (aListe) => {
                    this.listeNotifsChatVS = aListe;
                }
                );
                this.nbConversationEnCours = 0;
                Invocateur_1.Invocateur.abonner('modifier_nb_conversationEnCours', (aNb) => {
                    this.nbConversationEnCours = aNb;
                    this._notifSurModification();
                }
                , this);
                this.statutConnexionCommunication = TypeStatutConnexion_1.TypeGenreStatutConnexion.GSC_Deconnecte;
                Invocateur_1.Invocateur.abonner(ObjetRequeteJSON_1.utils.getIdentNotification('statutConnexion'), (aStatut) => {
                    this.statutConnexionCommunication = aStatut;
                }
                );
            }
            _notifSurModification(aParams) {
                super._notifSurModification(aParams);
            }
            getDonnees(...aParams) {
                return Object.assign({}, {
                    compteurNotifsParOnglet: this.compteurNotifsParOnglet,
                    nbConversationEnCours: this.nbConversationEnCours
                }, super.getDonnees(...aParams));
            }
        }
        exports.ObjetDonneesCentraleNotificationsSco = ObjetDonneesCentraleNotificationsSco;
    },
    fn: 'objetdonneescentralenotificationssco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetParametresUtilisateur = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const MethodesObjet_1 = require("MethodesObjet");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetParametresUtilisateur {
            constructor() {
                this.init();
            }
            get(aChaine) {
                switch (aChaine) {
                default:
                    {
                        let lValue = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                        if (lValue === undefined) {
                            lValue = false;
                        }
                        return lValue;
                    }
                }
            }
            set(aChaine, aValeur, aIgnorerSaisie) {
                const lAncienneValeur = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                let lResult = false;
                if (aChaine.trim && aChaine.split) {
                    const lSplit = aChaine.split('.');
                    let lObjet = this._parametres;
                    const lLength = lSplit.length;
                    for (let i = 0; i < lLength - 1; i++) {
                        if (!MethodesObjet_1.MethodesObjet.isObject(lObjet[lSplit[i]])) {
                            lObjet[lSplit[i]] = {};
                        }
                        lObjet = lObjet[lSplit[i]];
                    }
                }
                switch (aChaine) {
                case 'widgets':
                    this._parametres.widgets = aValeur;
                    lResult = true;
                    break;
                default:
                    lResult = MethodesObjet_1.MethodesObjet.set(this._parametres, aChaine, aValeur);
                    if (lResult) {
                        lResult = aValeur !== lAncienneValeur || MethodesObjet_1.MethodesObjet.isObject(aValeur);
                    }
                }
                if (lResult && !aIgnorerSaisie) {
                    this._save();
                }
            }
            has(aChaine) {
                switch (aChaine) {
                default:
                    {
                        const lValue = MethodesObjet_1.MethodesObjet.get(this._parametres, aChaine);
                        if (lValue !== undefined) {
                            return true;
                        }
                    }
                }
                return false;
            }
            init() {
                this._parametres = {};
            }
            chargerJSON(aJSON) {
                if (aJSON) {
                    this._parametres = aJSON;
                }
            }
            _save() {
                new ObjetRequeteSaisieParametresUtilisateur().lancerRequete(this._parametres);
            }
        }
        exports.ObjetParametresUtilisateur = ObjetParametresUtilisateur;
        class ObjetRequeteSaisieParametresUtilisateur extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor() {
                super(null, () => {}
                );
                this.setOptions({
                    sansBlocageInterface: true
                });
            }
            lancerRequete(aParam) {
                this.JSON.parametres = aParam;
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                this.callbackReussite.appel();
            }
        }
        CollectionRequetes_1.Requetes.inscrire('SaisieParametresUtilisateur', ObjetRequeteSaisieParametresUtilisateur);
    },
    fn: 'objetparametresutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreOnglet = void 0;
        var EGenreOnglet;
        (function(EGenreOnglet) {
            EGenreOnglet[EGenreOnglet["MenuOnglets"] = -2] = "MenuOnglets";
            EGenreOnglet[EGenreOnglet["GeneralAccueil"] = -1] = "GeneralAccueil";
            EGenreOnglet[EGenreOnglet["GeneralRacine"] = 0] = "GeneralRacine";
            EGenreOnglet[EGenreOnglet["GeneralVieEtablissement"] = 2] = "GeneralVieEtablissement";
            EGenreOnglet[EGenreOnglet["GeneralNotes"] = 3] = "GeneralNotes";
            EGenreOnglet[EGenreOnglet["GeneralBulletins"] = 4] = "GeneralBulletins";
            EGenreOnglet[EGenreOnglet["GeneralVieScolaire"] = 5] = "GeneralVieScolaire";
            EGenreOnglet[EGenreOnglet["GeneralCompte"] = 6] = "GeneralCompte";
            EGenreOnglet[EGenreOnglet["Accueil"] = 7] = "Accueil";
            EGenreOnglet[EGenreOnglet["Informations"] = 8] = "Informations";
            EGenreOnglet[EGenreOnglet["Agenda"] = 9] = "Agenda";
            EGenreOnglet[EGenreOnglet["Menus"] = 10] = "Menus";
            EGenreOnglet[EGenreOnglet["Vacances"] = 11] = "Vacances";
            EGenreOnglet[EGenreOnglet["Releve"] = 12] = "Releve";
            EGenreOnglet[EGenreOnglet["Bulletins"] = 13] = "Bulletins";
            EGenreOnglet[EGenreOnglet["Orientation"] = 14] = "Orientation";
            EGenreOnglet[EGenreOnglet["SaisieOrientation"] = 15] = "SaisieOrientation";
            EGenreOnglet[EGenreOnglet["EmploiDuTemps"] = 16] = "EmploiDuTemps";
            EGenreOnglet[EGenreOnglet["CahierDeTexte"] = 17] = "CahierDeTexte";
            EGenreOnglet[EGenreOnglet["Remplacements"] = 18] = "Remplacements";
            EGenreOnglet[EGenreOnglet["VieScolaire_Recapitulatif"] = 19] = "VieScolaire_Recapitulatif";
            EGenreOnglet[EGenreOnglet["Dossiers"] = 20] = "Dossiers";
            EGenreOnglet[EGenreOnglet["Compte"] = 21] = "Compte";
            EGenreOnglet[EGenreOnglet["CompteEleve"] = 22] = "CompteEleve";
            EGenreOnglet[EGenreOnglet["SaisieNotes"] = 23] = "SaisieNotes";
            EGenreOnglet[EGenreOnglet["DEV_AppelEtSuivi"] = 24] = "DEV_AppelEtSuivi";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsBulletin"] = 25] = "SaisieAppreciationsBulletin";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsBulletinGroupe"] = 26] = "SaisieAppreciationsBulletinGroupe";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsGenerales"] = 27] = "SaisieAppreciationsGenerales";
            EGenreOnglet[EGenreOnglet["SaisieCahierDeTextes"] = 28] = "SaisieCahierDeTextes";
            EGenreOnglet[EGenreOnglet["SaisieAbsences"] = 29] = "SaisieAbsences";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsReleve"] = 30] = "SaisieAppreciationsReleve";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsReleve_Gpe"] = 31] = "SaisieAppreciationsReleve_Gpe";
            EGenreOnglet[EGenreOnglet["FicheBrevet"] = 34] = "FicheBrevet";
            EGenreOnglet[EGenreOnglet["CompteGadget"] = 35] = "CompteGadget";
            EGenreOnglet[EGenreOnglet["InfoMedicale"] = 36] = "InfoMedicale";
            EGenreOnglet[EGenreOnglet["EquipePedagogique"] = 37] = "EquipePedagogique";
            EGenreOnglet[EGenreOnglet["Graphique"] = 38] = "Graphique";
            EGenreOnglet[EGenreOnglet["GeneralResultats"] = 39] = "GeneralResultats";
            EGenreOnglet[EGenreOnglet["GeneralOrientations"] = 40] = "GeneralOrientations";
            EGenreOnglet[EGenreOnglet["ConseilDeClasse"] = 41] = "ConseilDeClasse";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationDeFinDeStage"] = 42] = "SaisieAppreciationDeFinDeStage";
            EGenreOnglet[EGenreOnglet["GeneralDansLaClasse"] = 43] = "GeneralDansLaClasse";
            EGenreOnglet[EGenreOnglet["SuiviPluriannuel"] = 44] = "SuiviPluriannuel";
            EGenreOnglet[EGenreOnglet["BilanParDomaine"] = 45] = "BilanParDomaine";
            EGenreOnglet[EGenreOnglet["CahierDeTextes_Contenu"] = 47] = "CahierDeTextes_Contenu";
            EGenreOnglet[EGenreOnglet["CahierDeTextes_TravailAFaire"] = 48] = "CahierDeTextes_TravailAFaire";
            EGenreOnglet[EGenreOnglet["InfosPerso"] = 49] = "InfosPerso";
            EGenreOnglet[EGenreOnglet["GeneralStage"] = 52] = "GeneralStage";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsFicheBrevet"] = 53] = "SaisieAppreciationsFicheBrevet";
            EGenreOnglet[EGenreOnglet["GeneralCompetence"] = 55] = "GeneralCompetence";
            EGenreOnglet[EGenreOnglet["Evaluation"] = 56] = "Evaluation";
            EGenreOnglet[EGenreOnglet["GeneralBrevet"] = 57] = "GeneralBrevet";
            EGenreOnglet[EGenreOnglet["GeneralEquipePedagogique"] = 58] = "GeneralEquipePedagogique";
            EGenreOnglet[EGenreOnglet["GeneralMesClasses"] = 59] = "GeneralMesClasses";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsClasse"] = 60] = "EmploiDuTempsClasse";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes"] = 61] = "General_CahierDeTextes";
            EGenreOnglet[EGenreOnglet["CahierDeTextesClasse"] = 62] = "CahierDeTextesClasse";
            EGenreOnglet[EGenreOnglet["ResultatsClasses"] = 64] = "ResultatsClasses";
            EGenreOnglet[EGenreOnglet["ListeEvaluation"] = 65] = "ListeEvaluation";
            EGenreOnglet[EGenreOnglet["ListeEvaluationHistorique"] = 67] = "ListeEvaluationHistorique";
            EGenreOnglet[EGenreOnglet["Punitions"] = 68] = "Punitions";
            EGenreOnglet[EGenreOnglet["Entreprise"] = 69] = "Entreprise";
            EGenreOnglet[EGenreOnglet["CahierDeTexte_Progression"] = 71] = "CahierDeTexte_Progression";
            EGenreOnglet[EGenreOnglet["Dispenses"] = 72] = "Dispenses";
            EGenreOnglet[EGenreOnglet["AbsencesEtRetards"] = 73] = "AbsencesEtRetards";
            EGenreOnglet[EGenreOnglet["SuivisAbsenceRetard"] = 74] = "SuivisAbsenceRetard";
            EGenreOnglet[EGenreOnglet["Affectation_Progression"] = 75] = "Affectation_Progression";
            EGenreOnglet[EGenreOnglet["RecapitulatifAbsences"] = 76] = "RecapitulatifAbsences";
            EGenreOnglet[EGenreOnglet["TrombinoscopeClasse"] = 77] = "TrombinoscopeClasse";
            EGenreOnglet[EGenreOnglet["Saisie_CarnetCorrespondance"] = 78] = "Saisie_CarnetCorrespondance";
            EGenreOnglet[EGenreOnglet["IManuels"] = 79] = "IManuels";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsSalle"] = 81] = "EmploiDuTempsSalle";
            EGenreOnglet[EGenreOnglet["Trombinoscope"] = 82] = "Trombinoscope";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Fiche"] = 83] = "LivretScolaire_Fiche";
            EGenreOnglet[EGenreOnglet["QCM"] = 84] = "QCM";
            EGenreOnglet[EGenreOnglet["QCM_Saisie"] = 85] = "QCM_Saisie";
            EGenreOnglet[EGenreOnglet["QCM_Bibliotheque"] = 86] = "QCM_Bibliotheque";
            EGenreOnglet[EGenreOnglet["QCM_Reponse"] = 87] = "QCM_Reponse";
            EGenreOnglet[EGenreOnglet["CDT_TAF"] = 88] = "CDT_TAF";
            EGenreOnglet[EGenreOnglet["CDT_Contenu"] = 89] = "CDT_Contenu";
            EGenreOnglet[EGenreOnglet["Rencontre"] = 90] = "Rencontre";
            EGenreOnglet[EGenreOnglet["Rencontre_Indisponibilites"] = 91] = "Rencontre_Indisponibilites";
            EGenreOnglet[EGenreOnglet["Rencontre_Desideratas"] = 92] = "Rencontre_Desideratas";
            EGenreOnglet[EGenreOnglet["CreneauxLibres"] = 93] = "CreneauxLibres";
            EGenreOnglet[EGenreOnglet["General_Rencontre_Planning"] = 94] = "General_Rencontre_Planning";
            EGenreOnglet[EGenreOnglet["QCM_BibliothequeNathan"] = 96] = "QCM_BibliothequeNathan";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsProfesseur"] = 97] = "EmploiDuTempsProfesseur";
            EGenreOnglet[EGenreOnglet["SaisieOffresStage"] = 98] = "SaisieOffresStage";
            EGenreOnglet[EGenreOnglet["RessourcePedagogique"] = 99] = "RessourcePedagogique";
            EGenreOnglet[EGenreOnglet["BulletinCompetences"] = 100] = "BulletinCompetences";
            EGenreOnglet[EGenreOnglet["OffresStage"] = 101] = "OffresStage";
            EGenreOnglet[EGenreOnglet["Casier"] = 102] = "Casier";
            EGenreOnglet[EGenreOnglet["Casier_Documents"] = 103] = "Casier_Documents";
            EGenreOnglet[EGenreOnglet["Casier_MonCasier"] = 104] = "Casier_MonCasier";
            EGenreOnglet[EGenreOnglet["ListeEleves"] = 105] = "ListeEleves";
            EGenreOnglet[EGenreOnglet["Genral_Classes"] = 106] = "Genral_Classes";
            EGenreOnglet[EGenreOnglet["General_Salles"] = 107] = "General_Salles";
            EGenreOnglet[EGenreOnglet["LivretScolaire"] = 108] = "LivretScolaire";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Appreciations"] = 109] = "LivretScolaire_Appreciations";
            EGenreOnglet[EGenreOnglet["LivretScolaire_Competences"] = 110] = "LivretScolaire_Competences";
            EGenreOnglet[EGenreOnglet["Graphique_Profil"] = 111] = "Graphique_Profil";
            EGenreOnglet[EGenreOnglet["Graphique_Evolution"] = 112] = "Graphique_Evolution";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_AppelEtSuivi"] = 113] = "SaisieAbsences_AppelEtSuivi";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_Appel"] = 114] = "SaisieAbsences_Appel";
            EGenreOnglet[EGenreOnglet["Remplacements_Grille"] = 118] = "Remplacements_Grille";
            EGenreOnglet[EGenreOnglet["Remplacements_Tableau"] = 119] = "Remplacements_Tableau";
            EGenreOnglet[EGenreOnglet["Rencontre_Planning_Liste"] = 120] = "Rencontre_Planning_Liste";
            EGenreOnglet[EGenreOnglet["Rencontre_Planning_Grille"] = 121] = "Rencontre_Planning_Grille";
            EGenreOnglet[EGenreOnglet["GeneralReleveDeNotes"] = 122] = "GeneralReleveDeNotes";
            EGenreOnglet[EGenreOnglet["ListeProfesseurs"] = 123] = "ListeProfesseurs";
            EGenreOnglet[EGenreOnglet["ListeClasses"] = 124] = "ListeClasses";
            EGenreOnglet[EGenreOnglet["ListeGroupes"] = 125] = "ListeGroupes";
            EGenreOnglet[EGenreOnglet["ListeResponsables"] = 126] = "ListeResponsables";
            EGenreOnglet[EGenreOnglet["ListePersonnels"] = 127] = "ListePersonnels";
            EGenreOnglet[EGenreOnglet["Genral_Eleves"] = 128] = "Genral_Eleves";
            EGenreOnglet[EGenreOnglet["General_Professeurs"] = 129] = "General_Professeurs";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsEleve"] = 130] = "EmploiDuTempsEleve";
            EGenreOnglet[EGenreOnglet["Messagerie"] = 131] = "Messagerie";
            EGenreOnglet[EGenreOnglet["General_Messagerie"] = 132] = "General_Messagerie";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsPersonnelEtablissement"] = 134] = "EmploiDuTempsPersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["Incidents"] = 135] = "Incidents";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_Appel_Professeur"] = 136] = "SaisieAbsences_Appel_Professeur";
            EGenreOnglet[EGenreOnglet["AutorisationSortie"] = 137] = "AutorisationSortie";
            EGenreOnglet[EGenreOnglet["RecapAbsences"] = 138] = "RecapAbsences";
            EGenreOnglet[EGenreOnglet["RecapFeuilleAppel"] = 139] = "RecapFeuilleAppel";
            EGenreOnglet[EGenreOnglet["RecapPunitions"] = 140] = "RecapPunitions";
            EGenreOnglet[EGenreOnglet["ProgrammesBO"] = 141] = "ProgrammesBO";
            EGenreOnglet[EGenreOnglet["Trombinoscope_Professeur"] = 142] = "Trombinoscope_Professeur";
            EGenreOnglet[EGenreOnglet["Trombinoscope_Personnel"] = 143] = "Trombinoscope_Personnel";
            EGenreOnglet[EGenreOnglet["ParametresUtilisateur"] = 144] = "ParametresUtilisateur";
            EGenreOnglet[EGenreOnglet["ListeStagiaires"] = 145] = "ListeStagiaires";
            EGenreOnglet[EGenreOnglet["CoursNonAssures"] = 146] = "CoursNonAssures";
            EGenreOnglet[EGenreOnglet["General_Personnels"] = 147] = "General_Personnels";
            EGenreOnglet[EGenreOnglet["DocumentsATelecharger"] = 148] = "DocumentsATelecharger";
            EGenreOnglet[EGenreOnglet["General_Progression"] = 149] = "General_Progression";
            EGenreOnglet[EGenreOnglet["BibliothequeProgression"] = 150] = "BibliothequeProgression";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Saisie"] = 151] = "General_CahierDeTextes_Saisie";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Consultation"] = 152] = "General_CahierDeTextes_Consultation";
            EGenreOnglet[EGenreOnglet["General_Documentation"] = 153] = "General_Documentation";
            EGenreOnglet[EGenreOnglet["ListeDevoirSurTable"] = 154] = "ListeDevoirSurTable";
            EGenreOnglet[EGenreOnglet["AbsencesGrille"] = 155] = "AbsencesGrille";
            EGenreOnglet[EGenreOnglet["General_Materiels"] = 156] = "General_Materiels";
            EGenreOnglet[EGenreOnglet["EmploiDuTempsMateriel"] = 157] = "EmploiDuTempsMateriel";
            EGenreOnglet[EGenreOnglet["ListeDiffusion"] = 158] = "ListeDiffusion";
            EGenreOnglet[EGenreOnglet["RecapitulatifScolarite"] = 161] = "RecapitulatifScolarite";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine"] = 162] = "PlanningParSemaine";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Professeur"] = 163] = "PlanningParSemaine_Professeur";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Eleve"] = 164] = "PlanningParSemaine_Eleve";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Classe"] = 165] = "PlanningParSemaine_Classe";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Salle"] = 166] = "PlanningParSemaine_Salle";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_PersonnelEtablissement"] = 167] = "PlanningParSemaine_PersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["PlanningParSemaine_Materiel"] = 168] = "PlanningParSemaine_Materiel";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Professeur"] = 169] = "PlanningParRessource_Professeur";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Eleve"] = 170] = "PlanningParRessource_Eleve";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Classe"] = 171] = "PlanningParRessource_Classe";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Salle"] = 172] = "PlanningParRessource_Salle";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_PersonnelEtablissement"] = 173] = "PlanningParRessource_PersonnelEtablissement";
            EGenreOnglet[EGenreOnglet["PlanningParRessource_Materiel"] = 174] = "PlanningParRessource_Materiel";
            EGenreOnglet[EGenreOnglet["General_Intendance"] = 175] = "General_Intendance";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieDemandesTravaux"] = 176] = "Intendance_SaisieDemandesTravaux";
            EGenreOnglet[EGenreOnglet["RessourcePedagogique_Partage"] = 177] = "RessourcePedagogique_Partage";
            EGenreOnglet[EGenreOnglet["BilanFinDeCycle"] = 178] = "BilanFinDeCycle";
            EGenreOnglet[EGenreOnglet["Trombinoscope_EquipePedagogique"] = 179] = "Trombinoscope_EquipePedagogique";
            EGenreOnglet[EGenreOnglet["ParcoursEducatif_Bulletin"] = 180] = "ParcoursEducatif_Bulletin";
            EGenreOnglet[EGenreOnglet["ParcoursEducatif_BullCompetence"] = 181] = "ParcoursEducatif_BullCompetence";
            EGenreOnglet[EGenreOnglet["General_Competences_NouveauSocleCommun"] = 182] = "General_Competences_NouveauSocleCommun";
            EGenreOnglet[EGenreOnglet["Saisie_Punitions"] = 192] = "Saisie_Punitions";
            EGenreOnglet[EGenreOnglet["Saisie_Dispenses"] = 193] = "Saisie_Dispenses";
            EGenreOnglet[EGenreOnglet["ListeDevoirs"] = 194] = "ListeDevoirs";
            EGenreOnglet[EGenreOnglet["EvaluationAccueilStage"] = 195] = "EvaluationAccueilStage";
            EGenreOnglet[EGenreOnglet["ListeServices"] = 196] = "ListeServices";
            EGenreOnglet[EGenreOnglet["RecapitulatifExportLSU"] = 197] = "RecapitulatifExportLSU";
            EGenreOnglet[EGenreOnglet["DernieresNotes"] = 198] = "DernieresNotes";
            EGenreOnglet[EGenreOnglet["Competences_GrillesParDomaine"] = 199] = "Competences_GrillesParDomaine";
            EGenreOnglet[EGenreOnglet["Competences_GrillesParMatiere"] = 200] = "Competences_GrillesParMatiere";
            EGenreOnglet[EGenreOnglet["DernieresEvaluations"] = 201] = "DernieresEvaluations";
            EGenreOnglet[EGenreOnglet["ReleveEvaluationsParService"] = 202] = "ReleveEvaluationsParService";
            EGenreOnglet[EGenreOnglet["General_Competences_Grilles"] = 203] = "General_Competences_Grilles";
            EGenreOnglet[EGenreOnglet["General_Competences_Evaluation"] = 204] = "General_Competences_Evaluation";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanPeriodique"] = 205] = "General_Competences_BilanPeriodique";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanFinDeCycle"] = 206] = "General_Competences_BilanFinDeCycle";
            EGenreOnglet[EGenreOnglet["General_MonEmploiDuTemps"] = 207] = "General_MonEmploiDuTemps";
            EGenreOnglet[EGenreOnglet["General_MesEleves"] = 208] = "General_MesEleves";
            EGenreOnglet[EGenreOnglet["General_MesCollegues"] = 209] = "General_MesCollegues";
            EGenreOnglet[EGenreOnglet["General_OutilsPedagogiques"] = 210] = "General_OutilsPedagogiques";
            EGenreOnglet[EGenreOnglet["General_CDT"] = 211] = "General_CDT";
            EGenreOnglet[EGenreOnglet["General_VieScolaire_Recapitulatif"] = 212] = "General_VieScolaire_Recapitulatif";
            EGenreOnglet[EGenreOnglet["General_RessourcesPedagogiques"] = 214] = "General_RessourcesPedagogiques";
            EGenreOnglet[EGenreOnglet["ReleveEvaluationsParClasse"] = 215] = "ReleveEvaluationsParClasse";
            EGenreOnglet[EGenreOnglet["NiveauxDeMaitriseParMatiere"] = 216] = "NiveauxDeMaitriseParMatiere";
            EGenreOnglet[EGenreOnglet["General_BulletinsEleveClasse"] = 217] = "General_BulletinsEleveClasse";
            EGenreOnglet[EGenreOnglet["General_BulletinCompetencesEleveClasse"] = 218] = "General_BulletinCompetencesEleveClasse";
            EGenreOnglet[EGenreOnglet["BulletinCompetencesClasse"] = 219] = "BulletinCompetencesClasse";
            EGenreOnglet[EGenreOnglet["General_MesColleguesPersonnels"] = 220] = "General_MesColleguesPersonnels";
            EGenreOnglet[EGenreOnglet["General_ProceduresDisciplinaires"] = 221] = "General_ProceduresDisciplinaires";
            EGenreOnglet[EGenreOnglet["General_Dispenses"] = 222] = "General_Dispenses";
            EGenreOnglet[EGenreOnglet["General_Competences_BilanDomaine"] = 223] = "General_Competences_BilanDomaine";
            EGenreOnglet[EGenreOnglet["SaisieAppreciationsGenerales_Competences"] = 224] = "SaisieAppreciationsGenerales_Competences";
            EGenreOnglet[EGenreOnglet["General_Appreciations"] = 225] = "General_Appreciations";
            EGenreOnglet[EGenreOnglet["General_Appreciations_Competences"] = 226] = "General_Appreciations_Competences";
            EGenreOnglet[EGenreOnglet["BulletinAnneesPrec_Note"] = 227] = "BulletinAnneesPrec_Note";
            EGenreOnglet[EGenreOnglet["BulletinAnneesPrec_Competence"] = 228] = "BulletinAnneesPrec_Competence";
            EGenreOnglet[EGenreOnglet["ListeMatieres"] = 229] = "ListeMatieres";
            EGenreOnglet[EGenreOnglet["ReleveDeCompetences"] = 230] = "ReleveDeCompetences";
            EGenreOnglet[EGenreOnglet["TableauDeBord"] = 231] = "TableauDeBord";
            EGenreOnglet[EGenreOnglet["ServicesPeriscolaires"] = 232] = "ServicesPeriscolaires";
            EGenreOnglet[EGenreOnglet["Inscriptions"] = 233] = "Inscriptions";
            EGenreOnglet[EGenreOnglet["EmploiDuTemps_Annuel_Classe"] = 234] = "EmploiDuTemps_Annuel_Classe";
            EGenreOnglet[EGenreOnglet["InfosEnfant_Prim"] = 235] = "InfosEnfant_Prim";
            EGenreOnglet[EGenreOnglet["General_BilanParDomaine"] = 237] = "General_BilanParDomaine";
            EGenreOnglet[EGenreOnglet["General_CahierJournal"] = 238] = "General_CahierJournal";
            EGenreOnglet[EGenreOnglet["SaisieProgressions"] = 239] = "SaisieProgressions";
            EGenreOnglet[EGenreOnglet["General_PyramideDesAges"] = 240] = "General_PyramideDesAges";
            EGenreOnglet[EGenreOnglet["PyramideDesAges_Histogramme"] = 241] = "PyramideDesAges_Histogramme";
            EGenreOnglet[EGenreOnglet["PyramideDesAges_Repartition"] = 242] = "PyramideDesAges_Repartition";
            EGenreOnglet[EGenreOnglet["General_CahierDeTextes_Planification"] = 243] = "General_CahierDeTextes_Planification";
            EGenreOnglet[EGenreOnglet["CDT_Planning"] = 244] = "CDT_Planning";
            EGenreOnglet[EGenreOnglet["QCM_Collaboratif"] = 245] = "QCM_Collaboratif";
            EGenreOnglet[EGenreOnglet["AppreciationsBulletinParEleve"] = 246] = "AppreciationsBulletinParEleve";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieSecretariat"] = 247] = "Intendance_SaisieSecretariat";
            EGenreOnglet[EGenreOnglet["Competences_GrillesCompetencesNumeriques"] = 248] = "Competences_GrillesCompetencesNumeriques";
            EGenreOnglet[EGenreOnglet["CompetencesNumeriques"] = 249] = "CompetencesNumeriques";
            EGenreOnglet[EGenreOnglet["ManuelsNumeriques"] = 250] = "ManuelsNumeriques";
            EGenreOnglet[EGenreOnglet["General_Blog"] = 251] = "General_Blog";
            EGenreOnglet[EGenreOnglet["Blog_FilActu"] = 253] = "Blog_FilActu";
            EGenreOnglet[EGenreOnglet["Blog_Mediatheque"] = 254] = "Blog_Mediatheque";
            EGenreOnglet[EGenreOnglet["SaisieTravailAFaire"] = 255] = "SaisieTravailAFaire";
            EGenreOnglet[EGenreOnglet["General_InscriptionsEtablissement"] = 256] = "General_InscriptionsEtablissement";
            EGenreOnglet[EGenreOnglet["InscriptionsEtablissement"] = 257] = "InscriptionsEtablissement";
            EGenreOnglet[EGenreOnglet["SaisieAbsences_AppelEtSuiviProfesseur"] = 259] = "SaisieAbsences_AppelEtSuiviProfesseur";
            EGenreOnglet[EGenreOnglet["SaisieAvisProfesseur"] = 260] = "SaisieAvisProfesseur";
            EGenreOnglet[EGenreOnglet["SuiviElevesTutores"] = 261] = "SuiviElevesTutores";
            EGenreOnglet[EGenreOnglet["Onglet_General_Suivi"] = 262] = "Onglet_General_Suivi";
            EGenreOnglet[EGenreOnglet["SuiviJustificationsAbsencesRetards"] = 263] = "SuiviJustificationsAbsencesRetards";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieDemandesInformatique"] = 264] = "Intendance_SaisieDemandesInformatique";
            EGenreOnglet[EGenreOnglet["Intendance_SaisieCommandes"] = 265] = "Intendance_SaisieCommandes";
            EGenreOnglet[EGenreOnglet["SaisieCahierJournal"] = 266] = "SaisieCahierJournal";
            EGenreOnglet[EGenreOnglet["Onglet_General_Apprentissages"] = 267] = "Onglet_General_Apprentissages";
            EGenreOnglet[EGenreOnglet["ListeApprentissages"] = 268] = "ListeApprentissages";
            EGenreOnglet[EGenreOnglet["CarnetDeSuivi"] = 269] = "CarnetDeSuivi";
            EGenreOnglet[EGenreOnglet["SyntheseAcquis"] = 270] = "SyntheseAcquis";
            EGenreOnglet[EGenreOnglet["DocumentsParents"] = 271] = "DocumentsParents";
            EGenreOnglet[EGenreOnglet["RecapDevoirRendu"] = 272] = "RecapDevoirRendu";
            EGenreOnglet[EGenreOnglet["SaisieAvisParcoursup"] = 273] = "SaisieAvisParcoursup";
            EGenreOnglet[EGenreOnglet["SaisieAppelPeriScolaire"] = 274] = "SaisieAppelPeriScolaire";
            EGenreOnglet[EGenreOnglet["ForumPedagogique"] = 275] = "ForumPedagogique";
            EGenreOnglet[EGenreOnglet["General_Competences_SuiviCompetences"] = 276] = "General_Competences_SuiviCompetences";
            EGenreOnglet[EGenreOnglet["SuiviResultatsCompetences"] = 277] = "SuiviResultatsCompetences";
            EGenreOnglet[EGenreOnglet["BilanCompetencesParMatiere"] = 278] = "BilanCompetencesParMatiere";
            EGenreOnglet[EGenreOnglet["SaisieApprGeneralesReleve"] = 279] = "SaisieApprGeneralesReleve";
            EGenreOnglet[EGenreOnglet["Onglet_General_Pedagogie"] = 280] = "Onglet_General_Pedagogie";
            EGenreOnglet[EGenreOnglet["BilanAnnuelApprentissage"] = 281] = "BilanAnnuelApprentissage";
            EGenreOnglet[EGenreOnglet["General_SuiviApprentissages"] = 282] = "General_SuiviApprentissages";
            EGenreOnglet[EGenreOnglet["Commissions"] = 283] = "Commissions";
            EGenreOnglet[EGenreOnglet["RDV"] = 284] = "RDV";
            EGenreOnglet[EGenreOnglet["RemplacementsEnseignants"] = 285] = "RemplacementsEnseignants";
            EGenreOnglet[EGenreOnglet["SaisieAppelInternat"] = 286] = "SaisieAppelInternat";
            EGenreOnglet[EGenreOnglet["General_RemplacementsEnseignants"] = 287] = "General_RemplacementsEnseignants";
        }
        )(EGenreOnglet || (exports.EGenreOnglet = EGenreOnglet = {}));
    },
    fn: 'enumere_onglet.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeHttpNotificationDonnes = void 0;
        var TypeHttpNotificationDonnes;
        (function(TypeHttpNotificationDonnes) {
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeDocJointEtablissement"] = 0] = "THND_ListeDocJointEtablissement";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeClasse"] = 1] = "THND_ListeClasse";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeClasseNiveau"] = 2] = "THND_ListeClasseNiveau";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeGroupe"] = 3] = "THND_ListeGroupe";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_ListeProfesseur"] = 4] = "THND_ListeProfesseur";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_AutorisationProfesseur"] = 5] = "THND_AutorisationProfesseur";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_AutorisationPersonnel"] = 6] = "THND_AutorisationPersonnel";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreDepotDocumentCasierNonLus"] = 7] = "THND_NombreDepotDocumentCasierNonLus";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreMessagesNonLus"] = 8] = "THND_NombreMessagesNonLus";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_NombreActualitesNonLues"] = 9] = "THND_NombreActualitesNonLues";
            TypeHttpNotificationDonnes[TypeHttpNotificationDonnes["THND_Kiosque"] = 10] = "THND_Kiosque";
        }
        )(TypeHttpNotificationDonnes || (exports.TypeHttpNotificationDonnes = TypeHttpNotificationDonnes = {}));
    },
    fn: 'typehttpnotificationdonnes.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteCloudAttente = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteCloudAttente extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteCloudAttente = ObjetRequeteCloudAttente;
        CollectionRequetes_1.Requetes.inscrire('CloudAttente', ObjetRequeteCloudAttente);
    },
    fn: 'objetrequetecloudattente.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireOAuth2 = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const Invocateur_1 = require("Invocateur");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireOAuth2 = {
            revocation(aIdOAuth2, aCallback) {
                new ObjetRequeteOAuth2Attente().lancerRequete({
                    idOAuth2: aIdOAuth2,
                    revocation: true
                }).then( (aJSON) => {
                    if (!!aJSON) {
                        GEtatUtilisateur.listeCloud.parcourir( (aCloud) => {
                            if (!!aCloud.idOAuth2 && aCloud.idOAuth2 === aIdOAuth2) {
                                delete aCloud.idOAuth2;
                            }
                        }
                        );
                        GEtatUtilisateur.listeCloudDepotServeur.parcourir( (aCloud) => {
                            if (!!aCloud.idOAuth2 && aCloud.idOAuth2 === aIdOAuth2) {
                                delete aCloud.idOAuth2;
                            }
                        }
                        );
                        aCallback.call(this);
                    }
                }
                );
            },
            authentificationPromise(aIdOAuth2) {
                const lIdentAbonnement = ObjetRequeteJSON_1.utils.getIdentNotification('tokenOAuth2');
                return new ObjetRequeteOAuth2Attente({}).lancerRequete({
                    idOAuth2: aIdOAuth2
                }).then( (aJSON) => {
                    if (aJSON.urlAuthorize) {
                        window.open(aJSON.urlAuthorize);
                        let lAvecInterruption = true;
                        const lPromiseMessage = GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.message', [IE.jsx.str("a", {
                                href: aJSON.urlAuthorize,
                                target: "_blank'"
                            }, ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.lien'))]).replaceRCToHTML()
                        }).then( () => {
                            if (lAvecInterruption) {
                                return new ObjetRequeteOAuth2Attente({}).lancerRequete({
                                    interruption: true
                                });
                            }
                        }
                        ).then( () => {
                            return Promise.reject({
                                sansMessage: true
                            });
                        }
                        );
                        const lPromiseNotif = new Promise( (aResolve, aReject) => {
                            Invocateur_1.Invocateur.abonnerUnique(lIdentAbonnement, (aNotif) => {
                                lAvecInterruption = false;
                                if (aNotif && aNotif.ok) {
                                    aResolve();
                                } else {
                                    aReject(aNotif.message);
                                }
                            }
                            );
                        }
                        );
                        return Promise.race([lPromiseMessage, lPromiseNotif]).finally( () => {
                            GApplication.getMessage().fermer();
                            Invocateur_1.Invocateur.desabonner(lIdentAbonnement);
                        }
                        );
                    }
                    if (!aJSON.ok) {
                        return Promise.reject(aJSON.message);
                    }
                }
                ).catch( (aError) => {
                    if (aError && aError.sansMessage) {
                        return Promise.reject();
                    }
                    return GApplication.getMessage().afficher({
                        message: aError || ObjetTraduction_1.GTraductions.getValeur('UtilitaireOAuth2.echec')
                    }).then( () => {
                        return Promise.reject();
                    }
                    );
                }
                );
            }
        };
        exports.UtilitaireOAuth2 = UtilitaireOAuth2;
        class ObjetRequeteOAuth2Attente extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        CollectionRequetes_1.Requetes.inscrire('OAuth2Attente', ObjetRequeteOAuth2Attente);
    },
    fn: 'utilitaireoauth2.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeFormatPublication = exports.TTypeElementCloud = void 0;
        var TTypeElementCloud;
        (function(TTypeElementCloud) {
            TTypeElementCloud[TTypeElementCloud["tec_Fichier"] = 0] = "tec_Fichier";
            TTypeElementCloud[TTypeElementCloud["tec_Dossier"] = 1] = "tec_Dossier";
        }
        )(TTypeElementCloud || (exports.TTypeElementCloud = TTypeElementCloud = {}));
        var TypeFormatPublication;
        (function(TypeFormatPublication) {
            TypeFormatPublication[TypeFormatPublication["FP_NonPublie"] = 0] = "FP_NonPublie";
            TypeFormatPublication[TypeFormatPublication["FP_Natif"] = 1] = "FP_Natif";
            TypeFormatPublication[TypeFormatPublication["FP_Pdf"] = 2] = "FP_Pdf";
        }
        )(TypeFormatPublication || (exports.TypeFormatPublication = TypeFormatPublication = {}));
    },
    fn: 'ttypeelementcloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeStatutInterrogationCloud = void 0;
        var TypeStatutInterrogationCloud;
        (function(TypeStatutInterrogationCloud) {
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_Inconnu"] = 0] = "sic_Inconnu";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_OK"] = 1] = "sic_OK";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_TokenInvalide"] = 2] = "sic_TokenInvalide";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_Timeout"] = 3] = "sic_Timeout";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ArretApplication"] = 4] = "sic_ArretApplication";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_DossierTropGros"] = 5] = "sic_DossierTropGros";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_DossierInconnu"] = 6] = "sic_DossierInconnu";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_RacineInconnue"] = 7] = "sic_RacineInconnue";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ImpossibleDePartagerLeFichier"] = 8] = "sic_ImpossibleDePartagerLeFichier";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_AdresseMailNonVerifiee"] = 9] = "sic_AdresseMailNonVerifiee";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_ImpossibleDePartagerUnDossier"] = 10] = "sic_ImpossibleDePartagerUnDossier";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_FichierDejaExistant"] = 11] = "sic_FichierDejaExistant";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_FichierTropGros"] = 12] = "sic_FichierTropGros";
            TypeStatutInterrogationCloud[TypeStatutInterrogationCloud["sic_PlusDEspace"] = 13] = "sic_PlusDEspace";
        }
        )(TypeStatutInterrogationCloud || (exports.TypeStatutInterrogationCloud = TypeStatutInterrogationCloud = {}));
    },
    fn: 'typestatutinterrogationcloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRequetesCloud = void 0;
        const ObjetRequeteCloudAttente_1 = require("ObjetRequeteCloudAttente");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_DocumentJoint_1 = require("Enumere_DocumentJoint");
        const Enumere_Etat_1 = require("Enumere_Etat");
        const UtilitaireOAuth2_1 = require("UtilitaireOAuth2");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const TTypeElementCloud_1 = require("TTypeElementCloud");
        const TypeStatutInterrogationCloud_1 = require("TypeStatutInterrogationCloud");
        const c_TailleMaxUpload_cloud = 52428800;
        const UtilitaireRequetesCloud = {
            c_TailleMaxUpload_cloud: c_TailleMaxUpload_cloud,
            requetePartageListeFichiers(aListePJs) {
                const lListeATraiter = aListePJs.getListeElements( (aEle) => {
                    return aEle.getGenre() === Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud && aEle.existe() && aEle.service !== undefined && !aEle.traite;
                }
                );
                if (lListeATraiter.count() > 0) {
                    const lElement = lListeATraiter.get(0);
                    lElement.partageFichier = true;
                    return new ObjetRequeteCloudAttente_1.ObjetRequeteCloudAttente().lancerRequete({
                        service: lElement.service,
                        idPartage: lElement.idPartage,
                        partageFichier: lElement.partageFichier,
                        publiPdf: lElement.publiPdf
                    }).then( (aJSON) => {
                        if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_OK) {
                            lElement.url = aJSON.urlPartage;
                            lElement.traite = true;
                            return;
                        }
                        if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_TokenInvalide) {
                            if (lElement.avecTokenInvalide) {
                                return Promise.reject();
                            }
                            lElement.avecTokenInvalide = true;
                            if (aJSON.idOAuth2) {
                                return UtilitaireOAuth2_1.UtilitaireOAuth2.authentificationPromise(aJSON.idOAuth2);
                            }
                            return Promise.reject();
                        }
                        lElement.setEtat(Enumere_Etat_1.EGenreEtat.Suppression);
                        lElement.traite = true;
                        return GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            message: ObjetTraduction_1.GTraductions.getValeur('requete.erreur') + ' : ' + (aJSON.message || '') + ' (' + aJSON.status + ')'
                        });
                    }
                    ).then( () => {
                        return UtilitaireRequetesCloud.requetePartageListeFichiers(aListePJs);
                    }
                    ).catch( (aError) => {}
                    );
                }
                return Promise.resolve();
            },
            requeteUploadVersCloudListFichiers(aParams) {
                const lParams = Object.assign({
                    idPartageDossier: null,
                    service: null,
                    listeFichiersATraiter: null,
                    listeFichiersResultat: null
                }, aParams);
                if (!MethodesObjet_1.MethodesObjet.isNumber(lParams.service) || (!lParams.idPartageDossier && lParams.idPartageDossier !== '') || !lParams.listeFichiersATraiter || !lParams.listeFichiersATraiter.count || !lParams.listeFichiersResultat) {
                    return Promise.reject();
                }
                if (lParams.listeFichiersATraiter.count() === 0) {
                    return Promise.resolve(true);
                }
                const lIndiceFichierATraiter = 0;
                const lFichier = lParams.listeFichiersATraiter.get(lIndiceFichierATraiter);
                return Promise.resolve().then( () => {
                    if (lFichier) {
                        const lIdFichierBackup = lFichier.idFichier;
                        return new ObjetRequeteCloudAttente_1.ObjetRequeteCloudAttente().addUpload({
                            listeFichiers: new ObjetListeElements_1.ObjetListeElements().add(lFichier),
                            annulerSurAbortUpload: true,
                            annulerSurErreurUpload: true
                        }).lancerRequete({
                            upload: true,
                            service: lParams.service,
                            idDossier: lParams.idPartageDossier,
                            nomFichier: lFichier.getLibelle(),
                            idFichier: lFichier.idFichier
                        }).then( (aJSON) => {
                            if (aJSON.upload && aJSON.fichier) {
                                const lElementCloud = ObjetElement_1.ObjetElement.create({
                                    Libelle: aJSON.fichier.getLibelle(),
                                    Genre: Enumere_DocumentJoint_1.EGenreDocumentJoint.Cloud,
                                    service: lParams.service,
                                    idPartage: aJSON.fichier.idPartage,
                                    publiPdf: aJSON.fichier.pubPdf ? aJSON.fichier.formatPub : TTypeElementCloud_1.TypeFormatPublication.FP_Natif,
                                    url: aJSON.fichier.url
                                });
                                lElementCloud.setEtat(Enumere_Etat_1.EGenreEtat.Creation);
                                lParams.listeFichiersResultat.add(lElementCloud);
                                return;
                            }
                            if (aJSON.status === TypeStatutInterrogationCloud_1.TypeStatutInterrogationCloud.sic_TokenInvalide) {
                                if (lParams.avecTokenInvalide) {
                                    return Promise.reject();
                                }
                                lParams.avecTokenInvalide = true;
                                if (aJSON.idOAuth2) {
                                    return UtilitaireOAuth2_1.UtilitaireOAuth2.authentificationPromise(aJSON.idOAuth2).then( () => {
                                        if (lIdFichierBackup) {
                                            lFichier.idFichier = lIdFichierBackup;
                                        }
                                        return {
                                            refaireUpload: true
                                        };
                                    }
                                    );
                                }
                            }
                            if (aJSON.erreurCommunication) {
                                return null;
                            }
                            return GApplication.getMessage().afficher({
                                type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                                message: ObjetTraduction_1.GTraductions.getValeur('requete.erreur') + ' : ' + (aJSON.message || '') + ' (' + aJSON.status + ')'
                            }).then( () => null);
                        }
                        );
                    }
                }
                ).then( (aParams) => {
                    if (!aParams || !aParams.refaireUpload) {
                        lParams.listeFichiersATraiter.remove(lIndiceFichierATraiter);
                    }
                    return UtilitaireRequetesCloud.requeteUploadVersCloudListFichiers(lParams);
                }
                );
            }
        };
        exports.UtilitaireRequetesCloud = UtilitaireRequetesCloud;
    },
    fn: 'utilitairerequetescloud.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const TypeHttpNotificationDonnes_1 = require("TypeHttpNotificationDonnes");
        const UtilitaireRequetesCloud_1 = require("UtilitaireRequetesCloud");
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        ObjetRequeteJSON_1.ObjetRequeteJSON.declarerModules({
            initialiser: function(aFuncInitSignature) {
                if (global.GEtatUtilisateur && GEtatUtilisateur.Identification) {
                    const lSignature = {};
                    if (GEtatUtilisateur.estEspaceAvecMembre()) {
                        const lMembre = GEtatUtilisateur.getMembre();
                        if (lMembre) {
                            lSignature.membre = new ObjetElement_1.ObjetElement('',lMembre.getNumero(),lMembre.getGenre());
                        }
                    }
                    lSignature.onglet = GEtatUtilisateur.getGenreOnglet() >= 0 && MethodesObjet_1.MethodesObjet.isNumber(GEtatUtilisateur.getGenreOnglet()) ? GEtatUtilisateur.getGenreOnglet() : Enumere_Onglet_1.EGenreOnglet.GeneralRacine;
                    aFuncInitSignature(lSignature);
                }
            },
            deserialiserSignature: function(aJSONSignature) {
                _deserialisationSignatureRequeteConsultSaisie(aJSONSignature);
            },
            factoryModuleUploadCloud: function() {
                return _getModuleUploadCloud();
            },
            deserialiserPolling: function(aJSONSignature, aJSONRacine) {
                Object.assign(aJSONSignature, aJSONRacine[ObjetRequeteJSON_1.c_constantesJSON.Donnees]);
                _deserialisationSignature(aJSONSignature);
            }
        });
        function _deserialisationSignatureRequeteConsultSaisie(aJSON) {
            if (aJSON) {
                if (aJSON.ModeExclusif === true || aJSON.ModeExclusif === false) {
                    Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.modificationModeExclusif, aJSON.ModeExclusif);
                }
                _deserialisationSignature(aJSON);
            }
        }
        function _deserialisationSignature(aJSON) {
            if (GApplication.droits) {
                GApplication.droits.chargerJSON(aJSON);
            }
            if (aJSON.notificationsCommunication) {
                Invocateur_1.Invocateur.evenement('notification_communication', aJSON.notificationsCommunication);
            }
            if (aJSON.actualisationMessage) {
                Invocateur_1.Invocateur.evenement('notification_actualisationMessage');
            }
            if (aJSON.notificationsChatVS) {
                Invocateur_1.Invocateur.evenement('notification_chatVS', aJSON.notificationsChatVS);
                Invocateur_1.Invocateur.evenement('notification_actualisationMessage', true);
            }
            if (aJSON.notificationsKiosque) {
                Invocateur_1.Invocateur.evenement('notification_Kiosque');
            }
            if (aJSON.notifications) {
                Object.keys(aJSON.notifications).forEach( (aCle) => {
                    Invocateur_1.Invocateur.evenement(ObjetRequeteJSON_1.utils.getIdentNotification(aCle), aJSON.notifications[aCle]);
                }
                );
            }
            if (aJSON.listeDonnees) {
                const lEtatUtil = GEtatUtilisateur;
                if (!lEtatUtil.listeDonnees) {
                    lEtatUtil.listeDonnees = {};
                }
                const lDonnees = {}
                  , lJSON = aJSON.listeDonnees;
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeClasseNiveau];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeGroupe];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeProfesseur];
                }
                if (lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement]) {
                    lDonnees[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement] = lJSON[TypeHttpNotificationDonnes_1.TypeHttpNotificationDonnes.THND_ListeDocJointEtablissement];
                }
                Object.assign(lEtatUtil.listeDonnees, lDonnees);
            }
        }
        function _getModuleUploadCloud() {
            return {
                setListePJs: function(aListe) {
                    this.listePJs = aListe;
                },
                actif: function() {
                    return this.listePJs && this.listePJs.count && this.listePJs.count() > 0;
                },
                lancer: function() {
                    const lListePJs = this.listePJs;
                    this.listePJs = null;
                    return UtilitaireRequetesCloud_1.UtilitaireRequetesCloud.requetePartageListeFichiers(lListePJs);
                }
            };
        }
    },
    fn: 'declarationobjetrequetepn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationSco = void 0;
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const ObjetRequeteFonctionParametres_1 = require("ObjetRequeteFonctionParametres");
        const Parametres_1 = require("Parametres");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const CommunicationProduit_1 = require("CommunicationProduit");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetCycles_1 = require("ObjetCycles");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ObjetAccesPN_1 = require("ObjetAccesPN");
        const ObjetOptionsEspaceLocalPN_1 = require("ObjetOptionsEspaceLocalPN");
        const TypeModeGrillesEDT_1 = require("TypeModeGrillesEDT");
        const ObjetApplicationProduit_1 = require("ObjetApplicationProduit");
        const UtilitaireMAJServeur_1 = require("UtilitaireMAJServeur");
        const ObjetDonneesCentraleNotificationsSco_1 = require("ObjetDonneesCentraleNotificationsSco");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetParametresUtilisateur_1 = require("ObjetParametresUtilisateur");
        require('DeclarationObjetRequetePN.js');
        const uGestionPresence = {
            modeExclusif: false,
            compteurAffichageMessagerie: 0
        };
        class ObjetApplicationSco extends ObjetApplicationProduit_1.ObjetApplicationProduit {
            constructor() {
                super();
                this.nomProduit = 'PRONOTE';
                this.donneesCentraleNotifications = new ObjetDonneesCentraleNotificationsSco_1.ObjetDonneesCentraleNotificationsSco();
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getObjetParametres() {
                return GParametres;
            }
            getCouleur() {
                return GCouleur;
            }
            lancer(aParam) {
                this.setDemo(!!aParam.d);
                Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.initChiffrement, aParam);
                const lParametres = {
                    genreEspace: aParam.a,
                    numeroJeton: aParam.e ? aParam.e : -1,
                    cleJeton: aParam.f ? aParam.f : '',
                    genreAcces: aParam.g ? aParam.g : 0,
                    numeroSession: aParam.h,
                    forcerInscription: aParam.fi,
                    page: aParam.p
                };
                this.acces = new ObjetAccesPN_1.ObjetAccesPN(lParametres.genreAcces,lParametres.genreEspace,0,0,lParametres.numeroJeton,0);
                if (this.acces.estConnexionCAS() || this.acces.estConnexionCookie()) {
                    this.acces.setIdentification(lParametres.numeroJeton, lParametres.cleJeton);
                }
                ;this.droits = new ObjetDroitsPN_1.ObjetDroitsPN();
                this.parametresUtilisateur = new ObjetParametresUtilisateur_1.ObjetParametresUtilisateur();
                this.optionsEspaceLocal = new ObjetOptionsEspaceLocalPN_1.ObjetOptionsEspaceLocalPN({
                    nomProduit: this.nomProduit,
                    espace: lParametres.genreEspace
                });
                DeferLoadingScript_1.deferLoadingScript.setOptions({
                    done() {},
                    fail(aNom) {
                        GApplication.getCommunication().sendLogClient(`erreur chargement script defer : ${aNom}`);
                        UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexionEchecChargement();
                    },
                    messageChargement: ObjetTraduction_1.GTraductions.getValeur('connexion.Chargement')
                });
                this.initialisation(lParametres);
                this.lancerRequeteParametres(lParametres);
                Invocateur_1.Invocateur.abonner('affichage_messagerie', this._surNotificationAffichageMessagerie.bind(this));
                UtilitaireMAJServeur_1.UtilitaireMAJServeur.initialiser({
                    afficherMessageDelaiLong: !this.getEtatUtilisateur().estEspacePourEleve(),
                    afficherMessageImminentEleve: this.getEtatUtilisateur().estEspacePourEleve(),
                    cssImage: this.getEtatUtilisateur().pourPrimaire() ? 'Image_AlerteMiseAJourPRM' : 'Image_AlerteMiseAJourPRN'
                });
                if (aParam.fi) {
                    this.getEtatUtilisateur().forcerOngletInscription = true;
                }
                if (this.optionsEspaceLocal) {
                    if (this.optionsEspaceLocal.getAvecCodeCompetences) {
                        this.getEtatUtilisateur().setAvecCodeCompetences(this.optionsEspaceLocal.getAvecCodeCompetences());
                    }
                    if (this.optionsEspaceLocal.getAvecThemeAccessible) {
                        this.getEtatUtilisateur().setAvecThemeAccessible(this.optionsEspaceLocal.getAvecThemeAccessible());
                    }
                }
            }
            initialisation(aParametres) {}
            lancerRequeteParametres(aParametres) {
                new ObjetRequeteFonctionParametres_1.ObjetRequeteFonctionParametres(this).lancerRequete({
                    uuidRSA: this.getCommunication().serialiserIVAESPourSeveur()
                }).then( (aJSON) => {
                    try {
                        GParametres = new Parametres_1.ObjetParametres(aJSON);
                        this.initialisationApresParametres(aParametres);
                    } catch (e) {
                        alert('Erreur : ' + e.message);
                    }
                }
                );
                this.getCommunication().setIvAES();
            }
            initialisationApresParametres(aParametres) {
                function _surUnload() {
                    this.getCommunication().desactiverPresence();
                }
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.surRechargementPage, _surUnload.bind(this));
                const lGParametres = GParametres;
                ObjetDate_1.GDate.setDonnees(lGParametres.PremierLundi, lGParametres.PremiereDate, lGParametres.DerniereDate, lGParametres.PlacesParJour, lGParametres.PlacesParHeure, lGParametres.DureeSequence, lGParametres.PremiereHeure, lGParametres.LibellesHeures, lGParametres.LibellesHeuresFin, lGParametres.JoursOuvres);
                let lJourFerie;
                let lIndiceJour;
                lGParametres.ensembleJoursFeries = new TypeEnsembleNombre_1.TypeEnsembleNombre();
                for (let I = 0, lNb = lGParametres.listeJoursFeries.count(); I < lNb; I++) {
                    lJourFerie = lGParametres.listeJoursFeries.get(I);
                    for (lIndiceJour = ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lGParametres.dateDebutPremierCycle, lJourFerie.dateDebut); lIndiceJour <= ObjetDate_1.GDate.getNbrJoursEntreDeuxDates(lGParametres.dateDebutPremierCycle, lJourFerie.dateFin); lIndiceJour++) {
                        lGParametres.ensembleJoursFeries.add(lIndiceJour + 1);
                    }
                }
                IE.Cycles = new ObjetCycles_1.ObjetCycles();
                IE.Cycles.init({
                    premiereDate: lGParametres.PremiereDate,
                    derniereDate: lGParametres.DerniereDate,
                    dateDebutPremierCycle: lGParametres.dateDebutPremierCycle,
                    joursOuvresParCycle: lGParametres.joursOuvresParCycle,
                    premierJourSemaine: lGParametres.premierJourSemaine,
                    joursOuvres: lGParametres.setOfJoursCycleOuvre,
                    cyclesSansFeries: lGParametres.grillesEDTEnCycle === TypeModeGrillesEDT_1.TypeModeGrillesEDT.TMG_CycleSansFeries,
                    cyclesHebdomadaire: lGParametres.grillesEDTEnCycle === TypeModeGrillesEDT_1.TypeModeGrillesEDT.TMG_CycleHebdomadaire,
                    joursFeries: lGParametres.ensembleJoursFeries
                });
                this.actualiserTitle();
            }
            initAuthentification(aParam) {
                this.parametresUtilisateurBase = aParam.parametresUtilisateurBase;
                if (aParam.parametresUtilisateur) {
                    this.parametresUtilisateur.chargerJSON(aParam.parametresUtilisateur);
                }
                this.droits.chargerJSON(aParam);
            }
            destructionInterface() {
                if (window.GInterface && GInterface.free) {
                    GInterface.free();
                }
            }
            getJeton(aFrames) {
                let lJeton;
                for (let i = 0; i < aFrames.length && (!lJeton); i++) {
                    try {
                        lJeton = aFrames[i].frames[0].GJeton;
                    } catch (e) {}
                    try {
                        if (!lJeton && aFrames[i].frames.length > 0) {
                            lJeton = this.getJeton(aFrames[i].frames);
                        }
                    } catch (e) {}
                }
                return lJeton;
            }
            avecGestionModeExclusif() {
                return this.getEtatUtilisateur().Identification;
            }
            entreeModeExclusif() {
                if (!this.avecGestionModeExclusif()) {
                    return;
                }
                super.entreeModeExclusif();
                const lEtatUtilisateur = this.getEtatUtilisateur();
                const lEstEspaceParentEleve = lEtatUtilisateur.estEspaceEleve() || lEtatUtilisateur.estEspaceParent();
                const lTitreModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.TitreEntrerModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif');
                const lMessageModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.EntrerModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.EntrerModeExclusif');
                this.getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                    titre: lTitreModeExclusif,
                    message: lMessageModeExclusif,
                    delaiFermeture: true
                });
                uGestionPresence.modeExclusif = true;
                this._modificationTimerPresence();
            }
            sortieModeExclusif() {
                if (!this.avecGestionModeExclusif()) {
                    return;
                }
                super.sortieModeExclusif();
                const lEtatUtilisateur = this.getEtatUtilisateur();
                const lEstEspaceParentEleve = lEtatUtilisateur.estEspaceEleve() || lEtatUtilisateur.estEspaceParent();
                const lTitreModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.TitreSortieModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.UsageExclusif');
                const lMessageModeExclusif = lEstEspaceParentEleve ? ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SortieModeExclusifParentEleve') : ObjetTraduction_1.GTraductions.getValeur('ModeExclusif.SortieModeExclusif');
                this.getMessage().afficher({
                    type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                    titre: lTitreModeExclusif,
                    message: lMessageModeExclusif,
                    delaiFermeture: true
                });
                uGestionPresence.modeExclusif = false;
                this._modificationTimerPresence();
            }
            finSession(aParametres) {
                this.getCommunication().desactiverPresence();
                this.destructionInterface();
                super.finSession(aParametres);
                global.GInterface = null;
            }
            construireEnTetePageFinSession(aParametres) {
                const T = [];
                const lGParametres = GParametres;
                if (window.GParametres && (lGParametres.NomEspace || lGParametres.NomEtablissementConnexion)) {
                    T.push('<header>');
                    if (lGParametres.NomEspace) {
                        T.push('<h1>', lGParametres.NomEspace, '</h1>');
                    }
                    if (lGParametres.NomEtablissementConnexion) {
                        T.push('<h2>', lGParametres.NomEtablissementConnexion, '</h2>');
                    }
                    T.push('</header>');
                }
                return T.join('');
            }
            actualiserTitle() {
                const lGParametres = GParametres;
                const lLibelleProduit = (lGParametres.nomProduit ? lGParametres.nomProduit : this.nomProduit) + (lGParametres.versionPN ? ' ' + lGParametres.versionPN : '');
                document.title = `${lGParametres.NomEspace} - ${lLibelleProduit} - ${lGParametres.NomEtablissementConnexion}`;
            }
            _modificationTimerPresence() {
                let lTimer = CommunicationProduit_1.CommunicationProduit.cDureeTimerPresence;
                if (uGestionPresence.modeExclusif) {
                    lTimer = 1000 * 30;
                } else if (uGestionPresence.compteurAffichageMessagerie > 0) {
                    lTimer = 1000 * 30;
                }
                this.getCommunication().setDureeTimerPresence(lTimer);
            }
            _surNotificationAffichageMessagerie(aEntreeSurAffichage) {
                uGestionPresence.compteurAffichageMessagerie = Math.max(uGestionPresence.compteurAffichageMessagerie + (aEntreeSurAffichage ? 1 : -1), 0);
                this._modificationTimerPresence();
            }
        }
        exports.ObjetApplicationSco = ObjetApplicationSco;
    },
    fn: 'objetapplicationsco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        const {ObjetRequeteConsultation} = require('ObjetRequeteJSON.js');
        const {Requetes} = require('CollectionRequetes.js');
        class ObjetRequetePresence extends ObjetRequeteConsultation {
            constructor() {
                super(null, () => {}
                , () => {}
                );
                this.setOptions({
                    sansBlocageInterface: true
                });
            }
            lancerRequete() {
                return this.appelAsynchrone();
            }
            actionApresRequete() {}
        }
        Requetes.inscrire('Presence', ObjetRequetePresence);
        module.exports = {
            ObjetRequetePresence
        };
    },
    fn: 'objetrequetepresence.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TinyInit = exports.ObjetTinyInit = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetHtml_1 = require("ObjetHtml");
        const ObjetPosition_1 = require("ObjetPosition");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChaine_1 = require("ObjetChaine");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        require('TinyIndex.css');
        class ObjetTinyInit {
            constructor() {
                this.optionsInitTiny = {
                    avecMessageNettoyageHtml: true,
                    optionsDOMPurify: null
                };
                this.plugins = ['autolink', 'charmap', 'directionality', 'fullscreen', 'hr', 'insertdatetime', 'link', 'lists', 'media', 'noneditable', 'nonbreaking', 'pagebreak', 'paste', 'preview', 'print', 'save', 'searchreplace', 'template', 'visualchars'];
                this.toolbar_std_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'cut', 'copy', 'paste', 'pastetext'];
                this.toolbar_std_2 = ['hr', 'removeformat', '|', 'bullist', 'numlist', '|', 'indent', 'outdent', '|', 'undo', 'redo', '|', 'forecolor', 'backcolor', '|', 'subscript', 'superscript', '|', 'charmap', '|', 'link', 'unlink'];
                this.toolbar_qcm_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'forecolor', 'backcolor', '|', 'subscript', 'superscript', '|', 'charmap', '|', 'bullist', 'numlist'];
                this.toolbar_mail_1 = ['bold', 'italic', 'underline', '|', 'alignleft', 'aligncenter', 'alignright', 'alignjustify', '|', 'fontselect', 'fontsizeselect', '|', 'forecolor', 'backcolor', '|', 'link', 'unlink', '|', 'removeformat'];
                this.fontFamily = 'Arial';
                this.fontSize = 13;
                this.fontSizeQCM = 13;
                this.genreMessage = {
                    imageInterdite: 0
                };
                this.globaleTinymce = null;
            }
            setOptionsInitTiny(aOptions) {
                Object.assign(this.optionsInitTiny, aOptions);
                return this;
            }
            async init(aParam) {
                await this._loadTiny();
                if (!aParam.id) {
                    throw new Error();
                }
                const lGlobaleTinymce = this.globaleTinymce;
                if (!lGlobaleTinymce) {
                    throw new Error();
                }
                let lJDOM = $('#' + aParam.id.escapeJQ());
                if (lJDOM.length === 0) {
                    throw new Error();
                }
                lJDOM.on('destroyed', {
                    instance: this
                }, (aEvent) => {
                    aEvent.data.instance._detruireInstanceTiny(lGlobaleTinymce, aParam.id);
                }
                );
                this._detruireInstanceTiny(lGlobaleTinymce, aParam.id);
                let lParamDef = this.getParametresInitParDefaut(aParam);
                if (aParam.toolbar === undefined) {
                    delete aParam.toolbar;
                }
                if (aParam.plugins) {
                    delete aParam.plugins;
                }
                let lParam = Object.assign(lParamDef, aParam);
                lParam.selector = '#' + lParam.id.escapeJQ();
                lParam.setup = (aEditor) => {
                    if (aParam.setup && MethodesObjet_1.MethodesObjet.isFunction(aParam.setup)) {
                        aParam.setup(aEditor);
                    }
                    if (aEditor && (!aEditor.settings || !aEditor.settings.avecImageDataUri)) {
                        aEditor.on('GetContent', this.supprimerImageEtVide.bind(this, true));
                        aEditor.on('BeforeSetContent', this.supprimerImageEtVide.bind(this, false));
                    }
                    if (this.optionsInitTiny.setupParDefaut) {
                        this.optionsInitTiny.setupParDefaut(aEditor);
                    }
                }
                ;
                if (lParam.clientLourd) {
                    lGlobaleTinymce.Env.clientLourd = true;
                }
                if (lParam.filePickerOpener && lParam.filePickerTypes) {
                    lParam.file_picker_types = lParam.filePickerTypes;
                    lParam.file_picker_callback = function(aCallback, aValue, aMeta) {
                        $('.tox-tinymce-aux').hide();
                        this.callbackFilePicker = aCallback;
                        lParam.filePickerOpener({
                            value: aValue,
                            meta: aMeta
                        });
                    }
                    ;
                    lParam.filePickerReturn = function(aUrl) {
                        const lEditor = lGlobaleTinymce.get(this.id);
                        if (aUrl && lEditor.callbackFilePicker && MethodesObjet_1.MethodesObjet.isFunction(lEditor.callbackFilePicker)) {
                            lEditor.callbackFilePicker(aUrl);
                        }
                        lEditor.callbackFilePicker = null;
                        $('.tox-tinymce-aux').show();
                    }
                    ;
                }
                await lGlobaleTinymce.init(lParam);
                if (lParam.labelWAI) {
                    $(`#${lParam.id.escapeJQ()}`).siblings('.tox-tinymce').find('iframe.tox-edit-area__iframe').attr('title', lParam.labelWAI).attr('aria-label', lParam.labelWAI);
                }
                return lGlobaleTinymce.get(lParam.id);
            }
            get(aId) {
                if (aId && this.globaleTinymce && this.globaleTinymce.get) {
                    return this.globaleTinymce.get(aId);
                }
                return null;
            }
            getParametresInitParDefaut(aParam) {
                var _a;
                const lDarkMode = (_a = ThemesCouleurs_1.ThemesCouleurs === null || ThemesCouleurs_1.ThemesCouleurs === void 0 ? void 0 : ThemesCouleurs_1.ThemesCouleurs.getDarkMode) === null || _a === void 0 ? void 0 : _a.call(ThemesCouleurs_1.ThemesCouleurs);
                let lOptions = {
                    cache_suffix: '?v=5.10.9.index1',
                    toolbar_mode: 'wrap',
                    mobile: {
                        toolbar_mode: 'sliding'
                    },
                    clientLourd: false,
                    editeurEquation: false,
                    labelWAI: ObjetTraduction_1.GTraductions.getValeur('Tiny.WAITitre'),
                    plugins: this.getPlugins(aParam),
                    branding: false,
                    elementpath: false,
                    height: 100,
                    min_height: 100,
                    max_height: 100,
                    skin_url: lDarkMode ? 'skins/ui/oxide-dark' : 'skins/ui/oxide',
                    content_css: lDarkMode ? 'dark' : null,
                    theme_url: 'themes/silver/theme.min.js',
                    menubar: false,
                    resize: false,
                    statusbar: false,
                    toolbar: this.getToolbar(aParam),
                    contextmenu: !aParam.clientLourd || aParam.toolbar === false ? '' : 'spellchecker | cut copy paste | link',
                    content_style: 'html {height:100%} body {min-height:calc(100% - 10px);} .mce-content-body {margin:5px;}' + '.mce-content-body[data-mce-placeholder]::before {' + `color: ${lDarkMode ? '#f6f6f6' : '#6b6e77'} !important;` + 'opacity: 0.9;' + 'font-style: italic;' + 'font-weight: 500;' + 'content: attr(data-mce-placeholder);' + 'position: absolute;' + `font-size:${IE.estMobile ? 14 : 13}px;` + '}',
                    force_hex_style_colors: true,
                    forced_root_block: 'div',
                    forced_root_block_attrs: {
                        'style': 'font-family:' + (aParam.fontFamily ? aParam.fontFamily : this.fontFamily) + ';font-size:' + (aParam.fontSize ? aParam.fontSize : aParam.modeQCM ? this.fontSizeQCM : this.fontSize) + 'px;'
                    },
                    font_formats: 'Andale Mono=andale mono,times;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,avant garde;' + 'Book Antiqua=book antiqua,palatino;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier;' + 'Georgia=georgia,palatino;' + 'Helvetica=helvetica;' + 'Impact=impact,chicago;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco;' + 'Times New Roman=times new roman,times;' + 'Trebuchet MS=trebuchet ms,geneva;' + 'Verdana=verdana,geneva;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats',
                    fontsize_formats: '5px 6px 7px 8px 9px 10px 11px 12px 13px 14px 16px 18px 20px 24px',
                    browser_spellcheck: !aParam.clientLourd,
                    language: this._getLanguage(aParam.langueIndex),
                    paste_data_image: false,
                    paste_as_text: false,
                    paste_enable_default_filters: true,
                    paste_filter_drop: true,
                    paste_preprocess: function(plugin, args) {
                        args.content = args.content.replace(/<\/?pre[^>]*>/gi, '');
                    },
                    paste_retain_style_properties: 'padding,margin,margin-left,font-size,font-weight,font-family,font-style,font-variant,border-width,border-style,border,border-color,color,background,background-color,text-align,align,textformat,text-decoration,mso-border-alt,mso-highlight,b,u,i,ul,ol,li',
                    spellchecker_languages: 'anglais=en_US,français=fr_FR,italien=it,espagnol=es',
                    spellchecker_rpc_url: 'index_action:DictionnaireIndex',
                    spellchecker_wordchar_pattern: /[^\s!"#$%&()*+,-.\/:;<=>?@[\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ']+/g,
                    assumeExternalTargets: true,
                    default_link_target: '_blank',
                    target_list: false,
                    anchor_bottom: '',
                    anchor_top: ''
                };
                if (aParam.placeholder) {
                    lOptions.placeholder = aParam.placeholder;
                }
                if (!aParam.clientLourd && !IE.estMobile) {
                    lOptions.help_tabs = ['shortcuts'];
                }
                if (IE.DOMPurifyDisabled) {
                    lOptions.valid_elements = '@[id|class|style|title|dir<ltr?rtl|lang|xml::lang],' + 'a[rel|rev|charset|hreflang|tabindex|accesskey|type|' + 'name|href|target|title|class],strong/b,em/i,strike,u,' + '#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|' + 'src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,' + '-blockquote,-table[border=0|cellspacing|cellpadding|width|frame|rules|' + 'height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|' + 'height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,' + '#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor' + '|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,#div,' + '-span,-code,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face' + '|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],' + 'object[classid|width|height|codebase|*],param[name|value|_value],embed[type|width' + '|height|src|*],map[name],area[shape|coords|href|alt|target],bdo,' + 'button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|' + 'valign|width],dfn,fieldset,kbd,label[for],legend,noscript,q[cite],samp,small,tt,var,big';
                }
                return lOptions;
            }
            async onLoadEnd(aIdTiny) {
                let lId;
                let lTiny = null;
                if (typeof aIdTiny === 'string') {
                    lTiny = this.get(aIdTiny);
                    lId = aIdTiny;
                } else if (aIdTiny && aIdTiny.id) {
                    lId = aIdTiny.id;
                    lTiny = aIdTiny;
                }
                const lParams = {
                    avecConteneurTiny: false,
                    timeout: null,
                    nb: 0
                };
                const _onLoadTiny = async () => {
                    lParams.timeout = null;
                    if (!lParams.avecConteneurTiny) {
                        const lJConteneurTiny = $(`#${lId.escapeJQ()}`);
                        if (lJConteneurTiny.length > 1) {
                            return {
                                ok: false
                            };
                        }
                        if (lJConteneurTiny.length === 1) {
                            lParams.avecConteneurTiny = true;
                            lJConteneurTiny.on('destroyed.onload', () => {
                                if (lParams.timeout) {
                                    clearTimeout(lParams.timeout);
                                }
                            }
                            );
                        }
                    }
                    if (!lTiny) {
                        lTiny = this.get(lId);
                    }
                    if (lTiny && lTiny.initialized) {
                        return {
                            ok: true,
                            tiny: lTiny
                        };
                    }
                    if (lParams.nb > 1000) {
                        throw new Error();
                    }
                    await new Promise( (aResolve) => {
                        lParams.timeout = setTimeout( () => {
                            lParams.nb += 1;
                            aResolve();
                        }
                        , 10);
                    }
                    );
                    return await _onLoadTiny();
                }
                ;
                return await _onLoadTiny();
            }
            async setReadonly(aIdTiny, aReadonly) {
                const lResult = await this.onLoadEnd(aIdTiny);
                if (lResult.tiny) {
                    lResult.tiny.mode.set(aReadonly ? 'readonly' : 'design');
                }
            }
            getPlugins(aParam) {
                return this.plugins.concat(aParam && aParam.plugins && aParam.plugins.length ? aParam.plugins : [], aParam && aParam.editeurEquation === true ? ['iEMathquill'] : [], aParam && !!aParam.filePickerOpener && aParam.filePickerTypes.indexOf('image') > -1 ? ['image'] : [], aParam && aParam.clientLourd === true ? ['spellchecker'] : [], aParam && aParam.clientLourd !== true && !IE.estMobile ? ['help'] : []).join(' ');
            }
            getToolbar(aParam) {
                let lToolBar = [];
                if (aParam.toolbar === false) {
                    return false;
                }
                if (aParam.buttons && aParam.buttons.length) {
                    lToolBar = aParam.buttons.concat(lToolBar);
                }
                if (aParam.modeQCM) {
                    lToolBar = lToolBar.concat(this.toolbar_qcm_1);
                } else if (aParam.modeMail) {
                    lToolBar = lToolBar.concat(this.toolbar_mail_1);
                } else {
                    lToolBar = lToolBar.concat(this.toolbar_std_1);
                    lToolBar = lToolBar.concat('|', this.toolbar_std_2);
                }
                if (aParam.editeurEquation === true) {
                    lToolBar.push('|ieMathquill');
                }
                if (!!aParam.filePickerOpener && aParam.filePickerTypes) {
                    if (aParam.filePickerTypes.indexOf('image') > -1) {
                        lToolBar.push('|image');
                    }
                }
                if (aParam.clientLourd === true) {
                    lToolBar.push('|spellchecker');
                } else if (!IE.estMobile) {
                    lToolBar.push('|help');
                }
                return lToolBar.join(' ');
            }
            setHeight(aEditorID, aHeight, aNbrToolbars) {
                ObjetPosition_1.GPosition.setHeight(aEditorID + '_ifr', aHeight - (aNbrToolbars * 28));
                ObjetPosition_1.GPosition.setHeight(aEditorID + '_tbl', aHeight);
            }
            estContenuVide(aHtml) {
                function _estNoeudBR(aNode) {
                    return ObjetHtml_1.GHtml.estElement(aNode) && ObjetHtml_1.GHtml.estNoeudDeType(aNode, 'br') && (!aNode.childNodes || (aNode.childNodes.length === 0));
                }
                function _estNoeudTexteVide(aNode) {
                    return ObjetHtml_1.GHtml.estTextNode(aNode) && aNode.nodeValue && aNode.nodeValue.trim && (aNode.nodeValue.trim() === '');
                }
                if (!aHtml) {
                    return true;
                }
                let lDOM = ObjetHtml_1.GHtml.htmlToDOM(aHtml);
                let lChaines = [];
                if (!MethodesObjet_1.MethodesObjet.isArray(lDOM)) {
                    lChaines = ObjetHtml_1.GHtml.getTextesDeNode(lDOM);
                } else {
                    for (let i = 0; i < lDOM.length; i++) {
                        lChaines = lChaines.concat(ObjetHtml_1.GHtml.getTextesDeNode(lDOM[i]));
                    }
                }
                if (lChaines.join('').trim() !== '') {
                    return false;
                }
                if (_estNoeudBR(lDOM)) {
                    return true;
                }
                if (_estNoeudTexteVide(lDOM)) {
                    return true;
                }
                if (lDOM && ObjetHtml_1.GHtml.estElement(lDOM) && ObjetHtml_1.GHtml.estNoeudDeType(lDOM, 'div') && lDOM.childNodes && (lDOM.childNodes.length === 1)) {
                    let lFils = lDOM.childNodes[0];
                    if (_estNoeudBR(lFils)) {
                        return true;
                    }
                    if (_estNoeudTexteVide(lFils)) {
                        return true;
                    }
                }
                return false;
            }
            supprimerImageEtVide(aSurGetContent, ed) {
                const lContent = $('<div>' + ed.content + '</div>');
                const lAvecNettoyage = ObjetHtml_1.GHtml.nettoyerEditeurRiche(lContent, ed.target.settings.editeurEquationMaxFileSize);
                if (!aSurGetContent && lAvecNettoyage && this.optionsInitTiny.avecMessageNettoyageHtml) {
                    this.optionsInitTiny.afficherMessage(this.genreMessage.imageInterdite);
                }
                ed.content = lContent.html();
                if (!ed.selection) {
                    if (lContent.text().trim() === '' && lContent.find('img').length === 0) {
                        ed.content = '';
                    }
                }
                const lUnSafeHtml = ed.content;
                if (lUnSafeHtml) {
                    if (!aSurGetContent && lContent.find('#mce_marker[data-mce-type="bookmark"]').length > 0) {
                        return;
                    }
                    const lSafeHtml = ObjetChaine_1.GChaine.htmlDOMPurify(lUnSafeHtml, this.optionsInitTiny.optionsDOMPurify);
                    if (lUnSafeHtml !== lSafeHtml) {
                        ed.content = lSafeHtml;
                    }
                }
            }
            async _loadTiny() {
                if (this.globaleTinymce || global.tinymce) {
                    this._setupTinymce();
                    return;
                }
                await DeferLoadingScript_1.deferLoadingScript.loadAsync(['tiny']);
                if (!global.tinymce) {
                    throw new Error();
                }
                this._setupTinymce();
            }
            _setupTinymce() {
                if (!this.globaleTinymce) {
                    this.globaleTinymce = global.tinymce;
                    if (this.globaleTinymce) {
                        this.globaleTinymce.suffix = '.min';
                    }
                }
            }
            _detruireInstanceTiny(aTinymce, aID) {
                const lInstanceTiny = aTinymce.get(aID);
                if (lInstanceTiny) {
                    if (!lInstanceTiny.initialized) {
                        IE.log.addLog('tiny id ' + aID + ' doit etre detruit, mais n\'est pas initialized');
                    }
                    try {
                        lInstanceTiny._enCoursDestruction = true;
                        $('#' + aID.escapeJQ()).focus();
                        try {
                            aTinymce.get(aID).destroy();
                        } catch (e) {}
                        $('#' + aID.escapeJQ()).focus();
                    } finally {
                        delete lInstanceTiny._enCoursDestruction;
                    }
                }
            }
            _getLanguage(aLangueIndex) {
                var _a, _b, _c;
                const lLangue = aLangueIndex || ((_c = (_b = (_a = global.GApplication) === null || _a === void 0 ? void 0 : _a.getObjetParametres) === null || _b === void 0 ? void 0 : _b.call(_a)) === null || _c === void 0 ? void 0 : _c.langue) || 'fr';
                switch (lLangue) {
                case 'en':
                case 'it':
                case 'nl':
                case 'es':
                    return lLangue;
                }
                return 'fr_FR';
            }
        }
        exports.ObjetTinyInit = ObjetTinyInit;
        exports.TinyInit = new ObjetTinyInit();
    },
    fn: 'tinyinit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const TinyInit_1 = require("TinyInit");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Invocateur_1 = require("Invocateur");
        const ToucheClavier_1 = require("ToucheClavier");
        TinyInit_1.TinyInit.setOptionsInitTiny({
            setupParDefaut(editor) {
                editor.on('keydown', (aEvent) => {
                    if (aEvent.which === ToucheClavier_1.ToucheClavier._0 && aEvent.altKey && !aEvent.shiftKey && !aEvent.ctrlKey) {
                        aEvent.stopPropagation();
                        return;
                    }
                    Invocateur_1.Invocateur.evenement('controleTouche', $.Event(aEvent));
                }
                );
                editor.on('MouseDown', () => {
                    $(document).trigger('mousedown');
                }
                );
            },
            afficherMessage() {
                GApplication.getMessage().afficher({
                    message: ObjetTraduction_1.GTraductions.getValeur('CahierDeTexte.MessageSuppressionImage')
                });
            }
        });
    },
    fn: 'tinyinitespaces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationTinyComplet.js");
        require("TinyInitEspaces.js");
    },
    fn: 'declarationtinyinitespacesdefer.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreConnexion = void 0;
        var EGenreConnexion;
        (function(EGenreConnexion) {
            EGenreConnexion[EGenreConnexion["Normale"] = 0] = "Normale";
            EGenreConnexion[EGenreConnexion["Allegee"] = 1] = "Allegee";
        }
        )(EGenreConnexion || (exports.EGenreConnexion = EGenreConnexion = {}));
    },
    fn: 'enumere_connexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreErreurAcces = void 0;
        var EGenreErreurAcces;
        (function(EGenreErreurAcces) {
            EGenreErreurAcces[EGenreErreurAcces["Aucune"] = 0] = "Aucune";
            EGenreErreurAcces[EGenreErreurAcces["Identification"] = 1] = "Identification";
            EGenreErreurAcces[EGenreErreurAcces["Autorisation"] = 2] = "Autorisation";
            EGenreErreurAcces[EGenreErreurAcces["ConnexionClasse"] = 3] = "ConnexionClasse";
            EGenreErreurAcces[EGenreErreurAcces["AucuneRessource"] = 4] = "AucuneRessource";
            EGenreErreurAcces[EGenreErreurAcces["Connexion"] = 5] = "Connexion";
            EGenreErreurAcces[EGenreErreurAcces["BloqueeEleve"] = 6] = "BloqueeEleve";
            EGenreErreurAcces[EGenreErreurAcces["FonctionAccompagnant"] = 7] = "FonctionAccompagnant";
            EGenreErreurAcces[EGenreErreurAcces["AccompagnantAucunEleve"] = 8] = "AccompagnantAucunEleve";
            EGenreErreurAcces[EGenreErreurAcces["Message"] = 9] = "Message";
            EGenreErreurAcces[EGenreErreurAcces["CompteDesactive"] = 10] = "CompteDesactive";
        }
        )(EGenreErreurAcces || (exports.EGenreErreurAcces = EGenreErreurAcces = {}));
    },
    fn: 'enumere_erreuracces.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreSourceConnexionUtil = exports.TypeModeGestionDoubleAuthentificationUtil = exports.C_LibelleAppareilMaxLength = exports.C_PinFixeLength = exports.C_MinPinLength = exports.C_MaxPinRetry = exports.TypeGenreSourceConnexion = exports.TypeModeGestionDoubleAuthentification = exports.TypeActionIHMSecurisationCompte = exports.TypeCommandeSecurisationCompteHttp = void 0;
        var TypeCommandeSecurisationCompteHttp;
        (function(TypeCommandeSecurisationCompteHttp) {
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierPIN"] = 0] = "csch_VerifierPIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierMotDePassePersonnalise"] = 1] = "csch_VerifierMotDePassePersonnalise";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_LibellesSourceConnexionDejaConnus"] = 2] = "csch_LibellesSourceConnexionDejaConnus";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_EnregistrerChoixUtilisateur"] = 3] = "csch_EnregistrerChoixUtilisateur";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterModeDoubleAuthentification"] = 4] = "csch_AffecterModeDoubleAuthentification";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterCodePIN"] = 5] = "csch_AffecterCodePIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_RenommerSourceConnexionConnue"] = 6] = "csch_RenommerSourceConnexionConnue";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_SupprimerSourceConnexionConnue"] = 7] = "csch_SupprimerSourceConnexionConnue";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_AffecterMotDePassePersonnalise"] = 8] = "csch_AffecterMotDePassePersonnalise";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_ModifierLogin"] = 9] = "csch_ModifierLogin";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_DemandeReinitialisationPIN"] = 10] = "csch_DemandeReinitialisationPIN";
            TypeCommandeSecurisationCompteHttp[TypeCommandeSecurisationCompteHttp["csch_VerifierCodeReinitialisationPIN"] = 11] = "csch_VerifierCodeReinitialisationPIN";
        }
        )(TypeCommandeSecurisationCompteHttp || (exports.TypeCommandeSecurisationCompteHttp = TypeCommandeSecurisationCompteHttp = {}));
        var TypeActionIHMSecurisationCompte;
        (function(TypeActionIHMSecurisationCompte) {
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_PersonnalisationMotDePasse"] = 0] = "AIHMSC_PersonnalisationMotDePasse";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ChoixStrategie"] = 1] = "AIHMSC_ChoixStrategie";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ChoixCodePINetSource"] = 2] = "AIHMSC_ChoixCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_SaisieCodePINetSource"] = 3] = "AIHMSC_SaisieCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_ReinitCodePINetSource"] = 4] = "AIHMSC_ReinitCodePINetSource";
            TypeActionIHMSecurisationCompte[TypeActionIHMSecurisationCompte["AIHMSC_SaisieSourcePourNotifSeulement"] = 5] = "AIHMSC_SaisieSourcePourNotifSeulement";
        }
        )(TypeActionIHMSecurisationCompte || (exports.TypeActionIHMSecurisationCompte = TypeActionIHMSecurisationCompte = {}));
        var TypeModeGestionDoubleAuthentification;
        (function(TypeModeGestionDoubleAuthentification) {
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_PasEncoreChoisi"] = 0] = "MGDA_PasEncoreChoisi";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_Inactive"] = 1] = "MGDA_Inactive";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_NotificationSeulement"] = 2] = "MGDA_NotificationSeulement";
            TypeModeGestionDoubleAuthentification[TypeModeGestionDoubleAuthentification["MGDA_SaisieCodePIN"] = 3] = "MGDA_SaisieCodePIN";
        }
        )(TypeModeGestionDoubleAuthentification || (exports.TypeModeGestionDoubleAuthentification = TypeModeGestionDoubleAuthentification = {}));
        var TypeGenreSourceConnexion;
        (function(TypeGenreSourceConnexion) {
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_ClientLourd"] = 0] = "GSC_ClientLourd";
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_ApplicationMobile"] = 1] = "GSC_ApplicationMobile";
            TypeGenreSourceConnexion[TypeGenreSourceConnexion["GSC_Navigateur"] = 2] = "GSC_Navigateur";
        }
        )(TypeGenreSourceConnexion || (exports.TypeGenreSourceConnexion = TypeGenreSourceConnexion = {}));
        exports.C_MaxPinRetry = 3;
        exports.C_MinPinLength = 4;
        exports.C_PinFixeLength = 4;
        exports.C_LibelleAppareilMaxLength = 30;
        exports.TypeModeGestionDoubleAuthentificationUtil = {
            getOrdreModeDoubleAuth(aModeParDefaut) {
                let lTabOrdre = [TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement, TypeModeGestionDoubleAuthentification.MGDA_Inactive];
                if (aModeParDefaut === TypeModeGestionDoubleAuthentification.MGDA_Inactive) {
                    lTabOrdre = lTabOrdre.reverse();
                }
                return lTabOrdre;
            }
        };
        exports.TypeGenreSourceConnexionUtil = {
            getIcone(aGenreSourceConnexion) {
                let lNomIcone = '';
                switch (aGenreSourceConnexion) {
                case TypeGenreSourceConnexion.GSC_ClientLourd:
                    lNomIcone = 'icon_laptop';
                    break;
                case TypeGenreSourceConnexion.GSC_ApplicationMobile:
                    lNomIcone = 'icon_mobile_phone';
                    break;
                case TypeGenreSourceConnexion.GSC_Navigateur:
                    lNomIcone = 'icon_globe';
                    break;
                default:
                    ;
                }
                return lNomIcone;
            }
        };
    },
    fn: 'typesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteSecurisationComptePreference = exports.ObjetRequeteSecurisationCompteDoubleAuth = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        class ObjetRequeteSecurisationCompteDoubleAuth extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aParams) {
                this.JSON.action = aParams.action;
                const lComm = this.communication;
                switch (this.JSON.action) {
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierMotDePassePersonnalise:
                    this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN:
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierCodeReinitialisationPIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_LibellesSourceConnexionDejaConnus:
                    this.JSON.libelle = aParams.libelle;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_EnregistrerChoixUtilisateur:
                    this.JSON.mode = aParams.mode;
                    if (aParams.nouveauMDP) {
                        this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    }
                    if (aParams.codePin) {
                        this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    }
                    if (aParams.reinitPIN_OK) {
                        this.JSON.reinitPIN_OK = true;
                        this.JSON.codePINVerifReinit = lComm.getChaineChiffreeAES(aParams.codePINVerifReinit);
                    }
                    this.JSON.avecIdentification = aParams.avecIdentification;
                    this.JSON.strIdentification = aParams.strIdentification;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_DemandeReinitialisationPIN:
                    break;
                default:
                    ;
                }
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if (GApplication.estAppliMobile && this.JSONReponse.jetonConnexionAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: this.JSONReponse.jetonConnexionAppliMobile
                    });
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteSecurisationCompteDoubleAuth = ObjetRequeteSecurisationCompteDoubleAuth;
        CollectionRequetes_1.Requetes.inscrire('SecurisationCompteDoubleAuth', ObjetRequeteSecurisationCompteDoubleAuth);
        class ObjetRequeteSecurisationComptePreference extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            lancerRequete(aParams) {
                this.JSON.action = aParams.action;
                const lComm = this.communication;
                switch (this.JSON.action) {
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterMotDePassePersonnalise:
                    this.JSON.ancienMDP = lComm.getChaineChiffreeAES(aParams.ancienMDP);
                    this.JSON.nouveauMDP = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_ModifierLogin:
                    this.JSON.ancienMDP = lComm.getChaineChiffreeAES(aParams.ancienMDP);
                    this.JSON.identifiant = lComm.getChaineChiffreeAES(aParams.nouveauMDP);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterModeDoubleAuthentification:
                    this.JSON.mode = aParams.mode;
                    if (aParams.ancienCodePin) {
                        this.JSON.ancienCodePin = lComm.getChaineChiffreeAES(aParams.ancienCodePin);
                    }
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_AffecterCodePIN:
                    this.JSON.codePin = lComm.getChaineChiffreeAES(aParams.codePin);
                    if (aParams.ancienCodePin) {
                        this.JSON.ancienCodePin = lComm.getChaineChiffreeAES(aParams.ancienCodePin);
                    }
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_SupprimerSourceConnexionConnue:
                    this.JSON.identifiantSysteme = aParams.identifiantSysteme;
                    this.JSON.genreSource = aParams.genreSource;
                    break;
                case TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_RenommerSourceConnexionConnue:
                    this.JSON.identifiantSysteme = aParams.identifiantSysteme;
                    this.JSON.genreSource = aParams.genreSource;
                    this.JSON.libelleSaisi = aParams.libelleSaisi;
                    break;
                default:
                    ;
                }
                return this.appelAsynchrone();
            }
            actionApresRequete() {
                if (GApplication.estAppliMobile && this.JSONReponse.jetonConnexionAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: this.JSONReponse.jetonConnexionAppliMobile
                    });
                }
                this.callbackReussite.appel(this.JSONReponse);
            }
        }
        exports.ObjetRequeteSecurisationComptePreference = ObjetRequeteSecurisationComptePreference;
        CollectionRequetes_1.Requetes.inscrire('SecurisationComptePreference', ObjetRequeteSecurisationComptePreference);
    },
    fn: 'objetrequetesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeOptionGenerationMotDePasse = void 0;
        var TypeOptionGenerationMotDePasse;
        (function(TypeOptionGenerationMotDePasse) {
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUneLettre"] = 0] = "OGMDP_AvecAuMoinsUneLettre";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUnChiffre"] = 1] = "OGMDP_AvecAuMoinsUnChiffre";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecAuMoinsUnCaractereSpecial"] = 2] = "OGMDP_AvecAuMoinsUnCaractereSpecial";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecMelangeMinusculeMajuscule"] = 3] = "OGMDP_AvecMelangeMinusculeMajuscule";
            TypeOptionGenerationMotDePasse[TypeOptionGenerationMotDePasse["OGMDP_AvecControleIdentifiantDifferent"] = 4] = "OGMDP_AvecControleIdentifiantDifferent";
        }
        )(TypeOptionGenerationMotDePasse || (exports.TypeOptionGenerationMotDePasse = TypeOptionGenerationMotDePasse = {}));
    },
    fn: 'typeoptiongenerationmotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ValidationMotDePasse = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const TypeOptionGenerationMotDePasse_1 = require("TypeOptionGenerationMotDePasse");
        exports.ValidationMotDePasse = {
            leMotDePasseRespecteReglesSecurite(aMDP, aReglesSaisieMotDePasse) {
                if (!aMDP || !aReglesSaisieMotDePasse || !aReglesSaisieMotDePasse.regles || !aReglesSaisieMotDePasse.regles.contains || !MethodesObjet_1.MethodesObjet.isString(aMDP)) {
                    return false;
                }
                if (aMDP.length < aReglesSaisieMotDePasse.min || (aReglesSaisieMotDePasse.max > 0 && aMDP.length > aReglesSaisieMotDePasse.max)) {
                    return false;
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre)) {
                    if (!aMDP.match(/[a-z]/gi)) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre)) {
                    if (!aMDP.match(/[0-9]/g)) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule)) {
                    if (!(aMDP.match(/[a-z]/g) && aMDP.match(/[A-Z]/g))) {
                        return false;
                    }
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial)) {
                    if (aMDP.replace(/[a-z0-9]/gi, '').length === 0) {
                        return false;
                    }
                }
                return true;
            },
            construire(aReglesSaisieMotDePasse, aErreursMDP, aOptions) {
                const H = [];
                let lErreursMDP;
                const lOptions = {
                    avecEspace: true,
                    avecMdpDifferent: false,
                    avecMDPDifferentLogin: true
                };
                $.extend(lOptions, aOptions);
                if (aErreursMDP) {
                    lErreursMDP = {
                        erreurTailleMDP: false,
                        reglesNonRespectes: new TypeEnsembleNombre_1.TypeEnsembleNombre()
                    };
                    $.extend(lErreursMDP, aErreursMDP);
                }
                H.push('<ul>');
                H.push('<li class="', lOptions.avecEspace ? 'm-bottom' : '', ' Gras">', ObjetTraduction_1.GTraductions.getValeur('validationMDP.titre') + ' :', '</li>');
                H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.erreurTailleMDP : undefined, MethodesObjet_1.MethodesObjet.isNumber(aReglesSaisieMotDePasse.max) ? ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('validationMDP.longueurMDPMinMax'), [aReglesSaisieMotDePasse.min, aReglesSaisieMotDePasse.max]) : ObjetChaine_1.GChaine.format(ObjetTraduction_1.GTraductions.getValeur('validationMDP.longueurMDPMin'), [aReglesSaisieMotDePasse.min]), lOptions));
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnChiffre) : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.chiffre'), lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUneLettre) : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.lettre'), lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecAuMoinsUnCaractereSpecial) : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.special'), lOptions));
                }
                if (aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecMelangeMinusculeMajuscule) : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.MajMin'), lOptions));
                }
                if (lOptions.avecMDPDifferentLogin || aReglesSaisieMotDePasse.regles.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecControleIdentifiantDifferent)) {
                    H.push(_construireLigneValidateur(lErreursMDP ? lErreursMDP.reglesNonRespectes.contains(TypeOptionGenerationMotDePasse_1.TypeOptionGenerationMotDePasse.OGMDP_AvecControleIdentifiantDifferent) : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.login'), lOptions));
                }
                if (lOptions.avecMdpDifferent) {
                    H.push(_construireLigneValidateur(lErreursMDP ? !!lErreursMDP.MDPIdentique : undefined, ObjetTraduction_1.GTraductions.getValeur('validationMDP.mdpDifferent'), lOptions));
                }
                H.push('</ul>');
                return H.join('');
            }
        };
        function _construireLigneValidateur(aEchec, aTraduction, aOptions) {
            return (IE.jsx.str("li", {
                class: ['flex-contain flex-center flex-gap p-bottom', aEchec === undefined ? ' p-left-xl' : '']
            }, aEchec !== undefined ? IE.jsx.str("i", {
                role: "img",
                class: ['m-top-s ', (!aEchec ? 'icon_ok ico-green' : 'icon_remove ico-red')],
                "aria-label": aEchec ? ObjetTraduction_1.GTraductions.getValeur('validationMDP.RegleInvalide') : ObjetTraduction_1.GTraductions.getValeur('validationMDP.RegleValide')
            }) : '', IE.jsx.str("p", null, aTraduction)));
        }
    },
    fn: 'validationmotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EtatMoteurConnexion = exports.ObjetMoteurConnexion = void 0;
        const LocalStorage_1 = require("LocalStorage");
        const ObjetElement_1 = require("ObjetElement");
        const MethodesObjet_1 = require("MethodesObjet");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const Enumere_Cryptage_1 = require("Enumere_Cryptage");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_ErreurAcces_1 = require("Enumere_ErreurAcces");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        var EtatMoteurConnexion;
        (function(EtatMoteurConnexion) {
            EtatMoteurConnexion[EtatMoteurConnexion["aucun"] = 0] = "aucun";
            EtatMoteurConnexion[EtatMoteurConnexion["malInitialise"] = 1] = "malInitialise";
            EtatMoteurConnexion[EtatMoteurConnexion["autoInitialise"] = 8] = "autoInitialise";
            EtatMoteurConnexion[EtatMoteurConnexion["enIdentification"] = 2] = "enIdentification";
            EtatMoteurConnexion[EtatMoteurConnexion["identifie"] = 3] = "identifie";
            EtatMoteurConnexion[EtatMoteurConnexion["nonIdentifie"] = 4] = "nonIdentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["enAuthentification"] = 5] = "enAuthentification";
            EtatMoteurConnexion[EtatMoteurConnexion["authentifie"] = 6] = "authentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["nonAuthentifie"] = 7] = "nonAuthentifie";
            EtatMoteurConnexion[EtatMoteurConnexion["erreur"] = 9] = "erreur";
        }
        )(EtatMoteurConnexion || (exports.EtatMoteurConnexion = EtatMoteurConnexion = {}));
        class ObjetMoteurConnexion {
            constructor() {
                this.avecControleReglesMDP = false;
                this.application = GApplication;
                this.const = {
                    Cookie_Identification: GApplication.nomProduit + '_Identification',
                    Cookie_Authentification: GApplication.nomProduit + '_Authentification',
                    Cookie_Espace: GApplication.nomProduit + '_Espace',
                    Cookie_estCAS: GApplication.nomProduit + '_EstCas'
                };
                this.reset(true);
            }
            reset(aFull=false) {
                this.stockageMDPActif = LocalStorage_1.IELocalStorage.actif && !GApplication.getDemo();
                this.avecStockageMDP = false;
                this.estAppliMobile = GApplication.estAppliMobile;
                this.modeValidationAppliMobile = MethodesObjet_1.MethodesObjet.isFunction(GParametres.getCookieValidationAppli) && GParametres.getCookieValidationAppli() && document.cookie.indexOf(GParametres.getCookieValidationAppli() + '=') > -1;
                this.modeValidationAppliMobileJeton = false;
                this.nomRessource = '';
                this.ressourceInternet = new ObjetElement_1.ObjetElement();
                this.genreConnexion = 0;
                this.login = new ObjetElement_1.ObjetElement();
                this.motDePasse = new ObjetElement_1.ObjetElement();
                this.alea = '';
                this.pourENT = false;
                this.demandeConnexionAuto = false;
                this.enConnexionAuto = false;
                this.demandeConnexionAppliMobile = false;
                this.demandeConnexionAppliMobileJeton = false;
                this.enConnexionAppliMobile = false;
                this.uuidAppliMobile = '';
                this.loginTokenSAV = '';
                this.tokenSAV = '';
                this.erreurCode = Enumere_ErreurAcces_1.EGenreErreurAcces.Aucune;
                this.erreur = {
                    erreurTitre: null,
                    erreurMessage: null
                };
                if (aFull) {
                    this.stockageMDPActive = false;
                    this.genreEspace = null;
                    this.callback = null;
                    this.requetes = {
                        parametres: null,
                        listeRessources: null,
                        identification: null,
                        authentification: null
                    };
                }
                this.etat = EtatMoteurConnexion.aucun;
            }
            init(aParam) {
                this.callback = aParam.callback;
                this.requetes.listeRessources = aParam.requetes.listeRessources || null;
                this.requetes.identification = aParam.requetes.identification || null;
                this.requetes.authentification = aParam.requetes.authentification || null;
                this.stockageMDPActive = aParam.stockageMDPActive || false;
                this.etat = EtatMoteurConnexion.aucun;
                this.genreEspace = GEtatUtilisateur.getNumeroGenreEspace();
                if (this.stockageMDPActif && this.stockageMDPActive) {
                    this.login = new ObjetElement_1.ObjetElement(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Identification));
                    this.motDePasse = new ObjetElement_1.ObjetElement(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Authentification));
                    this.avecStockageMDP = !!this.getLogin() && !!this.getMotDePasse() && (parseInt(LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Espace)) === this.genreEspace);
                    if (!this.avecStockageMDP) {
                        this.setStockageMdp(false);
                    } else {
                        this.etat = EtatMoteurConnexion.autoInitialise;
                        this.callback();
                    }
                }
                if (window && window.opener) {
                    window.addEventListener('message', this.messageTokenSAV.bind(this), false);
                    window.opener.postMessage(JSON.stringify({
                        loaded: true
                    }), '*');
                }
            }
            setSecurisationCompte(aSecurisationCompte) {
                this.securisationCompte = aSecurisationCompte;
            }
            setLogin(aLogin) {
                if (this.login) {
                    this.login.setLibelle(aLogin);
                }
            }
            getLogin(aPourVisu=false) {
                const lLoginBrut = this.login.getLibelle();
                let lLogin = lLoginBrut;
                if (lLogin && !this.pourENT && this.login.getGenre() && (parseInt(this.login.getGenre().toString()) > 0)) {
                    lLogin = lLogin.toLowerCase().trim();
                }
                return aPourVisu ? lLoginBrut : lLogin;
            }
            setMotDePasse(aMdp) {
                if (this.motDePasse) {
                    this.motDePasse.setLibelle(aMdp);
                }
            }
            getMotDePasseBrut() {
                var _a;
                return ((_a = this.motDePasse.getLibelle()) === null || _a === void 0 ? void 0 : _a.trim()) || '';
            }
            getMotDePasse(aPourVisu=false) {
                let lMotDePasse = this.getMotDePasseBrut();
                if (lMotDePasse && !this.pourENT && this.motDePasse.getGenre() && (parseInt(this.motDePasse.getGenre().toString()) > 0)) {
                    lMotDePasse = lMotDePasse.toLowerCase();
                }
                return aPourVisu && this.avecStockageMDP && !!lMotDePasse ? '********' : aPourVisu && !!lMotDePasse ? lMotDePasse : !!lMotDePasse ? forge.md.sha256.create().update(this.alea).update(forge.util.encodeUtf8(lMotDePasse)).digest().toHex().toUpperCase() : '';
            }
            setGenreConnexion(aGenre) {
                if (GEtatUtilisateur.setGenreConnexion) {
                    GEtatUtilisateur.setGenreConnexion(aGenre);
                }
                this.genreConnexion = aGenre;
            }
            getGenreConnexion() {
                return this.genreConnexion;
            }
            aMotDePasseStocke() {
                return !!LocalStorage_1.IELocalStorage.getItem(this.const.Cookie_Authentification);
            }
            getCle() {
                return (this.tokenSAV ? this.tokenSAV : (this.pourENT ? '' : this.getLogin()) + this.getMotDePasse());
            }
            setStockageMdp(aActif) {
                if (this.stockageMDPActif && this.stockageMDPActive && this.avecStockageMDP === true && aActif === false) {
                    this.avecStockageMDP = false;
                    this.reset();
                    this.viderStockageMDP();
                } else if (this.stockageMDPActif && this.stockageMDPActive) {
                    this.avecStockageMDP = aActif;
                }
            }
            setTokenSAV(aToken) {
                let lMsg = forge.random.generate(Math.max(2, Math.floor(Math.random() * 100) % 10));
                let lTotal = 0;
                for (let i = 0; i < lMsg.length; i++) {
                    lTotal += lMsg.charCodeAt(i);
                }
                if (lTotal % 255 !== 0) {
                    lMsg += String.fromCharCode(255 - (lTotal % 255));
                }
                this.tokenSAV = aToken;
                this.stockageMDPActive = false;
                this.demandeConnexionAuto = false;
                this.enConnexionAuto = false;
                this.demandeConnexionAppliMobile = false;
                this.demandeConnexionAppliMobileJeton = false;
                this.enConnexionAppliMobile = false;
                this.modeValidationAppliMobile = false;
                this.loginTokenSAV = ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lMsg,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.tokenSAV),
                    iv: this.getObjetCommunication().getIvAES()
                });
            }
            viderStockageMDP() {
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Identification);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Authentification);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_Espace);
                LocalStorage_1.IELocalStorage.removeItem(this.const.Cookie_estCAS);
            }
            getObjetCommunication() {
                return this.application.getCommunication();
            }
            getNouveauChallenge(aChallenge) {
                const lChallenge = ObjetCryptage_1.GCryptage.decrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: aChallenge,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                    iv: this.getObjetCommunication().getIvAES(),
                    avecAlea: true
                });
                return ObjetCryptage_1.GCryptage.encrypter({
                    genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                    chaine: lChallenge,
                    cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                    iv: this.getObjetCommunication().getIvAES()
                });
            }
            validationLoginMdp() {
                this.demandeConnexionAuto = !this.modeValidationAppliMobile && !this.estAppliMobile && !this.aMotDePasseStocke() && this.avecStockageMDP;
                this.enConnexionAuto = !this.modeValidationAppliMobile && !this.estAppliMobile && this.aMotDePasseStocke() && this.avecStockageMDP;
                this.demandeConnexionAppliMobile = this.modeValidationAppliMobile;
                this.demandeConnexionAppliMobileJeton = this.modeValidationAppliMobile && this.modeValidationAppliMobileJeton;
                this.enConnexionAppliMobile = this.application.estAppliMobile;
                return !!(MethodesObjet_1.MethodesObjet.isFunction(this.callback) && ((!!this.getLogin() && !!this.getMotDePasse() && (!this.estAppliMobile || !!this.uuidAppliMobile)) || (this.tokenSAV && this.loginTokenSAV)));
            }
            async identification(aIdentificationManuelle=false) {
                this.avecControleReglesMDP = false;
                if (this.validationLoginMdp()) {
                    if (this.etat === EtatMoteurConnexion.authentifie) {
                        return;
                    }
                    this.avecControleReglesMDP = aIdentificationManuelle;
                    this.etat = EtatMoteurConnexion.enIdentification;
                    const lReponse = await (0,
                    CollectionRequetes_1.Requetes)(this.requetes.identification, this).lancerRequete({
                        genreConnexion: this.genreConnexion,
                        genreEspace: this.genreEspace,
                        identifiant: this.getLogin(),
                        pourENT: this.pourENT,
                        enConnexionAuto: this.enConnexionAuto,
                        demandeConnexionAuto: this.demandeConnexionAuto,
                        enConnexionAppliMobile: this.enConnexionAppliMobile,
                        demandeConnexionAppliMobile: this.demandeConnexionAppliMobile,
                        demandeConnexionAppliMobileJeton: this.demandeConnexionAppliMobileJeton,
                        uuidAppliMobile: this.uuidAppliMobile,
                        loginTokenSAV: this.loginTokenSAV
                    });
                    this.apresIdentification(lReponse);
                } else {
                    this.etat = EtatMoteurConnexion.malInitialise;
                    this.callback();
                }
            }
            apresIdentification(aParam) {
                this.etat = EtatMoteurConnexion.identifie;
                if (this.demandeConnexionAppliMobile && aParam.login) {
                    this.login = new ObjetElement_1.ObjetElement(aParam.login);
                }
                this.ressourceInternet = aParam.utilisateur || new ObjetElement_1.ObjetElement('');
                this.login.Genre = aParam.modeCompLog || 0;
                this.motDePasse.Genre = aParam.modeCompMdp || 0;
                this.alea = aParam.alea || '';
                if (this.getMotDePasse() || (this.tokenSAV && this.loginTokenSAV)) {
                    const lNouveauChallenge = this.getNouveauChallenge(aParam.challenge);
                    this.authentification(lNouveauChallenge);
                }
            }
            async authentification(aNouveauChallenge) {
                this.etat = EtatMoteurConnexion.enAuthentification;
                const lReponse = await (0,
                CollectionRequetes_1.Requetes)(this.requetes.authentification, this).lancerRequete({
                    genreConnexion: this.genreConnexion,
                    identifiant: this.getLogin(),
                    pourENT: this.pourENT,
                    ressourceInternet: this.ressourceInternet,
                    nomRessource: this.nomRessource,
                    genreRecherche: this.genreRecherche,
                    enConnexionAuto: this.enConnexionAuto,
                    demandeConnexionAuto: this.demandeConnexionAuto,
                    enConnexionAppliMobile: this.enConnexionAppliMobile,
                    demandeConnexionAppliMobile: this.demandeConnexionAppliMobile,
                    demandeConnexionAppliMobileJeton: this.demandeConnexionAppliMobileJeton,
                    uuidAppliMobile: this.uuidAppliMobile,
                    loginTokenSAV: this.loginTokenSAV,
                    challenge: aNouveauChallenge
                });
                this.apresAuthentification(lReponse);
            }
            apresAuthentification(aParam) {
                var _a, _b, _c;
                if (MethodesObjet_1.MethodesObjet.isNumeric(aParam.Acces)) {
                    this.etat = EtatMoteurConnexion.erreur;
                    this.setMessageErreur(aParam.Acces, aParam.AccesMessage);
                    if (window && window.opener && this.tokenSAV) {
                        window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                        window.opener.postMessage(JSON.stringify({
                            result: aParam.Acces,
                            erreur: this.erreur
                        }), '*');
                    }
                    if (window.messageData) {
                        window.messageData.push({
                            action: 'erreurAuth',
                            message: this.erreur.erreurMessage
                        });
                    } else if ((_c = (_b = (_a = window === null || window === void 0 ? void 0 : window.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.cordova_iab) === null || _c === void 0 ? void 0 : _c.postMessage) {
                        window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({
                            action: 'erreurAuthAjout',
                            message: this.erreur.erreurMessage
                        }));
                    }
                    this.callback(aParam);
                } else if (aParam.cle) {
                    if (aParam.codePINFixe) {
                        GEtatUtilisateur.setCodePINFixe(aParam.codePINFixe);
                    }
                    GEtatUtilisateur.setReglesSaisieMotDePasse(aParam);
                    const lObjCommunication = this.getObjetCommunication();
                    lObjCommunication.setCleAES(ObjetCryptage_1.GCryptage.decrypter({
                        genreCryptage: Enumere_Cryptage_1.EGenreCryptage.AES,
                        chaine: aParam.cle,
                        cle: ObjetCryptage_1.GCryptage.getBuffer(this.getCle()),
                        iv: lObjCommunication.getIvAES(),
                        enBytes: true
                    }));
                    this._apresAuthentificationReussie(aParam);
                } else {
                    this.etat = EtatMoteurConnexion.nonAuthentifie;
                    if (window && window.opener && this.tokenSAV) {
                        window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                        window.opener.postMessage(JSON.stringify({
                            result: -1
                        }), '*');
                    }
                    this.callback(aParam);
                }
            }
            setMessageErreur(AGenreErreur, aMessage) {
                this.erreur = {
                    erreurTitre: null,
                    erreurMessage: null
                };
                this.erreurCode = AGenreErreur;
                switch (AGenreErreur) {
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Identification:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurIdentification'),
                        avecCallback: true
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Autorisation:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAutorisation', [GParametres.getNomEspace()]),
                        erreurTitre: ObjetTraduction_1.GTraductions.getValeur('connexion.AccesRefuse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.ConnexionClasse:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexionClasse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.AucuneRessource:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAucuneRessource', [GParametres.getNomEspace()]),
                        erreurTitre: ObjetTraduction_1.GTraductions.getValeur('connexion.AccesRefuse')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Connexion:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurConnexion')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.BloqueeEleve:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurBloqueeEleve')
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.FonctionAccompagnant:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurFonctionAccompagnant', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.AccompagnantAucunEleve:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.ErreurAccompagnantAucunEleve', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.CompteDesactive:
                    this.erreur = {
                        erreurMessage: ObjetTraduction_1.GTraductions.getValeur('connexion.CompteDesactive_S', [GParametres.getNomEspace()])
                    };
                    break;
                case Enumere_ErreurAcces_1.EGenreErreurAcces.Message:
                    this.erreur = {
                        erreurMessage: aMessage ? aMessage.message || '' : '',
                        erreurTitre: aMessage ? aMessage.titre || '' : ''
                    };
                    break;
                default:
                    break;
                }
            }
            _authentificationTokenSAV() {
                this.setTokenSAV(this.tokenSAV);
                this.identification();
            }
            messageTokenSAV(aEvent) {
                if (aEvent && aEvent.data) {
                    const lData = JSON.parse(aEvent.data);
                    if (lData && lData.tokenSAV) {
                        this.tokenSAV = lData.tokenSAV;
                        this._authentificationTokenSAV();
                    }
                }
            }
            _avecSecurisationDoubleAuth(aParam) {
                return aParam && aParam.actionsDoubleAuth && aParam.actionsDoubleAuth.contains && (aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie) || aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource) || aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieSourcePourNotifSeulement));
            }
            _avecPersonnalisationMDP(aParam) {
                return aParam && aParam.actionsDoubleAuth && aParam.actionsDoubleAuth.contains && aParam.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_PersonnalisationMotDePasse);
            }
            _requeteSecurisationCompteEnregistrementPromise(aParams) {
                const lParams = Object.assign({
                    action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_EnregistrerChoixUtilisateur
                }, aParams.valeursSecurisationCompte);
                return new ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth(this).lancerRequete(lParams).catch( (aReponse) => {
                    return Promise.resolve().then( () => {
                        if (aReponse && aReponse.promiseMessage) {
                            return aReponse.promiseMessage;
                        }
                    }
                    ).then( () => {
                        return Promise.reject();
                    }
                    );
                }
                );
            }
            _securisationComptePromise(aParam) {
                this.securisationCompte.callbackInitSecurisationCompte();
                aParam.valeursSecurisationCompte = {};
                return Promise.resolve().then( () => {
                    if (this._avecPersonnalisationMDP(aParam)) {
                        this.avecControleReglesMDP = false;
                        return this.securisationCompte.callbackPersonnalisationMDPPromise(aParam).then( (aResult) => {
                            if (aResult.reussite && aResult.paramForcerMDP) {
                                if (aResult.paramForcerMDP.nouveauMDP) {
                                    aParam.valeursSecurisationCompte.nouveauMDP = aResult.paramForcerMDP.nouveauMDP;
                                }
                                Object.assign(aParam, aResult.paramForcerMDP);
                            } else {
                                return Promise.reject();
                            }
                        }
                        );
                    }
                }
                ).then( () => {
                    if (this._avecSecurisationDoubleAuth(aParam)) {
                        return this.securisationCompte.callbackSecurisationDoubleAuthPromise(aParam).then( (aResult) => {
                            if (aResult && aResult.suivant && aResult.donnees) {
                                Object.assign(aParam.valeursSecurisationCompte, aResult.donnees);
                            } else {
                                return Promise.reject();
                            }
                        }
                        );
                    }
                }
                ).then( () => {
                    if (this._avecSecurisationDoubleAuth(aParam) || this._avecPersonnalisationMDP(aParam) || aParam.changementStrategieImpose) {
                        return this._requeteSecurisationCompteEnregistrementPromise(aParam);
                    }
                }
                );
            }
            _apresAuthentificationReussie(aParam) {
                if (aParam.login) {
                    this.login.Libelle = aParam.login;
                }
                const lJetonConnexionAppliMobile = aParam.jetonConnexionAppliMobile;
                const lJetonConnexionAuto = aParam.jetonConnexionAuto;
                if (lJetonConnexionAuto) {
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Authentification, lJetonConnexionAuto);
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Identification, this.getLogin());
                    LocalStorage_1.IELocalStorage.setItem(this.const.Cookie_Espace, (this.genreEspace !== undefined) && (this.genreEspace !== null) ? this.genreEspace.toString() : '');
                }
                if (window && window.opener && this.tokenSAV) {
                    window.removeEventListener('message', this.messageTokenSAV.bind(this), false);
                    window.opener.postMessage(JSON.stringify({
                        result: 0
                    }), '*');
                }
                if (this.modeValidationAppliMobile || document.cookie.indexOf('validationAppliMobile=') > -1) {
                    window.loginState = {
                        status: 0,
                        libelle: aParam.libelleUtil,
                        login: this.getLogin(true),
                        mdp: lJetonConnexionAppliMobile
                    };
                    if (document.cookie.indexOf('validationAppliMobile=') > -1) {
                        document.cookie = 'validationAppliMobile=;expires=' + new Date(0).toUTCString();
                        document.cookie = 'appliMobile=1;expires=' + new Date(new Date().getTime() + (365 * 24 * 60 * 60 * 1000)).toUTCString();
                    }
                    return;
                }
                if (this.application.estAppliMobile) {
                    window.messageData.push({
                        action: 'surAuth',
                        data: lJetonConnexionAppliMobile
                    });
                }
                Promise.resolve().then( () => {
                    if (aParam.actionsDoubleAuth) {
                        return this._securisationComptePromise(aParam);
                    }
                }
                ).then( () => {
                    this._authentifieTotalement(aParam);
                }
                , (aArg) => {
                    if (aArg) {}
                    UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexion().then( () => {
                        window.location.reload();
                    }
                    );
                }
                );
            }
            _authentifieTotalement(aParam) {
                this.etat = EtatMoteurConnexion.authentifie;
                if (this.avecControleReglesMDP && !this.pourENT && !this.tokenSAV) {
                    const lEtatUtil = this.application.getEtatUtilisateur();
                    if (lEtatUtil.reglesSaisieMotDePasse && lEtatUtil.reglesSaisieMotDePasse.init) {
                        if (!ValidationMotDePasse_1.ValidationMotDePasse.leMotDePasseRespecteReglesSecurite(this.getMotDePasseBrut(), lEtatUtil.reglesSaisieMotDePasse)) {
                            aParam.motDePasseInvalide = true;
                        }
                    } else {}
                }
                this.callback(aParam);
            }
        }
        exports.ObjetMoteurConnexion = ObjetMoteurConnexion;
    },
    fn: 'objetmoteurconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRedirection = void 0;
        class UtilitaireRedirection {
            constructor() {
                this.parametresAConserver = ['login', 'fd', 'redirect', 'redirect_sauthm'];
                this.parametres = [];
                const lSearches = window.location.search.replace(/^\?/, '').split('&');
                for (const i in lSearches) {
                    const lItems = lSearches[i].split('=');
                    if (lItems.length === 2) {
                        this.parametres.push({
                            parametre: lItems[0],
                            valeur: lItems[1]
                        });
                    }
                }
            }
            getParametresUrl(aObjet) {
                let lParamUrl = '';
                const lParametres = [];
                let lParametre;
                if (aObjet && aObjet.parametresAConserver) {
                    this.parametresAConserver = aObjet.parametresAConserver;
                }
                for (const i in this.parametres) {
                    lParametre = this.parametres[i];
                    const lRegExpParametre = new RegExp(lParametre.parametre,'i');
                    if (lRegExpParametre.test(this.parametresAConserver.join(' ')) && (!aObjet || !aObjet.parametresASupprimer || !lRegExpParametre.test(aObjet.parametresASupprimer.join(' ')))) {
                        lParametres.push(lParametre);
                    }
                }
                if (aObjet && aObjet.parametres) {
                    for (const i in aObjet.parametres) {
                        lParametre = aObjet.parametres[i];
                        if (!this.existParametre(lParametre.parametre)) {
                            lParametres.push(lParametre);
                        }
                    }
                }
                for (const i in lParametres) {
                    lParametre = lParametres[i];
                    lParamUrl += (lParamUrl ? '&' : '') + lParametre.parametre + '=' + lParametre.valeur;
                }
                return (lParamUrl ? '?' : '') + lParamUrl;
            }
            existParametre(aParametre) {
                const obj = this.parametres.filter( (aItem) => {
                    return aItem.parametre === aParametre;
                }
                );
                return (obj !== undefined) && (obj.length > 0);
            }
        }
        exports.UtilitaireRedirection = UtilitaireRedirection;
    },
    fn: 'utilitaireredirection.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._InterfaceConnexion = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_StructureAffichage_1 = require("Enumere_StructureAffichage");
        const ObjetInterface_1 = require("ObjetInterface");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetMoteurConnexion_1 = require("ObjetMoteurConnexion");
        const GUID_1 = require("GUID");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ToucheClavier_1 = require("ToucheClavier");
        const Enumere_ErreurAcces_1 = require("Enumere_ErreurAcces");
        const UtilitaireRedirection_1 = require("UtilitaireRedirection");
        class _InterfaceConnexion extends ObjetInterface_1.ObjetInterface {
            constructor(...aParams) {
                super(...aParams);
                this.applicationProduit = GApplication;
                this.moteurConnexion = null;
                this.avecErreurSurClickConnecterPrecedent = false;
                this.id = {
                    bandeau: GUID_1.GUID.getId(),
                    btnConnexion: GUID_1.GUID.getId(),
                    checkBox: GUID_1.GUID.getId(),
                    choixLangue: GUID_1.GUID.getId(),
                    connect: GUID_1.GUID.getId(),
                    inscription: GUID_1.GUID.getId(),
                    image: GUID_1.GUID.getId(),
                    imageSuite: GUID_1.GUID.getId(),
                    thisNom: this.Nom,
                    msgErreur: GUID_1.GUID.getId(),
                    wrapper: GUID_1.GUID.getId(),
                    wrapperConnect: GUID_1.GUID.getId(),
                    nameRadio: GUID_1.GUID.getId(),
                    identification: GUID_1.GUID.getId(),
                    motDePasse: GUID_1.GUID.getId(),
                    checkSouvenir: GUID_1.GUID.getId(),
                    pageConnexionAuto: GUID_1.GUID.getId(),
                    waiIdentifiant: GUID_1.GUID.getId(),
                    waiMotDePasse: GUID_1.GUID.getId(),
                    waiRecupIdMdp: GUID_1.GUID.getId()
                };
                this.options = {
                    avecAnimation: true,
                    genreImageConnexion: 0,
                    urlImageConnexion: '',
                    avecChoixConnexion: false,
                    avecRetourEspace: false,
                    stockageMDPActive: false,
                    avecRecupIdMdp: false,
                    pourInscription: false,
                    requetes: {
                        identification: '',
                        authentification: ''
                    }
                };
            }
            setParametresGeneraux() {
                this.GenreStructure = Enumere_StructureAffichage_1.EStructureAffichage.Autre;
            }
            setOptions(aOptions) {
                Object.assign(this.options, aOptions);
                if (window.location.search.search('redirect=1') > 0 && GParametres.URLEspace) {
                    this.options.avecRetourEspace = true;
                } else {
                    this.options.avecRetourEspace = false;
                }
                return this;
            }
            construireStructureAffichageAutre() {
                if (this.estConnexionSansInterface()) {
                    return '<div class="GrandEspaceHaut GrandEspaceGauche Gras" id="' + this.id.pageConnexionAuto + '">' + ObjetTraduction_1.GTraductions.getValeur('connexion.ConnexionCAS') + '</div>';
                } else {
                    return this.construirePage();
                }
            }
            recupererDonnees() {
                this.moteurConnexion = new ObjetMoteurConnexion_1.ObjetMoteurConnexion();
                this.moteurConnexion.init({
                    callback: this.callbackMoteur.bind(this),
                    requetes: {
                        identification: this.options.requetes.identification,
                        authentification: this.options.requetes.authentification
                    },
                    stockageMDPActive: this.options.stockageMDPActive
                });
                if (this.callbackInitSecurisationCompte) {
                    this.moteurConnexion.setSecurisationCompte({
                        callbackInitSecurisationCompte: this.callbackInitSecurisationCompte.bind(this),
                        callbackPersonnalisationMDPPromise: this.callbackPersonnalisationMDPPromise.bind(this),
                        callbackSecurisationDoubleAuthPromise: this.callbackSecurisationDoubleAuthPromise.bind(this)
                    });
                }
                if (GApplication.getDemo()) {
                    this.moteurConnexion.setLogin(ObjetTraduction_1.GTraductions.getValeur('Demo.Identifiant'));
                    this.moteurConnexion.setMotDePasse(ObjetTraduction_1.GTraductions.getValeur('Demo.MotDePasse'));
                    $('#' + this.id.identification).attr('readonly', 'true');
                    $('#' + this.id.motDePasse).attr('readonly', 'true');
                    this.preremplir();
                } else {
                    if (!GNavigateur.isIpad) {
                        $('#' + this.id.identification).focus();
                    }
                }
                if (window.hookAccesDepuisAppli) {
                    window.hookAccesDepuisAppli.call(this);
                } else if (this.applicationProduit.smartAppBanner) {
                    this.applicationProduit.smartAppBanner.show();
                }
            }
            free() {
                super.free();
            }
            callbackMoteur(aParams) {
                switch (this.moteurConnexion.etat) {
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.aucun:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.malInitialise:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.autoInitialise:
                    this.preremplir();
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.enIdentification:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.identifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.nonIdentifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.enAuthentification:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.authentifie:
                    this._reussiteAuthentification(aParams);
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.nonAuthentifie:
                    break;
                case ObjetMoteurConnexion_1.EtatMoteurConnexion.erreur:
                    {
                        let lAction;
                        if (this.moteurConnexion.erreurCode === Enumere_ErreurAcces_1.EGenreErreurAcces.Identification) {
                            lAction = ( () => {
                                this.moteurConnexion.setMotDePasse('');
                                this.moteurConnexion.setStockageMdp(false);
                            }
                            );
                        } else {
                            lAction = ( () => {
                                this.moteurConnexion.setLogin('');
                                this.moteurConnexion.setMotDePasse('');
                                this.moteurConnexion.setStockageMdp(false);
                            }
                            );
                        }
                        this.avecErreurSurClickConnecterPrecedent = true;
                        this.signalerErreur(this.moteurConnexion.erreur.erreurMessage);
                        this.$refresh();
                        GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            titre: this.moteurConnexion.erreur.erreurTitre,
                            message: this.moteurConnexion.erreur.erreurMessage,
                            callback: lAction
                        });
                        this._echecAuthentification(aParams);
                        break;
                    }
                default:
                    ;break;
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getModel: {
                        event(aMessage) {
                            let lMessage = '';
                            switch (aMessage) {
                            case 'texteExplicatifModeConnexion':
                                lMessage = '<strong>' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionTitre') + '</strong><br />' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionMessage');
                                break;
                            case 'texteExplicatifRecupIdMdp':
                                lMessage = ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.titre');
                                break;
                            default:
                                break;
                            }
                            if (lMessage) {
                                GApplication.getMessage().afficher({
                                    message: lMessage
                                });
                            }
                        },
                        getTitle() {
                            return ObjetTraduction_1.GTraductions.getValeur('connexion.btnInterrogationTitle');
                        }
                    },
                    choixConnexion: {
                        getValue: function(aMode) {
                            return aInstance.moteurConnexion ? aMode === aInstance.moteurConnexion.genreConnexion : false;
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setGenreConnexion(aValue);
                            }
                        }
                    },
                    login: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.getLogin(true) : '';
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setLogin(aValue);
                            }
                        }
                    },
                    getAttrLogin() {
                        var _a, _b;
                        return {
                            'aria-invalid': aInstance.avecErreurSurClickConnecterPrecedent && !(((_b = (_a = aInstance.moteurConnexion) === null || _a === void 0 ? void 0 : _a.getLogin(true)) === null || _b === void 0 ? void 0 : _b.length) > 0)
                        };
                    },
                    motDePasse: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.getMotDePasse(true) : '';
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setMotDePasse(aValue);
                            }
                        },
                        interrompreEvent: function(aEvent) {
                            if (aEvent.type === 'keyup' && aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                    aInstance.moteurConnexion.identification(true);
                                }
                                return true;
                            }
                        }
                    },
                    getAttrMDP() {
                        var _a, _b;
                        return {
                            'aria-invalid': aInstance.avecErreurSurClickConnecterPrecedent && !(((_b = (_a = aInstance.moteurConnexion) === null || _a === void 0 ? void 0 : _a.getMotDePasse(true)) === null || _b === void 0 ? void 0 : _b.length) > 0)
                        };
                    },
                    montrerMasquerMotDePasse: {
                        event: function() {
                            let lTrigger = $('.as-input.as-password').find('.btnImage');
                            let lTarget = $('.as-input.as-password').find('input');
                            lTrigger.toggleClass('icon_eye_close icon_eye_open');
                            lTarget.attr('type') === 'password' ? lTarget.attr('type', 'text') : lTarget.attr('type', 'password');
                        },
                        getTitle: function() {
                            return $('.as-input.as-password').find('.btnImage').hasClass('icon_eye_open') ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                        }
                    },
                    stockageMDP: {
                        getValue: function() {
                            return !!aInstance.moteurConnexion ? aInstance.moteurConnexion.avecStockageMDP : false;
                        },
                        setValue: function(aValue) {
                            if (!!aInstance.moteurConnexion) {
                                aInstance.moteurConnexion.setStockageMdp(aValue);
                            }
                        }
                    },
                    boutonRedirigerParent: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            if (GParametres && GParametres.infosInscription && GParametres.infosInscription.espace && GParametres.infosInscription.espace.url) {
                                const lUrl = window.location.href.split('/');
                                lUrl.pop();
                                lUrl.push(GParametres.infosInscription.espace.url);
                                window.location.href = lUrl.join('/');
                            }
                        }
                    },
                    boutonCreation: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            aInstance.eventCreation();
                        }
                    },
                    btnConnexionInscription: {
                        getDisabled: function() {
                            return false;
                        },
                        event: function() {
                            aInstance.options.pourInscription = false;
                        }
                    },
                    boutonValidation: {
                        getDisabled: function() {
                            return !aInstance.moteurConnexion || !aInstance.moteurConnexion.getLogin() || !aInstance.moteurConnexion.getMotDePasse();
                        },
                        event: function() {
                            if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                aInstance.moteurConnexion.identification(true);
                            }
                        }
                    },
                    boutonRecupMDP: {
                        event: function() {
                            if (!!aInstance.moteurConnexion && !aInstance.applicationProduit.getCommunication().requeteEnCours()) {
                                aInstance.evenementRecupIdMDP();
                            }
                        }
                    },
                    choixLangue: function() {
                        return aInstance.options.utilitaireChangementLangue.construire(aInstance.controleur);
                    },
                    visibiliteChangementLangue: function() {
                        return aInstance.options.utilitaireChangementLangue.avecChoixLangues();
                    },
                    visibiliteModeConnexion: function() {
                        return aInstance.options.avecChoixConnexion;
                    },
                    visibiliteRecupIdMdp: function() {
                        return aInstance.options.avecRecupIdMdp;
                    },
                    visibiliteConnexion: function() {
                        return !aInstance.options.pourInscription;
                    },
                    visibiliteInscription: function() {
                        return aInstance.options.pourInscription;
                    },
                    visibiliteRedirigerParent: function() {
                        return aInstance.options.pourInscription && GParametres && GParametres.infosInscription && GParametres.infosInscription.espace;
                    },
                    visibiliteRetourEspace: function() {
                        return aInstance.options.avecRetourEspace;
                    }
                });
            }
            eventCreation() {}
            evenementRecupIdMDP() {}
            retourEspaceBureau() {
                window.location.assign(GParametres.URLEspace + new UtilitaireRedirection_1.UtilitaireRedirection().getParametresUrl({
                    parametres: [{
                        parametre: 'fd',
                        valeur: '1'
                    }],
                    parametresASupprimer: ['redirect']
                }));
            }
            signalerErreur(aMessageErreur) {
                $('#' + this.id.msgErreur).html(ObjetChaine_1.GChaine.replaceRCToHTML(aMessageErreur));
                $('#' + this.id.msgErreur).attr('aria-hidden', 'false');
                $('#' + this.id.msgErreur).show();
            }
            preremplir() {}
            traiterEvenementValidation(aLogin, aMotDePasse, aPourENT, aUuidAppliMobile) {
                this.moteurConnexion.genreEspace = GEtatUtilisateur.GenreEspace;
                if (!!aLogin) {
                    this.moteurConnexion.login.Libelle = aLogin;
                }
                if (!!aMotDePasse) {
                    this.moteurConnexion.motDePasse.Libelle = aMotDePasse;
                }
                this.moteurConnexion.pourENT = aPourENT ? aPourENT : false;
                this.moteurConnexion.avecStockageMDP = false;
                this.moteurConnexion.uuidAppliMobile = this.uuidAppliMobile || aUuidAppliMobile;
                this.moteurConnexion.identification();
            }
            estConnexionSansInterface() {
                return this.applicationProduit.acces && (this.applicationProduit.acces.estConnexionCAS() || this.applicationProduit.acces.estConnexionCookie());
            }
            _echecAuthentification(aParams) {}
        }
        exports._InterfaceConnexion = _InterfaceConnexion;
    },
    fn: '_interfaceconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteAuthentificationPN = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteAuthentificationPN extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('Authentification')
                });
            }
            lancerRequete(aParam) {
                this.JSON.connexion = aParam.genreConnexion;
                this.JSON.challenge = aParam.challenge;
                this.JSON.espace = GEtatUtilisateur.GenreEspace;
                return this.appelAsynchrone();
            }
        }
        exports.ObjetRequeteAuthentificationPN = ObjetRequeteAuthentificationPN;
        CollectionRequetes_1.Requetes.inscrire('Authentification', ObjetRequeteAuthentificationPN);
    },
    fn: 'objetrequeteauthentificationpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteIdentification = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteIdentification extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('Identification')
                });
            }
            lancerRequete(aParam) {
                Object.assign(this.JSON, aParam);
                return this.appelAsynchrone();
            }
        }
        exports.ObjetRequeteIdentification = ObjetRequeteIdentification;
        CollectionRequetes_1.Requetes.inscrire('Identification', ObjetRequeteIdentification);
    },
    fn: 'objetrequeteidentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeArrierePlanAuthentification = void 0;
        var TypeArrierePlanAuthentification;
        (function(TypeArrierePlanAuthentification) {
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Photo"] = 0] = "Photo";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["_Rebus"] = 1] = "_Rebus";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Neutre"] = 2] = "Neutre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["PersonnaliseURL"] = 3] = "PersonnaliseURL";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Louvre"] = 4] = "Louvre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["Arbre"] = 5] = "Arbre";
            TypeArrierePlanAuthentification[TypeArrierePlanAuthentification["PersonnaliseFichier"] = 6] = "PersonnaliseFichier";
        }
        )(TypeArrierePlanAuthentification || (exports.TypeArrierePlanAuthentification = TypeArrierePlanAuthentification = {}));
    },
    fn: 'typearriereplanauthentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        const {TypeArrierePlanAuthentification} = require('TypeArrierePlanAuthentification.js');
        const {GDate} = require('ObjetDate.js');
        class ObjetImageConnexion {
            constructor() {
                this.definitionImages = [];
                this.definitionImagesExtra = {};
            }
            getClassImage() {
                return '';
            }
            getObjetImagePronote(aGenreImageConnexion) {
                let lDate = new Date();
                if (location && location.search && location.search.search(/dateCnx=[0-9]{4}-[0-9]{2}-[0-9]{2}/) > -1) {
                    const lDateMatch = location.search.match(/dateCnx=([0-9]{4}-[0-9]{2}-[0-9]{2})/);
                    lDate = new Date(lDateMatch[1]);
                }
                let lResult = {};
                try {
                    switch (aGenreImageConnexion) {
                    case TypeArrierePlanAuthentification.Photo:
                        lResult = this.definitionImages[TypeArrierePlanAuthentification.Photo][lDate.getMonth() % this.definitionImages[TypeArrierePlanAuthentification.Photo].length];
                        break;
                    case TypeArrierePlanAuthentification.Louvre:
                        if (this.definitionImages[TypeArrierePlanAuthentification.Louvre].length === 12) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Louvre][(lDate.getMonth()) % this.definitionImages[TypeArrierePlanAuthentification.Louvre].length];
                        } else if (this.definitionImages[TypeArrierePlanAuthentification.Louvre].length === 53) {
                            const lDatePourSemaine = new Date(lDate.getTime());
                            lDatePourSemaine.setHours(0, 0, 0, 0);
                            lDatePourSemaine.setDate(lDatePourSemaine.getDate() + 3 - (lDatePourSemaine.getDay() + 6) % 7);
                            const lWeek1 = new Date(lDatePourSemaine.getFullYear(),0,4);
                            const lSemaine = 1 + Math.round(((lDatePourSemaine.getTime() - lWeek1.getTime()) / 86400000 - 3 + (lWeek1.getDay() + 6) % 7) / 7);
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Louvre][(lSemaine - 1) % this.definitionImages[TypeArrierePlanAuthentification.Louvre].length];
                        } else {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Louvre][GDate.getNbrJoursEntreDeuxDates(new Date(lDate.getFullYear(),0,1), lDate) % this.definitionImages[TypeArrierePlanAuthentification.Louvre].length];
                        }
                        if (this.definitionImagesExtra[lDate.getMonth() + '-' + lDate.getDate()]) {
                            lResult = this.definitionImagesExtra[lDate.getMonth() + '-' + lDate.getDate()];
                            if (lResult.suiviLogo1) {
                                lResult.suiviLien = lResult.suiviLogo1;
                            }
                        }
                        if (new Date() >= lResult.dateMaxLien) {
                            lResult.lien = '';
                            lResult.lienSuite = '';
                        }
                        break;
                    case TypeArrierePlanAuthentification.Arbre:
                        lDate.setFullYear(1900);
                        if (lDate < new Date(1900,2,20)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Arbre][0];
                        } else if (lDate < new Date(1900,5,21)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Arbre][1];
                        } else if (lDate < new Date(1900,8,23)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Arbre][2];
                        } else if (lDate < new Date(1900,11,21)) {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Arbre][3];
                        } else {
                            lResult = this.definitionImages[TypeArrierePlanAuthentification.Arbre][0];
                        }
                        break;
                    default:
                        lResult = {};
                        break;
                    }
                } catch (e) {
                    lResult = {};
                }
                return lResult;
            }
            getClassFond() {
                return 'Image_Connexion_Fond Repeat';
            }
            setDefinitionImages(aArray) {
                this.definitionImages = aArray;
            }
            setDefinitionImagesExtra(aObjet) {
                this.definitionImagesExtra = aObjet;
            }
        }
        const GImageConnexion = new ObjetImageConnexion();
        module.exports = GImageConnexion;
    },
    fn: 'objetimageconnexion.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireChangementLangueProduit = void 0;
        require('ChangementLangue.css');
        const uNomCookieLangue = 'ielang';
        exports.UtilitaireChangementLangueProduit = {
            affecterLangue(aIdLang) {
                const lDate = new Date();
                lDate.setDate(lDate.getDate() + 365);
                document.cookie = uNomCookieLangue + '=' + aIdLang + '; expires=' + lDate.toUTCString() + '; path=/;';
                window.location.reload();
            },
            getImageCss(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'Image_flagFR';
                case 1033:
                    return 'Image_flagGB';
                case 1031:
                    return 'Image_flagDE';
                case 9:
                case 2057:
                    return 'Image_flagGB';
                case 2060:
                    return 'Image_flagBE';
                case 3084:
                    return 'Image_flagCA';
                case 4108:
                    return 'Image_flagCH';
                case 16:
                case 1040:
                    return 'Image_flagIT';
                case 2067:
                    return 'Image_flagNL';
                case 6145:
                    return 'Image_flagMA';
                case 10:
                case 3082:
                    return 'Image_flagES';
                default:
                    ;return 'Image_flagFR';
                }
            },
            getCodeLangueIso639(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'fr';
                case 1033:
                    return 'en';
                case 1031:
                    return 'de';
                case 9:
                case 2057:
                    return 'en';
                case 2060:
                    return 'fr';
                case 3084:
                    return 'ca';
                case 4108:
                    return 'ch';
                case 16:
                case 1040:
                    return 'it';
                case 2067:
                    return 'nl';
                case 6145:
                    return 'ar';
                case 10:
                case 3082:
                    return 'es';
                default:
                    ;return 'fr';
                }
            },
            getCodeLangueIetf(aLangId) {
                switch (aLangId) {
                case 12:
                case 1036:
                    return 'fr-FR';
                case 1033:
                    return 'en-US';
                case 1031:
                    return 'de-DE';
                case 9:
                case 2057:
                    return 'en-GB';
                case 2060:
                    return 'fr-BE';
                case 3084:
                    return 'fr-CA';
                case 4108:
                    return 'fr-CH';
                case 16:
                case 1040:
                    return 'it-IT';
                case 2067:
                    return 'nl-BE';
                case 6145:
                    return 'ar-MA';
                case 10:
                case 3082:
                    return 'es-ES';
                default:
                    ;return 'fr-FR';
                }
            }
        };
    },
    fn: 'utilitairechangementlangueproduit.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireChangementLangue = void 0;
        require('ChangementLangue.css');
        const LocalStorage_1 = require("LocalStorage");
        const MethodesObjet_1 = require("MethodesObjet");
        const ControleSaisieEvenement_1 = require("ControleSaisieEvenement");
        const Enumere_Action_1 = require("Enumere_Action");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_EvenementObjetSaisie_1 = require("Enumere_EvenementObjetSaisie");
        const UtilitaireChangementLangueProduit_1 = require("UtilitaireChangementLangueProduit");
        exports.UtilitaireChangementLangue = Object.assign({
            avecChoixLangues: function() {
                return !GApplication.estAppliMobile && GParametres.listeLangues && GParametres.listeLangues.count() > 1;
            },
            getListeLangues: function() {
                const lListe = MethodesObjet_1.MethodesObjet.dupliquer(GParametres.listeLangues);
                lListe.parcourir( (D) => {
                    D.Libelle = D.description;
                    const lImage = exports.UtilitaireChangementLangue.getImageCss(D.langID);
                    D.imageDrapeau = lImage ? IE.jsx.str("div", {
                        class: exports.UtilitaireChangementLangue.getImageCss(D.langID),
                        role: "img",
                        "aria-label": D.Libelle
                    }) : '';
                    D.libelleHtml = lImage ? IE.jsx.str("div", {
                        class: "flag-img"
                    }, IE.jsx.str("div", {
                        "aria-hidden": "true"
                    }, D.imageDrapeau), IE.jsx.str("div", {
                        class: "flag-label",
                        "ie-ellipsis": true,
                        lang: exports.UtilitaireChangementLangue.getCodeLangueIso639(D.langID)
                    }, D.Libelle)) : D.Libelle;
                }
                );
                lListe.trier();
                return lListe;
            },
            modifierLangue: function(aLangue) {
                if (!LocalStorage_1.IELocalStorage.actif) {
                    GApplication.getMessage().afficher({
                        titre: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLangueImpossible'),
                        message: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLangueImpossibleDetail')
                    });
                    return;
                }
                if (!aLangue || !aLangue.langID) {
                    return;
                }
                (0,
                ControleSaisieEvenement_1.ControleSaisieEvenement)( () => {
                    GApplication.getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                        message: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.MessageConfirmationChangerLangue'),
                        callback: function(aGenre) {
                            if (aGenre === Enumere_Action_1.EGenreAction.Valider) {
                                exports.UtilitaireChangementLangue.affecterLangue(aLangue.langID);
                            }
                        }
                    });
                }
                );
            },
            construire: function(aControleur, aOptions) {
                if (!aControleur) {
                    return '';
                }
                if (!this.avecChoixLangues()) {
                    return '';
                }
                let lIndiceSelection = -1;
                const lListe = exports.UtilitaireChangementLangue.getListeLangues();
                aControleur.comboChangementLangue = {
                    init: function(aInstance) {
                        aInstance.setOptionsObjetSaisie({
                            iconeGauche: '',
                            longueur: 22,
                            largeurListe: 180,
                            avecBouton: false,
                            avecEventSurFermetureListe: !!aOptions && !!aOptions.avecEventFermeture,
                            getContenuCellule: function() {
                                const lElement = lListe.get(lIndiceSelection);
                                if (lElement) {
                                    return {
                                        libelleHtml: lElement.imageDrapeau
                                    };
                                }
                            },
                            optionsBouton: {
                                avecBordures: false,
                                avecFocusVisibleTexte: false,
                                titleForce: ObjetTraduction_1.GTraductions.getValeur('ChangementLangue.ChangerLaLangue'),
                                classeZone: ''
                            }
                        });
                        aInstance.setDonnees(lListe, lIndiceSelection);
                    },
                    event: function(aParametres, aCombo) {
                        if (aParametres.genreEvenement === Enumere_EvenementObjetSaisie_1.EGenreEvenementObjetSaisie.selection && aCombo.InteractionUtilisateur && aParametres.indice !== lIndiceSelection) {
                            exports.UtilitaireChangementLangue.modifierLangue(aParametres.element);
                        }
                    },
                    getDisabled: function() {
                        return lListe.count() < 2;
                    }
                };
                lListe.parcourir( (aElement, aIndex) => {
                    if (aElement.langID === GParametres.langID) {
                        lIndiceSelection = aIndex;
                        return false;
                    }
                }
                );
                if (lIndiceSelection < 0) {
                    lIndiceSelection = 0;
                }
                return '<ie-combo class="flag-conteneur" ie-model="comboChangementLangue"></ie-combo>';
            }
        }, UtilitaireChangementLangueProduit_1.UtilitaireChangementLangueProduit);
    },
    fn: 'utilitairechangementlangue.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetBandeauEspace = void 0;
        const ObjetIdentite_1 = require("ObjetIdentite");
        const UtilitaireChangementLangue_1 = require("UtilitaireChangementLangue");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetHtml_1 = require("ObjetHtml");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetWAI_1 = require("ObjetWAI");
        const ObjetPosition_1 = require("ObjetPosition");
        const Invocateur_1 = require("Invocateur");
        require('ObjetBandeauEspace.css');
        class ObjetBandeauEspace extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.params = {
                    labelConteneur: '',
                    urlLogoEtab: GParametres.urlLogo,
                    nomEtab: GParametres.NomEtablissementConnexion ? GParametres.NomEtablissementConnexion : GParametres.NomEtablissement,
                    getNomUtil: null,
                    attrUtil: '',
                    ariaLabelUtil: '',
                    classUtil: '',
                    photo: null,
                    logoProduitCss: GParametres.logoProduitCss || '',
                    logoProduitUrl: GParametres.urlSiteIndexEducation || 'https://www.index-education.com',
                    labelLienProduit: GParametres.labelLienProduit || '',
                    logoDepartementImage: '',
                    logoDepartementLien: '',
                    mention: GParametres.lienMentions,
                    avecLangue: true,
                    getObjetSelecteurMembre: null,
                    htmlBoutonFicheEleve: null,
                    htmlBoutonsAvantNotif: null,
                    getObjetNotification: null,
                    getObjetAide: null,
                    htmlBoutons: '',
                    iconesADroite: false,
                    clickUtilisateur: null,
                    clickDeconnexion: null,
                    clickAccesMobile: null,
                    clickEtablissement: null,
                    isEDT: false,
                    controleur: null,
                    avecFicheEtablissement: false,
                    avecLiensEvitement: false,
                    liensEvitement: {
                        menuOnglet: false,
                        urlDeclarationAccessibilite: null,
                        clickPlanSite: null
                    }
                };
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getNodeRacine: function() {
                        $(window).on('resize.ObjetBandeauEspace', () => {
                            aInstance._resize();
                        }
                        );
                        $(this.node).on('destroyed', () => {
                            $(window).off('resize.ObjetBandeauEspace');
                        }
                        );
                    },
                    getNodeCentre: function() {},
                    getNodeNomEtab: function() {
                        if (aInstance.params.clickEtab) {
                            $(this.node).on('click keyup', (aEvent) => {
                                if (aEvent.type === 'keyup' && !(aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot)) {
                                    return;
                                }
                                aEvent.originalEvent.__clickZone__ = true;
                                aInstance.params.clickEtab();
                            }
                            );
                            return;
                        }
                    },
                    nodeEtablissement: function() {
                        if (aInstance.params.clickEtablissement) {
                            $(this.node).eventValidation( (aEvent) => {
                                aInstance.params.clickEtablissement();
                                aEvent.stopPropagation();
                            }
                            );
                        }
                    },
                    util: {
                        avecUtil: function() {
                            return aInstance.params.getNomUtil ? !!aInstance.params.getNomUtil() : false;
                        },
                        getNodeUtil: function() {
                            $(this.node).on('click keyup', function(aEvent) {
                                if (aEvent.type === 'keyup' && !(aEvent.which === ToucheClavier_1.ToucheClavier.Espace || aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot)) {
                                    return;
                                }
                                aEvent.originalEvent.__clickZone__ = true;
                                aInstance.params.clickUtilisateur(aEvent, this);
                            });
                        },
                        getHtmlUtil: function() {
                            return aInstance.params.getNomUtil ? aInstance.params.getNomUtil() : '';
                        },
                        avecPhoto: function() {
                            return aInstance.params.photo.getUrlPhoto ? aInstance.params.photo.getUrlPhoto() !== '' : false;
                        },
                        getNodeImgPhoto: function() {
                            $(this.node).on('error', function() {
                                $(this).parent().find('.ibe_util_photo_i').show();
                                $(this).remove();
                            });
                        },
                        getHtmlPhoto: function() {
                            const lUrl = aInstance.params.photo.getUrlPhoto ? aInstance.params.photo.getUrlPhoto() : '';
                            if (lUrl) {
                                return [IE.jsx.str("img", {
                                    src: lUrl,
                                    style: 'width:100%;',
                                    "ie-node": 'util.getNodeImgPhoto',
                                    alt: aInstance.params.getNomUtil ? ObjetTraduction_1.GTraductions.getValeur('PhotoDe_S', [aInstance.params.getNomUtil()]) : ''
                                }), '<div class="ibe_util_photo_i"', (lUrl ? ' style="display:none"' : ''), '>', '<i class="icon_utilisateur"></i>', '</div>'].join('');
                            }
                            return '';
                        },
                        getAttrUtil: function() {
                            const lNom = aInstance.params.getNomUtil ? aInstance.params.getNomUtil() : '';
                            const lLabelUtil = aInstance.params.ariaLabelUtil;
                            const lLibelle = (lNom ? lNom + (lLabelUtil ? ' - ' : '') : '') + (lLabelUtil ? lLabelUtil : '');
                            return {
                                'aria-label': lLibelle
                            };
                        }
                    },
                    getNodeNotif: function() {
                        $(this.node).eventValidation( (aEvent) => {
                            aEvent.originalEvent.__clickZone__ = true;
                        }
                        );
                    },
                    getNodeAccesMobile: function() {
                        $(this.node).eventValidation( (aEvent) => {
                            aEvent.originalEvent.__clickZone__ = true;
                            aInstance.params.clickAccesMobile();
                        }
                        );
                    },
                    getNodeDeconnexion: function() {
                        $(this.node).eventValidation( (aEvent) => {
                            aEvent.originalEvent.__clickZone__ = true;
                            aInstance.params.clickDeconnexion();
                        }
                        );
                    },
                    getNodeImage: function() {
                        $(this.node).on('load', () => {
                            aInstance._resize();
                        }
                        );
                    },
                    getObjetSelecteurMembre: function() {
                        return aInstance.params.getObjetSelecteurMembre;
                    },
                    getObjetNotification: function() {
                        return aInstance.params.getObjetNotification;
                    },
                    getObjetAide: function() {
                        return aInstance.params.getObjetAide;
                    },
                    getAttrBanner() {
                        return {
                            tabindex: aInstance.params.avecLiensEvitement ? -1 : 0
                        };
                    },
                    nodeContenu() {
                        $(this.node).eventValidation( () => {
                            if (global.GInterface && GInterface.setFocusPremierObjet) {
                                GInterface.setFocusPremierObjet();
                            } else {
                                ObjetHtml_1.GHtml.setFocus($('#breadcrumbBandeau').get(0));
                            }
                        }
                        );
                    },
                    nodeMenu() {
                        $(this.node).eventValidation( () => {
                            Invocateur_1.Invocateur.evenement('focus.menu_navigation');
                        }
                        );
                    },
                    nodePlanSite() {
                        $(this.node).eventValidation( () => {
                            aInstance.params.liensEvitement.clickPlanSite();
                        }
                        );
                    }
                });
            }
            setParametres(aParams) {
                Object.assign(this.params, aParams);
                if (this.params.controleur) {
                    Object.assign(this.controleur, this.params.controleur);
                }
            }
            construireAffichage() {
                const lParams = Object.assign({}, this.params);
                if (lParams.getNomUtil) {
                    lParams.labelConteneur = ObjetChaine_1.GChaine.enleverEntites(lParams.getNomUtil()) + ' ' + lParams.labelConteneur;
                }
                const H = [];
                H.push('<div class="ObjetBandeauEspace" ie-node="getNodeRacine" ie-attr="getAttrBanner" role="banner" aria-label="', ObjetChaine_1.GChaine.toTitle(lParams.labelConteneur), '">');
                if (lParams.avecLiensEvitement) {
                    H.push(lParams.liensEvitement.menuOnglet ? `<a class="evitement" tabindex="0" ie-node="nodeMenu">${ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LiensEvitement.Menu')}</a>` : '', `<a class="evitement" tabindex="0" ie-node="nodeContenu">${ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LiensEvitement.Contenu')}</a>`, lParams.liensEvitement.urlDeclarationAccessibilite ? `<a class="evitement" tabindex="0" href="${lParams.liensEvitement.urlDeclarationAccessibilite}">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.declarationAccessibilite')}</a>` : '', lParams.liensEvitement.clickPlanSite ? `<a class="evitement" tabindex="0" ie-node="nodePlanSite">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite')}</a>` : '');
                }
                H.push('<div class="ibe_gauche">');
                const lImageCollectiviteDepartement = lParams.logoCollectiviteImage || lParams.logoDepartementImage;
                if (!!lImageCollectiviteDepartement) {
                    let lLienCollectiviteDepartement = lParams.logoDepartementLien;
                    if (lParams.logoCollectiviteLien && lParams.logoCollectiviteImage) {
                        lLienCollectiviteDepartement = lParams.logoCollectiviteLien;
                    }
                    H.push('<a ', (!!lLienCollectiviteDepartement ? 'href="' + lLienCollectiviteDepartement + '"' : ''), ' target="_blank" class="ibe_image_dep" ', (!!lParams.logoDepartementLien ? 'title="' + ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.AccederSiteDepartement') + '"' : ''), '>', '<img src="', lImageCollectiviteDepartement, '" alt="', ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LogoDepartement'), '" onerror="$(this).parent().remove();" ie-node="getNodeImage" />', '</a>');
                }
                if (lParams.urlLogoEtab) {
                    H.push('<div ie-node="getNodeNomEtab" class="ibe_image_etab', (lParams.clickEtab ? ' ibe_actif' : ''), '" role="presentation">', `<img src="${lParams.urlLogoEtab}" alt="${ObjetTraduction_1.GTraductions.getValeur('BandeauEspace.LogoEtablissement')}" onerror="$(this).remove();" ie-node="getNodeImage" />`, '</div>');
                }
                H.push('</div>');
                H.push('<div class="ibe_centre" ie-node="getNodeCentre"', (lParams.getObjetSelecteurMembre || (lParams.getObjetNotification && !lParams.iconesADroite) ? '' : ' style="overflow:hidden;"'), '>');
                if (lParams.photo) {
                    H.push('<div class="ibe_util_photo', (lParams.clickUtilisateur ? ' ibe_actif' : ''), '" ie-if="util.avecPhoto" ie-html="util.getHtmlPhoto" ie-node="util.getNodeUtil" ', lParams.attrUtil, lParams.ariaLabelUtil ? ObjetWAI_1.GObjetWAI.composeAttribut({
                        genre: ObjetWAI_1.EGenreAttribut.label,
                        valeur: lParams.ariaLabelUtil
                    }) : '', ' aria-hidden="true"></div>');
                }
                H.push('<div class="ibe_etab_util">', lParams.nomEtab || lParams.avecFicheEtablissement ? ['<div class="AvecMain ibe_etab_cont" ie-node="nodeEtablissement">', '<div ', (lParams.nomEtab ? 'ie-node="getNodeNomEtab" class="ibe_etab' + (lParams.clickEtab ? ' ibe_actif' : '') + '"' : ''), '>', (lParams.avecFicheEtablissement ? '<ie-btnimage class="icon_uniF2C3 btnImageIcon InlineBlock EspaceDroit AvecMain" title="' + ObjetTraduction_1.GTraductions.getValeur('FicheEtablissement.ContacterEtablissement') + '"></ie-btnimage>' : ''), lParams.nomEtab, '</div>', '</div>'].join('') : '', '<div class="ibe_util" ie-if="util.avecUtil">', '<div class="ibe_util_texte', (lParams.clickUtilisateur && !lParams.isEDT ? ' ibe_actif' : ''), '" ie-html="util.getHtmlUtil" ie-node="util.getNodeUtil" tabindex="0" ie-attr="util.getAttrUtil" ', lParams.attrUtil, '></div>', lParams.iconesADroite ? '' : _construireIcones.call(this, lParams), '</div>', '</div>');
                if (lParams.getObjetSelecteurMembre) {
                    H.push('<div ie-identite="getObjetSelecteurMembre"></div>');
                }
                if (lParams.htmlBoutonFicheEleve) {
                    H.push('<div class="m-left-l">', lParams.htmlBoutonFicheEleve, '</div>');
                }
                H.push('</div>');
                H.push('<div class="ibe_droite', lParams.iconesADroite ? ' ibe_droite_fixe' : '', '">');
                if (lParams.iconesADroite) {
                    H.push(_construireIcones.call(this, lParams));
                }
                if (lParams.avecLangue && UtilitaireChangementLangue_1.UtilitaireChangementLangue.avecChoixLangues()) {
                    H.push('<div class="ibe_langue">' + UtilitaireChangementLangue_1.UtilitaireChangementLangue.construire(this.controleur, {
                        avecEventFermeture: true
                    }) + '</div>');
                }
                if (lParams.logoProduitCss) {
                    H.push('<div class="ibe_logo">', '<a href="', lParams.logoProduitUrl, '" target="_blank" class="ibe_logo_image ', lParams.logoProduitCss, '" title="' + lParams.labelLienProduit + '">', '<span class="sr-only">', lParams.labelLienProduit, '</span>', '</a>');
                    H.push('</div>');
                }
                H.push('</div>', '</div>');
                return H.join('');
            }
            focusSurPremierElement() {
                ObjetHtml_1.GHtml.setFocus($('#' + this.Nom.escapeJQ() + ' .ObjetBandeauEspace').get(0));
                clearTimeout(this._timeoutResize);
                this._timeoutResize = setTimeout( () => {
                    this._resize();
                }
                , 100);
            }
            _resize() {
                const lSelec = '#' + this.Nom.escapeJQ();
                const lMaxWidthImage = Math.min(250, Math.round(GNavigateur.clientL * 20 / 100));
                $(lSelec + ' .ibe_image_dep img,' + lSelec + ' .ibe_image_etab img').css('max-width', lMaxWidthImage);
                const lJCentre = $(lSelec + ' .ibe_centre');
                const lRectDroit = ObjetPosition_1.GPosition.getClientRect($(lSelec + ' .ibe_droite').get(0));
                const lWidthGauche = Math.round($(lSelec + ' .ibe_gauche').width() + 5);
                const lWidthDroit = Math.round(lRectDroit.width + 5);
                const lMax = Math.max(IE.estMobile ? 100 : 250, (GNavigateur.clientL - lWidthGauche - lWidthDroit));
                lJCentre.parent().css('justify-content', 'center');
                lJCentre.css({
                    'max-width': lMax + 'px',
                    'margin-left': ''
                });
                const lRectCentre = ObjetPosition_1.GPosition.getClientRect(lJCentre.get(0));
                if (lRectCentre.left < lWidthGauche || lRectCentre.right > lRectDroit.left) {
                    lJCentre.parent().css('justify-content', 'flex-start');
                    lJCentre.css({
                        'margin-left': lWidthGauche
                    });
                }
            }
        }
        exports.ObjetBandeauEspace = ObjetBandeauEspace;
        function _construireIcones(aParams) {
            const H = [];
            if (aParams.htmlBoutonsAvantNotif) {
                H.push(aParams.htmlBoutonsAvantNotif);
            }
            if (aParams.getObjetNotification) {
                H.push('<div ie-identite="getObjetNotification" class="ibe_notification" ie-node="getNodeNotif"></div>');
            }
            if (aParams.getObjetAide) {
                H.push('<div ie-identite="getObjetAide" class="ibe_notification" ie-node="getNodeNotif"></div>');
            }
            if (aParams.htmlBoutons) {
                H.push(aParams.htmlBoutons);
            }
            if (aParams.clickAccesMobile) {
                const lTitleQRCode = ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('Commande.QRCode.Actif'));
                H.push('<div class="ibe_iconebtn ibe_actif" tabindex="0" role="button" ie-node="getNodeAccesMobile" aria-label="', ObjetTraduction_1.GTraductions.getValeur('Commande.QRCode.Actif'), '">', '<i class="icon_qr_code colorFoncee" title="', lTitleQRCode, '" aria-hidden="true"></i>', '</div>');
            }
            if (aParams.clickDeconnexion && !aParams.isEDT) {
                const lTitleDeconnexion = ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('connexion.SeDeconnecter'));
                H.push('<div class="ibe_iconebtn ibe_actif" tabindex="0" role="button" ie-node="getNodeDeconnexion" aria-label="', ObjetTraduction_1.GTraductions.getValeur('connexion.SeDeconnecter'), '">', '<i class="icon_off colorFoncee" title="', lTitleDeconnexion, '" aria-hidden="true"></i>', '</div>');
            }
            return H.join('');
        }
    },
    fn: 'objetbandeauespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_MentionsLegales = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetHtml_1 = require("ObjetHtml");
        class ObjetFenetre_MentionsLegales extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.idContenu = this.getNom() + '_Contenu';
                this.setOptionsFenetre({
                    largeur: 450,
                    hauteur: 320,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')]
                });
            }
            composerContenu(aParametres) {
                const H = [];
                H.push(IE.jsx.str("p", {
                    class: "ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.adresseEtablissement')));
                H.push(aParametres.adresseEtablissement && IE.jsx.str("p", null, aParametres.adresseEtablissement));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.formeJuridique')));
                H.push(aParametres.formeJuridique && IE.jsx.str("p", null, aParametres.formeJuridique));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.hebergeur')));
                H.push(aParametres.hebergeur && IE.jsx.str("p", null, aParametres.hebergeur));
                H.push(IE.jsx.str("p", {
                    class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.responsablePublication')));
                H.push(aParametres.responsablePublication && IE.jsx.str("p", null, aParametres.responsablePublication));
                if (!!aParametres.informationsComplementaires) {
                    H.push(IE.jsx.str("p", {
                        class: "GrandEspaceHaut ie-titre-petit PetitEspaceBas"
                    }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.informationsComplementaires')));
                    H.push(aParametres.informationsComplementaires);
                }
                H.push(IE.jsx.str("h2", {
                    class: "ie-titre m-top-xxl m-bottom-xl"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.utilisationCookie')));
                H.push(IE.jsx.str("p", null, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.informationCookie', [GApplication.nomProduit]), " ", ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.informationCookieSuite', [GApplication.nomProduit])));
                H.push(IE.jsx.str("p", {
                    class: "m-y"
                }, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.utilisationCookieTitre')));
                H.push(IE.jsx.str("ul", {
                    class: "dot m-left xl"
                }, IE.jsx.str("li", null, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.utilisationCookieCASTGC')), IE.jsx.str("li", null, ObjetTraduction_1.GTraductions.getValeur('FenetreMentionsLegales.utilisationCookieLang'))));
                return H.join('');
            }
            setDonnees(aParam) {
                ObjetHtml_1.GHtml.setHtml(this.idContenu, this.composerContenu(aParam));
                this.afficher();
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.idContenu
                });
            }
            surValidation() {
                this.fermer();
            }
        }
        exports.ObjetFenetre_MentionsLegales = ObjetFenetre_MentionsLegales;
    },
    fn: 'objetfenetre_mentionslegales.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteMentionsLegales = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteMentionsLegales extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteMentionsLegales = ObjetRequeteMentionsLegales;
        CollectionRequetes_1.Requetes.inscrire('MentionsLegales', ObjetRequeteMentionsLegales);
    },
    fn: 'objetrequetementionslegales.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_PlanSite = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const Invocateur_1 = require("Invocateur");
        const MethodesObjet_1 = require("MethodesObjet");
        const jsx_1 = require("jsx");
        class ObjetFenetre_PlanSite extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    largeur: 450,
                    hauteur: 320,
                    hauteurMaxContenu: 720,
                    avecScroll: true,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Fermer')]
                });
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    naviguerVers(aGenreOnglet) {
                        $(this.node).eventValidation( () => {
                            Invocateur_1.Invocateur.evenement(Invocateur_1.ObjetInvocateur.events.navigationOnglet, aGenreOnglet);
                        }
                        );
                    }
                });
            }
            setDonnees() {
                this.afficher();
            }
            composeContenu() {
                return IE.jsx.str("ul", {
                    class: "browser-default"
                }, (H) => {
                    const lTabOnglet = this.getTabOngletsVisibles();
                    lTabOnglet.parcourir(aOnglet => {
                        H.push(this._ajouterLigne(aOnglet, (aOnglet.sousOnglets && aOnglet.sousOnglets.count() === 0)));
                    }
                    );
                }
                );
            }
            getTabOngletsVisibles() {
                const lListeOnglet = new ObjetListeElements_1.ObjetListeElements();
                GEtatUtilisateur.listeOnglets.parcourir(aOnglet => {
                    const lOnglet = MethodesObjet_1.MethodesObjet.dupliquer(aOnglet);
                    if (lOnglet.Actif && (lOnglet.estUnOnglet || lOnglet.profondeur === 0)) {
                        lOnglet.sousOnglets = new ObjetListeElements_1.ObjetListeElements();
                        lOnglet.sousOnglets = GEtatUtilisateur.listeOnglets.getListeElements(aElement => {
                            if (aElement.Actif && aElement.onglet) {
                                return lOnglet.getGenre() === aElement.onglet.getGenre();
                            }
                            return false;
                        }
                        );
                        lOnglet.sousOnglets.parcourir(aSousOnglet => {
                            if (aSousOnglet.avecSousOnglet) {
                                aSousOnglet.sousOnglets = new ObjetListeElements_1.ObjetListeElements();
                                aSousOnglet.sousOnglets = GEtatUtilisateur.listeOnglets.getListeElements(aSousElement => {
                                    if (aSousElement.Actif && aSousElement.onglet) {
                                        return aSousOnglet.getGenre() === aSousElement.onglet.getGenre();
                                    }
                                    return false;
                                }
                                );
                            }
                        }
                        );
                        lListeOnglet.add(lOnglet);
                    }
                }
                );
                return lListeOnglet;
            }
            surValidation() {
                this.fermer();
            }
            _ajouterPere(aOnglet) {
                if (aOnglet.sousOnglets && aOnglet.sousOnglets.count() > 0) {
                    return IE.jsx.str("ul", {
                        class: "browser-default"
                    }, (aTab) => {
                        aOnglet.sousOnglets.parcourir( (aSousOnglet) => {
                            aTab.push(this._ajouterLigne(aSousOnglet, (!aSousOnglet.sousOnglets || aSousOnglet.sousOnglets.count() === 0)));
                        }
                        );
                    }
                    );
                }
                return '';
            }
            _ajouterLigne(aOnglet, aAvecLien) {
                if (aAvecLien) {
                    return (IE.jsx.str("li", null, IE.jsx.str("a", {
                        class: "AvecMain",
                        tabindex: "0",
                        "ie-node": (0,
                        jsx_1.jsxFuncAttr)('naviguerVers', aOnglet.getGenre())
                    }, aOnglet.getLibelle()), this._ajouterPere(aOnglet)));
                }
                return (IE.jsx.str("li", null, aOnglet.getLibelle().replace('<br>', ' '), this._ajouterPere(aOnglet)));
            }
        }
        exports.ObjetFenetre_PlanSite = ObjetFenetre_PlanSite;
    },
    fn: 'objetfenetre_plansite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports._ObjetAffichageBandeauPied = void 0;
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const LocalStorage_1 = require("LocalStorage");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetFenetre_MentionsLegales_1 = require("ObjetFenetre_MentionsLegales");
        const ObjetRequeteMentionsLegales_1 = require("ObjetRequeteMentionsLegales");
        const ObjetFenetre_PlanSite_1 = require("ObjetFenetre_PlanSite");
        const ObjetHtml_1 = require("ObjetHtml");
        require('ObjetBandeauPied.css');
        const lCleLocalStorage = 'etatAffichageFooter';
        const lCookieLocalStorage = 'etatAffichageCookiesInfo';
        class _ObjetAffichageBandeauPied extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.etatUtilisateur = global.GEtatUtilisateur;
                this.hauteur = 20;
                this.genreCommande = {
                    twitter: 'twitter',
                    forum: 'forum',
                    videos: 'videos',
                    profil: 'pageprofil'
                };
                this.options = {
                    mention: '',
                    siteIndex: 'https://www.index-education.com',
                    urlInfosHebergement: '',
                    logoProduitCss: '',
                    estHebergeEnFrance: '',
                    avecBoutonMasquer: true,
                    urlDeclarationAccessibilite: ''
                };
            }
            actionSurMentionsLegales(aParams) {
                let lFenetreMentionsLegales = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_MentionsLegales_1.ObjetFenetre_MentionsLegales, {
                    pere: this,
                    initialiser: function() {}
                });
                lFenetreMentionsLegales.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('PiedPage.mentionsLegales')
                });
                lFenetreMentionsLegales.setDonnees(aParams);
            }
            actionSurPlanSite() {
                let lFenetrePlanSite = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_PlanSite_1.ObjetFenetre_PlanSite, {
                    pere: this,
                    initialiser: function(aInstance) {
                        aInstance.setOptionsFenetre({
                            titre: ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite')
                        });
                    }
                });
                lFenetrePlanSite.setDonnees();
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    btnPied: {
                        event: function(aGenre) {
                            aInstance.evenementBouton({
                                genreCmd: aGenre
                            });
                        }
                    },
                    btnFermer: function() {
                        $(this.node).eventValidation(function() {
                            let lGenreEspace = aInstance.etatUtilisateur ? '_' + aInstance.etatUtilisateur.GenreEspace : '';
                            LocalStorage_1.IELocalStorage.setItem(lCookieLocalStorage + lGenreEspace, String(false));
                            $(this).parent().hide();
                        });
                    },
                    btnMention: function() {
                        $(this.node).eventValidation( () => {
                            let lRequete = new ObjetRequeteMentionsLegales_1.ObjetRequeteMentionsLegales(aInstance,aInstance.actionSurMentionsLegales);
                            lRequete.lancerRequete();
                        }
                        );
                    },
                    btnPlanSite: function() {
                        $(this.node).eventValidation( () => {
                            aInstance.actionSurPlanSite();
                        }
                        );
                    },
                    nodePied: function(aGenre) {
                        $(this.node).eventValidation( () => {
                            aInstance.evenementBouton({
                                genreCmd: aGenre
                            });
                        }
                        );
                    },
                    showPied: function() {
                        $(this.node).eventValidation( () => {
                            if (aInstance.options.avecBoutonMasquer) {
                                aInstance.masquerFooter = !aInstance.masquerFooter;
                                LocalStorage_1.IELocalStorage.setItem(lCleLocalStorage + '_' + aInstance.etatUtilisateur.GenreEspace, String(aInstance.masquerFooter));
                                aInstance.showHideFooter.call(this.node, aInstance.masquerFooter);
                                this.controleur.$refreshSelf();
                            }
                        }
                        );
                    },
                    getAttrShowPied() {
                        return {
                            title: $('.footer-wrapper').hasClass('opened') ? ObjetTraduction_1.GTraductions.getValeur('PiedPage.btnMasquer') : ObjetTraduction_1.GTraductions.getValeur('PiedPage.btnAfficher')
                        };
                    },
                    getAttrFooter() {
                        return {
                            'aria-expanded': $('.footer-wrapper').hasClass('opened')
                        };
                    }
                });
            }
            avecTwitter() {
                return false;
            }
            avecPlanSite() {
                return false;
            }
            avecBoutonAccesProfil() {
                return false;
            }
            avecBoutonPersonnaliseProduit() {
                return false;
            }
            avecBoutonPageEtablissement() {
                return false;
            }
            espacesISO27001() {
                return false;
            }
            composeCookiesInfo() {
                const H = [];
                H.push(`<div class="cookies-disclaimer">`);
                H.push(`<p>${ObjetTraduction_1.GTraductions.getValeur('PiedPage.CookieInfo_Message_1')} ${ObjetTraduction_1.GTraductions.getValeur('PiedPage.CookieInfo_Message_2')} <span role="button" tabindex="0" class="as-link" ie-node="btnMention" aria-haspopup="dialog">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.mentionsLegales')}.</span></p>`);
                H.push(`<ie-bouton tabindex="0" aria-label="${ObjetTraduction_1.GTraductions.getValeur('Fermer')}" ie-hint="${ObjetTraduction_1.GTraductions.getValeur('Fermer')}" ie-node="btnFermer">${ObjetTraduction_1.GTraductions.getValeur('Fermer')}</ie-bouton>`);
                H.push(`</div>`);
                return H.join('');
            }
            evenementBouton(aParam, aGenreBouton) {
                if (aGenreBouton !== 1) {
                    this.callback.appel(aParam);
                }
            }
            setDonnees(aParam) {
                if (!!aParam) {
                    this.setOptions(aParam);
                }
                this.afficher(this.composePage());
            }
            composePage() {
                const lHtml = [];
                this.masquerFooter = this.masquerBandeauPied();
                if (this.afficherCookieInfo() && !GApplication.getDemo()) {
                    lHtml.push(this.composeCookiesInfo());
                }
                lHtml.push(this._composeAffichage());
                return lHtml.join('');
            }
            showHideFooter(aMasquerPied) {
                const lParentContainer = $(this).closest('.interface_affV');
                const lFooterWrapper = lParentContainer.find('.footer-wrapper');
                if (aMasquerPied) {
                    lFooterWrapper.toggleClass('opened closed');
                    lParentContainer.removeClass('with-footer').addClass('no-footer');
                    ObjetHtml_1.GHtml.getElementsFocusablesDElement(lFooterWrapper.get(0)).forEach( (aNode, aIndex) => {
                        if (aIndex > 0) {
                            $(aNode).attr('tabindex', -1);
                        }
                    }
                    );
                } else {
                    lFooterWrapper.toggleClass('closed opened');
                    lParentContainer.removeClass('no-footer').addClass('with-footer');
                    ObjetHtml_1.GHtml.getElementsFocusablesDElement(lFooterWrapper.get(0)).forEach( (aNode, aIndex) => {
                        if (aIndex > 0) {
                            $(aNode).attr('tabindex', 0);
                        }
                    }
                    );
                }
                $(window).resize();
            }
            masquerBandeauPied() {
                return this.options.avecBoutonMasquer ? (LocalStorage_1.IELocalStorage.getItem(lCleLocalStorage + '_' + this.etatUtilisateur.GenreEspace) === 'true') : false;
            }
            afficherCookieInfo() {
                let lGenreEspace = this.etatUtilisateur !== undefined ? '_' + this.etatUtilisateur.GenreEspace : '';
                LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace) === null ? LocalStorage_1.IELocalStorage.setItem(lCookieLocalStorage + lGenreEspace, String(true)) : LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace);
                return LocalStorage_1.IELocalStorage.getItem(lCookieLocalStorage + lGenreEspace) === 'true';
            }
            _composeAffichage() {
                const H = [];
                H.push('<footer id="', this.Nom, '_footer" class="ObjetBandeauPied disable-dark-mode ' + (this.avecBoutonPersonnaliseProduit() ? ' bpp-canope' : '') + '"  ie-attr="getAttrFooter">');
                if (this.options.avecBoutonMasquer) {
                    H.push(IE.jsx.str("div", {
                        tabindex: "0",
                        role: "button",
                        class: "footer-toggler icon_angle_down",
                        "ie-node": "showPied()",
                        "ie-attr": "getAttrShowPied",
                        title: ObjetTraduction_1.GTraductions.getValeur('PiedPage.btnMasquer')
                    }));
                }
                const lAvecLibelleHeberge = this.options.siteIndex && this.options.estHebergeEnFrance;
                H.push('<div class="ibp-bloc-left' + (!lAvecLibelleHeberge ? ' bloc-unique' : '') + '">');
                if (this.avecTwitter()) {
                    H.push('<ie-btnimage ie-model="btnPied(' + this.getCommande(this.genreCommande.twitter) + ')" class="icon_twitter btnImageIcon ibp-command" title="' + ObjetTraduction_1.GTraductions.getValeur('Commande.SuivrePronoteTwitter.Actif') + '">' + '</ie-btnimage>', '<hr />');
                }
                if (this.options.mention) {
                    H.push('<div role="button" tabindex="0" class="ibp-command legal-notice" ie-node="btnMention">', ObjetTraduction_1.GTraductions.getValeur('PiedPage.mentionsLegales'), '</div>');
                    H.push('<hr />');
                }
                if (this.options.urlDeclarationAccessibilite) {
                    H.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("a", {
                        class: "accessibilite",
                        href: this.options.urlDeclarationAccessibilite
                    }, ObjetTraduction_1.GTraductions.getValeur(this.options.accessibiliteNonConforme ? 'PiedPage.AccessibiliteNonConformite' : 'PiedPage.AccessibiliteConformite')), IE.jsx.str("hr", null)));
                }
                if (this.avecPlanSite()) {
                    H.push('<div role="button" tabindex="0" class="ibp-command site-map" ie-node="btnPlanSite">', ObjetTraduction_1.GTraductions.getValeur('PiedPage.planSite'), '</div>');
                    if (lAvecLibelleHeberge) {
                        H.push('<hr />');
                    }
                }
                H.push('</div>');
                if (lAvecLibelleHeberge) {
                    const lOnClic = GNavigateur.isIOS ? '' : `onclick="window.open ('${this.options.urlInfosHebergement}');" onkeyup="if(GNavigateur.isToucheSelection())window.open ('${this.options.urlInfosHebergement}');"`;
                    H.push(`<div role="link" tabindex="0" class="host-france-container ibp-command" ${lOnClic}>`, (this.espacesISO27001() ? '<span class="certif-27001">' + ObjetTraduction_1.GTraductions.getValeur('PiedPage.certifISO27001') + '</span>' : ''), '<span class="host-text">', ObjetTraduction_1.GTraductions.getValeur('PiedPage.hebergementDonneesFrance'), '</span>', '<hr />', '<span class="logo-index-inverse" aria-hidden="true"></span>', `<div class="flex-contain cols text-start">${ObjetTraduction_1.GTraductions.getValeur('PiedPage.IndexEducation')}</div>`, '</div>');
                }
                H.push('<div class="knowledge-container">');
                if (this.avecBoutonPersonnaliseProduit()) {
                    H.push(this.composeBoutonPersonnaliseProduit());
                }
                if (this.avecBoutonAccesProfil()) {
                    H.push(this.composeBoutonAccesProfil());
                }
                if (this.avecBoutonPageEtablissement()) {
                    H.push(this.composeBoutonPageEtablissement());
                }
                H.push('</div>');
                H.push('</footer>');
                return H.join('');
            }
        }
        exports._ObjetAffichageBandeauPied = _ObjetAffichageBandeauPied;
    },
    fn: '_interfacebandeaupied.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.InterfaceBandeauPiedCommune = void 0;
        const _InterfaceBandeauPied_1 = require("_InterfaceBandeauPied");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireRedirection_1 = require("UtilitaireRedirection");
        class InterfaceBandeauPiedCommune extends _InterfaceBandeauPied_1._ObjetAffichageBandeauPied {
            constructor(...aParams) {
                super(...aParams);
                const lGParametres = GParametres;
                this.options = {
                    mention: lGParametres.publierMentions,
                    siteIndex: lGParametres.urlSiteIndexEducation || 'https://www.index-education.com',
                    urlInfosHebergement: lGParametres.urlInfosHebergement,
                    logoProduitCss: lGParametres.logoProduitCss || '',
                    estHebergeEnFrance: lGParametres.estHebergeEnFrance,
                    avecBoutonMasquer: false,
                    pageEtablissement: lGParametres.PageEtablissement || '',
                    urlDeclarationAccessibilite: lGParametres.urlDeclarationAccessibilite,
                    accessibiliteNonConforme: lGParametres.accessibiliteNonConforme
                };
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    nodePageEtab: function() {
                        $(this.node).eventValidation( () => {
                            let lUrl = window.location.href.split('/');
                            lUrl.pop();
                            lUrl = lUrl.join('/') + '/';
                            window.open(lUrl + aInstance.options.pageEtablissement + new UtilitaireRedirection_1.UtilitaireRedirection().getParametresUrl());
                        }
                        );
                    }
                });
            }
            construireAffichage() {
                return this.composePage();
            }
            getCommande() {
                return false;
            }
            evenementBouton(aParam, aGenreBouton) {
                return super.evenementBouton(aParam, aGenreBouton);
            }
            avecTwitter() {
                return false;
            }
            avecBoutonAideContextuelle() {
                return false;
            }
            avecBoutonAccesProfil() {
                return false;
            }
            composeBoutonAccesProfil() {
                const H = [];
                return H.join('');
            }
            avecBoutonPersonnaliseProduit() {
                return false;
            }
            composeBoutonPersonnaliseProduit() {
                const H = [];
                return H.join('');
            }
            avecBoutonPageEtablissement() {
                return !!this.options.pageEtablissement;
            }
            composeBoutonPageEtablissement() {
                const H = [];
                H.push('<div tabindex="0" role="button" class="ibp-pill icon_ecole" aria-label="', ObjetTraduction_1.GTraductions.getValeur('PiedPage.PageEtablissement'), '" ie-node="nodePageEtab" ie-hint="', ObjetTraduction_1.GTraductions.getValeur('PiedPage.PageEtablissement'), '"><p class="help-text">', ObjetTraduction_1.GTraductions.getValeur('PiedPage.PageEtablissement'), '</p></a></div>');
                return H.join('');
            }
            espacesISO27001() {
                return true;
            }
        }
        exports.InterfaceBandeauPiedCommune = InterfaceBandeauPiedCommune;
    },
    fn: 'interfacebandeaupiedcommune.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetChoixStrategieSecurisation = void 0;
        require('ObjetChoixStrategieSecurisation.css');
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const jsx_1 = require("jsx");
        class ObjetChoixStrategieSecurisation extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.options = {
                    modeAffichage: ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur,
                    modesPossibles: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    modeSecurisationParDefaut: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN,
                    callbackChoix: null
                };
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    rbChoixStrat: {
                        getValue: function(aGenre) {
                            if (aInstance.donnees.mode === aGenre) {
                                return true;
                            }
                            const lModesPossibles = aInstance.options.modesPossibles;
                            switch (aGenre) {
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                                return (aInstance.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi || (!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement) && !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive)));
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                                return ((!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi].indexOf(aInstance.donnees.mode) >= 0) || (!lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive) && aInstance.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive));
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                                return !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && !lModesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement);
                            }
                            return false;
                        },
                        setValue: function(aGenre) {
                            aInstance.options.callbackChoix(aGenre);
                        },
                        getDisabled: aInstance._getDisabled.bind(aInstance)
                    },
                    btnPIN: {
                        event: function() {
                            aInstance.options.callbackChoix(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, true);
                        },
                        getDisabled: function() {
                            return aInstance.donnees.mode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN || aInstance._getDisabled();
                        }
                    },
                    getClassRegles(aGenre) {
                        return aInstance.donnees.mode !== aGenre ? 'sr-only' : '';
                    }
                });
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
                this.afficher(this._construire());
            }
            _getDisabled() {
                var _a, _b;
                return !!this.donnees.nonEditable || ((_b = (_a = this.options).getDisabled) === null || _b === void 0 ? void 0 : _b.call(_a));
            }
            _construire() {
                const lIdDescrFort = `${this.Nom}_descr_f`;
                const lIdDescrMoyen = `${this.Nom}_descr_m`;
                return (IE.jsx.str("div", {
                    class: ['ObjetChoixStrategieSecurisation', this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? 'css-affichage-pref' : '']
                }, IE.jsx.str("fieldset", {
                    class: "m-bottom-l"
                }, IE.jsx.str("legend", null, this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LegendeStrategieCompte') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LegendeStrategie')), IE.jsx.str("div", {
                    class: "css_Choix"
                }, (H) => {
                    TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentificationUtil.getOrdreModeDoubleAuth(this.options.modeSecurisationParDefaut).forEach( (aMode) => {
                        switch (aMode) {
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN]),
                                    "aria-describedby": lIdDescrFort
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("span", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.StrategieFort'))))));
                            }
                            break;
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement]),
                                    "aria-describedby": lIdDescrMoyen
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, IE.jsx.str("i", {
                                    class: "icon_star",
                                    role: "presentation"
                                }), IE.jsx.str("span", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.StrategieMoyen'))))));
                            }
                            break;
                        case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                            if (this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive)) {
                                H.push(IE.jsx.str("div", {
                                    class: "choix"
                                }, IE.jsx.str("ie-radio", {
                                    class: "css_rbMode as-chips",
                                    "ie-model": (0,
                                    jsx_1.jsxFuncAttr)('rbChoixStrat', [TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive])
                                }, IE.jsx.str("span", {
                                    class: "choix-int"
                                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.StrategieAucun')))));
                            }
                            break;
                        default:
                            ;
                        }
                    }
                    );
                }
                )), IE.jsx.str("div", {
                    class: "css-regles"
                }, this.construireRegles(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN, lIdDescrFort), this.construireRegles(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement, lIdDescrMoyen)), this.options.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN) && this.options.modeAffichage === ObjetChoixStrategieSecurisation.typeAffichage.prefUtilisateur ? (IE.jsx.str("div", {
                    class: "css_btnPin"
                }, IE.jsx.str("ie-bouton", {
                    "ie-model": "btnPIN",
                    "aria-haspopup": "dialog"
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.RenforcerButtonModifier')))) : '', IE.jsx.str("ie-chips", {
                    href: GParametres.urlTutoVideoSecurite,
                    target: "_blank",
                    class: "css_lienVideo iconic icon_question_sign"
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnSavoirPlus'))));
            }
            construireRegles(aMode, aId) {
                return (IE.jsx.str("div", {
                    id: aId,
                    "ie-class": (0,
                    jsx_1.jsxFuncAttr)('getClassRegles', aMode)
                }, IE.jsx.str("span", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LegendeChoixStratTitre'), " :"), IE.jsx.str("ul", null, aMode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN ? '' : IE.jsx.str("li", null, IE.jsx.str("i", {
                    class: "icon_ok ico-green m-right",
                    role: "presentation"
                }), ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LegendeChoixStratPIN')), IE.jsx.str("li", null, IE.jsx.str("i", {
                    class: "icon_ok ico-green m-right",
                    role: "presentation"
                }), ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LegendeChoixStratNotif')))));
            }
        }
        exports.ObjetChoixStrategieSecurisation = ObjetChoixStrategieSecurisation;
        ObjetChoixStrategieSecurisation.typeAffichage = {
            prefUtilisateur: 'prefUtilisateur',
            securisation: 'securisation'
        };
    },
    fn: 'objetchoixstrategiesecurisation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisieCodePIN = void 0;
        require('ObjetSaisieCodePIN.css');
        const ObjetIdentite_1 = require("ObjetIdentite");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const SecurisationCompte = require("TypeSecurisationCompte");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const jsx_1 = require("jsx");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ToucheClavier_1 = require("ToucheClavier");
        var TypeEtape;
        (function(TypeEtape) {
            TypeEtape["val"] = "val";
            TypeEtape["confirm"] = "confirm";
            TypeEtape["controlePINOuReinit"] = "controlePINOuReinit";
            TypeEtape["finValidation"] = "finValidation";
        }
        )(TypeEtape || (TypeEtape = {}));
        const C_ReinitPINLength = 6;
        class ObjetSaisieCodePIN extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.options = {
                    classeRequete: null,
                    modePIN: ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN,
                    avecReinitPIN: false,
                    emailOcculte: ''
                };
                this.codePin = {};
                this._init();
                this.Actif = true;
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    avecBoutons(aEtape) {
                        return aInstance.codePin.etapeConfirmation === aEtape;
                    },
                    btnVal: {
                        event(aVal, aEtape) {
                            switch (aEtape) {
                            case TypeEtape.val:
                                aInstance.codePin.val += aVal;
                                break;
                            case TypeEtape.confirm:
                                aInstance.codePin.confirm += aVal;
                                break;
                            case TypeEtape.controlePINOuReinit:
                                {
                                    aInstance.codePin.valControlePIN += aVal;
                                    break;
                                }
                            default:
                                ;
                            }
                            const lNb = aInstance.getNbPIN(aEtape);
                            if (lNb > 0 && aInstance.getCodePINDEtape(aEtape).length >= lNb) {
                                if (aInstance._getDisabled(aEtape)) {
                                    return;
                                }
                                aInstance._surValider();
                            }
                        },
                        node(aVal, aEtape) {
                            $(this.node).on('keyup', function(aEvent) {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.Backspace) {
                                    aInstance.clearBtn(aEtape);
                                    aInstance.$refreshSelf();
                                }
                            });
                        },
                        getDisabled(aVal, aEtape) {
                            return aInstance._getDisabled(aEtape);
                        }
                    },
                    btnClear: {
                        event(aEtape) {
                            aInstance.clearBtn(aEtape);
                        },
                        getDisabled(aEtape) {
                            return aInstance._getDisabled(aEtape, true);
                        }
                    },
                    btnValider: {
                        event(aEtape) {
                            aInstance._surValider();
                        },
                        getDisabled(aEtape) {
                            if (aInstance._getDisabled(aEtape)) {
                                return true;
                            }
                            if (aInstance.getCodePINDEtape(aEtape).length < SecurisationCompte.C_MinPinLength) {
                                return true;
                            }
                            return false;
                        }
                    },
                    btnPINOubli: {
                        async event() {
                            const lJSONReponse = await new (aInstance.options.classeRequete)(aInstance).lancerRequete({
                                action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_DemandeReinitialisationPIN
                            });
                            if (!lJSONReponse.ok) {
                                return;
                            }
                            await GApplication.getMessage().afficher({
                                message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EMailReinitialisationPIN_S', [aInstance.options.emailOcculte])
                            });
                            const lResultFenetre = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_ReinitPIN, {
                                pere: this
                            }).afficher(aInstance.options.emailOcculte);
                            if (lResultFenetre && lResultFenetre.resultReinitPIN) {
                                if (lResultFenetre.resultReinitPIN.reinitPIN_OK) {
                                    aInstance.callback.appel(lResultFenetre.resultReinitPIN);
                                }
                            }
                        }
                    },
                    getHtmlMessagePin: function() {
                        return aInstance._construireMessagePINVerification();
                    },
                    getClassContVisuPIN(aEtape) {
                        return aInstance.codePin.etapeConfirmation !== aEtape ? 'disabled' : '';
                    },
                    getClassVisuPIN(aEtape) {
                        return aInstance.codePin.etapeConfirmation === aEtape ? 'active' : '';
                    },
                    getHtmlVisuPIN(aEtape, aNbPIN) {
                        let lNbSaisie = aInstance.getCodePINDEtape(aEtape).length;
                        if (aNbPIN > 0) {
                            let lResult = '';
                            for (let lNb = 0; lNb < aNbPIN; lNb++) {
                                lResult += (IE.jsx.str("span", {
                                    class: "scp-PIN"
                                }, IE.jsx.str("i", {
                                    class: ['icon_rond', lNb >= lNbSaisie ? 'hide' : ''],
                                    role: "presentation"
                                })));
                            }
                            return lResult;
                        } else {
                            if (lNbSaisie > 0) {
                                let lResult = '';
                                for (let lNb = 0; lNb < lNbSaisie; lNb++) {
                                    lResult += IE.jsx.str("i", {
                                        class: "icon_rond",
                                        role: "presentation"
                                    });
                                }
                                return lResult;
                            }
                            return IE.jsx.str("i", {
                                class: "icon_rond hide",
                                role: "presentation"
                            });
                        }
                    },
                    getHtmlAlertControleInitialPIN() {
                        if (aInstance.codePin.saisiePinVerifie) {
                            switch (aInstance.options.modePIN) {
                            case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                                return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_CodeReinitValide');
                            case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                                return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_MonCodeValide');
                            default:
                                ;
                            }
                        }
                        return '';
                    }
                });
            }
            setDonnees(aDonnees) {
                this.donnees = aDonnees;
                this._init();
                this.codePin.valControlePIN = '';
                if (this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN || this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN) {
                    this.codePin.etapeConfirmation = TypeEtape.controlePINOuReinit;
                }
                this.afficher(this._construire());
            }
            surValider() {
                this._surValider(true);
            }
            clearBtn(aEtape) {
                if (aEtape === TypeEtape.controlePINOuReinit) {
                    this._init(true);
                } else {
                    const lEtape = this.codePin.etapeConfirmation;
                    this._init();
                    if (this.codePin.etapeConfirmation !== lEtape) {
                        this.focusSurClavierVisible();
                    }
                }
            }
            _init(aInitPourReinit=false) {
                if (aInitPourReinit) {
                    Object.assign(this.codePin, {
                        valControlePIN: '',
                        etapeConfirmation: TypeEtape.controlePINOuReinit,
                        saisiePinVerifie: false
                    });
                } else {
                    Object.assign(this.codePin, {
                        val: '',
                        confirm: '',
                        etapeConfirmation: TypeEtape.val,
                        saisiePinVerifie: false
                    });
                    this.callback.appel(null);
                }
            }
            getCodePINDEtape(aEtape) {
                switch (aEtape) {
                case TypeEtape.val:
                    return this.codePin.val;
                case TypeEtape.confirm:
                    return this.codePin.confirm;
                case TypeEtape.controlePINOuReinit:
                    return this.codePin.valControlePIN;
                }
                ;return '';
            }
            _construireMessagePINVerification() {
                if (this.codePin.saisiePinVerifie) {
                    return [IE.jsx.str("i", {
                        class: "icon_ok",
                        role: "presentation"
                    }), ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ValiderCodeValide')].join('');
                }
                if (this.codePin.nbEchecVerifie > 0) {
                    const H = [];
                    if (this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry) {
                        H.push(ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ValiderCodePinInvalide'));
                    } else {
                        H.push(IE.jsx.str("i", {
                            class: "icon_remove",
                            role: "presentation"
                        }), ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NouvelAppareilTentatives', [SecurisationCompte.C_MaxPinRetry - this.codePin.nbEchecVerifie]));
                    }
                    return H.join('');
                }
            }
            async _surValider(aAppelValiderExterne) {
                const lEstControleReInitPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN && this.codePin.etapeConfirmation === TypeEtape.controlePINOuReinit;
                const lEstControleAncienPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN && this.codePin.etapeConfirmation === TypeEtape.controlePINOuReinit;
                if (this.options.modePIN !== ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && !lEstControleReInitPIN && !lEstControleAncienPIN) {
                    if (this.codePin.etapeConfirmation === TypeEtape.val) {
                        if (this.getNbPIN(TypeEtape.val) === 0 && this.codePin.val.length < SecurisationCompte.C_MinPinLength) {
                            await GApplication.getMessage().afficher({
                                message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.PinInsuffisant', [SecurisationCompte.C_MinPinLength])
                            });
                            return;
                        }
                        this.codePin.etapeConfirmation = TypeEtape.confirm;
                        await this.focusSurClavierVisible();
                        return;
                    }
                    if (this.codePin.etapeConfirmation === TypeEtape.confirm) {
                        if (this.codePin.val !== this.codePin.confirm) {
                            this.codePin.confirm = '';
                            await GApplication.getMessage().afficher({
                                message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.PinNonConfirme')
                            });
                            return;
                        }
                        this.codePin.etapeConfirmation = TypeEtape.finValidation;
                    }
                }
                if (this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN || lEstControleReInitPIN || lEstControleAncienPIN) {
                    const lValPIN = lEstControleReInitPIN || lEstControleAncienPIN ? this.codePin.valControlePIN : this.codePin.val;
                    if (aAppelValiderExterne && !lValPIN) {
                        await GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.InfoSaisiePIN')
                        });
                        return;
                    }
                    const lReponseJSON = await new (this.options.classeRequete)(this).lancerRequete({
                        action: lEstControleReInitPIN ? TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierCodeReinitialisationPIN : TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierPIN,
                        codePin: lValPIN
                    });
                    try {
                        if (lReponseJSON && lReponseJSON.result) {
                            this.codePin.saisiePinVerifie = true;
                            if (lEstControleReInitPIN || lEstControleAncienPIN) {
                                this.callback.appel({
                                    codePINVerifReinit: lValPIN
                                });
                                this.codePin.etapeConfirmation = TypeEtape.val;
                                await this.focusSurClavierVisible();
                                return;
                            } else {
                                this.callback.appel({
                                    codePin: lValPIN
                                }, aAppelValiderExterne);
                            }
                        } else {
                            throw new Error('echec securisation');
                        }
                    } catch (e) {
                        this._init(lEstControleReInitPIN || lEstControleAncienPIN);
                        this.codePin.nbEchecVerifie = this.codePin.nbEchecVerifie || 0;
                        this.codePin.nbEchecVerifie += 1;
                        const lAvecDeco = this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry;
                        await GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ValiderCodePinInvalide') + (lAvecDeco ? '' : '<br>' + ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NouvelAppareilTentatives', [SecurisationCompte.C_MaxPinRetry - this.codePin.nbEchecVerifie]))
                        });
                        await this.focusSurClavierVisible();
                        if (lAvecDeco) {
                            return UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexion();
                        }
                    }
                } else {
                    this.callback.appel({
                        codePin: this.codePin.val
                    });
                }
            }
            async focusSurClavierVisible() {
                await this.$refreshSelf();
                $(`#${this.Nom.escapeJQ()} .scp_boutons button`).first().trigger('focus');
            }
            _getDisabled(aEtape, aEstBtnClear) {
                if (!this.Actif) {
                    return true;
                }
                let lDisabled = this.donnees.mode !== TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN;
                if (lDisabled) {
                    this._init();
                    this.$refreshSelf();
                }
                if (this.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && (this.codePin.saisiePinVerifie || this.codePin.nbEchecVerifie >= SecurisationCompte.C_MaxPinRetry)) {
                    lDisabled = true;
                }
                if (aEstBtnClear !== true && this.donnees.mode === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN && this.codePin.etapeConfirmation === TypeEtape.finValidation) {
                    lDisabled = true;
                }
                return lDisabled;
            }
            _construire() {
                const lControlePIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN;
                const lControlerModifierPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN;
                const lReinitPIN = this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN;
                const lIdTitre = `${this.Nom}_titre`;
                let lTitre = '';
                switch (this.options.modePIN) {
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN:
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                    {
                        lTitre = this.options.estAffCompte || lControlerModifierPIN ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NouvelAppareilRenseignerPIN') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ValiderInfoPIN');
                        break;
                    }
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                    lTitre = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ProcedureReInitialisationCodePIN_S', this.options.emailOcculte);
                    break;
                case ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN:
                    lTitre = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.MessageCreationCodePIN');
                    break;
                default:
                    ;
                }
                const lNbPIN_val = this.getNbPIN(TypeEtape.val);
                const lAriaLabelVal = this.getlabelCodePINDEtape(TypeEtape.val) + ' : ' + (lNbPIN_val === 0 ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_SaisiePINEtValider_D', [SecurisationCompte.C_MinPinLength]) : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_SaisiePIN_D', [lNbPIN_val]));
                return (IE.jsx.str("div", {
                    class: "ObjetSaisieCodePIN"
                }, lTitre ? IE.jsx.str("span", {
                    id: lIdTitre
                }, lTitre) : '', IE.jsx.str("div", {
                    class: "scp_zone",
                    role: lTitre ? 'group' : false,
                    "aria-labelledby": lTitre ? lIdTitre : false
                }, () => {
                    if (lReinitPIN || lControlerModifierPIN) {
                        const lAriaLabel = lReinitPIN ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_ProcedureReInitialisationCodePIN_DS', [C_ReinitPINLength, this.options.emailOcculte]) : lNbPIN_val === 0 ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_ControleCodePINCourant') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_ControleCodePINCourantFixe');
                        return (IE.jsx.str("div", {
                            class: "scp-etape",
                            role: "group",
                            "aria-label": lAriaLabel
                        }, this.construireVisuCode(TypeEtape.controlePINOuReinit), this.construireClavier(TypeEtape.controlePINOuReinit), IE.jsx.str("span", {
                            class: "sr-only",
                            role: "alert",
                            "ie-html": "getHtmlAlertControleInitialPIN"
                        })));
                    }
                    return '';
                }
                , IE.jsx.str("div", {
                    class: "scp-etape",
                    role: "group",
                    "aria-label": lAriaLabelVal.trim()
                }, this.construireVisuCode(TypeEtape.val), this.construireClavier(TypeEtape.val), lControlePIN ? IE.jsx.str("div", {
                    "ie-html": "getHtmlMessagePin",
                    class: "scp_messagePin"
                }) : ''), !lControlePIN ? (IE.jsx.str("div", {
                    class: "scp-etape",
                    role: "group",
                    "aria-label": this.getNbPIN(TypeEtape.confirm) === 0 ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_ConfirmPINEtValider') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.WAI_ConfirmPIN')
                }, this.construireVisuCode(TypeEtape.confirm), this.construireClavier(TypeEtape.confirm))) : ''), () => {
                    if (!this.options.avecReinitPIN && lControlePIN) {
                        return IE.jsx.str("p", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NouvelAppareilOubliPIN'));
                    }
                }
                , () => {
                    if (GParametres.urlFAQEnregistrementDoubleAuth && !this.options.estAffCompte && (lControlePIN || this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN)) {
                        return IE.jsx.str("ie-chips", {
                            class: "scp-link-pied iconic icon_question_sign",
                            href: GParametres.urlFAQEnregistrementDoubleAuth
                        }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LienFAQPIN'));
                    }
                }
                ));
            }
            getNbPIN(aEtape) {
                if (aEtape === TypeEtape.controlePINOuReinit && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN) {
                    return C_ReinitPINLength;
                }
                return GEtatUtilisateur.getCodePINFixe() ? SecurisationCompte.C_PinFixeLength : 0;
            }
            getlabelCodePINDEtape(aEtape) {
                switch (aEtape) {
                case TypeEtape.val:
                    {
                        switch (this.options.modePIN) {
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN:
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlerModifierPIN:
                            return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NouveauCodePIN');
                        case ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN:
                            return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.PremierPIN');
                        default:
                            return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.MonCodePIN');
                        }
                    }
                case TypeEtape.confirm:
                    {
                        return ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ConfirmPIN');
                    }
                case TypeEtape.controlePINOuReinit:
                    {
                        return this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.CodeRecuPIN') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.MonCodePIN');
                    }
                }
                ;return '';
            }
            construireVisuCode(aEtape) {
                const lTitre = this.getlabelCodePINDEtape(aEtape);
                const lNbPIN = this.getNbPIN(aEtape);
                return (IE.jsx.str("div", {
                    class: "scp-visu-pin",
                    "aria-hidden": "true",
                    "ie-class": (0,
                    jsx_1.jsxFuncAttr)('getClassContVisuPIN', aEtape)
                }, IE.jsx.str("span", {
                    class: "scp-visu-pin-label"
                }, lTitre, " :"), IE.jsx.str("span", {
                    class: ['scp-visu-pin-image', lNbPIN > 0 ? 'scp-blocs-pin' : '']
                }, IE.jsx.str("span", {
                    "ie-html": (0,
                    jsx_1.jsxFuncAttr)('getHtmlVisuPIN', [aEtape, lNbPIN]),
                    "ie-class": (0,
                    jsx_1.jsxFuncAttr)('getClassVisuPIN', aEtape)
                }))));
            }
            construireClavier(aEtape) {
                const lNbPIN = this.getNbPIN(aEtape);
                return (IE.jsx.str("ul", {
                    class: ['scp_boutons', lNbPIN === 0 ? 'scp-valider' : ''],
                    "ie-if": (0,
                    jsx_1.jsxFuncAttr)('avecBoutons', aEtape)
                }, (aTab) => {
                    const lTab = [];
                    for (let i = 0; i < 10; i++) {
                        lTab.push(i);
                    }
                    while (lTab.length > 0) {
                        const lIndice = Math.floor(Math.random() * lTab.length);
                        const lVal = lTab[lIndice];
                        lTab.splice(lIndice, 1);
                        aTab.push(IE.jsx.str("li", null, IE.jsx.str("ie-bouton", {
                            class: "themeBoutonNeutre",
                            "ie-model": (0,
                            jsx_1.jsxFuncAttr)('btnVal', [lVal, aEtape])
                        }, lVal)));
                    }
                    aTab.push(IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("li", {
                        class: "scp_btnclear"
                    }, IE.jsx.str("ie-bouton", {
                        class: "themeBoutonNeutre",
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnClear', aEtape),
                        title: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Effacer'),
                        "aria-label": ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Effacer')
                    }, IE.jsx.str("i", {
                        class: "icon_delete_clavier_mobile"
                    }))), lNbPIN === 0 ? IE.jsx.str("li", {
                        class: "scp_btnvalider"
                    }, IE.jsx.str("ie-bouton", {
                        class: "themeBoutonPrimaire",
                        "ie-model": (0,
                        jsx_1.jsxFuncAttr)('btnValider', aEtape)
                    }, ObjetTraduction_1.GTraductions.getValeur('Valider'))) : ''));
                    if (aEtape === TypeEtape.val && this.options.modePIN === ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN && this.options.avecReinitPIN) {
                        aTab.push(IE.jsx.str("li", {
                            class: "scp-reinitPIN"
                        }, IE.jsx.str("ie-bouton", {
                            class: "themeBoutonNeutre small-bt",
                            "ie-model": 'btnPINOubli',
                            title: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.HintReinitialiserMonCodePIN'),
                            "aria-haspopup": "dialog"
                        }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ReinitialiserMonCodePIN'))));
                    }
                }
                ));
            }
        }
        exports.ObjetSaisieCodePIN = ObjetSaisieCodePIN;
        (function(ObjetSaisieCodePIN) {
            let ModeSaisieValiderPIN;
            (function(ModeSaisieValiderPIN) {
                ModeSaisieValiderPIN["ControlePIN"] = "ControlePIN";
                ModeSaisieValiderPIN["ControlerModifierPIN"] = "ControlerModifierPIN";
                ModeSaisieValiderPIN["DefinirPIN"] = "DefinirPIN";
                ModeSaisieValiderPIN["ReInitPIN"] = "ReInitPIN";
            }
            )(ModeSaisieValiderPIN = ObjetSaisieCodePIN.ModeSaisieValiderPIN || (ObjetSaisieCodePIN.ModeSaisieValiderPIN = {}));
        }
        )(ObjetSaisieCodePIN || (exports.ObjetSaisieCodePIN = ObjetSaisieCodePIN = {}));
        class ObjetFenetre_ReinitPIN extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.resultReinitPIN = {};
                this.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.TitreReInitialisationCodePIN'),
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler')],
                    addParametresValidation: () => {
                        return {
                            resultReinitPIN: this.resultReinitPIN
                        };
                    }
                });
            }
            construireInstances() {
                this.identPIN = this.add(ObjetSaisieCodePIN, (aParams) => {
                    if (aParams && aParams.codePINVerifReinit) {
                        this.resultReinitPIN.codePINVerifReinit = aParams.codePINVerifReinit;
                    } else if (aParams) {
                        this.resultReinitPIN.codePin = aParams.codePin;
                        this.resultReinitPIN.reinitPIN_OK = true;
                        this.surValidation(undefined);
                    }
                }
                );
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.getInstance(this.identPIN).getNom()
                });
            }
            afficher(aEmailOcculte) {
                this.getInstance(this.identPIN).setOptions({
                    classeRequete: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth,
                    modePIN: ObjetSaisieCodePIN.ModeSaisieValiderPIN.ReInitPIN,
                    emailOcculte: aEmailOcculte
                }).setDonnees({
                    mode: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN
                });
                return super.afficher();
            }
        }
    },
    fn: 'objetsaisiecodepin.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TLienPolitiqueMotDePasse = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        exports.TLienPolitiqueMotDePasse = {
            getLien: function() {
                return IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("a", {
                    href: ObjetTraduction_1.GTraductions.getValeur('LienPolitiqueMotDePasse.UrlFAQMotDePasse'),
                    target: "_blank"
                }, ObjetTraduction_1.GTraductions.getValeur('LienPolitiqueMotDePasse.ConsulterNotrePolitiqueSecuriteMDP')));
            }
        };
    },
    fn: 'lienpolitiquemotdepasse.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetSaisieMotDePasseCP = void 0;
        require('ObjetSaisieMotDePasseCP.css');
        const IEHtml = require("IEHtml");
        const ObjetHtml_1 = require("ObjetHtml");
        const LienPolitiqueMotDePasse_1 = require("LienPolitiqueMotDePasse");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        const GUID_1 = require("GUID");
        const ObjetIdentite_1 = require("ObjetIdentite");
        const C_TailleMaxMotDePasse = 32;
        const C_TailleMinLogin = 2;
        const C_TailleMaxLogin = 128;
        class ObjetSaisieMotDePasseCP extends ObjetIdentite_1.Identite {
            constructor(...aParams) {
                super(...aParams);
                this.avecErreurMDPActuel = false;
                this.avecErreurMDPNouveau = false;
                this.options = {
                    classRequeteSaisie: null,
                    donneesReglesMdp: null,
                    callbackApresValidation: null,
                    callbackFocusValidation: null,
                    setReglesMDP: null,
                    forcerModificationMdp: false,
                    avecMDPActuel: true,
                    avecReglesMDP: true,
                    avecMdpNouveauDifferentDeActuel: true,
                    pourMobile: false,
                    attrInputActuel: 'type = "password" autocomplete = "new-password" aria-required="true"',
                    attrInputNouveau: 'type = "password" autocomplete = "new-password" aria-required="true"',
                    messageExplication: '',
                    libelleMDPActuel: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.MotDePasseActuel'),
                    libelleNewMDP: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.NewMotDePasse'),
                    libelleConfirmNewMDP: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.Confirmation'),
                    libelleEchecModification: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.EchecModification'),
                    libelleReussiteModification: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ReussiteModification'),
                    libelleMDPActuelIncorrect: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.MotActuelIncorrect'),
                    libelleConfirmationIncorrecte: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ConfirmationIncorrecte')
                };
                this.mdp = {
                    actuel: '',
                    nouveau: '',
                    confirmation: ''
                };
                const lId = GUID_1.GUID.getId();
                this.ids = {
                    input1: lId + '_in1',
                    input2: lId + '_in2',
                    input3: lId + '_in3',
                    validateur: lId + '_validateur',
                    validateurMDPActuel: lId + '_valMDPActuel',
                    validateurDiffConfirm: lId + '_DiffConfirm'
                };
            }
            setDonnees() {
                this.afficher(this._construireHtml());
                if (this.options.avecReglesMDP) {
                    $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, null, this._getOptionsValidationMdp()));
                }
                ObjetHtml_1.GHtml.setFocus(!this._avecMDPActuel() ? this.ids.input2 : this.ids.input1);
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    mdp: {
                        actuel: {
                            getValue: function() {
                                return aInstance.mdp.actuel;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.actuel = aValue;
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                        ObjetHtml_1.GHtml.setFocus(aInstance.ids.input2);
                                    }
                                }
                                );
                            }
                        },
                        nouveau: {
                            getValue: function() {
                                return aInstance.mdp.nouveau;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.nouveau = aValue;
                            },
                            getDisabled: function() {
                                return aInstance.mdp.actuel.length === 0 && aInstance._avecMDPActuel();
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                        ObjetHtml_1.GHtml.setFocus(aInstance.ids.input3);
                                    }
                                }
                                );
                            }
                        },
                        confirmation: {
                            getValue: function() {
                                return aInstance.mdp.confirmation;
                            },
                            setValue: function(aValue) {
                                aInstance.mdp.confirmation = aValue;
                            },
                            getDisabled: function() {
                                return ((aInstance.mdp.actuel.length === 0 && aInstance._avecMDPActuel()) || aInstance.mdp.nouveau.length === 0);
                            },
                            node: function() {
                                $(this.node).on('keyup', (event) => {
                                    if (event.which === ToucheClavier_1.ToucheClavier.RetourChariot && aInstance.options.callbackFocusValidation) {
                                        aInstance.options.callbackFocusValidation();
                                    }
                                }
                                );
                            },
                            getHint: function() {
                                return aInstance.mdp.confirmation.length === 0 || aInstance.mdp.confirmation === aInstance.mdp.nouveau ? null : aInstance.options.libelleConfirmationIncorrecte;
                            }
                        }
                    },
                    montrerMasquerMotDePasse: {
                        getModel: {
                            event: function(aId) {
                                const lTarget = $('#' + aId);
                                lTarget.attr('type') === 'password' ? lTarget.attr('type', 'text') : lTarget.attr('type', 'password');
                            }
                        },
                        getClass(aId) {
                            return $('#' + aId).attr('type') === 'password' ? 'icon_eye_open' : 'icon_eye_close';
                        },
                        getTitle(aId) {
                            return $('#' + aId).attr('type') === 'password' ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                        }
                    },
                    getClassMDPActuel() {
                        return aInstance.avecErreurMDPActuel ? 'is-dirty' : '';
                    },
                    getClassNewMDP() {
                        if (aInstance.avecErreurMDPNouveau) {
                            return 'is-dirty';
                        }
                        switch (aInstance._getEtatNewPassword()) {
                        case 'disabled':
                            return 'is-disabled';
                        }
                        return '';
                    },
                    getAttrMDPActuel() {
                        return {
                            'aria-invalid': aInstance.avecErreurMDPActuel ? 'true' : 'false'
                        };
                    },
                    getAttrNewMDP(aEstConfirmation) {
                        return {
                            'aria-invalid': aInstance.avecErreurMDPNouveau ? 'true' : 'false'
                        };
                    }
                });
            }
            avecValidationPossible() {
                return (this.mdp.actuel.length > 0 || !this._avecMDPActuel()) && this.mdp.confirmation.length > 0;
            }
            valider() {
                if (!this._controleAvantValidation()) {
                    return;
                }
                if (this._requeteSaisieEnCours) {
                    return;
                }
                this._requeteSaisieEnCours = true;
                if (this.options.classRequeteSecurisation) {
                    return new (this.options.classRequeteSecurisation)(this).setOptions({
                        gererMessageErreur: function() {}
                        .bind(this)
                    }).lancerRequete({
                        action: this.options.actionRequeteSecurisation,
                        ancienMDP: this.mdp.actuel,
                        nouveauMDP: this.mdp.confirmation
                    }).finally( () => {
                        this._requeteSaisieEnCours = false;
                    }
                    ).then( (aJSON) => {
                        this._surReponseSaisie({
                            JSON: aJSON,
                            avecErreur: false,
                            nouveauMDP: this.mdp.confirmation
                        });
                    }
                    , (aParams) => {
                        return GApplication.getMessage().afficher({
                            titre: this.options.libelleEchecModification,
                            message: aParams ? aParams.message || '' : ''
                        }).then( () => {
                            this.options.callbackApresValidation({
                                avecErreur: true
                            });
                        }
                        );
                    }
                    );
                }
                return new (this.options.classRequeteSaisie)(this).lancerRequete({
                    ancienMDP: this.mdp.actuel,
                    nouveauMDP: this.mdp.confirmation,
                    forcerModification: this.options.forcerModificationMdp
                }).then( (aParams) => {
                    this._requeteSaisieEnCours = false;
                    this._surReponseSaisie(aParams);
                }
                , () => {
                    this._requeteSaisieEnCours = false;
                    return GApplication.getMessage().afficher({
                        message: this.options.libelleEchecModification
                    }).then( () => {
                        this.options.callbackApresValidation({
                            avecErreur: true
                        });
                    }
                    );
                }
                );
            }
            _avecMDPActuel() {
                return this.options.avecMDPActuel && !this.options.forcerModificationMdp;
            }
            _getOptionsValidationMdp() {
                return {
                    avecMdpDifferent: this.options.avecMdpNouveauDifferentDeActuel
                };
            }
            _construireHtml() {
                const H = [];
                H.push('<div class="ObjetSaisieMotDePasseCP">');
                if (this.options.messageExplication) {
                    H.push('<div class="BlocMessageEnTete">', this.options.messageExplication, '</div>');
                }
                H.push('<div class="BlocContenu">');
                H.push('<div class="BlocMDP">');
                H.push(IE.jsx.str("p", {
                    class: "p-bottom-l"
                }, ObjetTraduction_1.GTraductions.getValeur('connexion.champsObligatoires')));
                if (this._avecMDPActuel()) {
                    H.push('   <label for="', this.ids.input1, '">', this.options.libelleMDPActuel, ' *</label>', '   <div class="as-input as-password" ie-class="getClassMDPActuel">', '       <input ie-model="mdp.actuel" id="', this.ids.input1, '" ', this.options.attrInputActuel, ' ie-attr="getAttrMDPActuel"/>', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input1, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input1, '\')" ie-title="montrerMasquerMotDePasse.getTitle(\'', this.ids.input1, '\')"></ie-btnicon>', '   </div>');
                    H.push(IE.jsx.str("p", {
                        class: "p-top p-bottom message-invalide",
                        id: this.ids.validateurMDPActuel
                    }));
                }
                H.push('   <label for="', this.ids.input2, '">', this.options.libelleNewMDP, ' *</label>', '   <div class="as-input as-password confirm-wrapper" ie-class="getClassNewMDP">', '       <input ie-model="mdp.nouveau" class="full-width" id="', this.ids.input2, '" ', this.options.attrInputNouveau, ' ie-attr="getAttrNewMDP(false)" />', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input2, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input2, '\')" ie-title="montrerMasquerMotDePasse.getTitle(\'', this.ids.input2, '\')"></ie-btnicon>', '   </div>');
                H.push('   <label for="', this.ids.input3, '">', this.options.libelleConfirmNewMDP, ' *</label>', '   <div class="as-input as-password confirm-wrapper" ie-class="getClassNewMDP">', '       <input ie-model="mdp.confirmation" class="full-width" id="', this.ids.input3, '" ', this.options.attrInputNouveau, ' ie-hint="getHint" ie-attr="getAttrNewMDP(true)"/>', '       <ie-btnicon ie-class="montrerMasquerMotDePasse.getClass(\'', this.ids.input3, '\')" ie-model="montrerMasquerMotDePasse.getModel(\'', this.ids.input3, '\')" ie-title="montrerMasquerMotDePasse.getTitle(\'', this.ids.input3, '\')"></ie-btnicon>', '   </div>');
                H.push(IE.jsx.str("p", {
                    class: "p-top p-bottom message-invalide",
                    id: this.ids.validateurDiffConfirm
                }));
                H.push('</div>');
                if (this.options.avecReglesMDP) {
                    H.push(IE.jsx.str("div", {
                        class: "BlocValidation"
                    }, IE.jsx.str("div", {
                        class: "validateur",
                        id: this.ids.validateur
                    })));
                }
                H.push('</div>');
                if (this.options.avecReglesMDP) {
                    H.push(IE.jsx.str("div", {
                        class: "link-as-button"
                    }, LienPolitiqueMotDePasse_1.TLienPolitiqueMotDePasse.getLien()));
                }
                H.push('<div style="display:none"><input type="password" /></div>');
                H.push('<div style="display:none"><input type="password" /></div>');
                H.push('<div style="display:none"><input type="password" /></div>');
                H.push('</div>');
                return H.join('');
            }
            _surReponseSaisie(aParams) {
                const lParams = Object.assign({
                    avecErreur: true,
                    JSON: null,
                    messageDejaAffiche: false,
                    messageErreur: ''
                }, aParams);
                if (lParams.JSON && (lParams.JSON.erreurMDP || lParams.JSON.messageErreur)) {
                    if (this.options.avecReglesMDP) {
                        this.options.donneesReglesMdp = lParams.JSON.reglesSaisieMDP;
                        if (this.options.setReglesMDP && lParams.JSON.reglesSaisieMDP) {
                            this.options.setReglesMDP(lParams.JSON);
                        }
                    }
                    const lErreursMDP = lParams.JSON.erreurMDP;
                    let lErreursMDPPourValidation = lErreursMDP;
                    let lMessage = '';
                    if (lParams.JSON.messageErreur) {
                        lMessage += lParams.JSON.messageErreur;
                    } else if (lErreursMDP && lErreursMDP.erreurAncienMDP) {
                        lMessage += this.options.libelleMDPActuelIncorrect + '<br><br>';
                        lErreursMDPPourValidation = null;
                    }
                    if (this.options.avecReglesMDP && lErreursMDPPourValidation) {
                        lMessage += ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, lErreursMDPPourValidation, this._getOptionsValidationMdp());
                    }
                    let lIdFocus = '';
                    this.mdp.nouveau = '';
                    this.mdp.confirmation = '';
                    if (lParams.JSON.messageErreur || (lErreursMDP && lErreursMDP.erreurAncienMDP)) {
                        this.avecErreurMDPActuel = true;
                        this.mdp.actuel = '';
                        lIdFocus = this.ids.input1;
                        $(`#${this.ids.validateurMDPActuel.escapeJQ()}`).html(lMessage);
                        $(`#${this.ids.input1.escapeJQ()}`).attr('aria-describedby', this.ids.validateurMDPActuel);
                    } else {
                        lIdFocus = this.ids.input2;
                    }
                    if (this.options.avecReglesMDP) {
                        $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, lErreursMDPPourValidation, this._getOptionsValidationMdp()));
                        if (!this.avecErreurMDPActuel) {
                            $(`#${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', this.ids.validateur);
                        }
                    }
                    return GApplication.getMessage().afficher({
                        titre: this.options.libelleEchecModification,
                        message: lMessage
                    }).then( () => {
                        ObjetHtml_1.GHtml.setFocus(lIdFocus);
                        IEHtml.refresh();
                    }
                    );
                } else {
                    if (lParams.avecErreur) {
                        this.mdp.nouveau = '';
                        this.mdp.confirmation = '';
                    }
                    let lPromise = Promise.resolve();
                    if (!lParams.messageDejaAffiche) {
                        if (lParams.avecErreur) {
                            lPromise = GApplication.getMessage().afficher({
                                message: this.options.libelleEchecModification + (lParams.messageErreur ? '<br><br>' + lParams.messageErreur : '')
                            });
                        } else if (this.options.avecMessageReussiteModif) {
                            lPromise = GApplication.getMessage().afficher({
                                message: this.options.libelleReussiteModification
                            });
                        }
                    }
                    lPromise.then( () => {
                        this.options.callbackApresValidation(lParams);
                    }
                    );
                }
            }
            _controleAvantValidation() {
                this.avecErreurMDPActuel = false;
                this.avecErreurMDPNouveau = false;
                $(`#${this.ids.validateurDiffConfirm.escapeJQ()}`).empty();
                $(`#${this.ids.validateurMDPActuel.escapeJQ()}`).empty();
                $(`#${this.ids.input1.escapeJQ()}, #${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', null);
                if (this.mdp.confirmation && this.mdp.confirmation !== this.mdp.nouveau && this.options.libelleConfirmationIncorrecte) {
                    this.mdp.nouveau = '';
                    this.mdp.confirmation = '';
                    GApplication.getMessage().afficher({
                        message: this.options.libelleConfirmationIncorrecte
                    }).then( () => {
                        $(`#${this.ids.validateurDiffConfirm.escapeJQ()}`).html(this.options.libelleConfirmationIncorrecte);
                        $(`#${this.ids.input2.escapeJQ()}, #${this.ids.input3.escapeJQ()}`).attr('aria-describedby', this.ids.validateurDiffConfirm);
                        this.avecErreurMDPNouveau = true;
                        if (this.options.avecReglesMDP) {
                            $('#' + this.ids.validateur.escapeJQ()).ieHtml(ValidationMotDePasse_1.ValidationMotDePasse.construire(this.options.donneesReglesMdp, null, this._getOptionsValidationMdp()));
                        }
                        ObjetHtml_1.GHtml.setFocus(this.ids.input2);
                        IEHtml.refresh();
                    }
                    );
                    return false;
                }
                return true;
            }
            _getEtatNewPassword() {
                return this.mdp.actuel.length === 0 && this._avecMDPActuel() ? 'disabled' : this.mdp.confirmation.length === 0 || this.mdp.confirmation === this.mdp.nouveau ? 'valid' : 'invalid';
            }
        }
        exports.ObjetSaisieMotDePasseCP = ObjetSaisieMotDePasseCP;
        ObjetSaisieMotDePasseCP.C_TailleMaxMotDePasse = C_TailleMaxMotDePasse;
        ObjetSaisieMotDePasseCP.C_TailleMinLogin = C_TailleMinLogin;
        ObjetSaisieMotDePasseCP.C_TailleMaxLogin = C_TailleMaxLogin;
    },
    fn: 'objetsaisiemotdepassecp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetre_SaisieMdpCP = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetSaisieMotDePasseCP_1 = require("ObjetSaisieMotDePasseCP");
        const ObjetChaine_1 = require("ObjetChaine");
        class ObjetFenetre_SaisieMdpCP extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    titre: ObjetChaine_1.GChaine.insecable(ObjetTraduction_1.GTraductions.getValeur('saisieMDP.TitreFenetre')),
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    avecTailleSelonContenu: true,
                    largeur: 300,
                    optionsMDP: {
                        forcerModificationMdp: false
                    }
                });
            }
            construireInstances() {
                this.identMDP = this.add(ObjetSaisieMotDePasseCP_1.ObjetSaisieMotDePasseCP);
            }
            composeContenu() {
                return ['<div id="', this.getInstance(this.identMDP).getNom(), '"></div>'].join('');
            }
            setDonnees(aDonneesReglesMdp) {
                this.afficher();
                this.getInstance(this.identMDP).setOptions(Object.assign(this.optionsFenetre.optionsMDP || {}, {
                    donneesReglesMdp: aDonneesReglesMdp,
                    callbackFocusValidation: () => {
                        this.setBoutonFocus({
                            valider: true
                        });
                    }
                    ,
                    callbackApresValidation: (aParams) => {
                        if (aParams) {
                            this.fermer();
                            this.callback.appel(!aParams.avecErreur, aParams);
                        }
                    }
                })).setDonnees();
                this.positionnerFenetre();
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    fenetreBtn: {
                        getDisabled: function(aBoutonRepeat) {
                            return aBoutonRepeat.element.valider ? !aInstance.getInstance(aInstance.identMDP).avecValidationPossible() : false;
                        }
                    }
                });
            }
            surValidation(ANumeroBouton) {
                const lBouton = this.getBoutonNumero(ANumeroBouton);
                if (lBouton && lBouton.valider) {
                    this.getInstance(this.identMDP).valider();
                } else {
                    this.fermer();
                    this.callback.appel(false);
                }
            }
        }
        exports.ObjetFenetre_SaisieMdpCP = ObjetFenetre_SaisieMdpCP;
    },
    fn: 'objetfenetre_saisiemdpcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireSecurisationCompte = void 0;
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetChoixStrategieSecurisation_1 = require("ObjetChoixStrategieSecurisation");
        const ObjetSaisieCodePIN_1 = require("ObjetSaisieCodePIN");
        const ObjetRequeteSecurisationCompte_1 = require("ObjetRequeteSecurisationCompte");
        const TypeSecurisationCompte_1 = require("TypeSecurisationCompte");
        const MethodesObjet_1 = require("MethodesObjet");
        const ToucheClavier_1 = require("ToucheClavier");
        const ObjetFenetre_SaisieMdpCP_1 = require("ObjetFenetre_SaisieMdpCP");
        const ObjetChaine_1 = require("ObjetChaine");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const Enumere_Action_1 = require("Enumere_Action");
        const Type_ThemeBouton_1 = require("Type_ThemeBouton");
        var Etape;
        (function(Etape) {
            Etape[Etape["choixStrat"] = 0] = "choixStrat";
            Etape[Etape["PIN"] = 1] = "PIN";
            Etape[Etape["enregistrement"] = 2] = "enregistrement";
        }
        )(Etape || (Etape = {}));
        class ChaineEtape {
            constructor(aEtape) {
                this.etape = aEtape;
            }
            add(aEtape) {
                const lEtape = new ChaineEtape(aEtape);
                lEtape.precedent = this;
                this.suivant = lEtape;
                return lEtape;
            }
        }
        class UtilitaireSecurisationCompte {
            static async demarrerPersonnalisationMDP(aParam) {
                return await new Promise( (aResolve) => {
                    ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_SaisieMdpCP_1.ObjetFenetre_SaisieMdpCP, {
                        pere: this,
                        evenement(aReussite, aParamForcerMDP) {
                            aResolve({
                                reussite: aReussite,
                                paramForcerMDP: aParamForcerMDP
                            });
                        }
                    }, {
                        titre: ObjetChaine_1.GChaine.insecable(ObjetTraduction_1.GTraductions.getValeur('saisieMDP.TitreFenetre')),
                        optionsMDP: {
                            forcerModificationMdp: true,
                            classRequeteSecurisation: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth,
                            actionRequeteSecurisation: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_VerifierMotDePassePersonnalise,
                            messageExplication: aParam.messageForcerModificationMdp,
                            setReglesMDP(aJSON) {
                                GEtatUtilisateur.setReglesSaisieMotDePasse(aJSON);
                            }
                        }
                    }).setDonnees(aParam.reglesSaisieMDP);
                }
                );
            }
            static async demarrerDoubleAut(aDonnees) {
                const lResultAnnuler = {
                    annuler: true
                };
                const lDonneesSecu = {};
                const lEstChoixStrategie = aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                let lChaineEtape = null;
                const lChoixUnique = aDonnees.modesPossibles.count() === 1;
                if (lEstChoixStrategie) {
                    lDonneesSecu.mode = this.initVerifierMode(aDonnees);
                }
                if (lEstChoixStrategie && !lChoixUnique) {
                    lChaineEtape = new ChaineEtape(Etape.choixStrat);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource) || (lChoixUnique && aDonnees.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN))) {
                    lChaineEtape = new ChaineEtape(Etape.PIN);
                    lChaineEtape.add(Etape.enregistrement);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieSourcePourNotifSeulement) || (lChoixUnique && aDonnees.modesPossibles.contains(TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement))) {
                    lChaineEtape = new ChaineEtape(Etape.enregistrement);
                    return await UtilitaireSecurisationCompte.suivant(aDonnees, lDonneesSecu, lChaineEtape);
                }
                return lResultAnnuler;
            }
            static async suivant(aDonnees, aResultSecu, aChaineEtape) {
                const lPere = {};
                const lResultAnnuler = {
                    annuler: true
                };
                if (!aChaineEtape) {
                    return lResultAnnuler;
                }
                switch (aChaineEtape.etape) {
                case Etape.choixStrat:
                    {
                        const lResultFenetre = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_ChoixStrategie, {
                            pere: lPere
                        }).setDonnees(aDonnees, aResultSecu);
                        if (lResultFenetre.bouton && lResultFenetre.bouton.valider) {
                            switch (aResultSecu.mode) {
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN:
                                {
                                    aChaineEtape.add(Etape.PIN).add(Etape.enregistrement);
                                    return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                                }
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_NotificationSeulement:
                                {
                                    aChaineEtape.add(Etape.enregistrement);
                                    return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                                }
                            case TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_Inactive:
                                {
                                    return {
                                        suivant: true,
                                        donnees: aResultSecu
                                    };
                                }
                            default:
                                {
                                    throw new Error('Choix strategie inconnue');
                                }
                            }
                        }
                        break;
                    }
                case Etape.PIN:
                    {
                        let lModePIN = ObjetSaisieCodePIN_1.ObjetSaisieCodePIN.ModeSaisieValiderPIN.ControlePIN;
                        let lAvecReinitPIN = aDonnees.avecReinitPIN;
                        let lTitre = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.TitreValiderCodePIN');
                        let lLibelleBouton = ObjetTraduction_1.GTraductions.getValeur('Annuler');
                        if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie)) {
                            lModePIN = ObjetSaisieCodePIN_1.ObjetSaisieCodePIN.ModeSaisieValiderPIN.DefinirPIN;
                            lAvecReinitPIN = false;
                            lTitre = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.RenforcerSecuDefinirPIN');
                            if (aChaineEtape.precedent) {
                                lLibelleBouton = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Retour');
                            }
                        }
                        const lResultFenetrePIN = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_PIN, {
                            pere: lPere
                        }, {
                            titre: lTitre,
                            listeBoutons: [lLibelleBouton]
                        }).setDonnees({
                            modePIN: lModePIN,
                            avecReinitPIN: lAvecReinitPIN,
                            emailOcculte: aDonnees.emailOcculte
                        });
                        if (lResultFenetrePIN.paramsPIN) {
                            Object.assign(aResultSecu, lResultFenetrePIN.paramsPIN);
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.suivant);
                        }
                        if (aChaineEtape.precedent) {
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.precedent);
                        }
                        break;
                    }
                case Etape.enregistrement:
                    {
                        let lAvecRetour = false;
                        if (aDonnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie) && aChaineEtape.precedent) {
                            lAvecRetour = true;
                        }
                        const lResultFenetreEnregistrement = await ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(ObjetFenetre_Enregistrement, {
                            pere: lPere
                        }).setDonnees(aDonnees, lAvecRetour);
                        if (lResultFenetreEnregistrement.enregistrement) {
                            Object.assign(aResultSecu, lResultFenetreEnregistrement.enregistrement);
                            return {
                                suivant: true,
                                donnees: aResultSecu
                            };
                        }
                        if (aChaineEtape.precedent && aChaineEtape.precedent.etape === Etape.choixStrat) {
                            return await UtilitaireSecurisationCompte.suivant(aDonnees, aResultSecu, aChaineEtape.precedent);
                        }
                        break;
                    }
                default:
                    {
                        return lResultAnnuler;
                    }
                }
                return lResultAnnuler;
            }
            static initVerifierMode(aDonnees) {
                let lResult;
                if (MethodesObjet_1.MethodesObjet.isNumber(aDonnees.modeSecurisationParDefaut)) {
                    lResult = aDonnees.modeSecurisationParDefaut;
                }
                const lModesPossibles = aDonnees.modesPossibles;
                if (lResult === TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_PasEncoreChoisi || !lModesPossibles.contains(lResult)) {
                    TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentificationUtil.getOrdreModeDoubleAuth(aDonnees.modeSecurisationParDefaut).every( (aMode) => {
                        if (aMode !== lResult && lModesPossibles.contains(aMode)) {
                            lResult = aMode;
                            return false;
                        }
                        return true;
                    }
                    );
                }
                return lResult;
            }
        }
        exports.UtilitaireSecurisationCompte = UtilitaireSecurisationCompte;
        const cLargeurFenetre = 450;
        class ObjetFenetre_ChoixStrategie extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.RenforcerSecurite'),
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    largeur: cLargeurFenetre
                });
            }
            construireInstances() {
                this.identChoixStrategie = this.add(ObjetChoixStrategieSecurisation_1.ObjetChoixStrategieSecurisation);
            }
            async setDonnees(aDonnees, aResultSecu) {
                const lParamsStrat = {
                    mode: aResultSecu.mode
                };
                const lResultPromise = super.afficher(IE.jsx.str("div", {
                    id: this.getInstance(this.identChoixStrategie).getNom()
                }));
                this.getInstance(this.identChoixStrategie).setOptions({
                    modeAffichage: ObjetChoixStrategieSecurisation_1.ObjetChoixStrategieSecurisation.typeAffichage.securisation,
                    modesPossibles: aDonnees.modesPossibles,
                    modeSecurisationParDefaut: aDonnees.modeSecurisationParDefaut,
                    callbackChoix: (aGenre) => {
                        lParamsStrat.mode = aGenre;
                    }
                }).setDonnees(lParamsStrat);
                const lResult = await lResultPromise;
                if (lResult.bouton && lResult.bouton.valider) {
                    aResultSecu.mode = lParamsStrat.mode;
                }
                return lResult;
            }
        }
        class ObjetFenetre_PIN extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.setOptionsFenetre({
                    addParametresValidation: () => {
                        return {
                            paramsPIN: this.paramsPIN
                        };
                    }
                });
            }
            construireInstances() {
                this.identPIN = this.add(ObjetSaisieCodePIN_1.ObjetSaisieCodePIN, (aParams) => {
                    if (aParams) {
                        this.paramsPIN = aParams;
                        this.surValidation(undefined);
                    }
                }
                );
            }
            composeContenu() {
                return IE.jsx.str("div", {
                    id: this.getInstance(this.identPIN).getNom()
                });
            }
            setDonnees(aOptions) {
                this.getInstance(this.identPIN).setOptions(Object.assign({
                    classeRequete: ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth
                }, aOptions)).setDonnees({
                    mode: TypeSecurisationCompte_1.TypeModeGestionDoubleAuthentification.MGDA_SaisieCodePIN
                });
                return super.afficher();
            }
        }
        class ObjetFenetre_Enregistrement extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.cbIdentification = true;
                this.strIdentification = '';
                this.avecWarningIdentification = true;
                this.idInput = `${this.Nom}_inp`;
                this.setOptionsFenetre({
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }],
                    largeur: cLargeurFenetre
                });
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    cbIdentification: {
                        getValue() {
                            return aInstance.cbIdentification;
                        },
                        setValue(aValue) {
                            aInstance.cbIdentification = aValue;
                            if (aInstance.avecWarningIdentification && !aInstance.cbIdentification) {
                                aInstance.avecWarningIdentification = false;
                                GApplication.getMessage().afficher({
                                    message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilResterInconnu') + '<br>' + ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.PersonnesConfiance')
                                });
                            }
                        }
                    },
                    inputIdentification: {
                        getValue() {
                            return aInstance.strIdentification;
                        },
                        setValue(aValue) {
                            aInstance.strIdentification = aValue;
                        },
                        getDisabled() {
                            return !aInstance.cbIdentification;
                        },
                        node() {
                            $(this.node).on('keyup', (aEvent) => {
                                if (aEvent.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                                    for (let lNumeroBouton = 0; lNumeroBouton < aInstance.optionsFenetre.listeBoutons.length; lNumeroBouton++) {
                                        const lBouton = aInstance.optionsFenetre.listeBoutons[lNumeroBouton];
                                        if (typeof lBouton === 'string') {} else if (lBouton.valider) {
                                            aInstance.surValidation(lNumeroBouton);
                                            return;
                                        }
                                    }
                                }
                            }
                            );
                        }
                    },
                    getHtmlCompteurInput: function() {
                        return aInstance.strIdentification.length > 0 ? aInstance.strIdentification.length + '/' + TypeSecurisationCompte_1.C_LibelleAppareilMaxLength : '&nbsp;';
                    }
                });
            }
            compose() {
                if (!this.donnees) {
                    return '';
                }
                const lIdLegende = `${this.Nom}_legendeCB`;
                const lIdCompteur = `${this.Nom}_compteurInput`;
                const lIdCB = `${this.Nom}_ccb`;
                const lAvecChoixStrategie = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                const lAvecChoixCodePIN = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource);
                return (IE.jsx.str("div", null, IE.jsx.str("p", {
                    class: "m-bottom-xl",
                    id: lIdLegende
                }, !lAvecChoixStrategie && !lAvecChoixCodePIN ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilRappelNotif') + '<br>' : '', ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilInfoIdentification')), IE.jsx.str("ie-checkbox", {
                    id: lIdCB,
                    "ie-model": "cbIdentification",
                    class: "m-bottom-xl"
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilNommerAppareil')), IE.jsx.str("div", {
                    class: false
                }, IE.jsx.str("label", {
                    for: this.idInput,
                    class: "m-bottom-l"
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerSousNom'), " :"), IE.jsx.str("input", {
                    type: "text",
                    id: this.idInput,
                    "ie-model": "inputIdentification",
                    class: "round-style full-width",
                    maxlength: TypeSecurisationCompte_1.C_LibelleAppareilMaxLength,
                    "ie-trim": true,
                    autocomplete: "new-password",
                    placeholder: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilSuggestions'),
                    "aria-describedby": [lIdCompteur, lIdLegende, lIdCB].join(' ')
                }), IE.jsx.str("div", {
                    "ie-html": "getHtmlCompteurInput",
                    class: "sc-compteurInput"
                }), IE.jsx.str("span", {
                    class: "sr-only",
                    id: lIdCompteur
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.NbCaracteresMax_D', TypeSecurisationCompte_1.C_LibelleAppareilMaxLength)), !lAvecChoixStrategie && GParametres.urlFAQEnregistrementDoubleAuth ? IE.jsx.str("ie-chips", {
                    class: "iconic icon_question_sign",
                    href: GParametres.urlFAQEnregistrementDoubleAuth
                }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LienFAQEnregistrement')) : '')));
            }
            async setDonnees(aDonnees, aAvecRetour) {
                this.donnees = aDonnees;
                this.setOptionsFenetre({
                    listeBoutons: [aAvecRetour ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Retour') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Annuler'), {
                        valider: true,
                        libelle: ObjetTraduction_1.GTraductions.getValeur('Valider')
                    }]
                });
                if (this.donnees.libelleSaisieExistant && this.donnees.changementStrategieImpose) {
                    this.strIdentification = this.donnees.libelleSaisieExistant;
                }
                const lAvecChoixStrategie = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_ChoixStrategie);
                const lAvecChoixCodePIN = this.donnees.actionsDoubleAuth.contains(TypeSecurisationCompte_1.TypeActionIHMSecurisationCompte.AIHMSC_SaisieCodePINetSource);
                this.setOptionsFenetre({
                    titre: !lAvecChoixStrategie && !lAvecChoixCodePIN ? ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.ValiderTitreInconnu') : ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilTitre')
                });
                const lPromise = super.afficher(this.compose());
                $(`#${this.idInput.escapeJQ()}`).trigger('focus');
                const lResult = await lPromise;
                if (lResult.bouton && lResult.bouton.valider) {
                    lResult.enregistrement = {
                        avecIdentification: this.cbIdentification,
                        strIdentification: this.strIdentification
                    };
                }
                return lResult;
            }
            async surValidation(ANumeroBouton) {
                const lParams = this.getParametresValidation(ANumeroBouton);
                if (lParams.bouton && lParams.bouton.valider) {
                    if (this.cbIdentification && !this.strIdentification) {
                        await GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilNomInvalide')
                        });
                        this._focusInputIndentification();
                        return;
                    }
                    if (await this._controleNomUniquePromise() !== true) {
                        this._focusInputIndentification();
                        return;
                    }
                }
                super.surValidation(ANumeroBouton);
            }
            _focusInputIndentification() {
                $(`#${this.idInput.escapeJQ()}`).trigger('focus');
            }
            async _controleNomUniquePromise() {
                if (this.cbIdentification && this.strIdentification) {
                    if (this.donnees.changementStrategieImpose && this.strIdentification === this.donnees.libelleSaisieExistant) {
                        return true;
                    }
                    const lJSON = await new ObjetRequeteSecurisationCompte_1.ObjetRequeteSecurisationCompteDoubleAuth(this).lancerRequete({
                        action: TypeSecurisationCompte_1.TypeCommandeSecurisationCompteHttp.csch_LibellesSourceConnexionDejaConnus,
                        libelle: this.strIdentification
                    });
                    if (lJSON && lJSON.dejaConnu) {
                        if (this.donnees.changementStrategieImpose) {
                            await GApplication.getMessage().afficher({
                                message: ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.LibelleAppareilDejaUtilise')
                            });
                            return false;
                        }
                        let lMessage = '';
                        if (GApplication.estAppliMobile || !GParametres.urlFAQEnregistrementDoubleAuth) {
                            lMessage = ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.EnregistrerAppareilNomDejaUtilise');
                        } else {
                            lMessage = IE.jsx.str(IE.jsx.fragment, null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Message_SourceConnexion_1'), IE.jsx.str("br", null), IE.jsx.str("br", null), IE.jsx.str("ul", {
                                class: "browser-default"
                            }, IE.jsx.str("li", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Message_SourceConnexion_2'), IE.jsx.str("div", {
                                style: "font-style: italic; padding:.3rem 0 .5rem 0;"
                            }, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Message_SourceConnexion_3_S', ['<a href="' + GParametres.urlFAQEnregistrementDoubleAuth + '">' + ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.FAQEnregistrement') + '</a>']))), IE.jsx.str("li", null, ObjetTraduction_1.GTraductions.getValeur('DoubleAuth.Message_SourceConnexion_4'))));
                        }
                        const lGenreAction = await GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Confirmation,
                            message: lMessage,
                            listeBoutons: [{
                                libelle: ObjetTraduction_1.GTraductions.getValeur('Annuler'),
                                theme: Type_ThemeBouton_1.TypeThemeBouton.secondaire
                            }, {
                                libelle: ObjetTraduction_1.GTraductions.getValeur('Valider'),
                                theme: Type_ThemeBouton_1.TypeThemeBouton.primaire,
                                genreAction: Enumere_Action_1.EGenreAction.Valider
                            }]
                        });
                        if (lGenreAction !== Enumere_Action_1.EGenreAction.Valider) {
                            return false;
                        }
                    }
                }
                return true;
            }
        }
    },
    fn: 'utilitairesecurisationcompte.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.getHtml = void 0;
        const getHtml = (aParams) => {
            const getHtmlSrcFondImage = () => {
                const lAvecLiens = aParams.options.avecLien && aParams.options.lien && aParams.options.texteLien && aParams.options.suiviLien;
                const getHtmlImg = () => IE.jsx.str("img", {
                    id: aParams.id.image,
                    onclick: aParams.options.urlImageSuite && `$('#${aParams.id.imageSuite}').toggle();event.stopImmediatePropagation();return false;`,
                    class: aParams.options.urlImageSuite && 'AvecMain',
                    src: aParams.options.srcFondImage,
                    alt: aParams.traductions.altImageDeFond,
                    style: "height:100%",
                    "aria-hidden": "true"
                });
                return (IE.jsx.str("div", {
                    style: "position:absolute;left: 0px; bottom: 0px;top:50px;height:80%;z-index:1;"
                }, lAvecLiens ? (IE.jsx.str(IE.jsx.fragment, null, IE.jsx.str("a", {
                    href: aParams.options.lien,
                    class: "Texte12 LienLouvre",
                    onclick: `$.get('${aParams.options.suiviLien}');`
                }, getHtmlImg(), IE.jsx.str("div", {
                    style: `position: absolute;bottom:${aParams.options.bottomLien};left:${aParams.options.leftLien};color:${aParams.options.couleurLien};font-size:${aParams.options.tailleLien};`
                }, aParams.options.texteLien)))) : (IE.jsx.str(IE.jsx.fragment, null, getHtmlImg()))));
            }
            ;
            return (IE.jsx.str(IE.jsx.fragment, null, aParams.options.avecFichierFond && (IE.jsx.str("div", {
                class: ['ImageFond', aParams.options.classImageFond, 'full-size'],
                style: `background-color:${aParams.options.couleurFondBg};background-image:url('${aParams.options.dataImageFond}');position:absolute;z-index:-15;`
            })), aParams.options.sansFichierFond && (IE.jsx.str("div", {
                class: ['ImageFond', aParams.options.classImageFond],
                style: `background-color:${aParams.options.couleurFondBg};${aParams.options.urlImageFond ? `background-image:url('${aParams.options.urlImageFond}');` : ''} position:absolute;z-index:-15;width:100%;height:100%;`
            })), IE.jsx.str("div", {
                id: aParams.id.wrapper,
                class: "full-size",
                style: `box-sizing:border-box;text-align:center;position:absolute;min-height:520px; ${aParams.options.urlImageSuite ? 'min-width:520px;' : ''}`
            }, aParams.options.modeDemo && (IE.jsx.str("div", {
                class: "Texte16 Gras",
                style: "position: absolute;width:650px;left:50px;background-color:rgba(255,255,255,0.9);top:100px;padding:20px;z-index:9999;border-radius:7px;"
            }, aParams.traductions.AvertissementDemo)), IE.jsx.str("div", {
                "ie-identite": "getIdentiteBandeau",
                style: "position:absolute; top:0; left:0; right:0; z-index:101;"
            }), IE.jsx.str("div", {
                class: "InlineBlock AlignementMilieuVertical",
                style: "height:100%;"
            }), aParams.options.srcFondImage && getHtmlSrcFondImage(), IE.jsx.str("div", {
                id: aParams.id.wrapperConnect,
                class: [aParams.options.applicationNom, 'wrapper-connect-conteneur']
            }, IE.jsx.str("div", {
                class: "logo-espace-edt bloc-elem"
            }), IE.jsx.str("div", {
                class: "illustration-container bloc-elem"
            }, IE.jsx.str("div", {
                class: "illus-rond"
            }), IE.jsx.str("div", {
                class: "logo-pronote-primaire"
            })), IE.jsx.str("div", {
                id: aParams.id.inscription,
                "ie-if": "visibiliteInscription",
                class: "bloc-elem",
                style: `width:440px;position:relative;margin-top:40px;${aParams.options.decalageLogin ? 'margin-left: 50%;' : ''} box-shadow:5px 5px 10px -8px black;z-index:1;`
            }, IE.jsx.str("div", {
                class: "InlineBlock",
                style: `position:absolute;top:0;left:0;right:0;bottom:0;background-color:${aParams.options.couleurConnexion};opacity: 0.7;z-index: -1;`
            }, "\u00A0"), IE.jsx.str("div", {
                class: "Texte14 Gras",
                style: "text-align:center;padding: 20px 0px;"
            }, aParams.traductions.inscriptions.titre), IE.jsx.str("div", {
                "ie-display": "visibiliteRedirigerParent"
            }, IE.jsx.str("ie-bouton", {
                "ie-model": "boutonRedirigerParent",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageParent, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonEspaceParent.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonEspaceParent.info))))), IE.jsx.str("div", null, IE.jsx.str("ie-bouton", {
                "ie-model": "boutonCreation",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0px 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageCreation, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonCreation.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonCreation.info))))), IE.jsx.str("div", null, IE.jsx.str("ie-bouton", {
                "ie-model": "btnConnexionInscription",
                class: "Texte12 AvecMain themeBoutonNeutre height-auto",
                style: "width:calc(100% - 20px);min-height:105px;text-align: left;border-radius:0;padding:20px;margin:0px 10px 10px 10px;"
            }, IE.jsx.str("div", {
                style: "display:flex;"
            }, IE.jsx.str("div", {
                class: [aParams.options.insriptions.classImageInscription, 'img-inscription'],
                style: "align-self: center;"
            }), IE.jsx.str("div", {
                style: "align-self: center;"
            }, IE.jsx.str("div", {
                class: "Texte14 Gras"
            }, aParams.traductions.inscriptions.boutonEspaceInscription.titre), IE.jsx.str("div", {
                style: "padding-top:10px;"
            }, aParams.traductions.inscriptions.boutonEspaceInscription.info)))))), " ", IE.jsx.str("article", {
                id: aParams.id.connect,
                "ie-if": "visibiliteConnexion",
                role: "main",
                class: "bloc-elem bloc-connexion-wrapper",
                style: aParams.options.decalageLogin && 'margin-left: 50%;'
            }, IE.jsx.str("header", null, IE.jsx.str("h1", {
                tabindex: "0"
            }, aParams.options.nomEspace), IE.jsx.str("div", {
                "aria-hidden": "true",
                class: aParams.options.classImageEspace
            })), IE.jsx.str("div", {
                class: "loginBox",
                role: "form"
            }, IE.jsx.str("fieldset", {
                "ie-if": "visibiliteModeConnexion",
                class: "connexion-wrapper field-contain"
            }, IE.jsx.str("legend", {
                class: "sr-only"
            }, aParams.traductions.ariaDescrModeConnexion), IE.jsx.str("label", null, aParams.traductions.texteModeConnexion), IE.jsx.str("ie-radio", {
                "ie-model": "choixConnexion(0)"
            }, aParams.traductions.modeConnexion1), IE.jsx.str("ie-radio", {
                "ie-model": "choixConnexion(1)"
            }, aParams.traductions.modeConnexion2), IE.jsx.str("ie-btnicon", {
                "ie-model": "getModel('texteExplicatifModeConnexion')",
                class: "icon_question bt-activable btnImage"
            })), IE.jsx.str("p", {
                class: "text-end"
            }, aParams.traductions.texteChampsObligatoires), IE.jsx.str("div", {
                class: "form-wrapper"
            }, aParams.options.urlLogo && (IE.jsx.str("div", {
                class: "img-contain"
            }, IE.jsx.str("img", {
                src: aParams.options.urlLogo,
                alt: "",
                "aria-hidden": "true",
                style: "max-width:100px;max-height:100px;",
                onerror: "$(this).remove();"
            }))), IE.jsx.str("div", {
                class: "fields-contain flex-end",
                style: `color:${aParams.couleur.themeNeutre.sombre};`
            }, IE.jsx.str("div", {
                class: "input-field label-up"
            }, IE.jsx.str("label", {
                class: "champ-requis",
                for: aParams.id.identification
            }, aParams.traductions.texteIdentifiant), IE.jsx.str("div", {
                class: "flex-contain full-width"
            }, IE.jsx.str("input", {
                id: aParams.id.identification,
                "ie-model": "login",
                "ie-textbrut": true,
                type: "text",
                title: aParams.traductions.texteTitleIdentifiant,
                class: "round-style fluid-bloc",
                tabindex: "0",
                placeholder: aParams.traductions.textePlaceholderIdentifiant,
                "aria-describedby": [aParams.id.waiIdentifiant, aParams.id.msgErreur].join(' '),
                "aria-required": "true",
                "aria-label": aParams.traductions.textePlaceholderIdentifiant,
                "ie-attr": "getAttrLogin"
            }), IE.jsx.str("p", {
                id: aParams.id.waiIdentifiant,
                tabindex: "-1",
                "aria-hidden": "true",
                style: "display:none;"
            }, aParams.traductions.ariaDescrIdentifiant))), IE.jsx.str("div", {
                class: "input-field label-up"
            }, IE.jsx.str("label", {
                class: "champ-requis",
                for: aParams.id.motDePasse
            }, aParams.traductions.texteMotdepasse), IE.jsx.str("div", {
                class: "flex-contain full-width"
            }, IE.jsx.str("div", {
                class: "as-input as-password"
            }, IE.jsx.str("input", {
                id: aParams.id.motDePasse,
                "ie-model": "motDePasse",
                type: "password",
                title: aParams.traductions.texteTitleMotdepasse,
                tabindex: "0",
                placeholder: aParams.traductions.textePlaceholderMotdepasse,
                "aria-describedby": [aParams.id.waiMotDePasse, aParams.id.msgErreur].join(' '),
                "aria-required": "true",
                "aria-label": aParams.traductions.textePlaceholderMotdepasse,
                "ie-attr": "getAttrMDP"
            }), IE.jsx.str("p", {
                id: aParams.id.waiMotDePasse,
                tabindex: "-1",
                "aria-hidden": "true",
                style: "display:none;"
            }, aParams.traductions.ariaDescrMotdepasse), IE.jsx.str("ie-btnicon", {
                class: "icon_eye_open",
                "ie-model": "montrerMasquerMotDePasse()",
                "ie-title": "montrerMasquerMotDePasse.getTitle"
            }))))), " "), " ", IE.jsx.str("p", {
                id: aParams.id.msgErreur,
                class: "message-erreur",
                "aria-hidden": "true"
            }), IE.jsx.str("ie-bouton", {
                id: aParams.id.btnConnexion,
                title: aParams.traductions.titreBouton,
                "ie-model": "boutonValidation",
                class: "themeBoutonPrimaire",
                style: "width:100%",
                tabindex: "0"
            }, aParams.traductions.texteBouton), IE.jsx.str("div", {
                "ie-display": "visibiliteRecupIdMdp",
                class: "recup-mdp"
            }, IE.jsx.str("button", {
                class: "libelle",
                style: `color:${aParams.couleur.texte}`,
                onclick: `${aParams.id.thisNom}.evenementRecupIdMDP();`,
                tabindex: "0",
                "aria-haspopup": "dialog",
                "aria-describedby": aParams.id.waiRecupIdMdp
            }, aParams.traductions.texteRecupIdMdp), IE.jsx.str("label", {
                id: aParams.id.waiRecupIdMdp,
                tabindex: "-1",
                "aria-hidden": "true",
                style: "display:none;"
            }, aParams.traductions.ariaDescrRecupIdMdp), IE.jsx.str("ie-btnicon", {
                "ie-model": "getModel('texteExplicatifRecupIdMdp')",
                class: "icon_question bt-activable btnImage"
            }))), " "), " ", aParams.options.mentionsPagesPubliques && aParams.options.mentionsPagesPubliques.lien && IE.jsx.str("div", {
                style: "position:absolute; bottom:1rem; z-index:101; left:50%;"
            }, aParams.options.mentionsPagesPubliques.lien)), " ", IE.jsx.str("div", {
                "ie-identite": "getIdentiteFooter",
                style: "position:fixed; bottom:0; left:0; right:0; z-index:101;"
            }), aParams.options.urlImageFond && aParams.options.heightImageSuite && aParams.options.widthImageSuite && aParams.options.urlImageSuite && (IE.jsx.str("div", {
                id: aParams.id.imageSuite,
                onclick: `$('#${aParams.id.imageSuite}').toggle();`,
                class: "AvecMain full-width",
                style: `display: none;position:absolute;height:calc(100% - 50px);min-height:${aParams.options.heightImageSuite}px;padding-bottom:50px;max-width:100vw;background-image: url(${aParams.options.urlImageFond});top:30px;left:0;right:0;z-index:1;`
            }, IE.jsx.str("div", {
                class: "full-size",
                style: `max-height:calc(100% - 47px); background-position:center center;background-repeat: no-repeat;background-image: url(${aParams.options.urlImageSuite});background-size: contain;`
            }), IE.jsx.str("div", {
                class: "flex-contain flex-center p-right-xl",
                style: "position:absolute;right:30px;max-width:60rem"
            }, aParams.options.avecLienSuite && aParams.options.lienSuite && aParams.options.texteLienSuite && aParams.options.suiviLienSuite && (IE.jsx.str("a", {
                href: aParams.options.lienSuite,
                class: "Texte12 LienLouvre fluid-bloc m-right-l text-right",
                onclick: `$.get('${aParams.options.suiviLienSuite}');`
            }, aParams.options.texteLienSuite)), aParams.options.lienLogo && aParams.options.styleLogo && aParams.options.suiviLogo && (IE.jsx.str("a", {
                href: aParams.options.lienLogo,
                class: "fix-bloc m-right-big",
                style: aParams.options.styleLogo,
                onclick: `$.get('${aParams.options.suiviLogo}');`,
                "aria-label": aParams.traductions.ariaDescrLienPartenaire
            })))))), " "));
        }
        ;
        exports.getHtml = getHtml;
    },
    fn: 'interfaceconnexion.tsxmodele.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireRecupMDP = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetTraduction_1 = require("ObjetTraduction");
        exports.UtilitaireRecupMDP = {
            getTraductions: function(aEstCreation, aAvecResetParParent) {
                return {
                    texteHeader: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.headerCreation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.header'),
                    texteStage1: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1Creation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1'),
                    texteStage1_bis: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage1_bis'),
                    texteStage2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2'),
                    texteStage3: aEstCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3Creation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3'),
                    texteStage: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage'),
                    texteStage2_ok: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ok'),
                    texteStage2_ko_titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_titre'),
                    texteStage2_ko_multi: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_multi'),
                    texteStage2_ko_multi2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_multi2'),
                    texteStage2_ko_zero: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_zero'),
                    texteStage2_ko_zero2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_zero2'),
                    texteStage2_ko_parent: aAvecResetParParent ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_parent') : '',
                    texteStage2_ko_creation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation'),
                    texteStage2_ko_creation2: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation2'),
                    texteStage2_ko_creation3: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage2_ko_creation3'),
                    texteStage3_ok: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok'),
                    texteStage3_ok_creation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok_creation'),
                    texteStage3_ok_creationbis: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ok_creationbis'),
                    texteStage3_ko: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.stage3_ko'),
                    texteMailOk: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.mailOk'),
                    texteMdp: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.motdepasse'),
                    texteConfirmation: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.confirmation'),
                    texteTerminer: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.terminer'),
                    texteNom: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.nom'),
                    textePrenom: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.prenom'),
                    texteEMail: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.email'),
                    texteEMailValide: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.emailValide')
                };
            },
            estCodeValide: function(aCode) {
                let lIsOkCode = false;
                if (aCode && RegExp('[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}').test(aCode)) {
                    const lTabAlpha = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                    let lTotal = 0;
                    for (const lChar of aCode) {
                        if (lChar !== '-' && !MethodesObjet_1.MethodesObjet.isFunction(lChar)) {
                            lTotal += lTabAlpha.indexOf(lChar) + 1;
                        }
                    }
                    if (lTotal % 62 === 0) {
                        lIsOkCode = true;
                    }
                }
                return lIsOkCode;
            }
        };
    },
    fn: 'utilitairerecupmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteRecupIdMDP = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        const ObjetCryptage_1 = require("ObjetCryptage");
        const ObjetTraduction_1 = require("ObjetTraduction");
        class ObjetRequeteRecupIdMDP extends ObjetRequeteJSON_1.ObjetRequeteSaisie {
            constructor(...aParams) {
                super(...aParams);
                this.setOptions({
                    afficherMessageErreur: false,
                    messageDetail: ObjetTraduction_1.GTraductions.getValeur('EnregistrementEnCours'),
                    messageEchecModeExclusif: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                });
            }
            lancerRequete(aObjet) {
                const lEtape = aObjet.etape;
                const lEstCreation = aObjet.estCreation;
                const lCourriel = aObjet.courriel;
                const lNom = aObjet.nom;
                const lPrenom = aObjet.prenom;
                delete (aObjet.etape);
                delete (aObjet.nom);
                delete (aObjet.prenom);
                this.JSON.etape = lEtape;
                if (lEstCreation) {
                    this.JSON.estCreation = lEstCreation;
                    if (lEtape === 3) {
                        this.JSON.courriel = lCourriel;
                        delete (aObjet.courriel);
                    }
                    this.JSON.nom = lNom;
                    this.JSON.prenom = lPrenom;
                }
                this.JSON.donnee = lEtape === 3 ? ObjetCryptage_1.GCryptage.cryptageRSA.encrypter2048(new forge.util.ByteBuffer(JSON.stringify(aObjet))) : JSON.stringify(aObjet);
                return this.appelAsynchrone();
            }
            traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre) {
                super.traiterReponseSaisieMessage(aMessagesErreurRapportSaisie, aReponse, aTitre);
                if (this.messageErreur) {
                    this.messageErreur.titre = aTitre;
                }
            }
            actionApresRequete(aGenreReponse) {
                const lResult = Object.assign({
                    requeteReussite: aGenreReponse === ObjetRequeteJSON_1.EGenreReponseSaisie.succes,
                    JSONSignature: this.JSONSignature,
                    messageErreur: this.messageErreur
                }, this.JSONReponse);
                lResult.estEchec = this.JSONReponse.estEchec !== false;
                GEtatUtilisateur.setReglesSaisieMotDePasse(this.JSONReponse);
                this.callbackReussite.appel(lResult);
            }
        }
        exports.ObjetRequeteRecupIdMDP = ObjetRequeteRecupIdMDP;
        CollectionRequetes_1.Requetes.inscrire('RecupererInfosConnexion', ObjetRequeteRecupIdMDP);
    },
    fn: 'objetrequeterecupidmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetFenetreRecupIdMDP = void 0;
        require('ObjetFenetreRecupIdMDP.css');
        const Invocateur_1 = require("Invocateur");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        const LienPolitiqueMotDePasse_1 = require("LienPolitiqueMotDePasse");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ToucheClavier_1 = require("ToucheClavier");
        const ValidationMotDePasse_1 = require("ValidationMotDePasse");
        const UtilitaireEmail_1 = require("UtilitaireEmail");
        const UtilitaireRecupMDP_1 = require("UtilitaireRecupMDP");
        const tag_1 = require("tag");
        const ObjetRequeteRecupIdMDP_1 = require("ObjetRequeteRecupIdMDP");
        const ObjetHtml_1 = require("ObjetHtml");
        class ObjetFenetreRecupIdMDP extends ObjetFenetre_1.ObjetFenetre {
            constructor(...aParams) {
                super(...aParams);
                this.idStage = this.Nom + '_stage';
                this.idNom = this.Nom + '_nom';
                this.idPrenom = this.Nom + '_prenom';
                this.idCourriel = this.Nom + '_courriel';
                this.idCode = this.Nom + '_codesec';
                this.idMdp = this.Nom + '_mdp';
                this.idMdpbis = this.Nom + '_mdpbis';
                this.idValidationMdp = this.Nom + '_validMdp';
                this.stage = 1;
                this.courriel = '';
                this._nom = '';
                this._prenom = '';
                this.code = '';
                this.options = {
                    avecRecupParParent: false
                };
                this.setOptionsFenetre({
                    titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.titre'),
                    largeur: 675,
                    hauteur: 330,
                    listeBoutons: [ObjetTraduction_1.GTraductions.getValeur('principal.annuler')],
                    largeurMin: 550,
                    hauteurMin: 323,
                    avecCroixFermeture: false,
                    fermerFenetreSurClicHorsFenetre: false,
                    estCreation: false
                });
            }
            free() {
                super.free();
                Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    classEtape: function(aEtape) {
                        const lClass = ['etape', 'fluid-bloc'];
                        if (aEtape !== aInstance.stage) {
                            lClass.push('is-disabled');
                        }
                        return lClass.join(' ');
                    },
                    inputMail: {
                        getValue: function() {
                            return aInstance.courriel;
                        },
                        setValue: function(aValue) {
                            aInstance.courriel = aValue;
                        },
                        keyupEnter: function() {
                            if (UtilitaireEmail_1.TUtilitaireEmail.estValide(aInstance.courriel.trim())) {
                                aInstance.evenementBouton();
                            }
                        },
                        getStyleCourriel: function() {
                            return {
                                color: aInstance.courriel && !UtilitaireEmail_1.TUtilitaireEmail.estValide(aInstance.courriel.trim()) ? 'red' : ''
                            };
                        },
                        getDisabled: function() {
                            return aInstance.stage !== 1;
                        }
                    },
                    inputNom: {
                        getValue: function() {
                            return aInstance._nom;
                        },
                        setValue: function(aValue) {
                            aInstance._nom = aValue;
                        },
                        getDisabled: function() {
                            return aInstance.stage !== 1;
                        }
                    },
                    inputPrenom: {
                        getValue: function() {
                            return aInstance._prenom;
                        },
                        setValue: function(aValue) {
                            aInstance._prenom = aValue;
                        },
                        getDisabled: function() {
                            return aInstance.stage !== 1;
                        }
                    },
                    inputCode: {
                        getValue: function() {
                            return aInstance.code;
                        },
                        setValue: function(aValue) {
                            aInstance.code = aValue;
                        },
                        keyupEnter: function() {
                            aInstance.evenementBouton();
                        },
                        getStyle: function() {
                            return {
                                color: aInstance.code && !UtilitaireRecupMDP_1.UtilitaireRecupMDP.estCodeValide(aInstance.code) ? 'red' : ''
                            };
                        },
                        getDisabled: function() {
                            return aInstance.stage !== 2;
                        }
                    },
                    iMDP: {
                        getValue: function(aNr) {
                            if (!!aInstance.mds) {
                                return aInstance.mds[aNr] || '';
                            }
                            return '';
                        },
                        setValue: function(aNr, aValue) {
                            if (!aInstance.mds) {
                                aInstance.mds = {};
                            }
                            aInstance.mds[aNr] = aValue;
                        },
                        getDisabled: function() {
                            return aInstance.stage !== 3;
                        }
                    },
                    btn: {
                        visible: function(etape) {
                            return aInstance.stage === etape;
                        },
                        etape: {
                            event: function() {
                                aInstance.evenementBouton();
                            },
                            getDisabled: function(etape) {
                                if (etape === 1) {
                                    return !UtilitaireEmail_1.TUtilitaireEmail.estValide(aInstance.courriel.trim()) && !aInstance.optionsFenetre.estCreation;
                                } else if (etape === 2) {
                                    return aInstance.code.trim() === '';
                                } else if (etape === 3) {
                                    return ($('#' + aInstance.idMdp.escapeJQ()).val() === '');
                                }
                            }
                        }
                    },
                    montrerMasquerMotDePasse: {
                        getModel: {
                            event: function(aId) {
                                const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                                lTarget.type = lTarget.type === 'password' ? 'text' : 'password';
                                this.controleur.$refreshSelf();
                            }
                        },
                        getClass(aId) {
                            const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                            return (lTarget === null || lTarget === void 0 ? void 0 : lTarget.type) === 'password' ? 'icon_eye_open' : 'icon_eye_close';
                        },
                        getTitle(aId) {
                            const lTarget = ObjetHtml_1.GHtml.getElement(aId);
                            return (lTarget === null || lTarget === void 0 ? void 0 : lTarget.type) === 'password' ? ObjetTraduction_1.GTraductions.getValeur('connexion.VoirMDP') : ObjetTraduction_1.GTraductions.getValeur('connexion.masquerMDP');
                        }
                    }
                });
            }
            composeContenu() {
                const lTraductionsRecupMDP = UtilitaireRecupMDP_1.UtilitaireRecupMDP.getTraductions(this.optionsFenetre.estCreation, this.options.avecRecupParParent);
                return (0,
                tag_1.tag)('div', {
                    class: ['ObjetRecupIdMdp']
                }, (0,
                tag_1.tag)('p', {
                    class: ['message']
                }, lTraductionsRecupMDP.texteHeader), (0,
                tag_1.tag)('div', {
                    class: ['RecupIDMdp_Global_wrapper']
                }, this.composeEtape1(lTraductionsRecupMDP), this.composeEtape2(lTraductionsRecupMDP), this.composeEtape3(lTraductionsRecupMDP), (0,
                tag_1.tag)('div', {
                    class: ['lien-conteneur']
                }, LienPolitiqueMotDePasse_1.TLienPolitiqueMotDePasse.getLien())));
            }
            composeEtape1(aTraductions) {
                const lLabel = `${aTraductions.texteStage} 1 : ${aTraductions.texteStage1} ${(!this.optionsFenetre.estCreation) ? `<span>${aTraductions.texteStage1_bis}</span>` : ''}`;
                const lBtn = (0,
                tag_1.tag)('ie-btnicon', {
                    class: ['icon_envoyer', 'bt-activable', 'bt-big'],
                    'ie-model': tag_1.tag.funcAttr('btn.etape', [1]),
                    'ie-display': tag_1.tag.funcAttr('btn.visible', [1]),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                });
                return (0,
                tag_1.tag)('div', {
                    class: ['flex-contain', 'cols', 'etape_main']
                }, (0,
                tag_1.tag)('label', {
                    for: this.idCourriel
                }, lLabel), (0,
                tag_1.tag)('div', {
                    class: ['etape_wrapper']
                }, (0,
                tag_1.tag)('div', {
                    'ie-class': tag_1.tag.funcAttr('classEtape', [1])
                }, this.composeCoordonnees(aTraductions)), (0,
                tag_1.tag)('div', {
                    class: ['etape_btn', 'fix-bloc', 'self-end']
                }, lBtn)));
            }
            composeCoordonnees(aTraductions) {
                if (this.optionsFenetre.estCreation) {
                    return [(0,
                    tag_1.tag)('div', {
                        class: ['input-field']
                    }, (0,
                    tag_1.tag)('label', {
                        for: this.idNom
                    }, aTraductions.texteNom), (0,
                    tag_1.tag)('input', {
                        id: this.idNom,
                        name: 'nom',
                        class: ['round-style'],
                        type: 'text',
                        'aria-required': 'true',
                        'ie-model': 'inputNom',
                        tabindex: '0'
                    })), (0,
                    tag_1.tag)('div', {
                        class: ['input-field']
                    }, (0,
                    tag_1.tag)('label', {
                        for: this.idPrenom
                    }, aTraductions.textePrenom), (0,
                    tag_1.tag)('input', {
                        id: this.idPrenom,
                        name: 'prenom',
                        class: ['round-style'],
                        type: 'text',
                        'aria-required': 'true',
                        'ie-model': 'inputPrenom',
                        tabindex: '0'
                    })), (0,
                    tag_1.tag)('div', {
                        class: ['input-field']
                    }, (0,
                    tag_1.tag)('label', {
                        for: this.idCourriel
                    }, aTraductions.texteEMail), (0,
                    tag_1.tag)('input', {
                        id: this.idCourriel,
                        name: 'courriel',
                        class: ['round-style'],
                        type: 'email',
                        'aria-required': 'true',
                        'ie-model': 'inputMail',
                        'ie-style': 'getStyleCourriel',
                        tabindex: '0'
                    }))].join('');
                } else {
                    return (0,
                    tag_1.tag)('div', {
                        class: ['input-field']
                    }, (0,
                    tag_1.tag)('input', {
                        id: this.idCourriel,
                        name: 'courriel',
                        class: ['round-style'],
                        type: 'email',
                        'aria-required': 'true',
                        'ie-model': 'inputMail',
                        'ie-style': 'getStyleCourriel',
                        tabindex: '0'
                    }));
                }
            }
            composeEtape2(aTraductions) {
                const lLabel = `${aTraductions.texteStage} 2 : ${aTraductions.texteStage2}`;
                const lBtn = (0,
                tag_1.tag)('ie-btnicon', {
                    class: ['icon_envoyer', 'bt-activable', 'bt-big'],
                    'ie-model': tag_1.tag.funcAttr('btn.etape', [2]),
                    'ie-display': tag_1.tag.funcAttr('btn.visible', [2]),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                });
                return (0,
                tag_1.tag)('div', {
                    class: ['flex-contain', 'cols', 'etape_main']
                }, (0,
                tag_1.tag)('label', {
                    for: this.idCode
                }, lLabel), (0,
                tag_1.tag)('div', {
                    class: ['etape_wrapper']
                }, (0,
                tag_1.tag)('div', {
                    'ie-class': tag_1.tag.funcAttr('classEtape', [2])
                }, (0,
                tag_1.tag)('div', {
                    class: ['input-field']
                }, (0,
                tag_1.tag)('input', {
                    id: this.idCode,
                    'ie-model': 'inputCode',
                    class: ['round-style'],
                    type: 'text',
                    disabled: 'disabled',
                    tabindex: '0',
                    'aria-required': 'true'
                }))), (0,
                tag_1.tag)('div', {
                    class: ['etape_btn', 'fix-bloc', 'self-end']
                }, lBtn)));
            }
            composeEtape3(aTraductions) {
                const lLabel = `${aTraductions.texteStage} 3 : ${aTraductions.texteStage3}`;
                const lBtn = (0,
                tag_1.tag)('ie-btnicon', {
                    class: ['icon_disquette_pleine', 'bt-activable', 'bt-big'],
                    'ie-model': tag_1.tag.funcAttr('btn.etape', [3]),
                    'ie-display': tag_1.tag.funcAttr('btn.visible', [3]),
                    title: ObjetTraduction_1.GTraductions.getValeur('Valider')
                });
                return (0,
                tag_1.tag)('div', {
                    class: ['flex-contain', 'cols', 'etape_main']
                }, (0,
                tag_1.tag)('label', {
                    id: `${this.Nom}_group_mdp`
                }, lLabel), (0,
                tag_1.tag)('div', {
                    class: ['etape_wrapper']
                }, (0,
                tag_1.tag)('div', {
                    'ie-class': tag_1.tag.funcAttr('classEtape', [3]),
                    role: 'group',
                    'aria-labelledby': `${this.Nom}_group_mdp`
                }, (0,
                tag_1.tag)('div', {
                    class: ['input-field', 'mdp']
                }, (0,
                tag_1.tag)('label', {
                    for: this.idMdp
                }, aTraductions.texteMdp), (0,
                tag_1.tag)('div', {
                    class: ['as-input', 'as-password']
                }, (0,
                tag_1.tag)('input', {
                    id: this.idMdp,
                    'ie-model': 'iMDP(1)',
                    type: 'password',
                    disabled: 'disabled',
                    tabindex: '0',
                    'aria-required': 'true',
                    'auto-complete': 'new-password'
                }), (0,
                tag_1.tag)('ie-btnicon', {
                    class: ['icon_eye_open'],
                    'ie-model': 'montrerMasquerMotDePasse.getModel(\'' + this.idMdp + '\')',
                    'ie-class': 'montrerMasquerMotDePasse.getClass(\'' + this.idMdp + '\')',
                    'ie-title': 'montrerMasquerMotDePasse.getTitle(\'' + this.idMdp + '\')'
                }))), (0,
                tag_1.tag)('div', {
                    class: ['input-field', 'mdp']
                }, (0,
                tag_1.tag)('label', {
                    for: this.idMdpbis
                }, aTraductions.texteConfirmation), (0,
                tag_1.tag)('div', {
                    class: ['as-input', 'as-password']
                }, (0,
                tag_1.tag)('input', {
                    id: this.idMdpbis,
                    'ie-model': 'iMDP(2)',
                    type: 'password',
                    disabled: 'disabled',
                    tabindex: '0',
                    'aria-required': 'true',
                    'auto-complete': 'new-password'
                }), (0,
                tag_1.tag)('ie-btnicon', {
                    class: ['icon_eye_open'],
                    'ie-model': 'montrerMasquerMotDePasse.getModel(\'' + this.idMdpbis + '\')',
                    'ie-class': 'montrerMasquerMotDePasse.getClass(\'' + this.idMdpbis + '\')',
                    'ie-title': 'montrerMasquerMotDePasse.getTitle(\'' + this.idMdpbis + '\')'
                })))), (0,
                tag_1.tag)('div', {
                    class: ['etape_btn', 'fix-bloc', 'self-end']
                }, lBtn)), (0,
                tag_1.tag)('div', {
                    id: this.idValidationMdp,
                    class: ['validationMdp']
                }));
            }
            evenementBouton() {
                if (this.optionsFenetre.estCreation && ((this._nom.trim() === '') || (this._prenom.trim() === '') || !UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim()))) {
                    const lMessage = [ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecInfosManquantes'), '<br />'];
                    lMessage.push('<ul>');
                    if (this._nom.trim() === '') {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.nom'), '</li>');
                    }
                    if (this._prenom.trim() === '') {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.prenom'), '</li>');
                    }
                    if (!UtilitaireEmail_1.TUtilitaireEmail.estValide(this.courriel.trim())) {
                        lMessage.push('<li>', ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.emailValide'), '</li>');
                    }
                    lMessage.push('</ul>');
                    GApplication.getMessage().afficher({
                        titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecValidation'),
                        message: lMessage.join('')
                    });
                } else {
                    this.evenementBoutonApresVerification();
                }
            }
            async evenementBoutonApresVerification() {
                const lData = {
                    etape: this.stage
                };
                let lEnvoyer = false;
                if (this.optionsFenetre.estCreation) {
                    lData.estCreation = this.optionsFenetre.estCreation;
                }
                if (this.stage === 1) {
                    lData.courriel = this.courriel.trim();
                    lData.nom = this._nom.trim();
                    lData.prenom = this._prenom.trim();
                    lEnvoyer = true;
                    const lTraduction = this.optionsFenetre.estCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.headerCreation') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.header');
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage, (aData) => {
                        alert(lTraduction);
                        aData.message = lTraduction;
                    }
                    );
                } else if (this.stage === 2) {
                    if (!UtilitaireRecupMDP_1.UtilitaireRecupMDP.estCodeValide(this.code)) {
                        await GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.CodeInvalide')
                        });
                        $(`#${this.idCode.escapeJQ()}`).focus();
                        return;
                    } else {
                        this.actionSurRecupererDonnees();
                    }
                } else if (this.stage === 3) {
                    const lMdp = $('#' + this.idMdp.escapeJQ()).val();
                    const lMdpBis = $('#' + this.idMdpbis.escapeJQ()).val();
                    if (!lMdp || lMdp !== lMdpBis) {
                        GApplication.getMessage().afficher({
                            message: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.ConfirmationIncorrecte')
                        });
                        $('#' + this.idMdpbis.escapeJQ()).val('').focus();
                        return;
                    }
                    lData.codeSecurite = this.code;
                    lData.mdp = forge.util.encodeUtf8(lMdp.trim());
                    if (this.optionsFenetre.estCreation) {
                        lData.courriel = this.courriel.trim();
                        lData.nom = this._nom.trim();
                        lData.prenom = this._prenom.trim();
                    }
                    lEnvoyer = true;
                } else {
                    location.reload();
                }
                if (lEnvoyer) {
                    this.actionSurRecupererDonnees(await new ObjetRequeteRecupIdMDP_1.ObjetRequeteRecupIdMDP(this).lancerRequete(lData));
                }
            }
            surValidation() {
                if (this.stage === 1) {
                    this.fermer();
                } else {
                    location.reload();
                }
            }
            async actionSurRecupererDonnees(aResult) {
                if (aResult && !aResult.requeteReussite && (!aResult.JSONSignature || !aResult.JSONSignature.Erreur)) {
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    await GApplication.getMessage().afficher({
                        titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                        message: aResult.messageErreur && aResult.messageErreur.message ? aResult.messageErreur.message : (this.optionsFenetre.estCreation ? ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecCreationCompte') : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecRecuperation'))
                    });
                    location.reload();
                    return;
                }
                this.erreurSMTP = aResult && aResult.erreurSMTP;
                const lTraductionsRecupMDP = UtilitaireRecupMDP_1.UtilitaireRecupMDP.getTraductions(this.optionsFenetre.estCreation, this.options.avecRecupParParent);
                if (this.stage === 1) {
                    if (aResult.mailEnvoye) {
                        this.setBoutonActif(0, false);
                        this.stage = 2;
                        const lThis = this;
                        await GApplication.getMessage().afficher({
                            type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                            message: lTraductionsRecupMDP.texteMailOk
                        });
                        $('#' + lThis.idCode.escapeJQ()).focus();
                    } else if (aResult.nbrUtilisateurs >= 0) {
                        if (this.optionsFenetre.estCreation) {
                            let lMessage = lTraductionsRecupMDP.texteStage2_ko_multi;
                            if (aResult.nbrUtilisateurs === 1) {
                                lMessage = '<span class="Gras">' + lTraductionsRecupMDP.texteStage2_ko_creation + '</span><br />' + lTraductionsRecupMDP.texteStage2_ko_creation2 + '<br />' + lTraductionsRecupMDP.texteStage2_ko_creation3;
                            }
                            await GApplication.getMessage().afficher({
                                titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecCreation'),
                                message: lMessage
                            });
                            this.fermer();
                        } else if ((aResult.nbrUtilisateurs === 0) || (aResult.nbrUtilisateurs > 1)) {
                            let lMessage = `<span class="Gras">${lTraductionsRecupMDP.texteStage2_ko_titre}</span><br /><br />`;
                            if (aResult.nbrUtilisateurs === 0) {
                                lMessage += `${lTraductionsRecupMDP.texteStage2_ko_zero}<br />`;
                                if (this.options.avecRecupParParent) {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_parent;
                                } else {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_zero2;
                                }
                            } else {
                                lMessage += `${lTraductionsRecupMDP.texteStage2_ko_multi}<br />`;
                                if (this.options.avecRecupParParent) {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_parent;
                                } else {
                                    lMessage += lTraductionsRecupMDP.texteStage2_ko_multi2;
                                }
                            }
                            await GApplication.getMessage().afficher({
                                message: lMessage
                            });
                            $('#' + this.idCourriel.escapeJQ()).focus();
                        }
                    } else {
                        await GApplication.getMessage().afficher({
                            titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                            message: aResult.messageErreur ? aResult.messageErreur.message : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.erreurSMTP')
                        });
                        Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                        this.fermer();
                    }
                } else if (this.stage === 2) {
                    this.stage = 3;
                    if (GEtatUtilisateur.reglesSaisieMotDePasse.init) {
                        $('#' + this.idValidationMdp.escapeJQ()).html(ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, null, {
                            avecEspace: false
                        }));
                    }
                    setTimeout( () => {
                        $('#' + this.idMdp.escapeJQ()).focus();
                    }
                    , 400);
                } else if (this.stage === 3) {
                    if (aResult.erreurMDP) {
                        const lJMdp = $('#' + this.idMdp.escapeJQ());
                        await GApplication.getMessage().afficher({
                            titre: ObjetTraduction_1.GTraductions.getValeur('saisieMDP.EchecModification'),
                            message: ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, aResult.erreurMDP)
                        });
                        lJMdp.focus();
                        $('#' + this.idValidationMdp.escapeJQ()).html(ValidationMotDePasse_1.ValidationMotDePasse.construire(GEtatUtilisateur.reglesSaisieMotDePasse, aResult.erreurMDP, {
                            avecEspace: false
                        }));
                        $('#' + this.idMdp.escapeJQ()).val('');
                        $('#' + this.idMdpbis.escapeJQ()).val('');
                    } else {
                        this.stage = -1;
                        if (!aResult.estEchec) {
                            this.setOptionsFenetre({
                                listeBoutons: [lTraductionsRecupMDP.texteTerminer]
                            });
                            this.setBoutonActif(0, true);
                            Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                            if (this.optionsFenetre.estCreation) {
                                await GApplication.getMessage().afficher({
                                    titre: lTraductionsRecupMDP.texteStage3_ok_creation,
                                    message: lTraductionsRecupMDP.texteStage3_ok_creationbis
                                });
                                this.fermer();
                                this.callback.appel(this.stage, {
                                    identifiant: this.courriel.trim()
                                });
                            } else {
                                await GApplication.getMessage().afficher({
                                    message: lTraductionsRecupMDP.texteStage3_ok
                                });
                                location.reload();
                            }
                        } else {
                            Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                            await GApplication.getMessage().afficher({
                                titre: aResult.messageErreur ? aResult.messageErreur.titre : '',
                                message: aResult.messageErreur && aResult.messageErreur.message ? aResult.messageErreur.message : ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.EchecRecuperation')
                            });
                            location.reload();
                        }
                    }
                }
            }
            recupererDonnees() {
                super.recupererDonnees();
                $('#' + this.idCourriel.escapeJQ()).focus();
                $('#' + this.idMdp.escapeJQ() + ', #' + this.idMdpbis.escapeJQ()).on('keyup blur', {
                    aObjet: this
                }, this.estMdpValide);
            }
            async afficher() {
                if (this.erreurSMTP) {
                    GApplication.getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.erreurSMTP')
                    });
                    Invocateur_1.Invocateur.desabonner(Invocateur_1.ObjetInvocateur.events.autorisationRechargementPage);
                    this.fermer();
                } else {
                    super.afficher();
                }
            }
            estMdpValide(event) {
                const lMdp = $('#' + event.data.aObjet.idMdp.escapeJQ()).val();
                const lIsOkMdp = lMdp.trim().length > 0;
                if (lIsOkMdp && event.type === 'keyup' && event.which === ToucheClavier_1.ToucheClavier.RetourChariot) {
                    event.data.aObjet.evenementBouton();
                }
            }
        }
        exports.ObjetFenetreRecupIdMDP = ObjetFenetreRecupIdMDP;
    },
    fn: 'objetfenetre_recupidmdp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetRequeteParametresUtilisateur = void 0;
        const ObjetRequeteJSON_1 = require("ObjetRequeteJSON");
        const CollectionRequetes_1 = require("CollectionRequetes");
        class ObjetRequeteParametresUtilisateur extends ObjetRequeteJSON_1.ObjetRequeteConsultation {
        }
        exports.ObjetRequeteParametresUtilisateur = ObjetRequeteParametresUtilisateur;
        CollectionRequetes_1.Requetes.inscrire('ParametresUtilisateur', ObjetRequeteParametresUtilisateur);
    },
    fn: 'objetrequeteparametresutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.InterfaceConnexionEspace = void 0;
        const ObjetTraduction_1 = require("ObjetTraduction");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const _InterfaceConnexion_1 = require("_InterfaceConnexion");
        require("ObjetRequeteAuthentificationPN.js");
        require("ObjetRequeteIdentification.js");
        const GImageConnexion = require("ObjetImageConnexion");
        const ObjetChaine_1 = require("ObjetChaine");
        const TypeArrierePlanAuthentification_1 = require("TypeArrierePlanAuthentification");
        const UtilitaireChangementLangue_1 = require("UtilitaireChangementLangue");
        const ObjetBandeauEspace_1 = require("ObjetBandeauEspace");
        const InterfaceBandeauPiedCommune_1 = require("InterfaceBandeauPiedCommune");
        const ObjetFenetre_1 = require("ObjetFenetre");
        const UtilitaireSecurisationCompte_1 = require("UtilitaireSecurisationCompte");
        const ObjetHtml_1 = require("ObjetHtml");
        const MethodesObjet_1 = require("MethodesObjet");
        const ModeleInterfaceConnexion = require("InterfaceConnexion.tsxModele");
        const MultiObjetFenetreRecupIdMDP = require("ObjetFenetre_RecupIdMDP");
        const ObjetRequeteParametresUtilisateur_1 = require("ObjetRequeteParametresUtilisateur");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        require('Connexion.css');
        require('pages_connexion.css');
        class InterfaceConnexionEspace extends _InterfaceConnexion_1._InterfaceConnexion {
            constructor(...aParams) {
                super(...aParams);
                this.parametresSco = GParametres;
                this.applicationSco = GApplication;
                this.etatUtilisateurSco = this.applicationSco.getEtatUtilisateur();
                this.setOptions({
                    genreImageConnexion: this.parametresSco.genreImageConnexion,
                    urlImageConnexion: this.parametresSco.urlImageConnexion,
                    avecChoixConnexion: this.parametresSco.avecChoixConnexion,
                    avecRecupIdMdp: this.parametresSco.avecRecuperationInfosConnexion,
                    parentAutoriseChangerMDP: this.parametresSco.parentAutoriseChangerMDP,
                    pourInscription: [Enumere_Espace_1.EGenreEspace.Inscription].includes(this.etatUtilisateurSco.GenreEspace),
                    requetes: {
                        identification: 'Identification',
                        authentification: 'Authentification'
                    },
                    utilitaireChangementLangue: UtilitaireChangementLangue_1.UtilitaireChangementLangue
                });
            }
            construireInstances() {
                super.construireInstances();
                if (MultiObjetFenetreRecupIdMDP && MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP) {
                    this.identFenetreRecupIdMDP = this.addFenetre(MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP, null, this.initialiserRecupIdMDP);
                }
            }
            getControleur(aInstance) {
                return $.extend(true, super.getControleur(aInstance), {
                    getIdentiteBandeau: function() {
                        return {
                            class: ObjetBandeauEspace_1.ObjetBandeauEspace,
                            pere: {},
                            init: function(aBandeau) {
                                var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
                                const lEstDarkMode = ThemesCouleurs_1.ThemesCouleurs.getDarkMode();
                                let lLogoCollectiviteImage = null;
                                let lLogoCollectiviteLien = null;
                                if ((_a = aInstance.parametresSco) === null || _a === void 0 ? void 0 : _a.collectivite) {
                                    lLogoCollectiviteImage = lEstDarkMode && ((_e = (_d = (_c = (_b = aInstance.parametresSco) === null || _b === void 0 ? void 0 : _b.collectivite) === null || _c === void 0 ? void 0 : _c.logo) === null || _d === void 0 ? void 0 : _d.siteDesktop) === null || _e === void 0 ? void 0 : _e.sombre) ? (_j = (_h = (_g = (_f = aInstance.parametresSco) === null || _f === void 0 ? void 0 : _f.collectivite) === null || _g === void 0 ? void 0 : _g.logo) === null || _h === void 0 ? void 0 : _h.siteDesktop) === null || _j === void 0 ? void 0 : _j.sombre : (_o = (_m = (_l = (_k = aInstance.parametresSco) === null || _k === void 0 ? void 0 : _k.collectivite) === null || _l === void 0 ? void 0 : _l.logo) === null || _m === void 0 ? void 0 : _m.siteDesktop) === null || _o === void 0 ? void 0 : _o.clair;
                                    if ((_q = (_p = aInstance.parametresSco) === null || _p === void 0 ? void 0 : _p.collectivite) === null || _q === void 0 ? void 0 : _q.urlCollectivite) {
                                        lLogoCollectiviteLien = (_s = (_r = aInstance.parametresSco) === null || _r === void 0 ? void 0 : _r.collectivite) === null || _s === void 0 ? void 0 : _s.urlCollectivite;
                                    }
                                }
                                aBandeau.setParametres({
                                    logoDepartementImage: aInstance.parametresSco.logoDepartementImage,
                                    logoDepartementLien: aInstance.parametresSco.logoDepartementLien,
                                    logoCollectiviteImage: lLogoCollectiviteImage,
                                    logoCollectiviteLien: lLogoCollectiviteLien
                                });
                            }
                        };
                    },
                    getIdentiteFooter: function() {
                        return {
                            class: InterfaceBandeauPiedCommune_1.InterfaceBandeauPiedCommune,
                            pere: {}
                        };
                    }
                });
            }
            initialiserRecupIdMDP(aInstance) {
                aInstance.setOptions({
                    avecRecupParParent: this.options.parentAutoriseChangerMDP
                });
            }
            eventCreation() {
                if (this.applicationSco.getModeExclusif()) {
                    return this.applicationSco.getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                    });
                }
                const lInstance = ObjetFenetre_1.ObjetFenetre.creerInstanceFenetre(MultiObjetFenetreRecupIdMDP.ObjetFenetreRecupIdMDP, {
                    pere: this,
                    initialiser: function(aInstance) {
                        aInstance.setOptionsFenetre({
                            titre: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.titreCreation'),
                            estCreation: true
                        });
                    },
                    evenement: function(aStage) {
                        if (aStage === -1) {
                            this.options.pourInscription = false;
                        }
                    }
                });
                lInstance.afficher();
            }
            evenementRecupIdMDP() {
                if (this.applicationSco.getModeExclusif()) {
                    return this.applicationSco.getMessage().afficher({
                        message: ObjetTraduction_1.GTraductions.getValeur('fenetreRecupIdMDP.RecupModeConsultation')
                    });
                }
                this.getInstance(this.identFenetreRecupIdMDP).afficher();
            }
            construirePage() {
                const lFctHtml = ModeleInterfaceConnexion.getHtml;
                let lGenreImageConnexion = this.options.genreImageConnexion;
                const lObjetImage = GImageConnexion.getObjetImagePronote(lGenreImageConnexion);
                lObjetImage.avecFichierFond = false;
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre) {
                    if (this.applicationSco.estEDT) {
                        lObjetImage.classImageFond = 'bg-espace-edt ';
                        lObjetImage.applicationNom = 'espace-edt ';
                    } else {
                        lObjetImage.lienLogo = lObjetImage.lienLogo || 'https://www.louvre.fr';
                        lObjetImage.styleLogo = lObjetImage.styleLogo || 'background-image: url(images/Connexion/Louvre/logo-louvre.png);width: 110px;height: 33px;';
                        lObjetImage.avecLienSuite = true;
                        lObjetImage.texteLienSuite = lObjetImage.texteLienSuite || ObjetTraduction_1.GTraductions.getValeur('Louvre.Lien', ['<b><em>' + lObjetImage.nomExpo + '</em></b>']);
                        lObjetImage.lienSuite = lObjetImage.lienSuite || lObjetImage.lien;
                    }
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre) {
                    if (this.applicationSco.estPrimaire) {
                        lObjetImage.classImageFond = 'bg-espace-primaire ';
                        lObjetImage.applicationNom = 'espace-primaire ';
                    }
                }
                if (([TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Neutre, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseFichier, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseURL].indexOf(lGenreImageConnexion) === -1) && !lObjetImage.urlImageFond) {
                    lGenreImageConnexion = TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Neutre;
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseURL) {
                    lObjetImage.classImageFond = 'Cover';
                }
                if (lGenreImageConnexion === TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.PersonnaliseFichier) {
                    lObjetImage.classImageFond = 'Cover';
                    lObjetImage.avecFichierFond = true;
                    lObjetImage.dataImageFond = this.parametresSco.urlFondEcran || '';
                }
                let lImageEspace = 'Icone_EspaceInvite';
                switch (this.etatUtilisateurSco.GenreEspace) {
                case Enumere_Espace_1.EGenreEspace.Professeur:
                    lImageEspace = 'Icone_EspaceEnseignant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Eleve:
                    lImageEspace = 'Icone_EspaceEtudiant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Etablissement:
                    lImageEspace = 'Icone_EspaceSecretariat';
                    break;
                case Enumere_Espace_1.EGenreEspace.Parent:
                    lImageEspace = 'Icone_EspaceParent';
                    break;
                case Enumere_Espace_1.EGenreEspace.Entreprise:
                    lImageEspace = 'Icone_EspaceEntreprise';
                    break;
                case Enumere_Espace_1.EGenreEspace.Academie:
                    lImageEspace = 'Icone_EspaceAcademie';
                    break;
                case Enumere_Espace_1.EGenreEspace.Administrateur:
                    lImageEspace = 'Icone_EspaceAdministratif';
                    break;
                case Enumere_Espace_1.EGenreEspace.Inscription:
                    lImageEspace = 'Icone_EspaceInscription';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                    lImageEspace = 'Icone_EspaceEnseignant';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimParent:
                    lImageEspace = 'Icone_EspaceParent';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimEleve:
                    lImageEspace = 'Icone_EspaceEtudiant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Accompagnant:
                    lImageEspace = 'Icone_EspaceAccompagnant';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                    lImageEspace = 'Icone_EspaceAccompagnant';
                    break;
                case Enumere_Espace_1.EGenreEspace.Tuteur:
                    lImageEspace = 'Icone_EspaceTuteur';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                    lImageEspace = 'Icone_EspacePeriscolaire';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimMairie:
                    lImageEspace = 'Icone_EspaceMairie';
                    break;
                case Enumere_Espace_1.EGenreEspace.PrimDirection:
                    lImageEspace = 'Icone_EspaceAdministratif';
                    break;
                }
                let lCleIdentifiant;
                let lCleMotDePasse;
                let lCleIdentifiantTitre;
                let lCleMdpTitre;
                let lCleMdpMessage;
                let lCleIdentifiantMsg;
                if (this.applicationSco.getDemo()) {
                    lCleIdentifiant = 'connexion.identifiantInfoDemo';
                    lCleMotDePasse = 'connexion.motDePasseInfoDemo';
                    lCleIdentifiantTitre = 'connexion.identifiantTitreDemo';
                    lCleMdpTitre = 'connexion.motDePasseTitreDemo';
                    lCleMdpMessage = 'connexion.motDePasseMessageDemo';
                } else {
                    lCleIdentifiant = 'connexion.identifiantInfo';
                    lCleMotDePasse = 'connexion.motDePasseInfo';
                    lCleIdentifiantTitre = 'connexion.identifiantTitre';
                    lCleMdpTitre = 'connexion.motDePasseTitre';
                    if (this.etatUtilisateurSco.GenreEspace === Enumere_Espace_1.EGenreEspace.Inscription) {
                        lCleMdpMessage = 'connexion.motDePasseMsgInscription';
                        lCleIdentifiantMsg = 'connexion.identifiantMsgInscription';
                    } else {
                        lCleIdentifiantMsg = 'connexion.identifiantMessage';
                        lCleMdpMessage = 'connexion.motDePasseMessage';
                    }
                }
                const lParamHtml = {};
                lParamHtml.id = this.id;
                lParamHtml.couleur = {
                    grisClair: GCouleur.grisClair,
                    texte: GCouleur.texte,
                    themeNeutre: {
                        sombre: GCouleur.themeNeutre.sombre
                    }
                };
                lParamHtml.traductions = {
                    altImageDeFond: ObjetTraduction_1.GTraductions.getValeur('connexion.altImageDeFond'),
                    texteBouton: ObjetTraduction_1.GTraductions.getValeur('connexion.seConnecter'),
                    titreBouton: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('connexion.seConnecterTitre')),
                    texteModeConnexion: this.options.avecChoixConnexion ? ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion') : '',
                    texteChampsObligatoires: ObjetTraduction_1.GTraductions.getValeur('connexion.champsObligatoires'),
                    texteIdentifiant: ObjetTraduction_1.GTraductions.getValeur('connexion.identifiant'),
                    ariaDescrModeConnexion: this.options.avecChoixConnexion ? ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionTitre') + ' ' + ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexionMessage') : '',
                    ariaDescrIdentifiant: ObjetTraduction_1.GTraductions.getValeur('connexion.identifiantMessage'),
                    texteTitleIdentifiant: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiantTitre) + (lCleIdentifiantMsg ? ' ' + ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiantMsg) : '')),
                    textePlaceholderIdentifiant: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleIdentifiant)),
                    texteTitleMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMdpTitre, [this.parametresSco.getNomEspace()]) + ' ' + ObjetTraduction_1.GTraductions.getValeur(lCleMdpMessage, [ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[Enumere_Onglet_1.EGenreOnglet.InfosPerso]])),
                    textePlaceholderMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMotDePasse)),
                    texteMotdepasse: ObjetTraduction_1.GTraductions.getValeur('connexion.motDePasse'),
                    ariaDescrMotdepasse: ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur(lCleMdpMessage, [ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[Enumere_Onglet_1.EGenreOnglet.InfosPerso]])),
                    texteRecupIdMdp: this.options.avecRecupIdMdp ? (this.options.pourInscription ? ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.texteBis') : ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.texte')) : '',
                    ariaDescrRecupIdMdp: this.options.avecRecupIdMdp ? ObjetChaine_1.GChaine.toTitle(ObjetTraduction_1.GTraductions.getValeur('connexion.RecuperationMDP.titre')) : '',
                    ariaDescrLienPartenaire: ObjetTraduction_1.GTraductions.getValeur('connexion.lienPartenaire'),
                    modeConnexion1: ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion1'),
                    modeConnexion2: ObjetTraduction_1.GTraductions.getValeur('connexion.modeConnexion2'),
                    mentionsLegales: ObjetTraduction_1.GTraductions.getValeur('mentionsLegales'),
                    louvre: {
                        lien: ObjetTraduction_1.GTraductions.getValeur('Louvre.Lien', ['<b><em>' + lObjetImage.nomExpo + '</em></b>'])
                    },
                    inscriptions: {
                        titre: ObjetTraduction_1.GTraductions.getValeur('inscription.titre'),
                        boutonEspaceParent: {
                            titre: ObjetTraduction_1.GTraductions.getValeur('inscription.parent.titre'),
                            info: ObjetTraduction_1.GTraductions.getValeur('inscription.parent.info')
                        },
                        boutonCreation: {
                            titre: ObjetTraduction_1.GTraductions.getValeur('inscription.creation.titre'),
                            info: ObjetTraduction_1.GTraductions.getValeur('inscription.creation.info')
                        },
                        boutonEspaceInscription: {
                            titre: ObjetTraduction_1.GTraductions.getValeur('inscription.espace.titre'),
                            info: ObjetTraduction_1.GTraductions.getValeur('inscription.espace.info')
                        }
                    },
                    AvertissementDemo: ObjetChaine_1.GChaine.replaceRCToHTML(ObjetTraduction_1.GTraductions.getValeur('AvertissementDemo'))
                };
                lParamHtml.options = {
                    applicationNom: lObjetImage.applicationNom ? lObjetImage.applicationNom : '',
                    sousTitre: ObjetTraduction_1.GTraductions.getValeur('AnneeScolaire') + ' ' + this.parametresSco.anneeScolaire,
                    urlLien: this.parametresSco.urlSiteIndexEducation,
                    decalageLogin: ([TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Louvre, TypeArrierePlanAuthentification_1.TypeArrierePlanAuthentification.Arbre]).indexOf(lGenreImageConnexion) > -1,
                    classImageEspace: lImageEspace,
                    srcFondImage: lObjetImage.srcImage,
                    urlImageSuite: lObjetImage.urlImageSuite,
                    widthImageSuite: GNavigateur.clientL > lObjetImage.widthImageSuite ? lObjetImage.widthImageSuite : '1230',
                    heightImageSuite: lObjetImage.heightImageSuite,
                    urlImageFond: lObjetImage.urlImageFond || this.options.urlImageConnexion,
                    classImageFond: lObjetImage.classImageFond || (lObjetImage.urlImageFond ? '' : GImageConnexion.getClassFond()),
                    couleurFondBg: lObjetImage.couleurFond || 'white',
                    couleurConnexion: lObjetImage.couleurConnexion || 'white',
                    avecLien: lObjetImage.avecLien || false,
                    avecLienSuite: lObjetImage.avecLienSuite || false,
                    lien: lObjetImage.lien,
                    lienSuite: lObjetImage.lienSuite,
                    lienLogo: lObjetImage.lienLogo,
                    styleLogo: lObjetImage.styleLogo,
                    texteLien: lObjetImage.texteLien,
                    texteLienSuite: lObjetImage.texteLienSuite,
                    suiviLogo: lObjetImage.suiviLogo || lObjetImage.suiviLogo1,
                    suiviLien: lObjetImage.suiviLien,
                    suiviLienSuite: lObjetImage.suiviLienSuite || lObjetImage.suiviLogo2,
                    couleurLien: lObjetImage.couleurLien || 'inherit',
                    bottomLien: lObjetImage.bottomLien || '0',
                    leftLien: lObjetImage.leftLien || '0',
                    tailleLien: lObjetImage.tailleLien || '100%',
                    nomEspace: this.parametresSco.getNomEspace(),
                    modeDemo: this.applicationSco.getDemo(),
                    avecRecupIdMdp: this.options.avecRecupIdMdp,
                    pourInscription: this.options.pourInscription,
                    infoWAIident: ObjetTraduction_1.GTraductions.getValeur('connexion.identifiant'),
                    urlLogo: this.parametresSco.urlLogo,
                    dataImageFond: lObjetImage.dataImageFond,
                    avecFichierFond: lObjetImage.avecFichierFond,
                    sansFichierFond: !lObjetImage.avecFichierFond,
                    modeConnexion1: 0,
                    modeConnexion2: 1,
                    insriptions: {
                        classImageParent: 'Icone_EspaceParent',
                        classImageCreation: 'Icone_EspaceInscription',
                        classImageInscription: 'Icone_EspaceInscription'
                    },
                    mentionsPagesPubliques: this.parametresSco.mentionsPagesPubliques
                };
                return lFctHtml(lParamHtml);
            }
            callbackInitSecurisationCompte() {
                if (this.estConnexionSansInterface()) {
                    const lJPage = $('#' + this.id.pageConnexionAuto.escapeJQ());
                    const lJParent = lJPage.parent();
                    lJPage.remove();
                    lJParent.ieHtmlAppend(this.construirePage(), {
                        controleur: this.controleur
                    });
                }
                ObjetHtml_1.GHtml.setDisplay(this.id.wrapperConnect, false);
            }
            callbackPersonnalisationMDPPromise(aParam) {
                return UtilitaireSecurisationCompte_1.UtilitaireSecurisationCompte.demarrerPersonnalisationMDP(aParam);
            }
            callbackSecurisationDoubleAuthPromise(aParam) {
                return UtilitaireSecurisationCompte_1.UtilitaireSecurisationCompte.demarrerDoubleAut(aParam);
            }
            async _reussiteAuthentification(aParamsAuthentification) {
                const lReponse = await new ObjetRequeteParametresUtilisateur_1.ObjetRequeteParametresUtilisateur(this).lancerRequete({
                    motDePasseInvalide: aParamsAuthentification.motDePasseInvalide || undefined
                });
                const lParams = Object.assign(aParamsAuthentification, lReponse);
                this.applicationSco.initAuthentification(lParams);
                this.etatUtilisateurSco.initAuthentification(lParams);
                this.parametresSco.initAuthentification(lParams);
                for (let I = 0; I < this.etatUtilisateurSco.listeOngletsOriginal.count(); I++) {
                    const lOnglet = this.etatUtilisateurSco.listeOngletsOriginal.get(I);
                    lOnglet.Actif = lOnglet.Actif !== false;
                    lOnglet.Visible = (lOnglet.Genre !== Enumere_Onglet_1.EGenreOnglet.Accueil);
                    lOnglet.estUnOnglet = lOnglet.onglet === null || lOnglet.onglet === undefined;
                    if (!lOnglet.estUnOnglet && lOnglet.Actif) {
                        lOnglet.onglet.avecSousOnglet = true;
                    }
                }
                const lOnglet = this._getOngletDemarrage();
                if (lOnglet !== null) {
                    this.etatUtilisateurSco.setGenreOnglet(lOnglet);
                } else {}
                const lParametres = {
                    libelle: this.etatUtilisateurSco.Identification.ressource.getLibelle(),
                    listeRessource: this.etatUtilisateurSco.Identification.ListeRessources
                };
                if (lParams.messageAucuneEleve) {
                    lParametres.message = lParams.messageAucuneEleve;
                }
                this.applicationSco.afficherEspaceApresAuthentification(lParametres);
            }
            _getOngletDemarrage() {
                if (this.etatUtilisateurSco.forcerOngletInscription) {
                    return Enumere_Onglet_1.EGenreOnglet.InscriptionsEtablissement;
                }
                if (MethodesObjet_1.MethodesObjet.isNumeric(this.etatUtilisateurSco.getGenreOnglet())) {
                    return null;
                }
                let lOnglet = null;
                if (this.applicationSco.parametresUtilisateur.has('onglet') && this.etatUtilisateurSco.estOngletAutorise(this.applicationSco.parametresUtilisateur.get('onglet')) && (this.etatUtilisateurSco.GenreEspace !== Enumere_Espace_1.EGenreEspace.Professeur || this.etatUtilisateurSco.genreConnexion === Enumere_Connexion_1.EGenreConnexion.Normale)) {
                    lOnglet = this.applicationSco.parametresUtilisateur.get('onglet');
                }
                if (this.etatUtilisateurSco.avecPageAccueil() && this.etatUtilisateurSco.estOngletAutorise(Enumere_Onglet_1.EGenreOnglet.Accueil) && ((this.applicationSco.parametresUtilisateur.has('demarrerSurPageAccueil') && this.applicationSco.parametresUtilisateur.get('demarrerSurPageAccueil')) || lOnglet === null)) {
                    lOnglet = Enumere_Onglet_1.EGenreOnglet.Accueil;
                }
                return lOnglet;
            }
        }
        exports.InterfaceConnexionEspace = InterfaceConnexionEspace;
    },
    fn: 'interfaceconnexionespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreImpression = void 0;
        var EGenreImpression;
        (function(EGenreImpression) {
            EGenreImpression[EGenreImpression["Aucune"] = 0] = "Aucune";
            EGenreImpression[EGenreImpression["Normale"] = 1] = "Normale";
            EGenreImpression[EGenreImpression["Format"] = 2] = "Format";
            EGenreImpression[EGenreImpression["Proportion"] = 3] = "Proportion";
            EGenreImpression[EGenreImpression["ProportionTempSaisieNotes"] = 4] = "ProportionTempSaisieNotes";
            EGenreImpression[EGenreImpression["GenerationPDF"] = 5] = "GenerationPDF";
        }
        )(EGenreImpression || (exports.EGenreImpression = EGenreImpression = {}));
    },
    fn: 'enumere_genreimpression.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateurCP = void 0;
        const Invocateur_1 = require("Invocateur");
        const TypeEnsembleNombre_1 = require("TypeEnsembleNombre");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        global.GEtatUtilisateur = null;
        class ObjetEtatUtilisateurCP {
            constructor() {
                this.EtatSaisie = false;
                this.codePINFixe = false;
                this.IdCourant = '';
                this.reglesSaisieMotDePasse = {
                    min: 0,
                    max: 0,
                    regles: new TypeEnsembleNombre_1.TypeEnsembleNombre(),
                    init: false
                };
                Invocateur_1.Invocateur.abonner(Invocateur_1.ObjetInvocateur.events.etatSaisie, this.setEtatSaisie.bind(this));
            }
            get listeOnglets() {
                return this._listeOnglets;
            }
            set listeOnglets(aValeur) {
                this._listeOnglets = aValeur;
            }
            setEtatSaisie(aEtat) {
                this.EtatSaisie = aEtat;
            }
            estEspaceEleve() {
                return false;
            }
            estEspaceParent() {
                return false;
            }
            estEspacePourEleve() {
                return false;
            }
            estEspacePourProf() {
                return false;
            }
            avecImports() {
                return false;
            }
            avecFicheEtablissement() {
                return false;
            }
            estModeAccessible() {
                return false;
            }
            estAvecThemeAccessible() {
                return ThemesCouleurs_1.ThemesCouleurs.getModeAccessible();
            }
            getUtilisateur() {
                return null;
            }
            estEspaceAvecMembre() {
                return false;
            }
            avecPlusieursMembres() {
                return false;
            }
            getMembre() {
                return null;
            }
            setNumeroEleve(aNumeroMembre) {
                return null;
            }
            avecPageAccueil() {
                return false;
            }
            getNumeroGenreEspace() {
                return this.GenreEspace;
            }
            getGenreOnglet() {
                return null;
            }
            getLibelleLongOnglet() {
                return '';
            }
            setTriListe(aParams) {
                const lParams = Object.assign({
                    liste: null,
                    tri: undefined,
                    colonnesTriables: true,
                    identifiant: 'id',
                    onglet: ''
                }, aParams);
                if (!lParams.liste || !lParams.liste.setOptionsListe || !lParams.identifiant || !lParams.colonnesTriables) {
                    return;
                }
                if (!this._trisListe_) {
                    this._trisListe_ = {};
                }
                const lCle = lParams.onglet + '|' + lParams.identifiant;
                if (!this._trisListe_[lCle]) {
                    this._trisListe_[lCle] = lParams.tri;
                }
                aParams.liste.setOptionsListe({
                    colonnesTriables: lParams.colonnesTriables,
                    numeroColonneTriDefaut: () => {
                        return this._trisListe_[lCle];
                    }
                    ,
                    evenementSurTri: (aColonnesTris) => {
                        this._trisListe_[lCle] = aColonnesTris;
                    }
                });
                return this;
            }
            setCodePINFixe(aVal) {
                this.codePINFixe = !!aVal;
            }
            getCodePINFixe() {
                return this.codePINFixe;
            }
            setReglesSaisieMotDePasse(aJSON) {
                if (aJSON && aJSON.reglesSaisieMDP) {
                    $.extend(this.reglesSaisieMotDePasse, aJSON.reglesSaisieMDP);
                    this.reglesSaisieMotDePasse.init = true;
                }
            }
            espacesAvecBoutonsTimeLine() {
                return true;
            }
            getUniquementNonLues() {
                if ((this.uniquementNonLues !== null) && (this.uniquementNonLues !== undefined)) {
                    return this.uniquementNonLues;
                } else {
                    return false;
                }
            }
            setUniquementNonLues(aBoolean) {
                this.uniquementNonLues = aBoolean;
            }
            avecCloudDisponibles() {
                return this.listeCloud && this.listeCloud.count() > 0;
            }
            avecGestionAppareilPhoto() {
                return IE.estMobile && !(GNavigateur.isAndroid && GApplication.estAppliMobile);
            }
            getPageCourante() {
                return this.pageCourante;
            }
            setPageCourante(aInstancePage) {
                this.pageCourante = aInstancePage;
            }
            estAvecCodeCompetences() {
                return false;
            }
        }
        exports.ObjetEtatUtilisateurCP = ObjetEtatUtilisateurCP;
    },
    fn: 'objetetatutilisateurcp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetIdentification = void 0;
        class ObjetIdentification {
            constructor(aRessource, aListeRessources) {
                this.ressource = aRessource;
                this.setListeRessources(aListeRessources);
            }
            getMembre() {
                return this.NumeroEleve ? this.ListeRessources.getElementParNumero(this.NumeroEleve) : this.ressource;
            }
            setListeRessources(AListeRessources) {
                this.ListeRessources = AListeRessources;
                this.NumeroEleve = null;
                for (let I = 0; (I < this.ListeRessources.count()) && (this.NumeroEleve === null || this.NumeroEleve === undefined); I++) {
                    if (this.ListeRessources.get(I).AvecSelection !== false) {
                        this.NumeroEleve = this.ListeRessources.getNumero(I);
                    }
                }
            }
            getLibelleClasse() {
                const LEleve = this.getMembre();
                return (LEleve && LEleve.Classe) ? LEleve.Classe.getLibelle() : '';
            }
            getNumeroClasse() {
                const LEleve = this.getMembre();
                return (LEleve && LEleve.Classe) ? LEleve.Classe.getNumero() : '';
            }
            getLibelleGroupes() {
                const LEleve = this.getMembre();
                if (LEleve) {
                    const LListeGroupes = LEleve.ListeGroupes;
                    const N = !!LListeGroupes ? LListeGroupes.count() : 0;
                    const T = [];
                    for (let I = 0; I < N; I++) {
                        T.push(LListeGroupes.getLibelle(I));
                    }
                    return T.join(', ');
                }
                return '';
            }
        }
        exports.ObjetIdentification = ObjetIdentification;
    },
    fn: 'objetidentification.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetNavigation = void 0;
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        class ObjetNavigation {
            constructor() {
                this.TableauxRessources = {};
                this.Classe = null;
                this.Groupe = null;
                this.Periode = null;
                this.Eleve = null;
                this.Service = null;
                this.Appreciation = null;
                this.avecCoursAnnule = true;
                this.Niveau = -1;
                this.NumeroMatiereCahierDeTextes = 0;
                this.afficherFicheService = true;
                this.triDevoirs = false;
            }
            setRessource(AGenreRessource, AParametre, ANumero, AGenre) {
                if (AParametre instanceof ObjetListeElements_1.ObjetListeElements) {
                    this.TableauxRessources[AGenreRessource] = MethodesObjet_1.MethodesObjet.dupliquer(AParametre);
                } else if (MethodesObjet_1.MethodesObjet.isObject(AParametre)) {
                    this.TableauxRessources[AGenreRessource] = new ObjetListeElements_1.ObjetListeElements().addElement(MethodesObjet_1.MethodesObjet.dupliquer(AParametre));
                } else {
                    this.TableauxRessources[AGenreRessource] = new ObjetListeElements_1.ObjetListeElements().addElement(new ObjetElement_1.ObjetElement(AParametre,ANumero,AGenre));
                }
            }
            getRessource(AGenreRessource) {
                return this.TableauxRessources[AGenreRessource] ? this.TableauxRessources[AGenreRessource].get(0) : null;
            }
            getRessources(AGenreRessource) {
                return this.TableauxRessources[AGenreRessource];
            }
            getNumeroRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getNumero() : null;
            }
            getGenreRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getGenre() : null;
            }
            getLibelleRessource(AGenreRessource) {
                return this.getRessource(AGenreRessource) ? this.getRessource(AGenreRessource).getLibelle() : null;
            }
        }
        exports.ObjetNavigation = ObjetNavigation;
    },
    fn: 'objetnavigation.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.UtilitaireUrl = void 0;
        const ObjetChaine_1 = require("ObjetChaine");
        exports.UtilitaireUrl = {
            construireListeUrls(aListe, aParams) {
                const lParams = Object.assign({
                    genreFiltre: null,
                    genreRessource: exports.UtilitaireUrl.genreRessourceDefault,
                    separateur: ' ',
                    IEModelChips: '',
                    argsIEModelChips: null,
                    maxWidth: 0,
                    class: ''
                }, aParams);
                if (!aListe || !aListe.parcourir) {
                    return '';
                }
                const T = [];
                aListe.parcourir( (aElement, aIndex) => {
                    if (aElement.existe()) {
                        if (lParams.genreFiltre === null || lParams.genreFiltre === undefined || (aElement.getGenre() === lParams.genreFiltre)) {
                            let lArgsIEModel = null;
                            if (!!lParams.IEModelChips) {
                                lArgsIEModel = [aIndex];
                                if (!!lParams.argsIEModelChips && Array.isArray(lParams.argsIEModelChips)) {
                                    lArgsIEModel = lArgsIEModel.concat(lParams.argsIEModelChips);
                                }
                            }
                            const lIeChips = ObjetChaine_1.GChaine.composerUrlLienExterne({
                                documentJoint: aElement,
                                genreRessource: lParams.genreRessource,
                                maxWidth: lParams.maxWidth,
                                ieModelChips: lParams.IEModelChips,
                                argsIEModel: lArgsIEModel,
                                class: lParams.class
                            });
                            T.push(IE.jsx.str("div", null, lIeChips));
                        }
                    }
                }
                );
                let lResult = T.join(lParams.separateur);
                if (T.length > 0) {
                    lResult = IE.jsx.str("div", {
                        class: 'liste-url-chips'
                    }, lResult);
                }
                return lResult;
            },
            genreRessourceDefault: null
        };
    },
    fn: 'utilitaireurl.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenreObservationVS = void 0;
        var TypeGenreObservationVS;
        (function(TypeGenreObservationVS) {
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_DefautCarnet"] = 0] = "OVS_DefautCarnet";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_ObservationParent"] = 1] = "OVS_ObservationParent";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_Encouragement"] = 2] = "OVS_Encouragement";
            TypeGenreObservationVS[TypeGenreObservationVS["OVS_Autres"] = 3] = "OVS_Autres";
        }
        )(TypeGenreObservationVS || (exports.TypeGenreObservationVS = TypeGenreObservationVS = {}));
    },
    fn: 'typegenreobservationvs.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.TypeGenrePunition = void 0;
        var TypeGenrePunition;
        (function(TypeGenrePunition) {
            TypeGenrePunition[TypeGenrePunition["GP_ExclusionCours"] = 0] = "GP_ExclusionCours";
            TypeGenrePunition[TypeGenrePunition["GP_Retenues"] = 1] = "GP_Retenues";
            TypeGenrePunition[TypeGenrePunition["GP_Devoir"] = 2] = "GP_Devoir";
            TypeGenrePunition[TypeGenrePunition["GP_Autre"] = 3] = "GP_Autre";
        }
        )(TypeGenrePunition || (exports.TypeGenrePunition = TypeGenrePunition = {}));
    },
    fn: 'typegenrepunition.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.EGenreRessourceUtil = exports.EGenreRessource = void 0;
        var EGenreRessource;
        (function(EGenreRessource) {
            EGenreRessource[EGenreRessource["Aucune"] = 0] = "Aucune";
            EGenreRessource[EGenreRessource["Classe"] = 1] = "Classe";
            EGenreRessource[EGenreRessource["Groupe"] = 2] = "Groupe";
            EGenreRessource[EGenreRessource["Enseignant"] = 3] = "Enseignant";
            EGenreRessource[EGenreRessource["Eleve"] = 4] = "Eleve";
            EGenreRessource[EGenreRessource["Responsable"] = 5] = "Responsable";
            EGenreRessource[EGenreRessource["Niveau"] = 6] = "Niveau";
            EGenreRessource[EGenreRessource["Orientation"] = 7] = "Orientation";
            EGenreRessource[EGenreRessource["Specialite"] = 8] = "Specialite";
            EGenreRessource[EGenreRessource["OptionSpecialite"] = 9] = "OptionSpecialite";
            EGenreRessource[EGenreRessource["Etablissement"] = 10] = "Etablissement";
            EGenreRessource[EGenreRessource["Periode"] = 11] = "Periode";
            EGenreRessource[EGenreRessource["Service"] = 12] = "Service";
            EGenreRessource[EGenreRessource["Absence"] = 13] = "Absence";
            EGenreRessource[EGenreRessource["Retard"] = 14] = "Retard";
            EGenreRessource[EGenreRessource["Exclusion"] = 15] = "Exclusion";
            EGenreRessource[EGenreRessource["Matiere"] = 16] = "Matiere";
            EGenreRessource[EGenreRessource["Salle"] = 17] = "Salle";
            EGenreRessource[EGenreRessource["CoEnseignant"] = 18] = "CoEnseignant";
            EGenreRessource[EGenreRessource["Suivis"] = 19] = "Suivis";
            EGenreRessource[EGenreRessource["Cours"] = 20] = "Cours";
            EGenreRessource[EGenreRessource["Infirmerie"] = 21] = "Infirmerie";
            EGenreRessource[EGenreRessource["AbsenceRepas"] = 22] = "AbsenceRepas";
            EGenreRessource[EGenreRessource["Pilier"] = 23] = "Pilier";
            EGenreRessource[EGenreRessource["ElementPilier"] = 24] = "ElementPilier";
            EGenreRessource[EGenreRessource["Competence"] = 25] = "Competence";
            EGenreRessource[EGenreRessource["_DisciplineBrevet"] = 26] = "_DisciplineBrevet";
            EGenreRessource[EGenreRessource["Palier"] = 27] = "Palier";
            EGenreRessource[EGenreRessource["SousItem"] = 28] = "SousItem";
            EGenreRessource[EGenreRessource["Evaluation"] = 29] = "Evaluation";
            EGenreRessource[EGenreRessource["Stage"] = 30] = "Stage";
            EGenreRessource[EGenreRessource["SousMatiere"] = 31] = "SousMatiere";
            EGenreRessource[EGenreRessource["MaitreDeStage"] = 32] = "MaitreDeStage";
            EGenreRessource[EGenreRessource["InspecteurPedagogique"] = 33] = "InspecteurPedagogique";
            EGenreRessource[EGenreRessource["Personnel"] = 34] = "Personnel";
            EGenreRessource[EGenreRessource["EvaluationHistorique"] = 35] = "EvaluationHistorique";
            EGenreRessource[EGenreRessource["DossierProgression"] = 36] = "DossierProgression";
            EGenreRessource[EGenreRessource["ContenuDeCours"] = 37] = "ContenuDeCours";
            EGenreRessource[EGenreRessource["TravailAFaire"] = 38] = "TravailAFaire";
            EGenreRessource[EGenreRessource["Progression"] = 39] = "Progression";
            EGenreRessource[EGenreRessource["Dispense"] = 40] = "Dispense";
            EGenreRessource[EGenreRessource["Punition"] = 41] = "Punition";
            EGenreRessource[EGenreRessource["Sanction"] = 42] = "Sanction";
            EGenreRessource[EGenreRessource["Communication"] = 43] = "Communication";
            EGenreRessource[EGenreRessource["AbsenceInternat"] = 44] = "AbsenceInternat";
            EGenreRessource[EGenreRessource["Observation"] = 45] = "Observation";
            EGenreRessource[EGenreRessource["ObservationProfesseurEleve"] = 46] = "ObservationProfesseurEleve";
            EGenreRessource[EGenreRessource["ConvocationVS"] = 47] = "ConvocationVS";
            EGenreRessource[EGenreRessource["DocumentJoint"] = 48] = "DocumentJoint";
            EGenreRessource[EGenreRessource["InternetCategorie"] = 49] = "InternetCategorie";
            EGenreRessource[EGenreRessource["DocJointEtablissement"] = 50] = "DocJointEtablissement";
            EGenreRessource[EGenreRessource["Option"] = 51] = "Option";
            EGenreRessource[EGenreRessource["ProgrammationPunition"] = 52] = "ProgrammationPunition";
            EGenreRessource[EGenreRessource["ReportPunition"] = 53] = "ReportPunition";
            EGenreRessource[EGenreRessource["DisciplineLivretScolaire"] = 54] = "DisciplineLivretScolaire";
            EGenreRessource[EGenreRessource["QCM"] = 55] = "QCM";
            EGenreRessource[EGenreRessource["ExecutionQCM"] = 56] = "ExecutionQCM";
            EGenreRessource[EGenreRessource["QCMEditeur"] = 57] = "QCMEditeur";
            EGenreRessource[EGenreRessource["PartieDeClasse"] = 58] = "PartieDeClasse";
            EGenreRessource[EGenreRessource["DocJointEleve"] = 59] = "DocJointEleve";
            EGenreRessource[EGenreRessource["Devoir"] = 60] = "Devoir";
            EGenreRessource[EGenreRessource["InternetEnumere"] = 61] = "InternetEnumere";
            EGenreRessource[EGenreRessource["AppreciationBulletinCompetence"] = 62] = "AppreciationBulletinCompetence";
            EGenreRessource[EGenreRessource["Entreprise"] = 63] = "Entreprise";
            EGenreRessource[EGenreRessource["DomaineProfessionnel"] = 64] = "DomaineProfessionnel";
            EGenreRessource[EGenreRessource["OffreDeStage"] = 65] = "OffreDeStage";
            EGenreRessource[EGenreRessource["SujetDeStage"] = 66] = "SujetDeStage";
            EGenreRessource[EGenreRessource["DocumentCasier"] = 67] = "DocumentCasier";
            EGenreRessource[EGenreRessource["Message"] = 68] = "Message";
            EGenreRessource[EGenreRessource["PossessionMessage"] = 69] = "PossessionMessage";
            EGenreRessource[EGenreRessource["RelationMessageDocJointEtablissement"] = 70] = "RelationMessageDocJointEtablissement";
            EGenreRessource[EGenreRessource["Engagement"] = 71] = "Engagement";
            EGenreRessource[EGenreRessource["MesureConservatoire"] = 72] = "MesureConservatoire";
            EGenreRessource[EGenreRessource["SousCategorieObjetDossier"] = 73] = "SousCategorieObjetDossier";
            EGenreRessource[EGenreRessource["Incident"] = 74] = "Incident";
            EGenreRessource[EGenreRessource["ProtagonisteIncident"] = 75] = "ProtagonisteIncident";
            EGenreRessource[EGenreRessource["RelationIncidentFichierExterne"] = 76] = "RelationIncidentFichierExterne";
            EGenreRessource[EGenreRessource["RegimeEleve"] = 77] = "RegimeEleve";
            EGenreRessource[EGenreRessource["RepasAPreparer"] = 78] = "RepasAPreparer";
            EGenreRessource[EGenreRessource["SessionDeStage"] = 79] = "SessionDeStage";
            EGenreRessource[EGenreRessource["Materiel"] = 80] = "Materiel";
            EGenreRessource[EGenreRessource["Bourse"] = 81] = "Bourse";
            EGenreRessource[EGenreRessource["RelationTravailAFaireEleve"] = 82] = "RelationTravailAFaireEleve";
            EGenreRessource[EGenreRessource["LieuDossier"] = 83] = "LieuDossier";
            EGenreRessource[EGenreRessource["ElementProgramme"] = 84] = "ElementProgramme";
            EGenreRessource[EGenreRessource["ChapitreEltPgm"] = 85] = "ChapitreEltPgm";
            EGenreRessource[EGenreRessource["EltPgmTravailleCDT"] = 86] = "EltPgmTravailleCDT";
            EGenreRessource[EGenreRessource["Appreciation"] = 87] = "Appreciation";
            EGenreRessource[EGenreRessource["ExecutionDevoirKiosque"] = 88] = "ExecutionDevoirKiosque";
            EGenreRessource[EGenreRessource["PanierRessourceKiosque"] = 89] = "PanierRessourceKiosque";
            EGenreRessource[EGenreRessource["RessourceNumeriqueKiosque"] = 90] = "RessourceNumeriqueKiosque";
            EGenreRessource[EGenreRessource["MetaMatiere"] = 91] = "MetaMatiere";
            EGenreRessource[EGenreRessource["EvaluationSujet"] = 92] = "EvaluationSujet";
            EGenreRessource[EGenreRessource["EvaluationCorrige"] = 93] = "EvaluationCorrige";
            EGenreRessource[EGenreRessource["LibelleCours"] = 94] = "LibelleCours";
            EGenreRessource[EGenreRessource["Site"] = 95] = "Site";
            EGenreRessource[EGenreRessource["QuestionQCM"] = 96] = "QuestionQCM";
            EGenreRessource[EGenreRessource["RelationElevePilierDeCompetence"] = 97] = "RelationElevePilierDeCompetence";
            EGenreRessource[EGenreRessource["QuestionCopieQCM"] = 98] = "QuestionCopieQCM";
            EGenreRessource[EGenreRessource["Coordonnees"] = 99] = "Coordonnees";
            EGenreRessource[EGenreRessource["ResponsablePostulant"] = 100] = "ResponsablePostulant";
            EGenreRessource[EGenreRessource["ExecutionQCMEleve"] = 101] = "ExecutionQCMEleve";
            EGenreRessource[EGenreRessource["DocJointInscription"] = 102] = "DocJointInscription";
            EGenreRessource[EGenreRessource["CategorieDossier"] = 103] = "CategorieDossier";
            EGenreRessource[EGenreRessource["MEFGEP"] = 104] = "MEFGEP";
            EGenreRessource[EGenreRessource["AutreOrientation"] = 105] = "AutreOrientation";
            EGenreRessource[EGenreRessource["Commission"] = 106] = "Commission";
            EGenreRessource[EGenreRessource["ReponseEducative"] = 107] = "ReponseEducative";
            EGenreRessource[EGenreRessource["SuiviReponseEducative"] = 108] = "SuiviReponseEducative";
            EGenreRessource[EGenreRessource["NatureDocumentEleve"] = 109] = "NatureDocumentEleve";
            EGenreRessource[EGenreRessource["RelationCommissionFichierExterne"] = 110] = "RelationCommissionFichierExterne";
            EGenreRessource[EGenreRessource["Signataire"] = 111] = "Signataire";
            EGenreRessource[EGenreRessource["DocumentSignature"] = 112] = "DocumentSignature";
            EGenreRessource[EGenreRessource["PersonnelHistorique"] = 113] = "PersonnelHistorique";
            EGenreRessource[EGenreRessource["EnseignantHistorique"] = 114] = "EnseignantHistorique";
            EGenreRessource[EGenreRessource["DemandeDispense"] = 115] = "DemandeDispense";
            EGenreRessource[EGenreRessource["DocJointPriseDeRDV"] = 116] = "DocJointPriseDeRDV";
            EGenreRessource[EGenreRessource["Mediatheque"] = 117] = "Mediatheque";
            EGenreRessource[EGenreRessource["DossierMediatheque"] = 118] = "DossierMediatheque";
        }
        )(EGenreRessource || (exports.EGenreRessource = EGenreRessource = {}));
        const ObjetTraduction_1 = require("ObjetTraduction");
        const UtilitaireUrl_1 = require("UtilitaireUrl");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const TypeGenreObservationVS_1 = require("TypeGenreObservationVS");
        const TypeGenrePunition_1 = require("TypeGenrePunition");
        const EGenreRessourceUtil = {
            correspondAuGenreUtilisateurEspaceCourant(aGenre) {
                switch (GApplication.getEtatUtilisateur().GenreEspace) {
                case Enumere_Espace_1.EGenreEspace.Academie:
                    return (aGenre === EGenreRessource.InspecteurPedagogique);
                case Enumere_Espace_1.EGenreEspace.Eleve:
                case Enumere_Espace_1.EGenreEspace.Mobile_Eleve:
                case Enumere_Espace_1.EGenreEspace.PrimEleve:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve:
                    return (aGenre === EGenreRessource.Eleve);
                case Enumere_Espace_1.EGenreEspace.Entreprise:
                    return (aGenre === EGenreRessource.MaitreDeStage);
                case Enumere_Espace_1.EGenreEspace.Etablissement:
                    return (aGenre === EGenreRessource.Personnel);
                case Enumere_Espace_1.EGenreEspace.Parent:
                case Enumere_Espace_1.EGenreEspace.Mobile_Parent:
                case Enumere_Espace_1.EGenreEspace.PrimParent:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimParent:
                    return (aGenre === EGenreRessource.Responsable);
                case Enumere_Espace_1.EGenreEspace.Tuteur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Tuteur:
                case Enumere_Espace_1.EGenreEspace.Accompagnant:
                case Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant:
                case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant:
                case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire:
                case Enumere_Espace_1.EGenreEspace.PrimMairie:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie:
                    return (aGenre === EGenreRessource.Personnel);
                case Enumere_Espace_1.EGenreEspace.Professeur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Professeur:
                case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur:
                    return (aGenre === EGenreRessource.Enseignant);
                case Enumere_Espace_1.EGenreEspace.PrimDirection:
                case Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection:
                case Enumere_Espace_1.EGenreEspace.Administrateur:
                case Enumere_Espace_1.EGenreEspace.Mobile_Administrateur:
                    return (aGenre === EGenreRessource.Personnel);
                default:
                    return false;
                }
            },
            getGenrePereCompetence(aGenre, aGenrePourEvaluation) {
                switch (aGenre) {
                case EGenreRessource.ElementPilier:
                    return null;
                case EGenreRessource.Competence:
                    return EGenreRessource.ElementPilier;
                case EGenreRessource.SousItem:
                    return EGenreRessource.Competence;
                case EGenreRessource.Evaluation:
                    return aGenrePourEvaluation;
                }
            },
            getNomImageAbsence(aGenreRessource, aObjet={}) {
                switch (aGenreRessource) {
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        return 'Color_RecapVS_Lue icon_Defaut_de_carnet';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_asterisk';
                        }
                        return 'Color_RecapVS_Lue icon_asterisk';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_observation';
                        }
                        return 'Color_RecapVS_Lue icon_observation';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        if (aObjet.estLue === false) {
                            return 'Color_RecapVS_NonLue icon_smile';
                        }
                        return 'Color_RecapVS_Lue icon_smile';
                    default:
                        return '';
                    }
                case EGenreRessource.Absence:
                    if (aObjet.estUneCreationParent === true || (aObjet.confirmee === true && aObjet.justifie === true)) {
                        if (aObjet.refusee === true) {
                            return 'Color_RecapVS_NonLue iconVSDetail icon_exclamation';
                        } else if (aObjet.justifie === true) {
                            return 'Color_RecapVS_Lue iconVSDetail icon_absences';
                        } else {
                            return 'Color_RecapVS_Lue iconVSDetail icon_absences_prevue';
                        }
                    } else if (aObjet.justifie === false) {
                        return 'Color_RecapVS_NonLue icon_absences';
                    }
                    return 'Color_RecapVS_Lue icon_absences';
                case EGenreRessource.AbsenceRepas:
                    return 'Color_RecapVS_Lue icon_food';
                case EGenreRessource.AbsenceInternat:
                    return 'Color_RecapVS_Lue icon_internat';
                case EGenreRessource.Retard:
                    if (aObjet.justifie === false) {
                        return 'Color_RecapVS_NonLue icon_retard';
                    }
                    return 'Color_RecapVS_Lue icon_retard';
                case EGenreRessource.Infirmerie:
                    return 'Color_RecapVS_Lue icon_f0fe';
                case EGenreRessource.Incident:
                    return 'Color_RecapVS_Lue icon_bolt';
                case EGenreRessource.Exclusion:
                    return 'Color_RecapVS_Lue icon_punition_exclusion';
                case EGenreRessource.Punition:
                    if (aObjet.estProgrammation) {
                        return 'Color_RecapVS_Lue icon_recap_vs_programmation';
                    }
                    switch (aObjet.genreNature) {
                    case TypeGenrePunition_1.TypeGenrePunition.GP_ExclusionCours:
                        return 'Color_RecapVS_Lue icon_punition_exclusion';
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Retenues:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Devoir:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Autre:
                        return 'Color_RecapVS_Lue icon_punition';
                    default:
                        return 'Color_RecapVS_Lue icon_punition';
                    }
                case EGenreRessource.Sanction:
                    if (aObjet.avecSursis === true) {
                        return 'Color_RecapVS_Lue icon_legal';
                    }
                    return 'Color_RecapVS_Lue icon_legal';
                case EGenreRessource.MesureConservatoire:
                    return 'Color_RecapVS_Lue icon_mesure_conservatoire';
                case EGenreRessource.Commission:
                    return 'Color_RecapVS_Lue icon_mode_conseil_classe';
                case EGenreRessource.Dispense:
                    return 'Color_RecapVS_Lue icon_dispense';
                }
                return '';
            },
            getIconAbsence(aGenreRessource, aObjet) {
                switch (aGenreRessource) {
                case EGenreRessource.Observation:
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        return 'icon_Defaut_de_carnet';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        return 'icon_asterisk';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        return 'icon_observation';
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        return 'icon_smile';
                    default:
                        return '';
                    }
                case EGenreRessource.Absence:
                    return 'icon_absences';
                case EGenreRessource.AbsenceRepas:
                case EGenreRessource.RepasAPreparer:
                    return 'icon_food';
                case EGenreRessource.AbsenceInternat:
                    return 'icon_internat';
                case EGenreRessource.Retard:
                    return 'icon_retard';
                case EGenreRessource.Infirmerie:
                    return 'icon_medkit';
                case EGenreRessource.Dispense:
                    return 'icon_dispense';
                case EGenreRessource.Incident:
                    return 'icon_bolt';
                case EGenreRessource.Exclusion:
                    return 'icon_punition_exclusion';
                case EGenreRessource.Punition:
                    switch (aObjet.genreNature) {
                    case TypeGenrePunition_1.TypeGenrePunition.GP_ExclusionCours:
                        return 'icon_punition_exclusion';
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Retenues:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Devoir:
                    case TypeGenrePunition_1.TypeGenrePunition.GP_Autre:
                        return 'icon_punition';
                    default:
                        return 'icon_punition';
                    }
                case EGenreRessource.Sanction:
                    return 'icon_legal';
                case EGenreRessource.MesureConservatoire:
                    return 'icon_mesure_conservatoire';
                }
                return '';
            },
            getPositionAbsence(aGenreRessource, aObjet={
                genreObservation: null
            }) {
                let lResult = 0;
                switch (aGenreRessource) {
                case EGenreRessource.ObservationProfesseurEleve:
                    switch (aObjet.genreObservation) {
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_ObservationParent:
                        lResult = 0;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Encouragement:
                        lResult = 1;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_DefautCarnet:
                        lResult = 2;
                        break;
                    case TypeGenreObservationVS_1.TypeGenreObservationVS.OVS_Autres:
                        lResult = 60;
                        break;
                    default:
                        ;lResult = 60;
                        break;
                    }
                    break;
                case EGenreRessource.Absence:
                    lResult = 10;
                    break;
                case EGenreRessource.AbsenceRepas:
                    lResult = 12;
                    break;
                case EGenreRessource.AbsenceInternat:
                    lResult = 13;
                    break;
                case EGenreRessource.Retard:
                    lResult = 21;
                    break;
                case EGenreRessource.Dispense:
                    lResult = 22;
                    break;
                case EGenreRessource.Infirmerie:
                    lResult = 20;
                    break;
                case EGenreRessource.Incident:
                    lResult = 25;
                    break;
                case EGenreRessource.Exclusion:
                    ;lResult = 30;
                    break;
                case EGenreRessource.Punition:
                    lResult = 30;
                    break;
                case EGenreRessource.MesureConservatoire:
                    lResult = 40;
                    break;
                case EGenreRessource.Sanction:
                    lResult = 50;
                    break;
                case EGenreRessource.Commission:
                    lResult = 55;
                    break;
                default:
                    lResult = 9999;
                    break;
                }
                return lResult;
            },
            getTitreFenetreSelectionRessource(aGenre) {
                switch (aGenre) {
                case EGenreRessource.Eleve:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherEleves');
                case EGenreRessource.Enseignant:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherProfesseurs');
                case EGenreRessource.Responsable:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherResponsables');
                case EGenreRessource.Personnel:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherPersonnel');
                case EGenreRessource.MaitreDeStage:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherMaitresDeStage');
                case EGenreRessource.InspecteurPedagogique:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherInspecteurs');
                case EGenreRessource.Periode:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherPeriodes');
                case EGenreRessource.Classe:
                    return ObjetTraduction_1.GTraductions.getValeur('Fenetre_SelectionRessource.CocherClasses');
                }
                return '';
            }
        };
        exports.EGenreRessourceUtil = EGenreRessourceUtil;
        UtilitaireUrl_1.UtilitaireUrl.genreRessourceDefault = EGenreRessource.DocumentJoint;
    },
    fn: 'enumere_ressource.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateur = void 0;
        const ObjetEtatUtilisateurCP_1 = require("ObjetEtatUtilisateurCP");
        const MethodesObjet_1 = require("MethodesObjet");
        const ObjetElement_1 = require("ObjetElement");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetChaine_1 = require("ObjetChaine");
        const ObjetTri_1 = require("ObjetTri");
        const ObjetIdentification_1 = require("ObjetIdentification");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const ObjetNavigation_1 = require("ObjetNavigation");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const ObjetDate_1 = require("ObjetDate");
        const ThemesCouleurs_1 = require("ThemesCouleurs");
        class ObjetEtatUtilisateur extends ObjetEtatUtilisateurCP_1.ObjetEtatUtilisateurCP {
            constructor(aGenreEspace) {
                super();
                this.applicationSco = GApplication;
                this.derniereDate = null;
                this.existeGenreOnglet = (aGenreOnglet) => {
                    const lGenreOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet);
                    return lGenreOnglet && lGenreOnglet.Actif;
                }
                ;
                this.GenreEspace = aGenreEspace;
                this.Navigation = new ObjetNavigation_1.ObjetNavigation();
                this.genreOnglet = null;
                this.accessibilite = {
                    avecCodeCompetences: false
                };
            }
            get listeOngletsOriginal() {
                return super.listeOnglets;
            }
            get listeOnglets() {
                return this.getListeOngletsSelonContexte();
            }
            set listeOnglets(aValeur) {
                super.listeOnglets = aValeur;
            }
            initAuthentification(aParam) {
                this.avecRessourcesGranulaire = aParam.avecRessourcesGranulaire;
                this.avecRessourcesRenduTAF = aParam.avecRessourcesRenduTAF;
                this.avecRessourcesEnvoiNote = aParam.avecRessourcesEnvoiNote;
                this.activerKiosqueRenduTAF = aParam.activerKiosqueRenduTAF;
                this.activerKiosqueEnvoiNote = aParam.activerKiosqueEnvoiNote && !this.pourPrimaire();
                if (aParam.messagesDyn && this.genreConnexion !== Enumere_Connexion_1.EGenreConnexion.Allegee) {
                    this.applicationSco.donneesCentraleNotifications.addMessagesDynamiques(aParam.messagesDyn);
                }
                this.listeRessourcesRecherche = aParam.listeRessourcesRecherche;
                this.modeSecurisationParDefaut = aParam.modeSecurisationParDefaut;
                if (aParam.messagerieSignature) {
                    this.messagerieSignature = aParam.messagerieSignature;
                }
                this.deserialiserOnglets(aParam);
                this.deserialiserRessources(aParam);
                this.deserialiserInfosSupp(aParam);
                this.deserialiserPage(aParam);
            }
            deserialiserOnglets(aParam) {
                this.listeOngletsInvisibles = aParam.listeOngletsInvisibles;
                this.listeGenreOngletsNotification = aParam.listeOngletsNotification;
                if (aParam.listeOnglets) {
                    this.listeOnglets = new ObjetListeElements_1.ObjetListeElements();
                    this.listeOngletsNotification = new ObjetListeElements_1.ObjetListeElements();
                    for (let i = 0; i < aParam.listeOnglets.length; i++) {
                        this._ajouterOnglet(aParam.listeOnglets[i], 0, null);
                    }
                }
            }
            deserialiserRessources(aJSON) {
                const lRessource = new ObjetElement_1.ObjetElement().fromJSON(aJSON.ressource);
                lRessource.libelleLong = lRessource.getLibelle();
                if (!!aJSON && !!aJSON.ressource) {
                    lRessource.estDelegue = aJSON.ressource.estDelegue;
                    lRessource.estMembreCA = aJSON.ressource.estMembreCA;
                    lRessource.avecDiscussionResponsables = aJSON.ressource.avecDiscussionResponsables;
                    lRessource.listeClassesDelegue = aJSON.ressource.listeClassesDelegue;
                    lRessource.nbMaxJoursDeclarationAbsence = aJSON.ressource.nbMaxJoursDeclarationAbsence;
                    lRessource.nbMaxJoursDeclarationDispCD = aJSON.ressource.nbMaxJoursDeclarationDispCD;
                    lRessource.nbMaxJoursDeclarationDispLD = aJSON.ressource.nbMaxJoursDeclarationDispLD;
                    if (aJSON.ressource.listeNumerosUtiles) {
                        this.listeNumerosUtiles = aJSON.ressource.listeNumerosUtiles;
                    }
                    if (aJSON.ressource.destinatairePersonnelsMairie) {
                        lRessource.destinatairePersonnelsMairie = aJSON.ressource.destinatairePersonnelsMairie;
                    }
                }
                let lMembreJSON, lMembre;
                const lListeRessources = new ObjetListeElements_1.ObjetListeElements();
                if (!!aJSON && !!aJSON.ressource && !!aJSON.ressource.listeRessources) {
                    for (let i = 0; i < aJSON.ressource.listeRessources.length; i++) {
                        lMembreJSON = aJSON.ressource.listeRessources[i];
                        lMembre = new ObjetElement_1.ObjetElement().fromJSON(lMembreJSON);
                        this._traiterUtilisateur(lMembre, lMembreJSON, aJSON);
                        lListeRessources.addElement(lMembre);
                    }
                } else if (!!aJSON && !!aJSON.ressource && !!aJSON.ressource.listeDisciplines) {
                    for (let i = 0; i < aJSON.ressource.listeDisciplines.length; i++) {
                        const lDisciplineJSON = aJSON.ressource.listeDisciplines[i];
                        const lDiscipline = new ObjetElement_1.ObjetElement().fromJSON(lDisciplineJSON);
                        lListeRessources.addElement(lDiscipline);
                        lDiscipline.ClassAffichage = 'Gras';
                        lDiscipline.AvecSelection = false;
                        lDiscipline.estGroupeDeRessource = true;
                        lDiscipline.Numero = 0;
                        if (!!lDisciplineJSON.listeRessources) {
                            for (let j = 0; j < lDisciplineJSON.listeRessources.length; j++) {
                                lMembreJSON = lDisciplineJSON.listeRessources[j];
                                lMembre = new ObjetElement_1.ObjetElement().fromJSON(lMembreJSON);
                                this._traiterUtilisateur(lMembre, lMembreJSON, aJSON);
                                lListeRessources.addElement(lMembre);
                                lMembre.pere = lDiscipline;
                                lMembre.ClassAffichage = 'GrandEspaceGauche';
                            }
                        }
                    }
                } else {
                    this._traiterUtilisateur(lRessource, aJSON.ressource, aJSON);
                }
                lListeRessources.setTri([ObjetTri_1.ObjetTri.init( (D) => {
                    return !((D.Genre === Enumere_Ressource_1.EGenreRessource.Eleve) && D.Classe && D.Classe.existeNumero());
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.pere ? D.pere.getLibelle() : D.Position > 0 ? D.Position : D.getLibelle();
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return !D.estGroupeDeRessource;
                }
                ), ObjetTri_1.ObjetTri.init( (D) => {
                    return D.Position > 0 ? D.Position : D.getLibelle();
                }
                )]);
                lListeRessources.trier();
                this.setIdentification(lRessource, lListeRessources);
            }
            _traiterUtilisateur(aUtilisateur, aUtilisateurJSON, aJSONReponse) {
                if (aUtilisateurJSON.destinatairesCarnetLiaison) {
                    aUtilisateur.destinatairesCarnetLiaison = aUtilisateurJSON.destinatairesCarnetLiaison;
                    aUtilisateur.destinatairesCarnetLiaison.setTri([ObjetTri_1.ObjetTri.init('Genre'), ObjetTri_1.ObjetTri.init('Libelle')]).trier();
                }
                if (!!aUtilisateurJSON.listeProfesseurs && !!aJSONReponse.listeClasses) {
                    aUtilisateur.listeProfesseurs = aUtilisateurJSON.listeProfesseurs;
                    aUtilisateur.listeProfesseurs.parcourir(this._traiterListeProfesseurs.bind(this, aJSONReponse.listeClasses));
                    aUtilisateur.listeProfesseurs.trier();
                }
                if (aUtilisateurJSON.Etablissement !== undefined) {
                    aUtilisateur.Etablissement = aUtilisateurJSON.Etablissement;
                }
                if (aUtilisateurJSON.notificationsPush !== undefined) {
                    aUtilisateur.notificationsPush = aUtilisateurJSON.notificationsPush;
                }
                if (aUtilisateurJSON.estEnseignant !== undefined) {
                    aUtilisateur.estEnseignant = aUtilisateurJSON.estEnseignant;
                    if (aUtilisateur.estEnseignant === true) {
                        aUtilisateur.ressourceEnseignant = aUtilisateurJSON.ressourceEnseignant;
                    }
                }
                if (aUtilisateurJSON.estDirecteur !== undefined) {
                    aUtilisateur.estDirecteur = aUtilisateurJSON.estDirecteur;
                }
                if (aUtilisateurJSON.autoriserImage !== undefined) {
                    aUtilisateur.autoriserImage = aUtilisateurJSON.autoriserImage;
                }
                aUtilisateur.avecPhoto = !!aUtilisateurJSON.avecPhoto;
                if (aUtilisateurJSON.listeDestProfsDiscussionPrimEleve) {
                    aUtilisateur.listeDestProfsDiscussionPrimEleve = aUtilisateurJSON.listeDestProfsDiscussionPrimEleve;
                }
                if (aUtilisateurJSON.passeLeBrevet) {
                    aUtilisateur.passeLeBrevet = aUtilisateurJSON.passeLeBrevet;
                }
                if (aUtilisateurJSON.listeMatieresDeclarationDispense) {
                    aUtilisateur.listeMatieresDeclarationDispense = aUtilisateurJSON.listeMatieresDeclarationDispense;
                }
                if (aUtilisateurJSON.passeLeCFG) {
                    aUtilisateur.passeLeCFG = aUtilisateurJSON.passeLeCFG;
                }
                if (this.estEspacePourEleve()) {
                    aUtilisateur.Classe = new ObjetElement_1.ObjetElement().fromJSON(aUtilisateurJSON.classeDEleve);
                    aUtilisateur.libelleLong = aUtilisateur.getLibelle();
                    let lTestClasseCourant = false;
                    if (aUtilisateurJSON.listeClassesHistoriques !== undefined) {
                        aUtilisateur.listeClasseHistorique = aUtilisateurJSON.listeClassesHistoriques;
                        if (!aUtilisateurJSON.estClasseRattachementduJour) {
                            aUtilisateur.listeClasseHistorique.parcourir( (aClasse) => {
                                if (aClasse.courant) {
                                    lTestClasseCourant = true;
                                    aUtilisateur.libelleLong += ' (' + aClasse.getLibelle() + ')';
                                    return false;
                                }
                            }
                            );
                        }
                    }
                    if (!lTestClasseCourant && !!aUtilisateur.Classe && aUtilisateur.Classe.getLibelle()) {
                        aUtilisateur.libelleLong += ' (' + aUtilisateur.Classe.getLibelle() + ')';
                    }
                    if (aUtilisateurJSON.listeGroupes !== undefined) {
                        aUtilisateur.ListeGroupes = aUtilisateurJSON.listeGroupes;
                    }
                    if (aUtilisateurJSON.autoriserImage !== undefined) {
                        aUtilisateur.autoriserImage = aUtilisateurJSON.autoriserImage;
                    }
                    aUtilisateur.tableauOnglets = [];
                    if (!!aUtilisateurJSON.listeOngletsPourPeriodes) {
                        aUtilisateurJSON.listeOngletsPourPeriodes.parcourir( (aOnglet) => {
                            aUtilisateur.tableauOnglets[aOnglet.getGenre()] = aOnglet;
                        }
                        );
                    }
                    if (!!aUtilisateurJSON.listeOngletsPourPiliers) {
                        aUtilisateurJSON.listeOngletsPourPiliers.parcourir( (aOnglet) => {
                            aUtilisateur.tableauOnglets[aOnglet.getGenre()] = aOnglet;
                        }
                        );
                    }
                }
                if (!!aUtilisateurJSON.acces) {
                    aUtilisateur.acces = aUtilisateurJSON.acces;
                }
            }
            deserialiserInfosSupp(aParam) {
                this.infosSupp = {};
                this.urlInstallClient = aParam.UrlInstallClient;
                this.urlParamClient = aParam.UrlParamClient;
                this.designationClient = aParam.designationClient;
                this.listeMotifsAbsences = aParam.listeMotifsAbsences;
                this.listeMotifsRetards = aParam.listeMotifsRetards;
                this.autorisationKiosque = !!aParam.autorisationKiosque;
                this.autorisationCloud = !!aParam.autorisationCloud;
                this.derniereConnexion = aParam.derniereConnexion;
                this.cloudIndexActif = !!aParam.cloudIndexActif;
                this.avecCloudIndex = !!aParam.avecCloudIndex;
                this.listeCloud = aParam.listeCloud || new ObjetListeElements_1.ObjetListeElements();
                this.listeCloudDepotServeur = aParam.listeCloudDepotServeur || new ObjetListeElements_1.ObjetListeElements();
                this.listeClasses = aParam.listeClasses;
                this.listeMatieres = aParam.listeMatieres;
                this.listeNiveaux = aParam.listeNiveaux;
                this.existeCDTsDetaches = aParam.existeCDTsDetaches;
                this.tabEtablissementsModeleGrille = aParam.tabEtablissementsModeleGrille;
                this.listeInformationsEtablissements = aParam.listeInformationsEtablissements;
                this.joursOuvresServices = aParam.joursOuvresServices;
            }
            deserialiserPage(aParam) {
                const lPage = aParam.page;
                if (lPage && this.existeGenreOnglet) {
                    if (this.existeGenreOnglet(lPage.Onglet)) {
                        if (lPage.membre) {
                            GEtatUtilisateur.setNumeroEleve(lPage.membre.getNumero());
                        }
                        if (lPage.cours || lPage.absenceRessource) {
                            const lCours = lPage.cours || lPage.absenceRessource;
                            this.setNavigationCours(lCours);
                        }
                        if (lPage.Date) {
                            const lDate = ObjetDate_1.GDate.getDateJour(lPage.Date);
                            this.setNavigationDate(lDate);
                        }
                        if (lPage.service) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Service, lPage.service.getLibelle(), lPage.service.getNumero(), lPage.service.getGenre());
                        }
                        if (lPage.palier) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Palier, lPage.palier.getLibelle(), lPage.palier.getNumero(), lPage.palier.getGenre());
                        }
                        if (lPage.competence) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Pilier, lPage.competence.getLibelle(), lPage.competence.getNumero(), lPage.competence.getGenre());
                        }
                        if (lPage.periode) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Periode, lPage.periode.getLibelle(), lPage.periode.getNumero(), lPage.periode.getGenre());
                        }
                        if (lPage.classe) {
                            this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, lPage.classe.getLibelle(), lPage.classe.getNumero(), lPage.classe.getGenre());
                        }
                        this.setPage(lPage);
                    }
                }
            }
            setIdentification(aRessource, aListeRessources) {
                this.Identification = new ObjetIdentification_1.ObjetIdentification(aRessource,aListeRessources);
                this.Identification.indiceEleve = 0;
                if (this.page && this.page.membre) {
                    this.setNumeroEleve(this.page.membre.getNumero());
                }
            }
            getUtilisateur() {
                return this.Identification.ressource;
            }
            getMembre() {
                return this.Identification.getMembre();
            }
            avecPlusieursMembres() {
                return (this.Identification && this.Identification.ListeRessources && this.Identification.ListeRessources.count() > 1);
            }
            setNumeroEleve(aNumeroEleve) {
                let lIndice = false;
                for (let I = 0; I < this.Identification.ListeRessources.count(); I++) {
                    const lEleve = this.Identification.ListeRessources.get(I);
                    if (lEleve.getNumero() === aNumeroEleve) {
                        lIndice = I;
                    }
                }
                if (lIndice === false) {
                    return;
                }
                this.Identification.indiceEleve = lIndice;
                this.Identification.NumeroEleve = aNumeroEleve;
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Eleve, this.getMembre().getLibelle(), aNumeroEleve);
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, this.Identification.getLibelleClasse(), this.Identification.getNumeroClasse(), Enumere_Ressource_1.EGenreRessource.Classe);
            }
            getClasse() {
                return this.listeClasses.getElementParNumeroEtGenre(this.Navigation.getNumeroRessource(Enumere_Ressource_1.EGenreRessource.Classe), this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Classe));
            }
            setClasse(aClasse) {
                this.Navigation.setRessource(Enumere_Ressource_1.EGenreRessource.Classe, aClasse);
            }
            getPage() {
                return this.page;
            }
            resetPage() {
                this.page = null;
            }
            setPage(aPage) {
                this.page = aPage;
                if (this.page && this.page.Onglet > 0) {
                    this.setGenreOnglet(this.page.Onglet);
                }
                if (this.page && this.page.ressource !== null && this.page.ressource !== undefined) {
                    this.setGenreRessource(this.page.ressource);
                }
            }
            setGenreRessource(aGenreRessource) {}
            getGenreOnglet() {
                return this.genreOnglet;
            }
            setGenreOnglet(aGenreOnglet) {
                this.genreOnglet = aGenreOnglet;
            }
            getInfosSupp(aNomStockage) {
                if (!this.infosSupp) {
                    return null;
                }
                if (!this.infosSupp[aNomStockage]) {
                    this.infosSupp[aNomStockage] = {};
                }
                return this.infosSupp[aNomStockage];
            }
            getOngletSelectionne() {
                let lOngletSelectionne = null;
                if (this.listeOnglets) {
                    let lGenreOngletActif = this.genreOnglet;
                    if (lGenreOngletActif) {
                        this.listeOnglets.parcourir( (aOnglet) => {
                            if (aOnglet.getGenre() === lGenreOngletActif) {
                                lOngletSelectionne = aOnglet;
                                return false;
                            }
                        }
                        );
                    }
                }
                return lOngletSelectionne;
            }
            estOngletAutorise(aGenreOnglet) {
                let lOK = false;
                this.listeOnglets.parcourir( (aOnglet) => {
                    if (aOnglet.getGenre() === aGenreOnglet && aOnglet.Actif) {
                        lOK = true;
                        return false;
                    }
                }
                );
                return lOK;
            }
            estAvecCodeCompetences() {
                return this.accessibilite.avecCodeCompetences;
            }
            setAvecCodeCompetences(aActif) {
                this.accessibilite.avecCodeCompetences = aActif;
                if (this.applicationSco.getOptionsEspaceLocal()) {
                    this.applicationSco.getOptionsEspaceLocal().setAvecCodeCompetences(aActif);
                }
            }
            setAvecThemeAccessible(aActif) {
                if (this.applicationSco.getOptionsEspaceLocal()) {
                    this.applicationSco.getOptionsEspaceLocal().setAvecThemeAccessible(aActif);
                }
                ThemesCouleurs_1.ThemesCouleurs.setModeAccessible(aActif);
            }
            getDerniereDate() {
                if (this.derniereDate === null || this.derniereDate === undefined) {
                    return ObjetDate_1.GDate.getDateCourante();
                } else {
                    return this.derniereDate;
                }
            }
            setDerniereDate(aDate) {
                this.derniereDate = aDate;
            }
            getNavigationDate() {
                return null;
            }
            setNavigationDate(aDate) {}
            getNavigationCours() {
                return null;
            }
            setNavigationCours(aCours) {}
            getEtablissement() {
                if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Academie].includes(this.GenreEspace)) {
                    return !!this.getMembre().Etablissement ? this.listeInformationsEtablissements.getElementParNumero(this.getMembre().Etablissement.getNumero()) : null;
                } else {
                    return !!this.getUtilisateur().Etablissement ? this.listeInformationsEtablissements.getElementParNumero(this.getUtilisateur().Etablissement.getNumero()) : null;
                }
            }
            ongletEstVisible(aGenreOnglet) {
                return false;
            }
            desactiverPageAccueil() {
                this.sansPageAccueil = true;
            }
            avecPageAccueil() {
                if (this.sansPageAccueil) {
                    return false;
                }
                const lOnglet = this.listeOnglets.getElementParGenre(Enumere_Onglet_1.EGenreOnglet.Accueil);
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Mobile_Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Administrateur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur, Enumere_Espace_1.EGenreEspace.PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection].includes(this.GenreEspace) && lOnglet && lOnglet.Actif;
            }
            estOngletActif(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet);
                return lOnglet ? lOnglet.Actif : false;
            }
            espacesAvecBoutonsTimeLine() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(this.GenreEspace);
            }
            estEspacePourEleve() {
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Mobile_Tuteur].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceEleve() {
                return [Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceParent() {
                return [Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspacePourProf() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Academie].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceMobile() {
                return [Enumere_Espace_1.EGenreEspace.Mobile_Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Commun, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.Mobile_Eleve, Enumere_Espace_1.EGenreEspace.Mobile_Etablissement, Enumere_Espace_1.EGenreEspace.Mobile_Parent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_Accompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection].includes(GEtatUtilisateur.GenreEspace);
            }
            estEspaceAvecMembre() {
                return GParametres.avecMembre;
            }
            pourPrimaire() {
                return [Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.Mobile_PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant, Enumere_Espace_1.EGenreEspace.PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.Mobile_PrimPeriscolaire, Enumere_Espace_1.EGenreEspace.PrimMairie, Enumere_Espace_1.EGenreEspace.Mobile_PrimMairie, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.Mobile_PrimDirection].includes(this.GenreEspace);
            }
            pourThemePrimaire() {
                return [Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimEleve, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimEleve, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Mobile_PrimAccompagnant].includes(this.GenreEspace);
            }
            estEspaceExecutionQCM() {
                return this.estEspaceEleve() || [Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.Mobile_PrimParent].includes(GEtatUtilisateur.GenreEspace);
            }
            getListeOngletsSelonContexte() {
                if (!this.Identification) {
                    return super.listeOnglets;
                }
                const lListeOnglet = MethodesObjet_1.MethodesObjet.dupliquer(super.listeOnglets);
                for (const lOnglet of lListeOnglet) {
                    if (!lOnglet.Actif) {
                        continue;
                    }
                    switch (lOnglet.Genre) {
                    case Enumere_Onglet_1.EGenreOnglet.FicheBrevet:
                        {
                            const lRessource = this.estEspaceAvecMembre() ? this.getMembre() : this.getUtilisateur();
                            if (lRessource === null || lRessource === void 0 ? void 0 : lRessource.passeLeBrevet) {
                                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.libelleLongBrevet');
                                lOnglet.setLibelle(ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.titreOngletBrevet'));
                                break;
                            }
                            if (lRessource === null || lRessource === void 0 ? void 0 : lRessource.passeLeCFG) {
                                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.libelleLongCFG');
                                lOnglet.setLibelle(ObjetTraduction_1.GTraductions.getValeur('FicheBrevet.onglet.titreOngletCFG'));
                                break;
                            }
                            break;
                        }
                    default:
                        break;
                    }
                }
                return lListeOnglet;
            }
            getListeClasses(aParams) {
                if (this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.eleves.voirTousLesEleves) && !this.applicationSco.parametresUtilisateur.get('masquerDonneesAutresProfesseurs')) {
                    aParams.uniquementClasseEnseignee = false;
                }
                const lListeClasses = new ObjetListeElements_1.ObjetListeElements();
                let lRecupererClasse = false;
                if (aParams.avecToutes) {
                    lListeClasses.addElement(new ObjetElement_1.ObjetElement(ObjetTraduction_1.GTraductions.getValeur('toutes'),0));
                }
                for (let I = 0; I < this.listeClasses.count(); I++) {
                    const lClasse = this.listeClasses.get(I);
                    if ((aParams.avecClasse && ((lClasse.getGenre() === Enumere_Ressource_1.EGenreRessource.Classe) || (lClasse.estClasseMN && aParams.avecClasseMultiNiveau))) || (aParams.avecGroupe && (lClasse.getGenre() === Enumere_Ressource_1.EGenreRessource.Groupe) && !lClasse.estClasseMN)) {
                        lRecupererClasse = true;
                        if (aParams.uniquementClassePrincipal) {
                            lRecupererClasse = lClasse.estPrincipal;
                        } else if (aParams.uniquementClasseEnseignee) {
                            lRecupererClasse = lClasse.estResponsable || lClasse.enseigne;
                        }
                        if (aParams.sansClasseDeRegroupement && lClasse.dansRegroupement) {
                            lRecupererClasse = false;
                        }
                        if (lRecupererClasse) {
                            let lClasseExistant = lListeClasses.getElementParElement(lClasse);
                            if (!lClasseExistant) {
                                lListeClasses.addElement(lClasse);
                            }
                            if (!aParams.sansClasseDeRegroupement && lClasse.listeComposantes && lClasse.estClasseMN) {
                                for (let j = 0; j < lClasse.listeComposantes.count(); j++) {
                                    let lComposante = lClasse.listeComposantes.get(j);
                                    const lClasseDeComposante = this.listeClasses.getElementParElement(lComposante);
                                    lClasseExistant = lListeClasses.getElementParElement(lClasseDeComposante);
                                    if (!lClasseExistant && !!lClasseDeComposante) {
                                        lClasseDeComposante.pere = lClasse;
                                        lListeClasses.addElement(lClasseDeComposante);
                                    }
                                }
                            }
                        }
                    }
                }
                return lListeClasses;
            }
            getCategorie() {
                return this.Navigation.categorie;
            }
            setCategorie(aCategorie) {
                this.Navigation.categorie = aCategorie;
            }
            getContexteBilletBlog() {
                return this.Navigation.contexteBillet;
            }
            setContexteBilletBlog(aBillet, aFenetreCommentairesOuverte=false) {
                if (!this.Navigation.contexteBillet) {
                    this.Navigation.contexteBillet = {
                        billet: null,
                        fenetreCommentairesOuverte: false
                    };
                }
                this.Navigation.contexteBillet.billet = aBillet;
                this.Navigation.contexteBillet.fenetreCommentairesOuverte = aFenetreCommentairesOuverte;
            }
            getInfoSond() {
                return this.Navigation.infoSond;
            }
            setInfoSond(aInfoSond) {
                this.Navigation.infoSond = aInfoSond;
            }
            getContexteTAF() {
                return this.Navigation.contexteTAF;
            }
            setContexteTAF(aContexteTAF) {
                this.Navigation.contexteTAF = aContexteTAF;
            }
            getContexteCDT() {
                return this.Navigation.contexteCDT;
            }
            setContexteCDT(aContexteCDT) {
                this.Navigation.contexteCDT = aContexteCDT;
            }
            getGenreAffichageCompteSelectionne() {
                return this.Navigation.GenreAffichageCompteSelectionne;
            }
            setGenreAffichageCompteSelectionne(aGenreAffichageCompte) {
                this.Navigation.GenreAffichageCompteSelectionne = aGenreAffichageCompte;
            }
            getContexteRemplacementsEnseignant() {
                return this.Navigation.contexteRemplacementsEnseignant;
            }
            setContexteRemplacementsEnseignant(contexteRemplacementsEnseignant) {
                this.Navigation.contexteRemplacementsEnseignant = contexteRemplacementsEnseignant;
            }
            _ajouterOnglet(aJSON, aProfondeur, aOngletPere) {
                const lOnglet = new ObjetElement_1.ObjetElement().fromJSON(aJSON);
                if (this.listeOngletsInvisibles && this.listeOngletsInvisibles.includes(lOnglet.getGenre())) {
                    lOnglet.Actif = false;
                }
                lOnglet.Libelle = ObjetChaine_1.GChaine.replaceRCToHTML(ObjetTraduction_1.GTraductions.getValeur('Onglet.Libelle')[lOnglet.getGenre()]);
                lOnglet.libelleLong = ObjetTraduction_1.GTraductions.getValeur('Onglet.LibelleLong')[lOnglet.getGenre()] !== ' ' ? ObjetTraduction_1.GTraductions.getValeur('Onglet.LibelleLong')[lOnglet.getGenre()] : lOnglet.Libelle;
                if (lOnglet.Actif !== false && this.listeGenreOngletsNotification && this.listeGenreOngletsNotification.includes(lOnglet.getGenre())) {
                    const lElementNotification = MethodesObjet_1.MethodesObjet.dupliquer(lOnglet);
                    lElementNotification.profondeur = 0;
                    lElementNotification.avecClic = true;
                    this.listeOngletsNotification.addElement(lElementNotification);
                }
                lOnglet.profondeur = aProfondeur;
                if (aOngletPere) {
                    lOnglet.onglet = aOngletPere;
                }
                this.listeOnglets.addElement(lOnglet);
                let lAvecFilsActifs = false;
                if (aJSON.Onglet) {
                    for (let i = 0; i < aJSON.Onglet.length; i++) {
                        lAvecFilsActifs = this._ajouterOnglet(aJSON.Onglet[i], aProfondeur + 1, lOnglet) || lAvecFilsActifs;
                    }
                    if (!lAvecFilsActifs) {
                        lOnglet.Actif = false;
                    }
                }
                return lOnglet.Actif;
            }
            _traiterListeProfesseurs(aListeClasses, aProfesseur) {
                const lArrayClasse = aProfesseur.listeClasses;
                aProfesseur.listeClasses = new ObjetListeElements_1.ObjetListeElements();
                if (aProfesseur.getGenre() === 0) {
                    aProfesseur.Position = 0;
                }
                if (lArrayClasse) {
                    for (let i = 0; i < lArrayClasse.length; i++) {
                        let lClasse = aListeClasses.get(lArrayClasse[i]);
                        if (lClasse) {
                            let lClasseCopie = new ObjetElement_1.ObjetElement(lClasse.getLibelle(),lClasse.getNumero(),lClasse.getGenre());
                            lClasseCopie.estResponsable = lClasse.estResponsable;
                            aProfesseur.listeClasses.addElement(lClasseCopie);
                        }
                    }
                }
            }
        }
        exports.ObjetEtatUtilisateur = ObjetEtatUtilisateur;
    },
    fn: 'objetetatutilisateur.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateur_Espace = void 0;
        const ObjetDroitsPN_1 = require("ObjetDroitsPN");
        const MethodesObjet_1 = require("MethodesObjet");
        const Enumere_GenreImpression_1 = require("Enumere_GenreImpression");
        const ObjetDate_1 = require("ObjetDate");
        const ObjetEtatUtilisateur_1 = require("ObjetEtatUtilisateur");
        const ObjetListeElements_1 = require("ObjetListeElements");
        const ObjetTraduction_1 = require("ObjetTraduction");
        const TypeDomaine_1 = require("TypeDomaine");
        const Enumere_Connexion_1 = require("Enumere_Connexion");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        class ObjetEtatUtilisateur_Espace extends ObjetEtatUtilisateur_1.ObjetEtatUtilisateur {
            constructor(aGenreEspace) {
                super(aGenreEspace);
                this.widgets = [];
                this.parametresSco = [];
                this._indiceProgressionSelection = 0;
                this._domaineConsultation = new TypeDomaine_1.TypeDomaine();
                this.setGenreConnexion = (aGenreConnexion) => {
                    this.genreConnexion = this.GenreEspace === Enumere_Espace_1.EGenreEspace.Professeur ? aGenreConnexion : Enumere_Connexion_1.EGenreConnexion.Normale;
                    if (this.applicationSco.acces.estConnexionCAS() || this.applicationSco.acces.estConnexionCookie()) {
                        this.genreConnexion = Enumere_Connexion_1.EGenreConnexion.Normale;
                    }
                    if (this.applicationSco.getOptionsEspaceLocal()) {
                        this.applicationSco.getOptionsEspaceLocal().setGenreConnexion(aGenreConnexion);
                    }
                }
                ;
                this.genreConnexion = Enumere_Connexion_1.EGenreConnexion.Normale;
                this.page = {};
            }
            initialiserEtatsParDefaut() {
                this.Aide = true;
            }
            initialiser() {
                this.initialiserEtatsParDefaut();
                this.setSemaineSelectionnee(IE.Cycles.cycleCourant());
                this.setDomaineSelectionne(new TypeDomaine_1.TypeDomaine().setValeur(true, IE.Cycles.cycleCourant()));
            }
            getAvecSaisie() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Tuteur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Mobile_Professeur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimDirection, Enumere_Espace_1.EGenreEspace.PrimAccompagnant].includes(GEtatUtilisateur.GenreEspace);
            }
            avecCommunication() {
                if ((GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Professeur) && (this.genreConnexion === Enumere_Connexion_1.EGenreConnexion.Allegee)) {
                    return false;
                }
                if (GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Entreprise) {
                    return false;
                }
                if (GEtatUtilisateur.GenreEspace === Enumere_Espace_1.EGenreEspace.Eleve) {
                    return this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussion) && !this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.discussionInterdit);
                }
                if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Accompagnant].includes(GEtatUtilisateur.GenreEspace)) {
                    return this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.communication.avecDiscussion);
                }
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Tuteur].includes(GEtatUtilisateur.GenreEspace);
            }
            avecFenetreKiosque() {
                return this.avecKiosque && [Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            avecKiosque() {
                return this.autorisationKiosque && [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Eleve, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimEleve].includes(GEtatUtilisateur.GenreEspace);
            }
            avecImports() {
                return false;
            }
            avecFicheEtablissement() {
                let lEtablissement;
                let lAvecInfo = false;
                if (this.listeInformationsEtablissements) {
                    if ([Enumere_Espace_1.EGenreEspace.Parent, Enumere_Espace_1.EGenreEspace.Accompagnant, Enumere_Espace_1.EGenreEspace.Entreprise, Enumere_Espace_1.EGenreEspace.PrimParent, Enumere_Espace_1.EGenreEspace.PrimAccompagnant, Enumere_Espace_1.EGenreEspace.Tuteur].includes(GEtatUtilisateur.GenreEspace)) {
                        if (!!this.getMembre().Etablissement) {
                            lEtablissement = this.listeInformationsEtablissements.getElementParNumero(this.getMembre().Etablissement.getNumero());
                            if (!!lEtablissement && lEtablissement.avecInformations) {
                                lAvecInfo = true;
                            }
                        }
                    } else {
                        for (let i = 0, lNbr = this.listeInformationsEtablissements.count(); i < lNbr; i++) {
                            lEtablissement = this.listeInformationsEtablissements.get(i);
                            if (lEtablissement.avecInformations) {
                                lAvecInfo = true;
                            }
                        }
                    }
                }
                return lAvecInfo;
            }
            getSemaineSelectionnee() {
                return this.SemaineSelectionnee;
            }
            setSemaineSelectionnee(aSemaine) {
                if (this.SemaineSelectionnee !== aSemaine) {
                    this.DomaineSelectionne = new TypeDomaine_1.TypeDomaine().setValeur(true, aSemaine);
                }
                this.SemaineSelectionnee = aSemaine;
            }
            getDomaineSelectionne() {
                return this.DomaineSelectionne && this.DomaineSelectionne.dupliquer ? this.DomaineSelectionne.dupliquer() : new TypeDomaine_1.TypeDomaine();
            }
            setDomaineSelectionne(aDomaine) {
                if (aDomaine && this.DomaineSelectionne && !aDomaine.estVide() && !aDomaine.egal(this.DomaineSelectionne)) {
                    this.SemaineSelectionnee = aDomaine.getPremierePosition();
                }
                this.DomaineSelectionne = aDomaine.dupliquer();
            }
            setGenreRessource(aGenreRessource) {
                this.genreRessourceSelectionne = aGenreRessource;
            }
            getGenreRessource() {
                return this.genreRessourceSelectionne;
            }
            resetGenreRessource() {
                this.genreRessourceSelectionne = null;
            }
            setPageCourante(aInstancePage) {
                super.setPageCourante(aInstancePage);
                this.EtatImpression = Enumere_GenreImpression_1.EGenreImpression.Aucune;
            }
            getNiveau() {
                return this.Navigation.Niveau;
            }
            setNiveau(aNiveau) {
                this.Navigation.Niveau = aNiveau;
            }
            setNavigationDate(aDate) {
                this.Navigation.Date = aDate;
            }
            getNavigationDate() {
                return this.Navigation.Date;
            }
            setNavigationCours(aCours) {
                this.Navigation.cours = aCours;
            }
            getNavigationCours() {
                return this.Navigation.cours;
            }
            getAfficherFicheService() {
                return this.Navigation.afficherFicheService;
            }
            inverserAfficherFicheService() {
                this.Navigation.afficherFicheService = !this.Navigation.afficherFicheService;
            }
            getTriDevoirs() {
                return this.Navigation.triDevoirs;
            }
            inverserTriDevoirs() {
                this.Navigation.triDevoirs = !this.Navigation.triDevoirs;
            }
            getModeAffichageTimeLine() {
                if ((this.Navigation.modeAffichageTimeLine !== null) && (this.Navigation.modeAffichageTimeLine !== undefined)) {
                    return this.Navigation.modeAffichageTimeLine;
                } else {
                    return undefined;
                }
            }
            setModeAffichageTimeLine(aMode) {
                this.Navigation.modeAffichageTimeLine = aMode;
            }
            getDateDebutTimeLineCDT() {
                if ((this.Navigation.dateDebutTimeLineCDT !== null) && (this.Navigation.dateDebutTimeLineCDT !== undefined)) {
                    return this.Navigation.dateDebutTimeLineCDT;
                } else {
                    return undefined;
                }
            }
            setDateDebutTimeLineCDT(aDate) {
                this.Navigation.dateDebutTimeLineCDT = aDate;
            }
            getUniquementMesIncidents() {
                return this.Navigation.uniquementMesIncidents !== false;
            }
            setUniquementMesIncidents(aBoolean) {
                this.Navigation.uniquementMesIncidents = aBoolean;
            }
            getUniquementNonRegle() {
                return this.Navigation.uniquementNonRegle !== false;
            }
            setUniquementNonRegle(aBoolean) {
                this.Navigation.uniquementNonRegle = aBoolean;
            }
            getNrIncidentSelectionne() {
                return this.Navigation.nrIncidentSelectionne;
            }
            setNrIncidentSelectionne(aNumeroSelectionne) {
                this.Navigation.nrIncidentSelectionne = aNumeroSelectionne;
            }
            getNrPunitionSelectionnee() {
                return this.Navigation.nrPunitionSelectionnee;
            }
            setNrPunitionSelectionnee(aNumeroSelectionnee) {
                this.Navigation.nrPunitionSelectionnee = aNumeroSelectionnee;
            }
            getFiltreSurveillances() {
                return this.Navigation.filtreSurveillances === undefined ? 1 : this.Navigation.filtreSurveillances;
            }
            setFiltreSurveillances(aValeur) {
                this.Navigation.filtreSurveillances = aValeur;
            }
            getAvecCoursAnnule() {
                if (this.getAvecChoixCoursAnnule()) {
                    return !!this.applicationSco.parametresUtilisateur.get('EDT.afficherCoursAnnules');
                }
                return this.Navigation.avecCoursAnnule;
            }
            setAvecCoursAnnule(aAvecCoursAnnule) {
                if (this.getAvecChoixCoursAnnule()) {
                    this.applicationSco.parametresUtilisateur.set('EDT.afficherCoursAnnules', aAvecCoursAnnule);
                } else {
                    this.Navigation.avecCoursAnnule = aAvecCoursAnnule;
                }
            }
            getAfficherListeElevesEDT() {
                return !!this.applicationSco.parametresUtilisateur.get('EDT.afficherListeEleves');
            }
            setAfficherListeElevesEDT(aAfficher) {
                this.applicationSco.parametresUtilisateur.set('EDT.afficherListeEleves', !!aAfficher);
            }
            getAvecChoixCoursAnnule() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.Academie, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(GEtatUtilisateur.GenreEspace);
            }
            getGenreOngletPere() {
                this.genreOngletPere = this.listeOnglets.getElementParGenre(this.genreOnglet);
                return this.genreOngletPere && this.genreOngletPere.onglet ? this.genreOngletPere.onglet.Genre : null;
            }
            getLibelleOnglet(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet ? aGenreOnglet : this.genreOnglet);
                return lOnglet ? lOnglet.getLibelle() : '';
            }
            getLibelleLongOnglet(aGenreOnglet) {
                const lOnglet = this.listeOnglets.getElementParGenre(aGenreOnglet ? aGenreOnglet : this.genreOnglet);
                return lOnglet ? (lOnglet.libelleLong ? lOnglet.libelleLong : lOnglet.getLibelle()) : '';
            }
            ongletEstVisible(aGenreOnglet) {
                let lOngletVisible = false;
                this.listeOnglets.parcourir( (D) => {
                    if (D.Genre === aGenreOnglet && D.Visible && D.Actif && !D.estUnOnglet) {
                        lOngletVisible = true;
                        return false;
                    }
                }
                );
                return lOngletVisible;
            }
            getDomainePresence(aElementRessource) {
                const lOnglet = this.getOnglet();
                if (!lOnglet.domaineDePresenceRessources) {
                    return null;
                }
                const lElement = lOnglet.domaineDePresenceRessources.getElementParNumeroEtGenre(aElementRessource.getNumero(), aElementRessource.getGenre());
                if (lElement) {
                    return lElement.domaineDePresence;
                } else {
                    return null;
                }
            }
            setDomainePresence(aElementRessource, aDomainePresence) {
                const lOnglet = this.getOnglet();
                if (!lOnglet.domaineDePresenceRessources) {
                    lOnglet.domaineDePresenceRessources = new ObjetListeElements_1.ObjetListeElements();
                }
                let lElement = lOnglet.domaineDePresenceRessources.getElementParNumeroEtGenre(aElementRessource.getNumero(), aElementRessource.getGenre());
                if (!lElement) {
                    lElement = MethodesObjet_1.MethodesObjet.dupliquer(aElementRessource, true);
                    lOnglet.domaineDePresenceRessources.addElement(lElement);
                }
                lElement.domaineDePresence = aDomainePresence;
            }
            getOnglet(aGenreOnglet) {
                const lGenreOnglet = aGenreOnglet ? aGenreOnglet : this.getGenreOnglet();
                if (!this.getMembre().tableauOnglets) {
                    this.getMembre().tableauOnglets = [];
                }
                if (!this.getMembre().tableauOnglets[lGenreOnglet]) {
                    this.getMembre().tableauOnglets[lGenreOnglet] = {};
                }
                return this.getMembre().tableauOnglets[lGenreOnglet];
            }
            avecOngletPeriode() {
                return !([Enumere_Onglet_1.EGenreOnglet.Evaluation, Enumere_Onglet_1.EGenreOnglet.FicheBrevet, Enumere_Onglet_1.EGenreOnglet.SaisieAppreciationDeFinDeStage, Enumere_Onglet_1.EGenreOnglet.SuiviPluriannuel, Enumere_Onglet_1.EGenreOnglet.LivretScolaire_Fiche, Enumere_Onglet_1.EGenreOnglet.Saisie_CarnetCorrespondance].includes(this.getGenreOnglet()));
            }
            getListeSalles() {
                return this.listeSalles;
            }
            setListeSalles(aListeSalles) {
                this.listeSalles = aListeSalles;
            }
            getOngletListePeriodes() {
                return this.listePeriodes;
            }
            setOngletListePeriodes(aListePeriodes) {
                this.listePeriodes = aListePeriodes;
            }
            setOngletPeriodeParDefaut(aPeriodeParDefaut) {
                this.periodeParDefaut = aPeriodeParDefaut;
            }
            getOngletPeriodeParDefaut() {
                return this.periodeParDefaut;
            }
            getServiceDePilier() {
                const lPilier = this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Pilier);
                return lPilier && lPilier.estPilierLVE ? this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Service) : null;
            }
            getPeriode() {
                return this.avecOngletPeriode() ? this.listePeriodes.getElementParNumeroEtGenre(this.Navigation.getNumeroRessource(Enumere_Ressource_1.EGenreRessource.Periode), this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Periode)) : null;
            }
            getIndiceDateSaisieAbsence(aDate) {
                const lListeDatesSaisieAbsence = this.applicationSco.droits.get(ObjetDroitsPN_1.TypeDroits.absences.listeDatesSaisieAbsence);
                const lDate = aDate ? aDate : this.getNavigationDate();
                if (lDate) {
                    for (let I = 0; lListeDatesSaisieAbsence && (I < lListeDatesSaisieAbsence.count()); I++) {
                        const lDateSaisieAbsence = lListeDatesSaisieAbsence.get(I);
                        if (ObjetDate_1.GDate.estJourEgal(lDateSaisieAbsence.Date, lDate)) {
                            return I;
                        }
                    }
                }
                return -1;
            }
            setListeRessources(aListeRessources) {
                this.Identification.setListeRessources(aListeRessources);
            }
            getIndiceProgressionSelection() {
                return this._indiceProgressionSelection;
            }
            setIndiceProgressionSelection(aIndice) {
                this._indiceProgressionSelection = aIndice;
            }
            getLibelleImpression(aMessage, aAvecPeriode, aAvecClasse, aAvecEleve, aAvecMatiere, aAvecProfesseur) {
                let lLibelle = aMessage;
                if (aAvecPeriode) {
                    lLibelle += ' (' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Periode) + ')';
                }
                if (aAvecClasse) {
                    let lGenreRessource = this.Navigation.getGenreRessource(Enumere_Ressource_1.EGenreRessource.Classe);
                    let lLibelleRessource = this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Classe);
                    if (lGenreRessource === null || lGenreRessource === undefined) {
                        lGenreRessource = Enumere_Ressource_1.EGenreRessource.Classe;
                        lLibelleRessource = this.Identification.getLibelleClasse();
                    }
                    lLibelle += ' / ' + (lGenreRessource === Enumere_Ressource_1.EGenreRessource.Classe ? ObjetTraduction_1.GTraductions.getValeur('Classe') : ObjetTraduction_1.GTraductions.getValeur('Groupe')) + ' : ' + lLibelleRessource;
                }
                if (aAvecEleve) {
                    let lLibelleEleve = this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Eleve);
                    if (lLibelleEleve === null || lLibelleEleve === undefined) {
                        lLibelleEleve = this.getMembre().getLibelle();
                    }
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Eleve') + ' : ' + lLibelleEleve;
                }
                if (aAvecMatiere) {
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Matiere') + ' : ' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Matiere);
                }
                if (aAvecProfesseur) {
                    lLibelle += ' / ' + ObjetTraduction_1.GTraductions.getValeur('Professeur') + ' : ' + this.Navigation.getLibelleRessource(Enumere_Ressource_1.EGenreRessource.Enseignant);
                }
                return lLibelle;
            }
            avecParametrageWidget() {
                return [Enumere_Espace_1.EGenreEspace.Professeur, Enumere_Espace_1.EGenreEspace.Etablissement, Enumere_Espace_1.EGenreEspace.Administrateur, Enumere_Espace_1.EGenreEspace.PrimProfesseur, Enumere_Espace_1.EGenreEspace.PrimDirection].includes(this.GenreEspace);
            }
            setParametres(aParametres) {
                this.parametresSco[this.getGenreOnglet()] = aParametres;
            }
            getParametres() {
                return this.parametresSco[this.getGenreOnglet()];
            }
            getAcces() {
                const lMembre = this.getMembre();
                if (lMembre && lMembre.acces) {
                    return lMembre.acces;
                }
                return {
                    autorise: true,
                    autoriseSurDate: true,
                    dateDebut: null,
                    dateFin: null
                };
            }
            setTriListe(aParams) {
                return super.setTriListe($.extend({
                    onglet: this.getGenreOnglet()
                }, aParams));
            }
        }
        exports.ObjetEtatUtilisateur_Espace = ObjetEtatUtilisateur_Espace;
    },
    fn: 'objetetatutilisateur_espace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetEtatUtilisateurEleve = void 0;
        const ObjetEtatUtilisateur_Espace_1 = require("ObjetEtatUtilisateur_Espace");
        const ObjetDate_1 = require("ObjetDate");
        const Enumere_Ressource_1 = require("Enumere_Ressource");
        class ObjetEtatUtilisateurEleve extends ObjetEtatUtilisateur_Espace_1.ObjetEtatUtilisateur_Espace {
            getOngletListePeriodes() {
                return this.getOnglet().listePeriodes;
            }
            getOngletListePaliers() {
                return this.getOnglet().listePaliers;
            }
            getOngletPeriodeParDefaut() {
                const lPeriode = this.Navigation.getRessource(Enumere_Ressource_1.EGenreRessource.Periode);
                return lPeriode ? lPeriode : this.getOnglet().periodeParDefaut;
            }
            getPeriode() {
                return this.page && this.page.periode ? this.page.periode : this.getOngletPeriodeParDefaut();
            }
            getDate() {
                return this.page && this.page.Date ? this.page.Date : ObjetDate_1.GDate.getDateCourante();
            }
        }
        exports.ObjetEtatUtilisateurEleve = ObjetEtatUtilisateurEleve;
    },
    fn: 'objetetatutilisateur.eleve.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationScoEspace = void 0;
        require("NamespaceIE.js");
        require("DeclarationJQuery.js");
        require("DeclarationPagesErreurSco.js");
        require("DeclarationCurseurPN.js");
        require("DeclarationGeogebra.js");
        require('Theme_Modele.css');
        require('Couleurs.css');
        require('Divers.css');
        require('Styles.css');
        require('Texte.css');
        require('SurFocus.css');
        require('communEspace.css');
        require('Page.css');
        require('Widget.css');
        require("ObjetNavigateur.js");
        const ObjetApplicationSco_1 = require("ObjetApplicationSco");
        require("Parametres.js");
        require("ObjetRequetePresence.js");
        const DeferLoadingScript_1 = require("DeferLoadingScript");
        const CommunicationProduit_1 = require("CommunicationProduit");
        const Enumere_Espace_1 = require("Enumere_Espace");
        const Enumere_Onglet_1 = require("Enumere_Onglet");
        const UtilitaireMenuContextuelNatif_1 = require("UtilitaireMenuContextuelNatif");
        const UtilitaireDeconnexion_1 = require("UtilitaireDeconnexion");
        require("DeclarationTinyInitEspacesDefer.js");
        const InterfaceConnexionEspace_1 = require("InterfaceConnexionEspace");
        const ObjetEtatUtilisateurInscription = require("ObjetEtatUtilisateur.Professeur.js");
        const ObjetEtatUtilisateurEleve = require("ObjetEtatUtilisateur.Eleve.js");
        const ObjetEtatUtilisateurAccomp = require("ObjetEtatUtilisateur.Eleve.js");
        const ObjetEtatUtilisateurPersonnel = require("ObjetEtatUtilisateur.Personnel.js");
        const ObjetEtatUtilisateurProf = require("ObjetEtatUtilisateur.Professeur.js");
        const Enumere_BoiteMessage_1 = require("Enumere_BoiteMessage");
        class ObjetApplicationScoEspace extends ObjetApplicationSco_1.ObjetApplicationSco {
            constructor() {
                super();
            }
            getEtatUtilisateur() {
                return GEtatUtilisateur;
            }
            getInterfaceEspace() {
                return GInterface;
            }
            initialisation(aParametres) {
                UtilitaireMenuContextuelNatif_1.UtilitaireMenuContextuelNatif.desactiverSurElement($(document));
                const lPageInscription = '?page={"Onglet":' + Enumere_Onglet_1.EGenreOnglet.InscriptionsEtablissement + '}';
                if (decodeURI(window.location.search) === lPageInscription) {
                    const lpage = window.location.pathname;
                    history.replaceState(null, '', lpage);
                }
                try {
                    this.setCommunication(new CommunicationProduit_1.CommunicationProduit(aParametres.genreEspace,aParametres.numeroSession));
                    let lClassEtatUtilisateur = null;
                    switch (aParametres.genreEspace) {
                    case Enumere_Espace_1.EGenreEspace.Inscription:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurInscription.ObjetEtatUtilisateurProfesseur;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Parent:
                    case Enumere_Espace_1.EGenreEspace.Eleve:
                    case Enumere_Espace_1.EGenreEspace.Entreprise:
                    case Enumere_Espace_1.EGenreEspace.PrimParent:
                    case Enumere_Espace_1.EGenreEspace.PrimEleve:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurEleve.ObjetEtatUtilisateurEleve;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Tuteur:
                    case Enumere_Espace_1.EGenreEspace.Accompagnant:
                    case Enumere_Espace_1.EGenreEspace.PrimAccompagnant:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurAccomp.ObjetEtatUtilisateurEleve;
                        break;
                    case Enumere_Espace_1.EGenreEspace.Etablissement:
                    case Enumere_Espace_1.EGenreEspace.Administrateur:
                    case Enumere_Espace_1.EGenreEspace.PrimPeriscolaire:
                    case Enumere_Espace_1.EGenreEspace.PrimMairie:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurPersonnel.ObjetEtatUtilisateurPersonnel;
                        break;
                    case Enumere_Espace_1.EGenreEspace.PrimDirection:
                    case Enumere_Espace_1.EGenreEspace.Professeur:
                    case Enumere_Espace_1.EGenreEspace.Academie:
                    case Enumere_Espace_1.EGenreEspace.PrimProfesseur:
                        lClassEtatUtilisateur = ObjetEtatUtilisateurProf.ObjetEtatUtilisateurProfesseur;
                        break;
                    default:
                        ;
                    }
                    global.GEtatUtilisateur = new lClassEtatUtilisateur(aParametres.genreEspace);
                    global.GEtatUtilisateur.premierChargement = true;
                    this.notificationActive = false;
                } catch (e) {
                    window.messageErreur('Erreur sur initialisation de "GCommunication"');
                }
            }
            async initialisationApresParametres(aParametres) {
                super.initialisationApresParametres(aParametres);
                this.getEtatUtilisateur().initialiser();
                const lInterface = window.GInterface = new InterfaceConnexionEspace_1.InterfaceConnexionEspace('GInterface',null,null,null);
                lInterface.initialiser();
                if (this.acces.estConnexionCAS() || this.acces.estConnexionCookie()) {
                    lInterface.traiterEvenementValidation(this.acces.utilisateur.identifiant, this.acces.utilisateur.password, true);
                } else if ((!this.getDemo()) && (GEtatUtilisateur.GenreEspace !== Enumere_Espace_1.EGenreEspace.Commun) && this.optionsDebug && this.optionsDebug.identificationAuto && this.optionsDebug.getLogin() && this.optionsDebug.getMdp()) {
                    lInterface.traiterEvenementValidation(this.optionsDebug.getLogin(), this.optionsDebug.getMdp());
                    IE.log.addLog('Tentative connexion automatique DEBUG');
                }
                await DeferLoadingScript_1.deferLoadingScript.loadAsync(['defer'], {
                    eventIO: false
                });
                this._finLoadingScript();
            }
            afficherEspaceApresAuthentification(aParametres) {
                if (this._scriptsCharges) {
                    this._afficherEspaceApresAuthentification(aParametres);
                } else {
                    this._authentification = aParametres;
                    if (!DeferLoadingScript_1.deferLoadingScript.afficherPatience()) {
                        this._afficherEspaceApresAuthentification(aParametres);
                    }
                }
            }
            _finLoadingScript() {
                this._scriptsCharges = true;
                if (this._authentification) {
                    this._afficherEspaceApresAuthentification(this._authentification);
                }
            }
            async _afficherEspaceApresAuthentification(aParametres) {
                try {
                    if (GInterface && GInterface.free) {
                        GInterface.free();
                    }
                    const {ObjetInterfaceEspace} = await Promise.resolve().then( () => require('InterfaceEspace'));
                    GInterface = new ObjetInterfaceEspace('GInterface',null,null,null);
                    GInterface.setDonnees(aParametres.libelle, aParametres.listeRessource);
                    this.getCommunication().activerPresence();
                    if (this.avecGestionModeExclusif()) {
                        if (this.getModeExclusif()) {
                            this.entreeModeExclusif();
                        }
                    }
                    GInterface.focusAuDebut();
                } catch (e) {
                    if (window.messageErreur) {
                        window.messageErreur('apresAuthentification/' + e);
                    }
                    UtilitaireDeconnexion_1.UtilitaireDeconnexion.deconnexionEchecChargement();
                }
                if (aParametres.message) {
                    GApplication.getMessage().afficher({
                        type: Enumere_BoiteMessage_1.EGenreBoiteMessage.Information,
                        message: aParametres.message
                    });
                }
            }
        }
        exports.ObjetApplicationScoEspace = ObjetApplicationScoEspace;
    },
    fn: 'objetapplicationscoespace.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        require('Image.css');
    },
    fn: 'declarationimagecp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageCP.js");
        require('ImageEspacesCP.css');
    },
    fn: 'declarationimageespacescp.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageEspacesCP.js");
        require('ImageSco.css');
    },
    fn: 'declarationimagesco.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        const LottiePatience_1 = require("LottiePatience");
        require('ImageEspacesHebergementPN.css');
        LottiePatience_1.LottiePatience.setUrl('./images/LoadingPN.json');
    },
    fn: 'declarationimageespaceshebergementpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationimageconnexionpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationimagefaviconpn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        require('LogoPN.css');
    },
    fn: 'declarationimagelogopn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        require("DeclarationImageSco.js");
        require("DeclarationImageEspacesHebergementPN.js");
        require('ImagePN.css');
        require("DeclarationImageConnexionPN.js");
        require("DeclarationImageFaviconPN.js");
        require("DeclarationImageLogoPN.js");
    },
    fn: 'declarationimagepn.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        ;
    },
    fn: 'declarationcollectivite.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        const {MethodesObjet} = require('MethodesObjet.js');
        const GImageConnexion = require('ObjetImageConnexion.js');
        const imagesConnexion = require('imagesconnexion.js');
        try {
            if (MethodesObjet.isFunction(imagesConnexion)) {
                imagesConnexion(GImageConnexion);
            }
        } catch (e) {}
    },
    fn: 'declarationimagesconnexiondynamiques.js'
});
;IE.fModule({
    f: function(exports, require, module, global) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        exports.ObjetApplicationPNEspace = void 0;
        const ObjetApplicationScoEspace_1 = require("ObjetApplicationScoEspace");
        require("DeclarationImagePN.js");
        require("DeclarationCollectivite.js");
        require("DeclarationImagesConnexionDynamiques.js");
        require('ImagesQCM.css');
        global.Start = function(aParam) {
            GApplication = new ObjetApplicationPNEspace();
            GApplication.lancer(aParam);
        }
        ;
        class ObjetApplicationPNEspace extends ObjetApplicationScoEspace_1.ObjetApplicationScoEspace {
            constructor() {
                super();
            }
        }
        exports.ObjetApplicationPNEspace = ObjetApplicationPNEspace;
    },
    fn: 'objetapplicationpnespace.js'
});
;
